"use strict";var mX=Object.create;var C0=Object.defineProperty;var gX=Object.getOwnPropertyDescriptor;var yX=Object.getOwnPropertyNames;var vX=Object.getPrototypeOf,wX=Object.prototype.hasOwnProperty;var an=(r,e)=>()=>(r&&(e=r(r=0)),e);var E=(r,e)=>()=>(e||r((e={exports:{}}).exports,e),e.exports),sS=(r,e)=>{for(var t in e)C0(r,t,{get:e[t],enumerable:!0})},mk=(r,e,t,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let i of yX(e))!wX.call(r,i)&&i!==t&&C0(r,i,{get:()=>e[i],enumerable:!(n=gX(e,i))||n.enumerable});return r};var et=(r,e,t)=>(t=r!=null?mX(vX(r)):{},mk(e||!r||!r.__esModule?C0(t,"default",{value:r,enumerable:!0}):t,r)),vi=r=>mk(C0({},"__esModule",{value:!0}),r);var gk=E((ACe,bX)=>{bX.exports={acl:{arity:-2,flags:[],keyStart:0,keyStop:0,step:0},append:{arity:3,flags:["write","denyoom","fast"],keyStart:1,keyStop:1,step:1},asking:{arity:1,flags:["fast"],keyStart:0,keyStop:0,step:0},auth:{arity:-2,flags:["noscript","loading","stale","fast","no_auth","allow_busy"],keyStart:0,keyStop:0,step:0},bgrewriteaof:{arity:1,flags:["admin","noscript","no_async_loading"],keyStart:0,keyStop:0,step:0},bgsave:{arity:-1,flags:["admin","noscript","no_async_loading"],keyStart:0,keyStop:0,step:0},bitcount:{arity:-2,flags:["readonly"],keyStart:1,keyStop:1,step:1},bitfield:{arity:-2,flags:["write","denyoom"],keyStart:1,keyStop:1,step:1},bitfield_ro:{arity:-2,flags:["readonly","fast"],keyStart:1,keyStop:1,step:1},bitop:{arity:-4,flags:["write","denyoom"],keyStart:2,keyStop:-1,step:1},bitpos:{arity:-3,flags:["readonly"],keyStart:1,keyStop:1,step:1},blmove:{arity:6,flags:["write","denyoom","noscript","blocking"],keyStart:1,keyStop:2,step:1},blmpop:{arity:-5,flags:["write","blocking","movablekeys"],keyStart:0,keyStop:0,step:0},blpop:{arity:-3,flags:["write","noscript","blocking"],keyStart:1,keyStop:-2,step:1},brpop:{arity:-3,flags:["write","noscript","blocking"],keyStart:1,keyStop:-2,step:1},brpoplpush:{arity:4,flags:["write","denyoom","noscript","blocking"],keyStart:1,keyStop:2,step:1},bzmpop:{arity:-5,flags:["write","blocking","movablekeys"],keyStart:0,keyStop:0,step:0},bzpopmax:{arity:-3,flags:["write","noscript","blocking","fast"],keyStart:1,keyStop:-2,step:1},bzpopmin:{arity:-3,flags:["write","noscript","blocking","fast"],keyStart:1,keyStop:-2,step:1},client:{arity:-2,flags:[],keyStart:0,keyStop:0,step:0},cluster:{arity:-2,flags:[],keyStart:0,keyStop:0,step:0},command:{arity:-1,flags:["loading","stale"],keyStart:0,keyStop:0,step:0},config:{arity:-2,flags:[],keyStart:0,keyStop:0,step:0},copy:{arity:-3,flags:["write","denyoom"],keyStart:1,keyStop:2,step:1},dbsize:{arity:1,flags:["readonly","fast"],keyStart:0,keyStop:0,step:0},debug:{arity:-2,flags:["admin","noscript","loading","stale"],keyStart:0,keyStop:0,step:0},decr:{arity:2,flags:["write","denyoom","fast"],keyStart:1,keyStop:1,step:1},decrby:{arity:3,flags:["write","denyoom","fast"],keyStart:1,keyStop:1,step:1},del:{arity:-2,flags:["write"],keyStart:1,keyStop:-1,step:1},discard:{arity:1,flags:["noscript","loading","stale","fast","allow_busy"],keyStart:0,keyStop:0,step:0},dump:{arity:2,flags:["readonly"],keyStart:1,keyStop:1,step:1},echo:{arity:2,flags:["fast"],keyStart:0,keyStop:0,step:0},eval:{arity:-3,flags:["noscript","stale","skip_monitor","no_mandatory_keys","movablekeys"],keyStart:0,keyStop:0,step:0},eval_ro:{arity:-3,flags:["readonly","noscript","stale","skip_monitor","no_mandatory_keys","movablekeys"],keyStart:0,keyStop:0,step:0},evalsha:{arity:-3,flags:["noscript","stale","skip_monitor","no_mandatory_keys","movablekeys"],keyStart:0,keyStop:0,step:0},evalsha_ro:{arity:-3,flags:["readonly","noscript","stale","skip_monitor","no_mandatory_keys","movablekeys"],keyStart:0,keyStop:0,step:0},exec:{arity:1,flags:["noscript","loading","stale","skip_slowlog"],keyStart:0,keyStop:0,step:0},exists:{arity:-2,flags:["readonly","fast"],keyStart:1,keyStop:-1,step:1},expire:{arity:-3,flags:["write","fast"],keyStart:1,keyStop:1,step:1},expireat:{arity:-3,flags:["write","fast"],keyStart:1,keyStop:1,step:1},expiretime:{arity:2,flags:["readonly","fast"],keyStart:1,keyStop:1,step:1},failover:{arity:-1,flags:["admin","noscript","stale"],keyStart:0,keyStop:0,step:0},fcall:{arity:-3,flags:["noscript","stale","skip_monitor","no_mandatory_keys","movablekeys"],keyStart:0,keyStop:0,step:0},fcall_ro:{arity:-3,flags:["readonly","noscript","stale","skip_monitor","no_mandatory_keys","movablekeys"],keyStart:0,keyStop:0,step:0},flushall:{arity:-1,flags:["write"],keyStart:0,keyStop:0,step:0},flushdb:{arity:-1,flags:["write"],keyStart:0,keyStop:0,step:0},function:{arity:-2,flags:[],keyStart:0,keyStop:0,step:0},geoadd:{arity:-5,flags:["write","denyoom"],keyStart:1,keyStop:1,step:1},geodist:{arity:-4,flags:["readonly"],keyStart:1,keyStop:1,step:1},geohash:{arity:-2,flags:["readonly"],keyStart:1,keyStop:1,step:1},geopos:{arity:-2,flags:["readonly"],keyStart:1,keyStop:1,step:1},georadius:{arity:-6,flags:["write","denyoom","movablekeys"],keyStart:1,keyStop:1,step:1},georadius_ro:{arity:-6,flags:["readonly"],keyStart:1,keyStop:1,step:1},georadiusbymember:{arity:-5,flags:["write","denyoom","movablekeys"],keyStart:1,keyStop:1,step:1},georadiusbymember_ro:{arity:-5,flags:["readonly"],keyStart:1,keyStop:1,step:1},geosearch:{arity:-7,flags:["readonly"],keyStart:1,keyStop:1,step:1},geosearchstore:{arity:-8,flags:["write","denyoom"],keyStart:1,keyStop:2,step:1},get:{arity:2,flags:["readonly","fast"],keyStart:1,keyStop:1,step:1},getbit:{arity:3,flags:["readonly","fast"],keyStart:1,keyStop:1,step:1},getdel:{arity:2,flags:["write","fast"],keyStart:1,keyStop:1,step:1},getex:{arity:-2,flags:["write","fast"],keyStart:1,keyStop:1,step:1},getrange:{arity:4,flags:["readonly"],keyStart:1,keyStop:1,step:1},getset:{arity:3,flags:["write","denyoom","fast"],keyStart:1,keyStop:1,step:1},hdel:{arity:-3,flags:["write","fast"],keyStart:1,keyStop:1,step:1},hello:{arity:-1,flags:["noscript","loading","stale","fast","no_auth","allow_busy"],keyStart:0,keyStop:0,step:0},hexists:{arity:3,flags:["readonly","fast"],keyStart:1,keyStop:1,step:1},hget:{arity:3,flags:["readonly","fast"],keyStart:1,keyStop:1,step:1},hgetall:{arity:2,flags:["readonly"],keyStart:1,keyStop:1,step:1},hincrby:{arity:4,flags:["write","denyoom","fast"],keyStart:1,keyStop:1,step:1},hincrbyfloat:{arity:4,flags:["write","denyoom","fast"],keyStart:1,keyStop:1,step:1},hkeys:{arity:2,flags:["readonly"],keyStart:1,keyStop:1,step:1},hlen:{arity:2,flags:["readonly","fast"],keyStart:1,keyStop:1,step:1},hmget:{arity:-3,flags:["readonly","fast"],keyStart:1,keyStop:1,step:1},hmset:{arity:-4,flags:["write","denyoom","fast"],keyStart:1,keyStop:1,step:1},hrandfield:{arity:-2,flags:["readonly"],keyStart:1,keyStop:1,step:1},hscan:{arity:-3,flags:["readonly"],keyStart:1,keyStop:1,step:1},hset:{arity:-4,flags:["write","denyoom","fast"],keyStart:1,keyStop:1,step:1},hsetnx:{arity:4,flags:["write","denyoom","fast"],keyStart:1,keyStop:1,step:1},hstrlen:{arity:3,flags:["readonly","fast"],keyStart:1,keyStop:1,step:1},hvals:{arity:2,flags:["readonly"],keyStart:1,keyStop:1,step:1},incr:{arity:2,flags:["write","denyoom","fast"],keyStart:1,keyStop:1,step:1},incrby:{arity:3,flags:["write","denyoom","fast"],keyStart:1,keyStop:1,step:1},incrbyfloat:{arity:3,flags:["write","denyoom","fast"],keyStart:1,keyStop:1,step:1},info:{arity:-1,flags:["loading","stale"],keyStart:0,keyStop:0,step:0},keys:{arity:2,flags:["readonly"],keyStart:0,keyStop:0,step:0},lastsave:{arity:1,flags:["loading","stale","fast"],keyStart:0,keyStop:0,step:0},latency:{arity:-2,flags:[],keyStart:0,keyStop:0,step:0},lcs:{arity:-3,flags:["readonly"],keyStart:1,keyStop:2,step:1},lindex:{arity:3,flags:["readonly"],keyStart:1,keyStop:1,step:1},linsert:{arity:5,flags:["write","denyoom"],keyStart:1,keyStop:1,step:1},llen:{arity:2,flags:["readonly","fast"],keyStart:1,keyStop:1,step:1},lmove:{arity:5,flags:["write","denyoom"],keyStart:1,keyStop:2,step:1},lmpop:{arity:-4,flags:["write","movablekeys"],keyStart:0,keyStop:0,step:0},lolwut:{arity:-1,flags:["readonly","fast"],keyStart:0,keyStop:0,step:0},lpop:{arity:-2,flags:["write","fast"],keyStart:1,keyStop:1,step:1},lpos:{arity:-3,flags:["readonly"],keyStart:1,keyStop:1,step:1},lpush:{arity:-3,flags:["write","denyoom","fast"],keyStart:1,keyStop:1,step:1},lpushx:{arity:-3,flags:["write","denyoom","fast"],keyStart:1,keyStop:1,step:1},lrange:{arity:4,flags:["readonly"],keyStart:1,keyStop:1,step:1},lrem:{arity:4,flags:["write"],keyStart:1,keyStop:1,step:1},lset:{arity:4,flags:["write","denyoom"],keyStart:1,keyStop:1,step:1},ltrim:{arity:4,flags:["write"],keyStart:1,keyStop:1,step:1},memory:{arity:-2,flags:[],keyStart:0,keyStop:0,step:0},mget:{arity:-2,flags:["readonly","fast"],keyStart:1,keyStop:-1,step:1},migrate:{arity:-6,flags:["write","movablekeys"],keyStart:3,keyStop:3,step:1},module:{arity:-2,flags:[],keyStart:0,keyStop:0,step:0},monitor:{arity:1,flags:["admin","noscript","loading","stale"],keyStart:0,keyStop:0,step:0},move:{arity:3,flags:["write","fast"],keyStart:1,keyStop:1,step:1},mset:{arity:-3,flags:["write","denyoom"],keyStart:1,keyStop:-1,step:2},msetnx:{arity:-3,flags:["write","denyoom"],keyStart:1,keyStop:-1,step:2},multi:{arity:1,flags:["noscript","loading","stale","fast","allow_busy"],keyStart:0,keyStop:0,step:0},object:{arity:-2,flags:[],keyStart:0,keyStop:0,step:0},persist:{arity:2,flags:["write","fast"],keyStart:1,keyStop:1,step:1},pexpire:{arity:-3,flags:["write","fast"],keyStart:1,keyStop:1,step:1},pexpireat:{arity:-3,flags:["write","fast"],keyStart:1,keyStop:1,step:1},pexpiretime:{arity:2,flags:["readonly","fast"],keyStart:1,keyStop:1,step:1},pfadd:{arity:-2,flags:["write","denyoom","fast"],keyStart:1,keyStop:1,step:1},pfcount:{arity:-2,flags:["readonly"],keyStart:1,keyStop:-1,step:1},pfdebug:{arity:3,flags:["write","denyoom","admin"],keyStart:2,keyStop:2,step:1},pfmerge:{arity:-2,flags:["write","denyoom"],keyStart:1,keyStop:-1,step:1},pfselftest:{arity:1,flags:["admin"],keyStart:0,keyStop:0,step:0},ping:{arity:-1,flags:["fast"],keyStart:0,keyStop:0,step:0},psetex:{arity:4,flags:["write","denyoom"],keyStart:1,keyStop:1,step:1},psubscribe:{arity:-2,flags:["pubsub","noscript","loading","stale"],keyStart:0,keyStop:0,step:0},psync:{arity:-3,flags:["admin","noscript","no_async_loading","no_multi"],keyStart:0,keyStop:0,step:0},pttl:{arity:2,flags:["readonly","fast"],keyStart:1,keyStop:1,step:1},publish:{arity:3,flags:["pubsub","loading","stale","fast"],keyStart:0,keyStop:0,step:0},pubsub:{arity:-2,flags:[],keyStart:0,keyStop:0,step:0},punsubscribe:{arity:-1,flags:["pubsub","noscript","loading","stale"],keyStart:0,keyStop:0,step:0},quit:{arity:-1,flags:["noscript","loading","stale","fast","no_auth","allow_busy"],keyStart:0,keyStop:0,step:0},randomkey:{arity:1,flags:["readonly"],keyStart:0,keyStop:0,step:0},readonly:{arity:1,flags:["loading","stale","fast"],keyStart:0,keyStop:0,step:0},readwrite:{arity:1,flags:["loading","stale","fast"],keyStart:0,keyStop:0,step:0},rename:{arity:3,flags:["write"],keyStart:1,keyStop:2,step:1},renamenx:{arity:3,flags:["write","fast"],keyStart:1,keyStop:2,step:1},replconf:{arity:-1,flags:["admin","noscript","loading","stale","allow_busy"],keyStart:0,keyStop:0,step:0},replicaof:{arity:3,flags:["admin","noscript","stale","no_async_loading"],keyStart:0,keyStop:0,step:0},reset:{arity:1,flags:["noscript","loading","stale","fast","no_auth","allow_busy"],keyStart:0,keyStop:0,step:0},restore:{arity:-4,flags:["write","denyoom"],keyStart:1,keyStop:1,step:1},"restore-asking":{arity:-4,flags:["write","denyoom","asking"],keyStart:1,keyStop:1,step:1},role:{arity:1,flags:["noscript","loading","stale","fast"],keyStart:0,keyStop:0,step:0},rpop:{arity:-2,flags:["write","fast"],keyStart:1,keyStop:1,step:1},rpoplpush:{arity:3,flags:["write","denyoom"],keyStart:1,keyStop:2,step:1},rpush:{arity:-3,flags:["write","denyoom","fast"],keyStart:1,keyStop:1,step:1},rpushx:{arity:-3,flags:["write","denyoom","fast"],keyStart:1,keyStop:1,step:1},sadd:{arity:-3,flags:["write","denyoom","fast"],keyStart:1,keyStop:1,step:1},save:{arity:1,flags:["admin","noscript","no_async_loading","no_multi"],keyStart:0,keyStop:0,step:0},scan:{arity:-2,flags:["readonly"],keyStart:0,keyStop:0,step:0},scard:{arity:2,flags:["readonly","fast"],keyStart:1,keyStop:1,step:1},script:{arity:-2,flags:[],keyStart:0,keyStop:0,step:0},sdiff:{arity:-2,flags:["readonly"],keyStart:1,keyStop:-1,step:1},sdiffstore:{arity:-3,flags:["write","denyoom"],keyStart:1,keyStop:-1,step:1},select:{arity:2,flags:["loading","stale","fast"],keyStart:0,keyStop:0,step:0},set:{arity:-3,flags:["write","denyoom"],keyStart:1,keyStop:1,step:1},setbit:{arity:4,flags:["write","denyoom"],keyStart:1,keyStop:1,step:1},setex:{arity:4,flags:["write","denyoom"],keyStart:1,keyStop:1,step:1},setnx:{arity:3,flags:["write","denyoom","fast"],keyStart:1,keyStop:1,step:1},setrange:{arity:4,flags:["write","denyoom"],keyStart:1,keyStop:1,step:1},shutdown:{arity:-1,flags:["admin","noscript","loading","stale","no_multi","allow_busy"],keyStart:0,keyStop:0,step:0},sinter:{arity:-2,flags:["readonly"],keyStart:1,keyStop:-1,step:1},sintercard:{arity:-3,flags:["readonly","movablekeys"],keyStart:0,keyStop:0,step:0},sinterstore:{arity:-3,flags:["write","denyoom"],keyStart:1,keyStop:-1,step:1},sismember:{arity:3,flags:["readonly","fast"],keyStart:1,keyStop:1,step:1},slaveof:{arity:3,flags:["admin","noscript","stale","no_async_loading"],keyStart:0,keyStop:0,step:0},slowlog:{arity:-2,flags:[],keyStart:0,keyStop:0,step:0},smembers:{arity:2,flags:["readonly"],keyStart:1,keyStop:1,step:1},smismember:{arity:-3,flags:["readonly","fast"],keyStart:1,keyStop:1,step:1},smove:{arity:4,flags:["write","fast"],keyStart:1,keyStop:2,step:1},sort:{arity:-2,flags:["write","denyoom","movablekeys"],keyStart:1,keyStop:1,step:1},sort_ro:{arity:-2,flags:["readonly","movablekeys"],keyStart:1,keyStop:1,step:1},spop:{arity:-2,flags:["write","fast"],keyStart:1,keyStop:1,step:1},spublish:{arity:3,flags:["pubsub","loading","stale","fast"],keyStart:1,keyStop:1,step:1},srandmember:{arity:-2,flags:["readonly"],keyStart:1,keyStop:1,step:1},srem:{arity:-3,flags:["write","fast"],keyStart:1,keyStop:1,step:1},sscan:{arity:-3,flags:["readonly"],keyStart:1,keyStop:1,step:1},ssubscribe:{arity:-2,flags:["pubsub","noscript","loading","stale"],keyStart:1,keyStop:-1,step:1},strlen:{arity:2,flags:["readonly","fast"],keyStart:1,keyStop:1,step:1},subscribe:{arity:-2,flags:["pubsub","noscript","loading","stale"],keyStart:0,keyStop:0,step:0},substr:{arity:4,flags:["readonly"],keyStart:1,keyStop:1,step:1},sunion:{arity:-2,flags:["readonly"],keyStart:1,keyStop:-1,step:1},sunionstore:{arity:-3,flags:["write","denyoom"],keyStart:1,keyStop:-1,step:1},sunsubscribe:{arity:-1,flags:["pubsub","noscript","loading","stale"],keyStart:1,keyStop:-1,step:1},swapdb:{arity:3,flags:["write","fast"],keyStart:0,keyStop:0,step:0},sync:{arity:1,flags:["admin","noscript","no_async_loading","no_multi"],keyStart:0,keyStop:0,step:0},time:{arity:1,flags:["loading","stale","fast"],keyStart:0,keyStop:0,step:0},touch:{arity:-2,flags:["readonly","fast"],keyStart:1,keyStop:-1,step:1},ttl:{arity:2,flags:["readonly","fast"],keyStart:1,keyStop:1,step:1},type:{arity:2,flags:["readonly","fast"],keyStart:1,keyStop:1,step:1},unlink:{arity:-2,flags:["write","fast"],keyStart:1,keyStop:-1,step:1},unsubscribe:{arity:-1,flags:["pubsub","noscript","loading","stale"],keyStart:0,keyStop:0,step:0},unwatch:{arity:1,flags:["noscript","loading","stale","fast","allow_busy"],keyStart:0,keyStop:0,step:0},wait:{arity:3,flags:["noscript"],keyStart:0,keyStop:0,step:0},watch:{arity:-2,flags:["noscript","loading","stale","fast","allow_busy"],keyStart:1,keyStop:-1,step:1},xack:{arity:-4,flags:["write","fast"],keyStart:1,keyStop:1,step:1},xadd:{arity:-5,flags:["write","denyoom","fast"],keyStart:1,keyStop:1,step:1},xautoclaim:{arity:-6,flags:["write","fast"],keyStart:1,keyStop:1,step:1},xclaim:{arity:-6,flags:["write","fast"],keyStart:1,keyStop:1,step:1},xdel:{arity:-3,flags:["write","fast"],keyStart:1,keyStop:1,step:1},xgroup:{arity:-2,flags:[],keyStart:0,keyStop:0,step:0},xinfo:{arity:-2,flags:[],keyStart:0,keyStop:0,step:0},xlen:{arity:2,flags:["readonly","fast"],keyStart:1,keyStop:1,step:1},xpending:{arity:-3,flags:["readonly"],keyStart:1,keyStop:1,step:1},xrange:{arity:-4,flags:["readonly"],keyStart:1,keyStop:1,step:1},xread:{arity:-4,flags:["readonly","blocking","movablekeys"],keyStart:0,keyStop:0,step:0},xreadgroup:{arity:-7,flags:["write","blocking","movablekeys"],keyStart:0,keyStop:0,step:0},xrevrange:{arity:-4,flags:["readonly"],keyStart:1,keyStop:1,step:1},xsetid:{arity:-3,flags:["write","denyoom","fast"],keyStart:1,keyStop:1,step:1},xtrim:{arity:-4,flags:["write"],keyStart:1,keyStop:1,step:1},zadd:{arity:-4,flags:["write","denyoom","fast"],keyStart:1,keyStop:1,step:1},zcard:{arity:2,flags:["readonly","fast"],keyStart:1,keyStop:1,step:1},zcount:{arity:4,flags:["readonly","fast"],keyStart:1,keyStop:1,step:1},zdiff:{arity:-3,flags:["readonly","movablekeys"],keyStart:0,keyStop:0,step:0},zdiffstore:{arity:-4,flags:["write","denyoom","movablekeys"],keyStart:1,keyStop:1,step:1},zincrby:{arity:4,flags:["write","denyoom","fast"],keyStart:1,keyStop:1,step:1},zinter:{arity:-3,flags:["readonly","movablekeys"],keyStart:0,keyStop:0,step:0},zintercard:{arity:-3,flags:["readonly","movablekeys"],keyStart:0,keyStop:0,step:0},zinterstore:{arity:-4,flags:["write","denyoom","movablekeys"],keyStart:1,keyStop:1,step:1},zlexcount:{arity:4,flags:["readonly","fast"],keyStart:1,keyStop:1,step:1},zmpop:{arity:-4,flags:["write","movablekeys"],keyStart:0,keyStop:0,step:0},zmscore:{arity:-3,flags:["readonly","fast"],keyStart:1,keyStop:1,step:1},zpopmax:{arity:-2,flags:["write","fast"],keyStart:1,keyStop:1,step:1},zpopmin:{arity:-2,flags:["write","fast"],keyStart:1,keyStop:1,step:1},zrandmember:{arity:-2,flags:["readonly"],keyStart:1,keyStop:1,step:1},zrange:{arity:-4,flags:["readonly"],keyStart:1,keyStop:1,step:1},zrangebylex:{arity:-4,flags:["readonly"],keyStart:1,keyStop:1,step:1},zrangebyscore:{arity:-4,flags:["readonly"],keyStart:1,keyStop:1,step:1},zrangestore:{arity:-5,flags:["write","denyoom"],keyStart:1,keyStop:2,step:1},zrank:{arity:3,flags:["readonly","fast"],keyStart:1,keyStop:1,step:1},zrem:{arity:-3,flags:["write","fast"],keyStart:1,keyStop:1,step:1},zremrangebylex:{arity:4,flags:["write"],keyStart:1,keyStop:1,step:1},zremrangebyrank:{arity:4,flags:["write"],keyStart:1,keyStop:1,step:1},zremrangebyscore:{arity:4,flags:["write"],keyStart:1,keyStop:1,step:1},zrevrange:{arity:-4,flags:["readonly"],keyStart:1,keyStop:1,step:1},zrevrangebylex:{arity:-4,flags:["readonly"],keyStart:1,keyStop:1,step:1},zrevrangebyscore:{arity:-4,flags:["readonly"],keyStart:1,keyStop:1,step:1},zrevrank:{arity:3,flags:["readonly","fast"],keyStart:1,keyStop:1,step:1},zscan:{arity:-3,flags:["readonly"],keyStart:1,keyStop:1,step:1},zscore:{arity:3,flags:["readonly","fast"],keyStart:1,keyStop:1,step:1},zunion:{arity:-3,flags:["readonly","movablekeys"],keyStart:0,keyStop:0,step:0},zunionstore:{arity:-4,flags:["write","denyoom","movablekeys"],keyStart:1,keyStop:1,step:1}}});var jc=E(wi=>{"use strict";var SX=wi&&wi.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(wi,"__esModule",{value:!0});wi.getKeyIndexes=wi.hasFlag=wi.exists=wi.list=void 0;var T0=SX(gk());wi.list=Object.keys(T0.default);var oS={};wi.list.forEach(r=>{oS[r]=T0.default[r].flags.reduce(function(e,t){return e[t]=!0,e},{})});function _X(r){return!!T0.default[r]}wi.exists=_X;function xX(r,e){if(!oS[r])throw new Error("Unknown command "+r);return!!oS[r][e]}wi.hasFlag=xX;function EX(r,e,t){let n=T0.default[r];if(!n)throw new Error("Unknown command "+r);if(!Array.isArray(e))throw new Error("Expect args to be an array");let i=[],s=!!(t&&t.parseExternalKey),o=(u,c)=>{let d=[],h=Number(u[c]);for(let p=0;p<h;p++)d.push(p+c+1);return d},a=(u,c,d)=>{for(let h=c;h<u.length-1;h+=1)if(String(u[h]).toLowerCase()===d.toLowerCase())return h+1;return null};switch(r){case"zunionstore":case"zinterstore":case"zdiffstore":i.push(0,...o(e,1));break;case"eval":case"evalsha":case"eval_ro":case"evalsha_ro":case"fcall":case"fcall_ro":case"blmpop":case"bzmpop":i.push(...o(e,1));break;case"sintercard":case"lmpop":case"zunion":case"zinter":case"zmpop":case"zintercard":case"zdiff":{i.push(...o(e,0));break}case"georadius":{i.push(0);let u=a(e,5,"STORE");u&&i.push(u);let c=a(e,5,"STOREDIST");c&&i.push(c);break}case"georadiusbymember":{i.push(0);let u=a(e,4,"STORE");u&&i.push(u);let c=a(e,4,"STOREDIST");c&&i.push(c);break}case"sort":case"sort_ro":i.push(0);for(let u=1;u<e.length-1;u++){let c=e[u];if(typeof c!="string")continue;let d=c.toUpperCase();d==="GET"?(u+=1,c=e[u],c!=="#"&&(s?i.push([u,yk(c)]):i.push(u))):d==="BY"?(u+=1,s?i.push([u,yk(e[u])]):i.push(u)):d==="STORE"&&(u+=1,i.push(u))}break;case"migrate":if(e[2]==="")for(let u=5;u<e.length-1;u++){let c=e[u];if(typeof c=="string"&&c.toUpperCase()==="KEYS"){for(let d=u+1;d<e.length;d++)i.push(d);break}}else i.push(2);break;case"xreadgroup":case"xread":for(let u=r==="xread"?0:3;u<e.length-1;u++)if(String(e[u]).toUpperCase()==="STREAMS"){for(let c=u+1;c<=u+(e.length-1-u)/2;c++)i.push(c);break}break;default:if(n.step>0){let u=n.keyStart-1,c=n.keyStop>0?n.keyStop:e.length+n.keyStop+1;for(let d=u;d<c;d+=n.step)i.push(d)}break}return i}wi.getKeyIndexes=EX;function yk(r){typeof r!="string"&&(r=String(r));let e=r.indexOf("->");return e===-1?r.length:e}});var vk=E(va=>{"use strict";Object.defineProperty(va,"__esModule",{value:!0});va.tryCatch=va.errorObj=void 0;va.errorObj={e:{}};var aS;function OX(r,e){try{let t=aS;return aS=null,t.apply(this,arguments)}catch(t){return va.errorObj.e=t,va.errorObj}}function IX(r){return aS=r,OX}va.tryCatch=IX});var wa=E(lS=>{"use strict";Object.defineProperty(lS,"__esModule",{value:!0});var Kc=vk();function wk(r){setTimeout(function(){throw r},0)}function CX(r,e,t){return typeof e=="function"&&r.then(n=>{let i;t!==void 0&&Object(t).spread&&Array.isArray(n)?i=Kc.tryCatch(e).apply(void 0,[null].concat(n)):i=n===void 0?Kc.tryCatch(e)(null):Kc.tryCatch(e)(null,n),i===Kc.errorObj&&wk(i.e)},n=>{if(!n){let s=new Error(n+"");Object.assign(s,{cause:n}),n=s}let i=Kc.tryCatch(e)(n);i===Kc.errorObj&&wk(i.e)}),r}lS.default=CX});var _k=E((RCe,Sk)=>{"use strict";var bk=require("assert"),ch=require("util");function qc(r){Object.defineProperty(this,"message",{value:r||"",configurable:!0,writable:!0}),Error.captureStackTrace(this,this.constructor)}ch.inherits(qc,Error);Object.defineProperty(qc.prototype,"name",{value:"RedisError",configurable:!0,writable:!0});function uS(r,e,t){bk(e),bk.strictEqual(typeof t,"number"),Object.defineProperty(this,"message",{value:r||"",configurable:!0,writable:!0});let n=Error.stackTraceLimit;Error.stackTraceLimit=2,Error.captureStackTrace(this,this.constructor),Error.stackTraceLimit=n,this.offset=t,this.buffer=e}ch.inherits(uS,qc);Object.defineProperty(uS.prototype,"name",{value:"ParserError",configurable:!0,writable:!0});function cS(r){Object.defineProperty(this,"message",{value:r||"",configurable:!0,writable:!0});let e=Error.stackTraceLimit;Error.stackTraceLimit=2,Error.captureStackTrace(this,this.constructor),Error.stackTraceLimit=e}ch.inherits(cS,qc);Object.defineProperty(cS.prototype,"name",{value:"ReplyError",configurable:!0,writable:!0});function A0(r){Object.defineProperty(this,"message",{value:r||"",configurable:!0,writable:!0}),Error.captureStackTrace(this,this.constructor)}ch.inherits(A0,qc);Object.defineProperty(A0.prototype,"name",{value:"AbortError",configurable:!0,writable:!0});function fS(r){Object.defineProperty(this,"message",{value:r||"",configurable:!0,writable:!0}),Error.captureStackTrace(this,this.constructor)}ch.inherits(fS,A0);Object.defineProperty(fS.prototype,"name",{value:"InterruptError",configurable:!0,writable:!0});Sk.exports={RedisError:qc,ParserError:uS,ReplyError:cS,AbortError:A0,InterruptError:fS}});var Ok=E((LCe,Ek)=>{"use strict";var xk=require("assert"),Fc=class extends Error{get name(){return this.constructor.name}},dS=class extends Fc{constructor(e,t,n){xk(t),xk.strictEqual(typeof n,"number");let i=Error.stackTraceLimit;Error.stackTraceLimit=2,super(e),Error.stackTraceLimit=i,this.offset=n,this.buffer=t}get name(){return this.constructor.name}},hS=class extends Fc{constructor(e){let t=Error.stackTraceLimit;Error.stackTraceLimit=2,super(e),Error.stackTraceLimit=t}get name(){return this.constructor.name}},M0=class extends Fc{get name(){return this.constructor.name}},pS=class extends M0{get name(){return this.constructor.name}};Ek.exports={RedisError:Fc,ParserError:dS,ReplyError:hS,AbortError:M0,InterruptError:pS}});var Ql=E((DCe,Ik)=>{"use strict";var TX=process.version.charCodeAt(1)<55&&process.version.charCodeAt(2)===46?_k():Ok();Ik.exports=TX});var k0=E((NCe,mS)=>{var Ck=[0,4129,8258,12387,16516,20645,24774,28903,33032,37161,41290,45419,49548,53677,57806,61935,4657,528,12915,8786,21173,17044,29431,25302,37689,33560,45947,41818,54205,50076,62463,58334,9314,13379,1056,5121,25830,29895,17572,21637,42346,46411,34088,38153,58862,62927,50604,54669,13907,9842,5649,1584,30423,26358,22165,18100,46939,42874,38681,34616,63455,59390,55197,51132,18628,22757,26758,30887,2112,6241,10242,14371,51660,55789,59790,63919,35144,39273,43274,47403,23285,19156,31415,27286,6769,2640,14899,10770,56317,52188,64447,60318,39801,35672,47931,43802,27814,31879,19684,23749,11298,15363,3168,7233,60846,64911,52716,56781,44330,48395,36200,40265,32407,28342,24277,20212,15891,11826,7761,3696,65439,61374,57309,53244,48923,44858,40793,36728,37256,33193,45514,41451,53516,49453,61774,57711,4224,161,12482,8419,20484,16421,28742,24679,33721,37784,41979,46042,49981,54044,58239,62302,689,4752,8947,13010,16949,21012,25207,29270,46570,42443,38312,34185,62830,58703,54572,50445,13538,9411,5280,1153,29798,25671,21540,17413,42971,47098,34713,38840,59231,63358,50973,55100,9939,14066,1681,5808,26199,30326,17941,22068,55628,51565,63758,59695,39368,35305,47498,43435,22596,18533,30726,26663,6336,2273,14466,10403,52093,56156,60223,64286,35833,39896,43963,48026,19061,23124,27191,31254,2801,6864,10931,14994,64814,60687,56684,52557,48554,44427,40424,36297,31782,27655,23652,19525,15522,11395,7392,3265,61215,65342,53085,57212,44955,49082,36825,40952,28183,32310,20053,24180,11923,16050,3793,7920],AX=function(e){for(var t,n=0,i=0,s=[],o=e.length;n<o;n++)t=e.charCodeAt(n),t<128?s[i++]=t:t<2048?(s[i++]=t>>6|192,s[i++]=t&63|128):(t&64512)===55296&&n+1<e.length&&(e.charCodeAt(n+1)&64512)===56320?(t=65536+((t&1023)<<10)+(e.charCodeAt(++n)&1023),s[i++]=t>>18|240,s[i++]=t>>12&63|128,s[i++]=t>>6&63|128,s[i++]=t&63|128):(s[i++]=t>>12|224,s[i++]=t>>6&63|128,s[i++]=t&63|128);return s},Tk=mS.exports=function(e){for(var t,n=0,i=-1,s=0,o=0,a=typeof e=="string"?AX(e):e,u=a.length;n<u;){if(t=a[n++],i===-1)t===123&&(i=n);else if(t!==125)o=Ck[(t^o>>8)&255]^o<<8;else if(n-1!==i)return o&16383;s=Ck[(t^s>>8)&255]^s<<8}return s&16383};mS.exports.generateMulti=function(e){for(var t=1,n=e.length,i=Tk(e[0]);t<n;)if(Tk(e[t++])!==i)return-1;return i}});var Nk=E((jCe,Dk)=>{var Mk=9007199254740991,MX="[object Arguments]",kX="[object Function]",PX="[object GeneratorFunction]",RX=/^(?:0|[1-9]\d*)$/;function kk(r,e,t){switch(t.length){case 0:return r.call(e);case 1:return r.call(e,t[0]);case 2:return r.call(e,t[0],t[1]);case 3:return r.call(e,t[0],t[1],t[2])}return r.apply(e,t)}function LX(r,e){for(var t=-1,n=Array(r);++t<r;)n[t]=e(t);return n}var fh=Object.prototype,dh=fh.hasOwnProperty,Pk=fh.toString,DX=fh.propertyIsEnumerable,Ak=Math.max;function NX(r,e){var t=WX(r)||$X(r)?LX(r.length,String):[],n=t.length,i=!!n;for(var s in r)(e||dh.call(r,s))&&!(i&&(s=="length"||Lk(s,n)))&&t.push(s);return t}function jX(r,e,t,n){return r===void 0||gS(r,fh[t])&&!dh.call(n,t)?e:r}function KX(r,e,t){var n=r[e];(!(dh.call(r,e)&&gS(n,t))||t===void 0&&!(e in r))&&(r[e]=t)}function qX(r){if(!vS(r))return GX(r);var e=UX(r),t=[];for(var n in r)n=="constructor"&&(e||!dh.call(r,n))||t.push(n);return t}function Rk(r,e){return e=Ak(e===void 0?r.length-1:e,0),function(){for(var t=arguments,n=-1,i=Ak(t.length-e,0),s=Array(i);++n<i;)s[n]=t[e+n];n=-1;for(var o=Array(e+1);++n<e;)o[n]=t[n];return o[e]=s,kk(r,this,o)}}function FX(r,e,t,n){t||(t={});for(var i=-1,s=e.length;++i<s;){var o=e[i],a=n?n(t[o],r[o],o,t,r):void 0;KX(t,o,a===void 0?r[o]:a)}return t}function VX(r){return Rk(function(e,t){var n=-1,i=t.length,s=i>1?t[i-1]:void 0,o=i>2?t[2]:void 0;for(s=r.length>3&&typeof s=="function"?(i--,s):void 0,o&&BX(t[0],t[1],o)&&(s=i<3?void 0:s,i=1),e=Object(e);++n<i;){var a=t[n];a&&r(e,a,n,s)}return e})}function Lk(r,e){return e=e??Mk,!!e&&(typeof r=="number"||RX.test(r))&&r>-1&&r%1==0&&r<e}function BX(r,e,t){if(!vS(t))return!1;var n=typeof e;return(n=="number"?yS(t)&&Lk(e,t.length):n=="string"&&e in t)?gS(t[e],r):!1}function UX(r){var e=r&&r.constructor,t=typeof e=="function"&&e.prototype||fh;return r===t}function GX(r){var e=[];if(r!=null)for(var t in Object(r))e.push(t);return e}function gS(r,e){return r===e||r!==r&&e!==e}function $X(r){return zX(r)&&dh.call(r,"callee")&&(!DX.call(r,"callee")||Pk.call(r)==MX)}var WX=Array.isArray;function yS(r){return r!=null&&YX(r.length)&&!HX(r)}function zX(r){return JX(r)&&yS(r)}function HX(r){var e=vS(r)?Pk.call(r):"";return e==kX||e==PX}function YX(r){return typeof r=="number"&&r>-1&&r%1==0&&r<=Mk}function vS(r){var e=typeof r;return!!r&&(e=="object"||e=="function")}function JX(r){return!!r&&typeof r=="object"}var QX=VX(function(r,e,t,n){FX(e,XX(e),r,n)}),ZX=Rk(function(r){return r.push(void 0,jX),kk(QX,void 0,r)});function XX(r){return yS(r)?NX(r,!0):qX(r)}Dk.exports=ZX});var qk=E((KCe,Kk)=>{var eee=9007199254740991,tee="[object Arguments]",ree="[object Function]",nee="[object GeneratorFunction]",wS=Object.prototype,iee=wS.hasOwnProperty,jk=wS.toString,see=wS.propertyIsEnumerable;function oee(r){return lee(r)&&iee.call(r,"callee")&&(!see.call(r,"callee")||jk.call(r)==tee)}function aee(r){return r!=null&&cee(r.length)&&!uee(r)}function lee(r){return dee(r)&&aee(r)}function uee(r){var e=fee(r)?jk.call(r):"";return e==ree||e==nee}function cee(r){return typeof r=="number"&&r>-1&&r%1==0&&r<=eee}function fee(r){var e=typeof r;return!!r&&(e=="object"||e=="function")}function dee(r){return!!r&&typeof r=="object"}Kk.exports=oee});var P0=E(ba=>{"use strict";Object.defineProperty(ba,"__esModule",{value:!0});ba.isArguments=ba.defaults=ba.noop=void 0;var hee=Nk();ba.defaults=hee;var pee=qk();ba.isArguments=pee;function mee(){}ba.noop=mee});var Vk=E((FCe,Fk)=>{var Vc=1e3,Bc=Vc*60,Uc=Bc*60,Zl=Uc*24,gee=Zl*7,yee=Zl*365.25;Fk.exports=function(r,e){e=e||{};var t=typeof r;if(t==="string"&&r.length>0)return vee(r);if(t==="number"&&isFinite(r))return e.long?bee(r):wee(r);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(r))};function vee(r){if(r=String(r),!(r.length>100)){var e=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(r);if(e){var t=parseFloat(e[1]),n=(e[2]||"ms").toLowerCase();switch(n){case"years":case"year":case"yrs":case"yr":case"y":return t*yee;case"weeks":case"week":case"w":return t*gee;case"days":case"day":case"d":return t*Zl;case"hours":case"hour":case"hrs":case"hr":case"h":return t*Uc;case"minutes":case"minute":case"mins":case"min":case"m":return t*Bc;case"seconds":case"second":case"secs":case"sec":case"s":return t*Vc;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return t;default:return}}}}function wee(r){var e=Math.abs(r);return e>=Zl?Math.round(r/Zl)+"d":e>=Uc?Math.round(r/Uc)+"h":e>=Bc?Math.round(r/Bc)+"m":e>=Vc?Math.round(r/Vc)+"s":r+"ms"}function bee(r){var e=Math.abs(r);return e>=Zl?R0(r,e,Zl,"day"):e>=Uc?R0(r,e,Uc,"hour"):e>=Bc?R0(r,e,Bc,"minute"):e>=Vc?R0(r,e,Vc,"second"):r+" ms"}function R0(r,e,t,n){var i=e>=t*1.5;return Math.round(r/t)+" "+n+(i?"s":"")}});var bS=E((VCe,Bk)=>{function See(r){t.debug=t,t.default=t,t.coerce=u,t.disable=s,t.enable=i,t.enabled=o,t.humanize=Vk(),t.destroy=c,Object.keys(r).forEach(d=>{t[d]=r[d]}),t.names=[],t.skips=[],t.formatters={};function e(d){let h=0;for(let p=0;p<d.length;p++)h=(h<<5)-h+d.charCodeAt(p),h|=0;return t.colors[Math.abs(h)%t.colors.length]}t.selectColor=e;function t(d){let h,p=null,m,y;function _(...O){if(!_.enabled)return;let x=_,A=Number(new Date),P=A-(h||A);x.diff=P,x.prev=h,x.curr=A,h=A,O[0]=t.coerce(O[0]),typeof O[0]!="string"&&O.unshift("%O");let q=0;O[0]=O[0].replace(/%([a-zA-Z%])/g,(z,B)=>{if(z==="%%")return"%";q++;let G=t.formatters[B];if(typeof G=="function"){let H=O[q];z=G.call(x,H),O.splice(q,1),q--}return z}),t.formatArgs.call(x,O),(x.log||t.log).apply(x,O)}return _.namespace=d,_.useColors=t.useColors(),_.color=t.selectColor(d),_.extend=n,_.destroy=t.destroy,Object.defineProperty(_,"enabled",{enumerable:!0,configurable:!1,get:()=>p!==null?p:(m!==t.namespaces&&(m=t.namespaces,y=t.enabled(d)),y),set:O=>{p=O}}),typeof t.init=="function"&&t.init(_),_}function n(d,h){let p=t(this.namespace+(typeof h>"u"?":":h)+d);return p.log=this.log,p}function i(d){t.save(d),t.namespaces=d,t.names=[],t.skips=[];let h,p=(typeof d=="string"?d:"").split(/[\s,]+/),m=p.length;for(h=0;h<m;h++)p[h]&&(d=p[h].replace(/\*/g,".*?"),d[0]==="-"?t.skips.push(new RegExp("^"+d.slice(1)+"$")):t.names.push(new RegExp("^"+d+"$")))}function s(){let d=[...t.names.map(a),...t.skips.map(a).map(h=>"-"+h)].join(",");return t.enable(""),d}function o(d){if(d[d.length-1]==="*")return!0;let h,p;for(h=0,p=t.skips.length;h<p;h++)if(t.skips[h].test(d))return!1;for(h=0,p=t.names.length;h<p;h++)if(t.names[h].test(d))return!0;return!1}function a(d){return d.toString().substring(2,d.toString().length-2).replace(/\.\*\?$/,"*")}function u(d){return d instanceof Error?d.stack||d.message:d}function c(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}return t.enable(t.load()),t}Bk.exports=See});var Uk=E((bi,L0)=>{bi.formatArgs=xee;bi.save=Eee;bi.load=Oee;bi.useColors=_ee;bi.storage=Iee();bi.destroy=(()=>{let r=!1;return()=>{r||(r=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})();bi.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function _ee(){return typeof window<"u"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs)?!0:typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/)?!1:typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}function xee(r){if(r[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+r[0]+(this.useColors?"%c ":" ")+"+"+L0.exports.humanize(this.diff),!this.useColors)return;let e="color: "+this.color;r.splice(1,0,e,"color: inherit");let t=0,n=0;r[0].replace(/%[a-zA-Z%]/g,i=>{i!=="%%"&&(t++,i==="%c"&&(n=t))}),r.splice(n,0,e)}bi.log=console.debug||console.log||(()=>{});function Eee(r){try{r?bi.storage.setItem("debug",r):bi.storage.removeItem("debug")}catch{}}function Oee(){let r;try{r=bi.storage.getItem("debug")}catch{}return!r&&typeof process<"u"&&"env"in process&&(r=process.env.DEBUG),r}function Iee(){try{return localStorage}catch{}}L0.exports=bS()(bi);var{formatters:Cee}=L0.exports;Cee.j=function(r){try{return JSON.stringify(r)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}}});var $k=E((BCe,Gk)=>{"use strict";Gk.exports=(r,e)=>{e=e||process.argv;let t=r.startsWith("-")?"":r.length===1?"-":"--",n=e.indexOf(t+r),i=e.indexOf("--");return n!==-1&&(i===-1?!0:n<i)}});var zk=E((UCe,Wk)=>{"use strict";var Tee=require("os"),Os=$k(),On=process.env,Gc;Os("no-color")||Os("no-colors")||Os("color=false")?Gc=!1:(Os("color")||Os("colors")||Os("color=true")||Os("color=always"))&&(Gc=!0);"FORCE_COLOR"in On&&(Gc=On.FORCE_COLOR.length===0||parseInt(On.FORCE_COLOR,10)!==0);function Aee(r){return r===0?!1:{level:r,hasBasic:!0,has256:r>=2,has16m:r>=3}}function Mee(r){if(Gc===!1)return 0;if(Os("color=16m")||Os("color=full")||Os("color=truecolor"))return 3;if(Os("color=256"))return 2;if(r&&!r.isTTY&&Gc!==!0)return 0;let e=Gc?1:0;if(process.platform==="win32"){let t=Tee.release().split(".");return Number(process.versions.node.split(".")[0])>=8&&Number(t[0])>=10&&Number(t[2])>=10586?Number(t[2])>=14931?3:2:1}if("CI"in On)return["TRAVIS","CIRCLECI","APPVEYOR","GITLAB_CI"].some(t=>t in On)||On.CI_NAME==="codeship"?1:e;if("TEAMCITY_VERSION"in On)return/^(9\.(0*[1-9]\d*)\.|\d{2,}\.)/.test(On.TEAMCITY_VERSION)?1:0;if(On.COLORTERM==="truecolor")return 3;if("TERM_PROGRAM"in On){let t=parseInt((On.TERM_PROGRAM_VERSION||"").split(".")[0],10);switch(On.TERM_PROGRAM){case"iTerm.app":return t>=3?3:2;case"Apple_Terminal":return 2}}return/-256(color)?$/i.test(On.TERM)?2:/^screen|^xterm|^vt100|^vt220|^rxvt|color|ansi|cygwin|linux/i.test(On.TERM)||"COLORTERM"in On?1:(On.TERM==="dumb",e)}function SS(r){let e=Mee(r);return Aee(e)}Wk.exports={supportsColor:SS,stdout:SS(process.stdout),stderr:SS(process.stderr)}});var Yk=E((yn,N0)=>{var kee=require("tty"),D0=require("util");yn.init=Kee;yn.log=Dee;yn.formatArgs=Ree;yn.save=Nee;yn.load=jee;yn.useColors=Pee;yn.destroy=D0.deprecate(()=>{},"Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.");yn.colors=[6,2,3,4,5,1];try{let r=zk();r&&(r.stderr||r).level>=2&&(yn.colors=[20,21,26,27,32,33,38,39,40,41,42,43,44,45,56,57,62,63,68,69,74,75,76,77,78,79,80,81,92,93,98,99,112,113,128,129,134,135,148,149,160,161,162,163,164,165,166,167,168,169,170,171,172,173,178,179,184,185,196,197,198,199,200,201,202,203,204,205,206,207,208,209,214,215,220,221])}catch{}yn.inspectOpts=Object.keys(process.env).filter(r=>/^debug_/i.test(r)).reduce((r,e)=>{let t=e.substring(6).toLowerCase().replace(/_([a-z])/g,(i,s)=>s.toUpperCase()),n=process.env[e];return/^(yes|on|true|enabled)$/i.test(n)?n=!0:/^(no|off|false|disabled)$/i.test(n)?n=!1:n==="null"?n=null:n=Number(n),r[t]=n,r},{});function Pee(){return"colors"in yn.inspectOpts?!!yn.inspectOpts.colors:kee.isatty(process.stderr.fd)}function Ree(r){let{namespace:e,useColors:t}=this;if(t){let n=this.color,i="\x1B[3"+(n<8?n:"8;5;"+n),s=`  ${i};1m${e} \x1B[0m`;r[0]=s+r[0].split(`
`).join(`
`+s),r.push(i+"m+"+N0.exports.humanize(this.diff)+"\x1B[0m")}else r[0]=Lee()+e+" "+r[0]}function Lee(){return yn.inspectOpts.hideDate?"":new Date().toISOString()+" "}function Dee(...r){return process.stderr.write(D0.format(...r)+`
`)}function Nee(r){r?process.env.DEBUG=r:delete process.env.DEBUG}function jee(){return process.env.DEBUG}function Kee(r){r.inspectOpts={};let e=Object.keys(yn.inspectOpts);for(let t=0;t<e.length;t++)r.inspectOpts[e[t]]=yn.inspectOpts[e[t]]}N0.exports=bS()(yn);var{formatters:Hk}=N0.exports;Hk.o=function(r){return this.inspectOpts.colors=this.useColors,D0.inspect(r,this.inspectOpts).split(`
`).map(e=>e.trim()).join(" ")};Hk.O=function(r){return this.inspectOpts.colors=this.useColors,D0.inspect(r,this.inspectOpts)}});var j0=E((GCe,_S)=>{typeof process>"u"||process.type==="renderer"||process.browser===!0||process.__nwjs?_S.exports=Uk():_S.exports=Yk()});var Zk=E(Co=>{"use strict";Object.defineProperty(Co,"__esModule",{value:!0});Co.genRedactedString=Co.getStringValue=Co.MAX_ARGUMENT_LENGTH=void 0;var qee=j0(),xS=200;Co.MAX_ARGUMENT_LENGTH=xS;var Fee="ioredis";function Jk(r){if(r!==null)switch(typeof r){case"boolean":return;case"number":return;case"object":if(Buffer.isBuffer(r))return r.toString("hex");if(Array.isArray(r))return r.join(",");try{return JSON.stringify(r)}catch{return}case"string":return r}}Co.getStringValue=Jk;function Qk(r,e){let{length:t}=r;return t<=e?r:r.slice(0,e)+' ... <REDACTED full-length="'+t+'">'}Co.genRedactedString=Qk;function Vee(r){let e=(0,qee.default)(`${Fee}:${r}`);function t(...n){if(e.enabled){for(let i=1;i<n.length;i++){let s=Jk(n[i]);typeof s=="string"&&s.length>xS&&(n[i]=Qk(s,xS))}return e.apply(null,n)}}return Object.defineProperties(t,{namespace:{get(){return e.namespace}},enabled:{get(){return e.enabled}},destroy:{get(){return e.destroy}},log:{get(){return e.log},set(n){e.log=n}}}),t}Co.default=Vee});var eP=E(ES=>{"use strict";Object.defineProperty(ES,"__esModule",{value:!0});var Xk=`-----BEGIN CERTIFICATE-----
MIIDTzCCAjegAwIBAgIJAKSVpiDswLcwMA0GCSqGSIb3DQEBBQUAMD4xFjAUBgNV
BAoMDUdhcmFudGlhIERhdGExJDAiBgNVBAMMG1NTTCBDZXJ0aWZpY2F0aW9uIEF1
dGhvcml0eTAeFw0xMzEwMDExMjE0NTVaFw0yMzA5MjkxMjE0NTVaMD4xFjAUBgNV
BAoMDUdhcmFudGlhIERhdGExJDAiBgNVBAMMG1NTTCBDZXJ0aWZpY2F0aW9uIEF1
dGhvcml0eTCCASIwDQYJKoZIhvcNAQEBBQADggEPADCCAQoCggEBALZqkh/DczWP
JnxnHLQ7QL0T4B4CDKWBKCcisriGbA6ZePWVNo4hfKQC6JrzfR+081NeD6VcWUiz
rmd+jtPhIY4c+WVQYm5PKaN6DT1imYdxQw7aqO5j2KUCEh/cznpLxeSHoTxlR34E
QwF28Wl3eg2vc5ct8LjU3eozWVk3gb7alx9mSA2SgmuX5lEQawl++rSjsBStemY2
BDwOpAMXIrdEyP/cVn8mkvi/BDs5M5G+09j0gfhyCzRWMQ7Hn71u1eolRxwVxgi3
TMn+/vTaFSqxKjgck6zuAYjBRPaHe7qLxHNr1So/Mc9nPy+3wHebFwbIcnUojwbp
4nctkWbjb2cCAwEAAaNQME4wHQYDVR0OBBYEFP1whtcrydmW3ZJeuSoKZIKjze3w
MB8GA1UdIwQYMBaAFP1whtcrydmW3ZJeuSoKZIKjze3wMAwGA1UdEwQFMAMBAf8w
DQYJKoZIhvcNAQEFBQADggEBAG2erXhwRAa7+ZOBs0B6X57Hwyd1R4kfmXcs0rta
lbPpvgULSiB+TCbf3EbhJnHGyvdCY1tvlffLjdA7HJ0PCOn+YYLBA0pTU/dyvrN6
Su8NuS5yubnt9mb13nDGYo1rnt0YRfxN+8DM3fXIVr038A30UlPX2Ou1ExFJT0MZ
uFKY6ZvLdI6/1cbgmguMlAhM+DhKyV6Sr5699LM3zqeI816pZmlREETYkGr91q7k
BpXJu/dtHaGxg1ZGu6w/PCsYGUcECWENYD4VQPd8N32JjOfu6vEgoEAwfPP+3oGp
Z4m3ewACcWOAenqflb+cQYC4PsF7qbXDmRaWrbKntOlZ3n0=
-----END CERTIFICATE-----
-----BEGIN CERTIFICATE-----
MIIGMTCCBBmgAwIBAgICEAAwDQYJKoZIhvcNAQELBQAwajELMAkGA1UEBhMCVVMx
CzAJBgNVBAgMAkNBMQswCQYDVQQHDAJDQTESMBAGA1UECgwJUmVkaXNMYWJzMS0w
KwYDVQQDDCRSZWRpc0xhYnMgUm9vdCBDZXJ0aWZpY2F0ZSBBdXRob3JpdHkwHhcN
MTgwMjI1MTUzNzM3WhcNMjgwMjIzMTUzNzM3WjBfMQswCQYDVQQGEwJVUzELMAkG
A1UECAwCQ0ExEjAQBgNVBAoMCVJlZGlzTGFiczEvMC0GA1UEAwwmUkNQIEludGVy
bWVkaWF0ZSBDZXJ0aWZpY2F0ZSBBdXRob3JpdHkwggIiMA0GCSqGSIb3DQEBAQUA
A4ICDwAwggIKAoICAQDf9dqbxc8Bq7Ctq9rWcxrGNKKHivqLAFpPq02yLPx6fsOv
Tq7GsDChAYBBc4v7Y2Ap9RD5Vs3dIhEANcnolf27QwrG9RMnnvzk8pCvp1o6zSU4
VuOE1W66/O1/7e2rVxyrnTcP7UgK43zNIXu7+tiAqWsO92uSnuMoGPGpeaUm1jym
hjWKtkAwDFSqvHY+XL5qDVBEjeUe+WHkYUg40cAXjusAqgm2hZt29c2wnVrxW25W
P0meNlzHGFdA2AC5z54iRiqj57dTfBTkHoBczQxcyw6hhzxZQ4e5I5zOKjXXEhZN
r0tA3YC14CTabKRus/JmZieyZzRgEy2oti64tmLYTqSlAD78pRL40VNoaSYetXLw
hhNsXCHgWaY6d5bLOc/aIQMAV5oLvZQKvuXAF1IDmhPA+bZbpWipp0zagf1P1H3s
UzsMdn2KM0ejzgotbtNlj5TcrVwpmvE3ktvUAuA+hi3FkVx1US+2Gsp5x4YOzJ7u
P1WPk6ShF0JgnJH2ILdj6kttTWwFzH17keSFICWDfH/+kM+k7Y1v3EXMQXE7y0T9
MjvJskz6d/nv+sQhY04xt64xFMGTnZjlJMzfQNi7zWFLTZnDD0lPowq7l3YiPoTT
t5Xky83lu0KZsZBo0WlWaDG00gLVdtRgVbcuSWxpi5BdLb1kRab66JptWjxwXQID
AQABo4HrMIHoMDoGA1UdHwQzMDEwL6AtoCuGKWh0dHBzOi8vcmwtY2Etc2VydmVy
LnJlZGlzbGFicy5jb20vdjEvY3JsMEYGCCsGAQUFBwEBBDowODA2BggrBgEFBQcw
AYYqaHR0cHM6Ly9ybC1jYS1zZXJ2ZXIucmVkaXNsYWJzLmNvbS92MS9vY3NwMB0G
A1UdDgQWBBQHar5OKvQUpP2qWt6mckzToeCOHDAfBgNVHSMEGDAWgBQi42wH6hM4
L2sujEvLM0/u8lRXTzASBgNVHRMBAf8ECDAGAQH/AgEAMA4GA1UdDwEB/wQEAwIB
hjANBgkqhkiG9w0BAQsFAAOCAgEAirEn/iTsAKyhd+pu2W3Z5NjCko4NPU0EYUbr
AP7+POK2rzjIrJO3nFYQ/LLuC7KCXG+2qwan2SAOGmqWst13Y+WHp44Kae0kaChW
vcYLXXSoGQGC8QuFSNUdaeg3RbMDYFT04dOkqufeWVccoHVxyTSg9eD8LZuHn5jw
7QDLiEECBmIJHk5Eeo2TAZrx4Yx6ufSUX5HeVjlAzqwtAqdt99uCJ/EL8bgpWbe+
XoSpvUv0SEC1I1dCAhCKAvRlIOA6VBcmzg5Am12KzkqTul12/VEFIgzqu0Zy2Jbc
AUPrYVu/+tOGXQaijy7YgwH8P8n3s7ZeUa1VABJHcxrxYduDDJBLZi+MjheUDaZ1
jQRHYevI2tlqeSBqdPKG4zBY5lS0GiAlmuze5oENt0P3XboHoZPHiqcK3VECgTVh
/BkJcuudETSJcZDmQ8YfoKfBzRQNg2sv/hwvUv73Ss51Sco8GEt2lD8uEdib1Q6z
zDT5lXJowSzOD5ZA9OGDjnSRL+2riNtKWKEqvtEG3VBJoBzu9GoxbAc7wIZLxmli
iF5a/Zf5X+UXD3s4TMmy6C4QZJpAA2egsSQCnraWO2ULhh7iXMysSkF/nzVfZn43
iqpaB8++9a37hWq14ZmOv0TJIDz//b2+KC4VFXWQ5W5QC6whsjT+OlG4p5ZYG0jo
616pxqo=
-----END CERTIFICATE-----
-----BEGIN CERTIFICATE-----
MIIFujCCA6KgAwIBAgIJAJ1aTT1lu2ScMA0GCSqGSIb3DQEBCwUAMGoxCzAJBgNV
BAYTAlVTMQswCQYDVQQIDAJDQTELMAkGA1UEBwwCQ0ExEjAQBgNVBAoMCVJlZGlz
TGFiczEtMCsGA1UEAwwkUmVkaXNMYWJzIFJvb3QgQ2VydGlmaWNhdGUgQXV0aG9y
aXR5MB4XDTE4MDIyNTE1MjA0MloXDTM4MDIyMDE1MjA0MlowajELMAkGA1UEBhMC
VVMxCzAJBgNVBAgMAkNBMQswCQYDVQQHDAJDQTESMBAGA1UECgwJUmVkaXNMYWJz
MS0wKwYDVQQDDCRSZWRpc0xhYnMgUm9vdCBDZXJ0aWZpY2F0ZSBBdXRob3JpdHkw
ggIiMA0GCSqGSIb3DQEBAQUAA4ICDwAwggIKAoICAQDLEjXy7YrbN5Waau5cd6g1
G5C2tMmeTpZ0duFAPxNU4oE3RHS5gGiok346fUXuUxbZ6QkuzeN2/2Z+RmRcJhQY
Dm0ZgdG4x59An1TJfnzKKoWj8ISmoHS/TGNBdFzXV7FYNLBuqZouqePI6ReC6Qhl
pp45huV32Q3a6IDrrvx7Wo5ZczEQeFNbCeCOQYNDdTmCyEkHqc2AGo8eoIlSTutT
ULOC7R5gzJVTS0e1hesQ7jmqHjbO+VQS1NAL4/5K6cuTEqUl+XhVhPdLWBXJQ5ag
54qhX4v+ojLzeU1R/Vc6NjMvVtptWY6JihpgplprN0Yh2556ewcXMeturcKgXfGJ
xeYzsjzXerEjrVocX5V8BNrg64NlifzTMKNOOv4fVZszq1SIHR8F9ROrqiOdh8iC
JpUbLpXH9hWCSEO6VRMB2xJoKu3cgl63kF30s77x7wLFMEHiwsQRKxooE1UhgS9K
2sO4TlQ1eWUvFvHSTVDQDlGQ6zu4qjbOpb3Q8bQwoK+ai2alkXVR4Ltxe9QlgYK3
StsnPhruzZGA0wbXdpw0bnM+YdlEm5ffSTpNIfgHeaa7Dtb801FtA71ZlH7A6TaI
SIQuUST9EKmv7xrJyx0W1pGoPOLw5T029aTjnICSLdtV9bLwysrLhIYG5bnPq78B
cS+jZHFGzD7PUVGQD01nOQIDAQABo2MwYTAdBgNVHQ4EFgQUIuNsB+oTOC9rLoxL
yzNP7vJUV08wHwYDVR0jBBgwFoAUIuNsB+oTOC9rLoxLyzNP7vJUV08wDwYDVR0T
AQH/BAUwAwEB/zAOBgNVHQ8BAf8EBAMCAYYwDQYJKoZIhvcNAQELBQADggIBAHfg
z5pMNUAKdMzK1aS1EDdK9yKz4qicILz5czSLj1mC7HKDRy8cVADUxEICis++CsCu
rYOvyCVergHQLREcxPq4rc5Nq1uj6J6649NEeh4WazOOjL4ZfQ1jVznMbGy+fJm3
3Hoelv6jWRG9iqeJZja7/1s6YC6bWymI/OY1e4wUKeNHAo+Vger7MlHV+RuabaX+
hSJ8bJAM59NCM7AgMTQpJCncrcdLeceYniGy5Q/qt2b5mJkQVkIdy4TPGGB+AXDJ
D0q3I/JDRkDUFNFdeW0js7fHdsvCR7O3tJy5zIgEV/o/BCkmJVtuwPYOrw/yOlKj
TY/U7ATAx9VFF6/vYEOMYSmrZlFX+98L6nJtwDqfLB5VTltqZ4H/KBxGE3IRSt9l
FXy40U+LnXzhhW+7VBAvyYX8GEXhHkKU8Gqk1xitrqfBXY74xKgyUSTolFSfFVgj
mcM/X4K45bka+qpkj7Kfv/8D4j6aZekwhN2ly6hhC1SmQ8qjMjpG/mrWOSSHZFmf
ybu9iD2AYHeIOkshIl6xYIa++Q/00/vs46IzAbQyriOi0XxlSMMVtPx0Q3isp+ji
n8Mq9eOuxYOEQ4of8twUkUDd528iwGtEdwf0Q01UyT84S62N8AySl1ZBKXJz6W4F
UhWfa/HQYOAPDdEjNgnVwLI23b8t0TozyCWw7q8h
-----END CERTIFICATE-----

-----BEGIN CERTIFICATE-----
MIIEjzCCA3egAwIBAgIQe55B/ALCKJDZtdNT8kD6hTANBgkqhkiG9w0BAQsFADBM
MSAwHgYDVQQLExdHbG9iYWxTaWduIFJvb3QgQ0EgLSBSMzETMBEGA1UEChMKR2xv
YmFsU2lnbjETMBEGA1UEAxMKR2xvYmFsU2lnbjAeFw0yMjAxMjYxMjAwMDBaFw0y
NTAxMjYwMDAwMDBaMFgxCzAJBgNVBAYTAkJFMRkwFwYDVQQKExBHbG9iYWxTaWdu
IG52LXNhMS4wLAYDVQQDEyVHbG9iYWxTaWduIEF0bGFzIFIzIE9WIFRMUyBDQSAy
MDIyIFEyMIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEAmGmg1LW9b7Lf
8zDD83yBDTEkt+FOxKJZqF4veWc5KZsQj9HfnUS2e5nj/E+JImlGPsQuoiosLuXD
BVBNAMcUFa11buFMGMeEMwiTmCXoXRrXQmH0qjpOfKgYc5gHG3BsRGaRrf7VR4eg
ofNMG9wUBw4/g/TT7+bQJdA4NfE7Y4d5gEryZiBGB/swaX6Jp/8MF4TgUmOWmalK
dZCKyb4sPGQFRTtElk67F7vU+wdGcrcOx1tDcIB0ncjLPMnaFicagl+daWGsKqTh
counQb6QJtYHa91KvCfKWocMxQ7OIbB5UARLPmC4CJ1/f8YFm35ebfzAeULYdGXu
jE9CLor0OwIDAQABo4IBXzCCAVswDgYDVR0PAQH/BAQDAgGGMB0GA1UdJQQWMBQG
CCsGAQUFBwMBBggrBgEFBQcDAjASBgNVHRMBAf8ECDAGAQH/AgEAMB0GA1UdDgQW
BBSH5Zq7a7B/t95GfJWkDBpA8HHqdjAfBgNVHSMEGDAWgBSP8Et/qC5FJK5NUPpj
move4t0bvDB7BggrBgEFBQcBAQRvMG0wLgYIKwYBBQUHMAGGImh0dHA6Ly9vY3Nw
Mi5nbG9iYWxzaWduLmNvbS9yb290cjMwOwYIKwYBBQUHMAKGL2h0dHA6Ly9zZWN1
cmUuZ2xvYmFsc2lnbi5jb20vY2FjZXJ0L3Jvb3QtcjMuY3J0MDYGA1UdHwQvMC0w
K6ApoCeGJWh0dHA6Ly9jcmwuZ2xvYmFsc2lnbi5jb20vcm9vdC1yMy5jcmwwIQYD
VR0gBBowGDAIBgZngQwBAgIwDAYKKwYBBAGgMgoBAjANBgkqhkiG9w0BAQsFAAOC
AQEAKRic9/f+nmhQU/wz04APZLjgG5OgsuUOyUEZjKVhNGDwxGTvKhyXGGAMW2B/
3bRi+aElpXwoxu3pL6fkElbX3B0BeS5LoDtxkyiVEBMZ8m+sXbocwlPyxrPbX6mY
0rVIvnuUeBH8X0L5IwfpNVvKnBIilTbcebfHyXkPezGwz7E1yhUULjJFm2bt0SdX
y+4X/WeiiYIv+fTVgZZgl+/2MKIsu/qdBJc3f3TvJ8nz+Eax1zgZmww+RSQWeOj3
15Iw6Z5FX+NwzY/Ab+9PosR5UosSeq+9HhtaxZttXG1nVh+avYPGYddWmiMT90J5
ZgKnO/Fx2hBgTxhOTMYaD312kg==
-----END CERTIFICATE-----

-----BEGIN CERTIFICATE-----
MIIDXzCCAkegAwIBAgILBAAAAAABIVhTCKIwDQYJKoZIhvcNAQELBQAwTDEgMB4G
A1UECxMXR2xvYmFsU2lnbiBSb290IENBIC0gUjMxEzARBgNVBAoTCkdsb2JhbFNp
Z24xEzARBgNVBAMTCkdsb2JhbFNpZ24wHhcNMDkwMzE4MTAwMDAwWhcNMjkwMzE4
MTAwMDAwWjBMMSAwHgYDVQQLExdHbG9iYWxTaWduIFJvb3QgQ0EgLSBSMzETMBEG
A1UEChMKR2xvYmFsU2lnbjETMBEGA1UEAxMKR2xvYmFsU2lnbjCCASIwDQYJKoZI
hvcNAQEBBQADggEPADCCAQoCggEBAMwldpB5BngiFvXAg7aEyiie/QV2EcWtiHL8
RgJDx7KKnQRfJMsuS+FggkbhUqsMgUdwbN1k0ev1LKMPgj0MK66X17YUhhB5uzsT
gHeMCOFJ0mpiLx9e+pZo34knlTifBtc+ycsmWQ1z3rDI6SYOgxXG71uL0gRgykmm
KPZpO/bLyCiR5Z2KYVc3rHQU3HTgOu5yLy6c+9C7v/U9AOEGM+iCK65TpjoWc4zd
QQ4gOsC0p6Hpsk+QLjJg6VfLuQSSaGjlOCZgdbKfd/+RFO+uIEn8rUAVSNECMWEZ
XriX7613t2Saer9fwRPvm2L7DWzgVGkWqQPabumDk3F2xmmFghcCAwEAAaNCMEAw
DgYDVR0PAQH/BAQDAgEGMA8GA1UdEwEB/wQFMAMBAf8wHQYDVR0OBBYEFI/wS3+o
LkUkrk1Q+mOai97i3Ru8MA0GCSqGSIb3DQEBCwUAA4IBAQBLQNvAUKr+yAzv95ZU
RUm7lgAJQayzE4aGKAczymvmdLm6AC2upArT9fHxD4q/c2dKg8dEe3jgr25sbwMp
jjM5RcOO5LlXbKr8EpbsU8Yt5CRsuZRj+9xTaGdWPoO4zzUhw8lo/s7awlOqzJCK
6fBdRoyV3XpYKBovHd7NADdBj+1EbddTKJd+82cEHhXXipa0095MJ6RMG3NzdvQX
mcIfeg7jLQitChws/zyrVQ4PkX4268NXSb7hLi18YIvDQVETI53O9zJrlAGomecs
Mx86OyXShkDOOyyGeMlhLxS67ttVb9+E7gUJTb0o2HLO02JQZR7rkpeDMdmztcpH
WD9f
-----END CERTIFICATE-----`,Bee={RedisCloudFixed:{ca:Xk},RedisCloudFlexible:{ca:Xk}};ES.default=Bee});var ln=E(nt=>{"use strict";Object.defineProperty(nt,"__esModule",{value:!0});nt.noop=nt.defaults=nt.Debug=nt.zipMap=nt.CONNECTION_CLOSED_ERROR_MSG=nt.shuffle=nt.sample=nt.resolveTLSProfile=nt.parseURL=nt.optimizeErrorStack=nt.toArg=nt.convertMapToArray=nt.convertObjectToArray=nt.timeout=nt.packObject=nt.isInt=nt.wrapMultiResult=nt.convertBufferToString=void 0;var tP=require("url"),OS=P0();Object.defineProperty(nt,"defaults",{enumerable:!0,get:function(){return OS.defaults}});Object.defineProperty(nt,"noop",{enumerable:!0,get:function(){return OS.noop}});var Uee=Zk();nt.Debug=Uee.default;var Gee=eP();function rP(r,e){if(r instanceof Buffer)return r.toString(e);if(Array.isArray(r)){let t=r.length,n=Array(t);for(let i=0;i<t;++i)n[i]=r[i]instanceof Buffer&&e==="utf8"?r[i].toString():rP(r[i],e);return n}return r}nt.convertBufferToString=rP;function $ee(r){if(!r)return null;let e=[],t=r.length;for(let n=0;n<t;++n){let i=r[n];i instanceof Error?e.push([i]):e.push([null,i])}return e}nt.wrapMultiResult=$ee;function nP(r){let e=parseFloat(r);return!isNaN(r)&&(e|0)===e}nt.isInt=nP;function Wee(r){let e={},t=r.length;for(let n=1;n<t;n+=2)e[r[n-1]]=r[n];return e}nt.packObject=Wee;function zee(r,e){let t=null,n=function(){t&&(clearTimeout(t),t=null,r.apply(this,arguments))};return t=setTimeout(n,e,new Error("timeout")),n}nt.timeout=zee;function Hee(r){let e=[],t=Object.keys(r);for(let n=0,i=t.length;n<i;n++)e.push(t[n],r[t[n]]);return e}nt.convertObjectToArray=Hee;function Yee(r){let e=[],t=0;return r.forEach(function(n,i){e[t]=i,e[t+1]=n,t+=2}),e}nt.convertMapToArray=Yee;function Jee(r){return r===null||typeof r>"u"?"":String(r)}nt.toArg=Jee;function Qee(r,e,t){let n=e.split(`
`),i="",s;for(s=1;s<n.length&&n[s].indexOf(t)!==-1;++s);for(let o=s;o<n.length;++o)i+=`
`+n[o];if(r.stack){let o=r.stack.indexOf(`
`);r.stack=r.stack.slice(0,o)+i}return r}nt.optimizeErrorStack=Qee;function Zee(r){if(nP(r))return{port:r};let e=(0,tP.parse)(r,!0,!0);!e.slashes&&r[0]!=="/"&&(r="//"+r,e=(0,tP.parse)(r,!0,!0));let t=e.query||{},n={};if(e.auth){let i=e.auth.indexOf(":");n.username=i===-1?e.auth:e.auth.slice(0,i),n.password=i===-1?"":e.auth.slice(i+1)}if(e.pathname&&(e.protocol==="redis:"||e.protocol==="rediss:"?e.pathname.length>1&&(n.db=e.pathname.slice(1)):n.path=e.pathname),e.host&&(n.host=e.hostname),e.port&&(n.port=e.port),typeof t.family=="string"){let i=Number.parseInt(t.family,10);Number.isNaN(i)||(n.family=i)}return(0,OS.defaults)(n,t),n}nt.parseURL=Zee;function Xee(r){let e=r?.tls;typeof e=="string"&&(e={profile:e});let t=Gee.default[e?.profile];return t&&(e=Object.assign({},t,e),delete e.profile,r=Object.assign({},r,{tls:e})),r}nt.resolveTLSProfile=Xee;function ete(r,e=0){let t=r.length;return e>=t?null:r[e+Math.floor(Math.random()*(t-e))]}nt.sample=ete;function tte(r){let e=r.length;for(;e>0;){let t=Math.floor(Math.random()*e);e--,[r[e],r[t]]=[r[t],r[e]]}return r}nt.shuffle=tte;nt.CONNECTION_CLOSED_ERROR_MSG="Connection is closed.";function rte(r,e){let t=new Map;return r.forEach((n,i)=>{t.set(n,e[i])}),t}nt.zipMap=rte});var To=E(CS=>{"use strict";Object.defineProperty(CS,"__esModule",{value:!0});var iP=jc(),nte=k0(),ite=wa(),Xl=ln(),zs=class r{constructor(e,t=[],n={},i){if(this.name=e,this.inTransaction=!1,this.isResolved=!1,this.transformed=!1,this.replyEncoding=n.replyEncoding,this.errorStack=n.errorStack,this.args=t.flat(),this.callback=i,this.initPromise(),n.keyPrefix){let s=n.keyPrefix instanceof Buffer,o=s?n.keyPrefix:null;this._iterateKeys(a=>a instanceof Buffer?(o===null&&(o=Buffer.from(n.keyPrefix)),Buffer.concat([o,a])):s?Buffer.concat([n.keyPrefix,Buffer.from(String(a))]):n.keyPrefix+a)}n.readOnly&&(this.isReadOnly=!0)}static checkFlag(e,t){return!!this.getFlagMap()[e][t]}static setArgumentTransformer(e,t){this._transformer.argument[e]=t}static setReplyTransformer(e,t){this._transformer.reply[e]=t}static getFlagMap(){return this.flagMap||(this.flagMap=Object.keys(r.FLAGS).reduce((e,t)=>(e[t]={},r.FLAGS[t].forEach(n=>{e[t][n]=!0}),e),{})),this.flagMap}getSlot(){if(typeof this.slot>"u"){let e=this.getKeys()[0];this.slot=e==null?null:nte(e)}return this.slot}getKeys(){return this._iterateKeys()}toWritable(e){let t,n="*"+(this.args.length+1)+`\r
$`+Buffer.byteLength(this.name)+`\r
`+this.name+`\r
`;if(this.bufferMode){let i=new IS;i.push(n);for(let s=0;s<this.args.length;++s){let o=this.args[s];o instanceof Buffer?o.length===0?i.push(`$0\r
\r
`):(i.push("$"+o.length+`\r
`),i.push(o),i.push(`\r
`)):i.push("$"+Buffer.byteLength(o)+`\r
`+o+`\r
`)}t=i.toBuffer()}else{t=n;for(let i=0;i<this.args.length;++i){let s=this.args[i];t+="$"+Buffer.byteLength(s)+`\r
`+s+`\r
`}}return t}stringifyArguments(){for(let e=0;e<this.args.length;++e){let t=this.args[e];typeof t=="string"||(t instanceof Buffer?this.bufferMode=!0:this.args[e]=(0,Xl.toArg)(t))}}transformReply(e){this.replyEncoding&&(e=(0,Xl.convertBufferToString)(e,this.replyEncoding));let t=r._transformer.reply[this.name];return t&&(e=t(e)),e}setTimeout(e){this._commandTimeoutTimer||(this._commandTimeoutTimer=setTimeout(()=>{this.isResolved||this.reject(new Error("Command timed out"))},e))}initPromise(){let e=new Promise((t,n)=>{if(!this.transformed){this.transformed=!0;let i=r._transformer.argument[this.name];i&&(this.args=i(this.args)),this.stringifyArguments()}this.resolve=this._convertValue(t),this.errorStack?this.reject=i=>{n((0,Xl.optimizeErrorStack)(i,this.errorStack.stack,__dirname))}:this.reject=n});this.promise=(0,ite.default)(e,this.callback)}_iterateKeys(e=t=>t){if(typeof this.keys>"u"&&(this.keys=[],(0,iP.exists)(this.name))){let t=(0,iP.getKeyIndexes)(this.name,this.args);for(let n of t)this.args[n]=e(this.args[n]),this.keys.push(this.args[n])}return this.keys}_convertValue(e){return t=>{try{let n=this._commandTimeoutTimer;n&&(clearTimeout(n),delete this._commandTimeoutTimer),e(this.transformReply(t)),this.isResolved=!0}catch(n){this.reject(n)}return this.promise}}};CS.default=zs;zs.FLAGS={VALID_IN_SUBSCRIBER_MODE:["subscribe","psubscribe","unsubscribe","punsubscribe","ssubscribe","sunsubscribe","ping","quit"],VALID_IN_MONITOR_MODE:["monitor","auth"],ENTER_SUBSCRIBER_MODE:["subscribe","psubscribe","ssubscribe"],EXIT_SUBSCRIBER_MODE:["unsubscribe","punsubscribe","sunsubscribe"],WILL_DISCONNECT:["quit"]};zs._transformer={argument:{},reply:{}};var sP=function(r){if(r.length===1){if(r[0]instanceof Map)return(0,Xl.convertMapToArray)(r[0]);if(typeof r[0]=="object"&&r[0]!==null)return(0,Xl.convertObjectToArray)(r[0])}return r},oP=function(r){if(r.length===2){if(r[1]instanceof Map)return[r[0]].concat((0,Xl.convertMapToArray)(r[1]));if(typeof r[1]=="object"&&r[1]!==null)return[r[0]].concat((0,Xl.convertObjectToArray)(r[1]))}return r};zs.setArgumentTransformer("mset",sP);zs.setArgumentTransformer("msetnx",sP);zs.setArgumentTransformer("hset",oP);zs.setArgumentTransformer("hmset",oP);zs.setReplyTransformer("hgetall",function(r){if(Array.isArray(r)){let e={};for(let t=0;t<r.length;t+=2){let n=r[t],i=r[t+1];n in e?Object.defineProperty(e,n,{value:i,configurable:!0,enumerable:!0,writable:!0}):e[n]=i}return e}return r});var IS=class{constructor(){this.length=0,this.items=[]}push(e){this.length+=Buffer.byteLength(e),this.items.push(e)}toBuffer(){let e=Buffer.allocUnsafe(this.length),t=0;for(let n of this.items){let i=Buffer.byteLength(n);Buffer.isBuffer(n)?n.copy(e,t):e.write(n,t,i),t+=i}return e}}});var aP=E(TS=>{"use strict";Object.defineProperty(TS,"__esModule",{value:!0});var ste=Ql(),K0=class extends ste.RedisError{constructor(e,t){super(e),this.lastNodeError=t,Error.captureStackTrace(this,this.constructor)}get name(){return this.constructor.name}};TS.default=K0;K0.defaultMessage="Failed to refresh slots cache."});var q0=E(MS=>{"use strict";Object.defineProperty(MS,"__esModule",{value:!0});var ote=require("stream"),AS=class extends ote.Readable{constructor(e){super(e),this.opt=e,this._redisCursor="0",this._redisDrained=!1}_read(){if(this._redisDrained){this.push(null);return}let e=[this._redisCursor];this.opt.key&&e.unshift(this.opt.key),this.opt.match&&e.push("MATCH",this.opt.match),this.opt.type&&e.push("TYPE",this.opt.type),this.opt.count&&e.push("COUNT",String(this.opt.count)),this.opt.redis[this.opt.command](e,(t,n)=>{if(t){this.emit("error",t);return}this._redisCursor=n[0]instanceof Buffer?n[0].toString():n[0],this._redisCursor==="0"&&(this._redisDrained=!0),this.push(n[1])})}close(){this._redisDrained=!0}};MS.default=AS});var hP=E(kr=>{"use strict";Object.defineProperty(kr,"__esModule",{value:!0});kr.executeWithAutoPipelining=kr.getFirstValueInFlattenedArray=kr.shouldUseAutoPipelining=kr.notAllowedAutoPipelineCommands=kr.kCallbacks=kr.kExec=void 0;var uP=P0(),ate=k0(),lP=wa();kr.kExec=Symbol("exec");kr.kCallbacks=Symbol("callbacks");kr.notAllowedAutoPipelineCommands=["auth","info","script","quit","cluster","pipeline","multi","subscribe","psubscribe","unsubscribe","unpsubscribe","select"];function cP(r,e){if(r._runningAutoPipelines.has(e)||!r._autoPipelines.has(e))return;r._runningAutoPipelines.add(e);let t=r._autoPipelines.get(e);r._autoPipelines.delete(e);let n=t[kr.kCallbacks];t[kr.kCallbacks]=null,t.exec(function(i,s){if(r._runningAutoPipelines.delete(e),i)for(let o=0;o<n.length;o++)process.nextTick(n[o],i);else for(let o=0;o<n.length;o++)process.nextTick(n[o],...s[o]);r._autoPipelines.has(e)&&cP(r,e)})}function lte(r,e,t){return e&&r.options.enableAutoPipelining&&!r.isPipeline&&!kr.notAllowedAutoPipelineCommands.includes(t)&&!r.options.autoPipeliningIgnoredCommands.includes(t)}kr.shouldUseAutoPipelining=lte;function fP(r){for(let e=0;e<r.length;e++){let t=r[e];if(typeof t=="string")return t;if(Array.isArray(t)||(0,uP.isArguments)(t)){if(t.length===0)continue;return t[0]}let n=[t].flat();if(n.length>0)return n[0]}}kr.getFirstValueInFlattenedArray=fP;function dP(r,e,t,n,i){if(r.isCluster&&!r.slots.length)return r.status==="wait"&&r.connect().catch(uP.noop),(0,lP.default)(new Promise(function(c,d){r.delayUntilReady(h=>{if(h){d(h);return}dP(r,e,t,n,null).then(c,d)})}),i);let s=r.options.keyPrefix||"",o=r.isCluster?r.slots[ate(`${s}${fP(n)}`)].join(","):"main";if(!r._autoPipelines.has(o)){let c=r.pipeline();c[kr.kExec]=!1,c[kr.kCallbacks]=[],r._autoPipelines.set(o,c)}let a=r._autoPipelines.get(o);a[kr.kExec]||(a[kr.kExec]=!0,setImmediate(cP,r,o));let u=new Promise(function(c,d){a[kr.kCallbacks].push(function(h,p){if(h){d(h);return}c(p)}),e==="call"&&n.unshift(t),a[e](...n)});return(0,lP.default)(u,i)}kr.executeWithAutoPipelining=dP});var pP=E(PS=>{"use strict";Object.defineProperty(PS,"__esModule",{value:!0});var ute=require("crypto"),cte=To(),fte=wa(),kS=class{constructor(e,t=null,n="",i=!1){this.lua=e,this.numberOfKeys=t,this.keyPrefix=n,this.readOnly=i,this.sha=(0,ute.createHash)("sha1").update(e).digest("hex");let s=this.sha,o=new WeakSet;this.Command=class extends cte.default{toWritable(u){let c=this.reject;return this.reject=d=>{d.message.indexOf("NOSCRIPT")!==-1&&o.delete(u),c.call(this,d)},o.has(u)?this.name==="eval"&&(this.name="evalsha",this.args[0]=s):(o.add(u),this.name="eval",this.args[0]=e),super.toWritable(u)}}}execute(e,t,n,i){typeof this.numberOfKeys=="number"&&t.unshift(this.numberOfKeys),this.keyPrefix&&(n.keyPrefix=this.keyPrefix),this.readOnly&&(n.readOnly=!0);let s=new this.Command("evalsha",[this.sha,...t],n);return s.promise=s.promise.catch(o=>{if(o.message.indexOf("NOSCRIPT")===-1)throw o;let a=new this.Command("evalsha",[this.sha,...t],n);return(e.isPipeline?e.redis:e).sendCommand(a)}),(0,fte.default)(s.promise,i),e.sendCommand(s)}};PS.default=kS});var V0=E(LS=>{"use strict";Object.defineProperty(LS,"__esModule",{value:!0});var dte=jc(),F0=hP(),hte=To(),pte=pP(),Ao=class{constructor(){this.options={},this.scriptsSet={},this.addedBuiltinSet=new Set}getBuiltinCommands(){return RS.slice(0)}createBuiltinCommand(e){return{string:Sa(null,e,"utf8"),buffer:Sa(null,e,null)}}addBuiltinCommand(e){this.addedBuiltinSet.add(e),this[e]=Sa(e,e,"utf8"),this[e+"Buffer"]=Sa(e+"Buffer",e,null)}defineCommand(e,t){let n=new pte.default(t.lua,t.numberOfKeys,this.options.keyPrefix,t.readOnly);this.scriptsSet[e]=n,this[e]=mP(e,e,n,"utf8"),this[e+"Buffer"]=mP(e+"Buffer",e,n,null)}sendCommand(e,t,n){throw new Error('"sendCommand" is not implemented')}},RS=dte.list.filter(r=>r!=="monitor");RS.push("sentinel");RS.forEach(function(r){Ao.prototype[r]=Sa(r,r,"utf8"),Ao.prototype[r+"Buffer"]=Sa(r+"Buffer",r,null)});Ao.prototype.call=Sa("call","utf8");Ao.prototype.callBuffer=Sa("callBuffer",null);Ao.prototype.send_command=Ao.prototype.call;function Sa(r,e,t){return typeof t>"u"&&(t=e,e=null),function(...n){let i=e||n.shift(),s=n[n.length-1];typeof s=="function"?n.pop():s=void 0;let o={errorStack:this.options.showFriendlyErrorStack?new Error:void 0,keyPrefix:this.options.keyPrefix,replyEncoding:t};return(0,F0.shouldUseAutoPipelining)(this,r,i)?(0,F0.executeWithAutoPipelining)(this,r,i,n,s):this.sendCommand(new hte.default(i,n,o,s))}}function mP(r,e,t,n){return function(...i){let s=typeof i[i.length-1]=="function"?i.pop():void 0,o={replyEncoding:n};return this.options.showFriendlyErrorStack&&(o.errorStack=new Error),(0,F0.shouldUseAutoPipelining)(this,r,e)?(0,F0.executeWithAutoPipelining)(this,r,e,i,s):t.execute(this,i,o,s)}}LS.default=Ao});var jS=E(NS=>{"use strict";Object.defineProperty(NS,"__esModule",{value:!0});var DS=k0(),gP=jc(),yP=wa(),mte=require("util"),gte=To(),yte=ln(),vte=V0();function wte(r,e){let t=DS(e[0]),n=r._groupsBySlot[t];for(let i=1;i<e.length;i++)if(r._groupsBySlot[DS(e[i])]!==n)return-1;return t}var _a=class extends vte.default{constructor(e){super(),this.redis=e,this.isPipeline=!0,this.replyPending=0,this._queue=[],this._result=[],this._transactions=0,this._shaToScript={},this.isCluster=this.redis.constructor.name==="Cluster"||this.redis.isCluster,this.options=e.options,Object.keys(e.scriptsSet).forEach(n=>{let i=e.scriptsSet[n];this._shaToScript[i.sha]=i,this[n]=e[n],this[n+"Buffer"]=e[n+"Buffer"]}),e.addedBuiltinSet.forEach(n=>{this[n]=e[n],this[n+"Buffer"]=e[n+"Buffer"]}),this.promise=new Promise((n,i)=>{this.resolve=n,this.reject=i});let t=this;Object.defineProperty(this,"length",{get:function(){return t._queue.length}})}fillResult(e,t){if(this._queue[t].name==="exec"&&Array.isArray(e[1])){let i=e[1].length;for(let s=0;s<i;s++){if(e[1][s]instanceof Error)continue;let o=this._queue[t-(i-s)];try{e[1][s]=o.transformReply(e[1][s])}catch(a){e[1][s]=a}}}if(this._result[t]=e,--this.replyPending)return;if(this.isCluster){let i=!0,s;for(let o=0;o<this._result.length;++o){let a=this._result[o][0],u=this._queue[o];if(a){if(u.name==="exec"&&a.message==="EXECABORT Transaction discarded because of previous errors.")continue;if(!s)s={name:a.name,message:a.message};else if(s.name!==a.name||s.message!==a.message){i=!1;break}}else if(!u.inTransaction&&!((0,gP.exists)(u.name)&&(0,gP.hasFlag)(u.name,"readonly"))){i=!1;break}}if(s&&i){let o=this,a=s.message.split(" "),u=this._queue,c=!1;this._queue=[];for(let m=0;m<u.length;++m){if(a[0]==="ASK"&&!c&&u[m].name!=="asking"&&(!u[m-1]||u[m-1].name!=="asking")){let y=new gte.default("asking");y.ignore=!0,this.sendCommand(y)}u[m].initPromise(),this.sendCommand(u[m]),c=u[m].inTransaction}let d=!0;typeof this.leftRedirections>"u"&&(this.leftRedirections={});let h=function(){o.exec()},p=this.redis;if(p.handleError(s,this.leftRedirections,{moved:function(m,y){o.preferKey=y,p.slots[a[1]]=[y],p._groupsBySlot[a[1]]=p._groupsIds[p.slots[a[1]].join(";")],p.refreshSlotsCache(),o.exec()},ask:function(m,y){o.preferKey=y,o.exec()},tryagain:h,clusterDown:h,connectionClosed:h,maxRedirections:()=>{d=!1},defaults:()=>{d=!1}}),d)return}}let n=0;for(let i=0;i<this._queue.length-n;++i)this._queue[i+n].ignore&&(n+=1),this._result[i]=this._result[i+n];this.resolve(this._result.slice(0,this._result.length-n))}sendCommand(e){this._transactions>0&&(e.inTransaction=!0);let t=this._queue.length;return e.pipelineIndex=t,e.promise.then(n=>{this.fillResult([null,n],t)}).catch(n=>{this.fillResult([n],t)}),this._queue.push(e),this}addBatch(e){let t,n,i;for(let s=0;s<e.length;++s)t=e[s],n=t[0],i=t.slice(1),this[n].apply(this,i);return this}};NS.default=_a;var bte=_a.prototype.multi;_a.prototype.multi=function(){return this._transactions+=1,bte.apply(this,arguments)};var vP=_a.prototype.execBuffer;_a.prototype.execBuffer=(0,mte.deprecate)(function(){return this._transactions>0&&(this._transactions-=1),vP.apply(this,arguments)},"Pipeline#execBuffer: Use Pipeline#exec instead");_a.prototype.exec=function(r){if(this.isCluster&&!this.redis.slots.length)return this.redis.status==="wait"&&this.redis.connect().catch(yte.noop),r&&!this.nodeifiedPromise&&(this.nodeifiedPromise=!0,(0,yP.default)(this.promise,r)),this.redis.delayUntilReady(i=>{if(i){this.reject(i);return}this.exec(r)}),this.promise;if(this._transactions>0)return this._transactions-=1,vP.apply(this,arguments);this.nodeifiedPromise||(this.nodeifiedPromise=!0,(0,yP.default)(this.promise,r)),this._queue.length||this.resolve([]);let e;if(this.isCluster){let i=[];for(let s=0;s<this._queue.length;s++){let o=this._queue[s].getKeys();if(o.length&&i.push(o[0]),o.length&&DS.generateMulti(o)<0)return this.reject(new Error("All the keys in a pipeline command should belong to the same slot")),this.promise}if(i.length){if(e=wte(this.redis,i),e<0)return this.reject(new Error("All keys in the pipeline should belong to the same slots allocation group")),this.promise}else e=Math.random()*16384|0}let t=this;return n(),this.promise;function n(){let i=t.replyPending=t._queue.length,s;t.isCluster&&(s={slot:e,redis:t.redis.connectionPool.nodes.all[t.preferKey]});let o="",a,u={isPipeline:!0,destination:t.isCluster?s:{redis:t.redis},write(c){typeof c!="string"?(a||(a=[]),o&&(a.push(Buffer.from(o,"utf8")),o=""),a.push(c)):o+=c,--i||(a?(o&&a.push(Buffer.from(o,"utf8")),u.destination.redis.stream.write(Buffer.concat(a))):u.destination.redis.stream.write(o),i=t._queue.length,o="",a=void 0)}};for(let c=0;c<t._queue.length;++c)t.redis.sendCommand(t._queue[c],u,s);return t.promise}}});var FS=E(B0=>{"use strict";Object.defineProperty(B0,"__esModule",{value:!0});B0.addTransactionSupport=void 0;var KS=ln(),qS=wa(),wP=jS();function Ste(r){r.pipeline=function(n){let i=new wP.default(this);return Array.isArray(n)&&i.addBatch(n),i};let{multi:e}=r;r.multi=function(n,i){if(typeof i>"u"&&!Array.isArray(n)&&(i=n,n=null),i&&i.pipeline===!1)return e.call(this);let s=new wP.default(this);s.multi(),Array.isArray(n)&&s.addBatch(n);let o=s.exec;s.exec=function(u){if(this.isCluster&&!this.redis.slots.length)return this.redis.status==="wait"&&this.redis.connect().catch(KS.noop),(0,qS.default)(new Promise((d,h)=>{this.redis.delayUntilReady(p=>{if(p){h(p);return}this.exec(s).then(d,h)})}),u);if(this._transactions>0&&o.call(s),this.nodeifiedPromise)return o.call(s);let c=o.call(s);return(0,qS.default)(c.then(function(d){let h=d[d.length-1];if(typeof h>"u")throw new Error("Pipeline cannot be used to send any commands when the `exec()` has been called on it.");if(h[0]){h[0].previousErrors=[];for(let p=0;p<d.length-1;++p)d[p][0]&&h[0].previousErrors.push(d[p][0]);throw h[0]}return(0,KS.wrapMultiResult)(h[1])}),u)};let{execBuffer:a}=s;return s.execBuffer=function(u){return this._transactions>0&&a.call(s),s.exec(u)},s};let{exec:t}=r;r.exec=function(n){return(0,qS.default)(t.call(this).then(function(i){return Array.isArray(i)&&(i=(0,KS.wrapMultiResult)(i)),i}),n)}}B0.addTransactionSupport=Ste});var BS=E(VS=>{"use strict";Object.defineProperty(VS,"__esModule",{value:!0});function _te(r,e){Object.getOwnPropertyNames(e.prototype).forEach(t=>{Object.defineProperty(r.prototype,t,Object.getOwnPropertyDescriptor(e.prototype,t))})}VS.default=_te});var SP=E(U0=>{"use strict";Object.defineProperty(U0,"__esModule",{value:!0});U0.DEFAULT_CLUSTER_OPTIONS=void 0;var bP=require("dns");U0.DEFAULT_CLUSTER_OPTIONS={clusterRetryStrategy:r=>Math.min(100+r*2,2e3),enableOfflineQueue:!0,enableReadyCheck:!0,scaleReads:"master",maxRedirections:16,retryDelayOnMoved:0,retryDelayOnFailover:100,retryDelayOnClusterDown:100,retryDelayOnTryAgain:100,slotsRefreshTimeout:1e3,useSRVRecords:!1,resolveSrv:bP.resolveSrv,dnsLookup:bP.lookup,enableAutoPipelining:!1,autoPipeliningIgnoredCommands:[]}});var G0=E(In=>{"use strict";Object.defineProperty(In,"__esModule",{value:!0});In.getConnectionName=In.weightSrvRecords=In.groupSrvRecords=In.getUniqueHostnamesFromOptions=In.normalizeNodeOptions=In.nodeKeyToRedisOptions=In.getNodeKey=void 0;var _P=ln(),xte=require("net");function Ete(r){return r.port=r.port||6379,r.host=r.host||"127.0.0.1",r.host+":"+r.port}In.getNodeKey=Ete;function Ote(r){let e=r.lastIndexOf(":");if(e===-1)throw new Error(`Invalid node key ${r}`);return{host:r.slice(0,e),port:Number(r.slice(e+1))}}In.nodeKeyToRedisOptions=Ote;function Ite(r){return r.map(e=>{let t={};if(typeof e=="object")Object.assign(t,e);else if(typeof e=="string")Object.assign(t,(0,_P.parseURL)(e));else if(typeof e=="number")t.port=e;else throw new Error("Invalid argument "+e);return typeof t.port=="string"&&(t.port=parseInt(t.port,10)),delete t.db,t.port||(t.port=6379),t.host||(t.host="127.0.0.1"),(0,_P.resolveTLSProfile)(t)})}In.normalizeNodeOptions=Ite;function Cte(r){let e={};return r.forEach(t=>{e[t.host]=!0}),Object.keys(e).filter(t=>!(0,xte.isIP)(t))}In.getUniqueHostnamesFromOptions=Cte;function Tte(r){let e={};for(let t of r)e.hasOwnProperty(t.priority)?(e[t.priority].totalWeight+=t.weight,e[t.priority].records.push(t)):e[t.priority]={totalWeight:t.weight,records:[t]};return e}In.groupSrvRecords=Tte;function Ate(r){if(r.records.length===1)return r.totalWeight=0,r.records.shift();let e=Math.floor(Math.random()*(r.totalWeight+r.records.length)),t=0;for(let[n,i]of r.records.entries())if(t+=1+i.weight,t>e)return r.totalWeight-=i.weight,r.records.splice(n,1),i}In.weightSrvRecords=Ate;function Mte(r,e){let t=`ioredis-cluster(${r})`;return e?`${t}:${e}`:t}In.getConnectionName=Mte});var EP=E($S=>{"use strict";Object.defineProperty($S,"__esModule",{value:!0});var xP=G0(),US=ln(),kte=xa(),Hs=(0,US.Debug)("cluster:subscriber"),GS=class{constructor(e,t){this.connectionPool=e,this.emitter=t,this.started=!1,this.subscriber=null,this.onSubscriberEnd=()=>{if(!this.started){Hs("subscriber has disconnected, but ClusterSubscriber is not started, so not reconnecting.");return}Hs("subscriber has disconnected, selecting a new one..."),this.selectSubscriber()},this.connectionPool.on("-node",(n,i)=>{!this.started||!this.subscriber||(0,xP.getNodeKey)(this.subscriber.options)===i&&(Hs("subscriber has left, selecting a new one..."),this.selectSubscriber())}),this.connectionPool.on("+node",()=>{!this.started||this.subscriber||(Hs("a new node is discovered and there is no subscriber, selecting a new one..."),this.selectSubscriber())})}getInstance(){return this.subscriber}start(){this.started=!0,this.selectSubscriber(),Hs("started")}stop(){this.started=!1,this.subscriber&&(this.subscriber.disconnect(),this.subscriber=null),Hs("stopped")}selectSubscriber(){let e=this.lastActiveSubscriber;e&&(e.off("end",this.onSubscriberEnd),e.disconnect()),this.subscriber&&(this.subscriber.off("end",this.onSubscriberEnd),this.subscriber.disconnect());let t=(0,US.sample)(this.connectionPool.getNodes());if(!t){Hs("selecting subscriber failed since there is no node discovered in the cluster yet"),this.subscriber=null;return}let{options:n}=t;Hs("selected a subscriber %s:%s",n.host,n.port),this.subscriber=new kte.default({port:n.port,host:n.host,username:n.username,password:n.password,enableReadyCheck:!0,connectionName:(0,xP.getConnectionName)("subscriber",n.connectionName),lazyConnect:!0,tls:n.tls,retryStrategy:null}),this.subscriber.on("error",US.noop),this.subscriber.once("end",this.onSubscriberEnd);let i={subscribe:[],psubscribe:[],ssubscribe:[]};if(e){let s=e.condition||e.prevCondition;s&&s.subscriber&&(i.subscribe=s.subscriber.channels("subscribe"),i.psubscribe=s.subscriber.channels("psubscribe"),i.ssubscribe=s.subscriber.channels("ssubscribe"))}if(i.subscribe.length||i.psubscribe.length||i.ssubscribe.length){let s=0;for(let o of["subscribe","psubscribe","ssubscribe"]){let a=i[o];a.length&&(s+=1,Hs("%s %d channels",o,a.length),this.subscriber[o](a).then(()=>{--s||(this.lastActiveSubscriber=this.subscriber)}).catch(()=>{Hs("failed to %s %d channels",o,a.length)}))}}else this.lastActiveSubscriber=this.subscriber;for(let s of["message","messageBuffer","smessage","smessageBuffer"])this.subscriber.on(s,(o,a)=>{this.emitter.emit(s,o,a)});for(let s of["pmessage","pmessageBuffer"])this.subscriber.on(s,(o,a,u)=>{this.emitter.emit(s,o,a,u)})}};$S.default=GS});var IP=E(zS=>{"use strict";Object.defineProperty(zS,"__esModule",{value:!0});var Pte=require("events"),$0=ln(),OP=G0(),Rte=xa(),hh=(0,$0.Debug)("cluster:connectionPool"),WS=class extends Pte.EventEmitter{constructor(e){super(),this.redisOptions=e,this.nodes={all:{},master:{},slave:{}},this.specifiedOptions={}}getNodes(e="all"){let t=this.nodes[e];return Object.keys(t).map(n=>t[n])}getInstanceByKey(e){return this.nodes.all[e]}getSampleInstance(e){let t=Object.keys(this.nodes[e]),n=(0,$0.sample)(t);return this.nodes[e][n]}findOrCreate(e,t=!1){let n=(0,OP.getNodeKey)(e);t=!!t,this.specifiedOptions[n]?Object.assign(e,this.specifiedOptions[n]):this.specifiedOptions[n]=e;let i;return this.nodes.all[n]?(i=this.nodes.all[n],i.options.readOnly!==t&&(i.options.readOnly=t,hh("Change role of %s to %s",n,t?"slave":"master"),i[t?"readonly":"readwrite"]().catch($0.noop),t?(delete this.nodes.master[n],this.nodes.slave[n]=i):(delete this.nodes.slave[n],this.nodes.master[n]=i))):(hh("Connecting to %s as %s",n,t?"slave":"master"),i=new Rte.default((0,$0.defaults)({retryStrategy:null,enableOfflineQueue:!0,readOnly:t},e,this.redisOptions,{lazyConnect:!0})),this.nodes.all[n]=i,this.nodes[t?"slave":"master"][n]=i,i.once("end",()=>{this.removeNode(n),this.emit("-node",i,n),Object.keys(this.nodes.all).length||this.emit("drain")}),this.emit("+node",i,n),i.on("error",function(s){this.emit("nodeError",s,n)})),i}reset(e){hh("Reset with %O",e);let t={};e.forEach(n=>{let i=(0,OP.getNodeKey)(n);n.readOnly&&t[i]||(t[i]=n)}),Object.keys(this.nodes.all).forEach(n=>{t[n]||(hh("Disconnect %s because the node does not hold any slot",n),this.nodes.all[n].disconnect(),this.removeNode(n))}),Object.keys(t).forEach(n=>{let i=t[n];this.findOrCreate(i,i.readOnly)})}removeNode(e){let{nodes:t}=this;t.all[e]&&(hh("Remove %s from the pool",e),delete t.all[e]),delete t.master[e],delete t.slave[e]}};zS.default=WS});var W0=E((lTe,CP)=>{"use strict";function fr(r,t){var t=t||{};this._capacity=t.capacity,this._head=0,this._tail=0,Array.isArray(r)?this._fromArray(r):(this._capacityMask=3,this._list=new Array(4))}fr.prototype.peekAt=function(e){var t=e;if(t===(t|0)){var n=this.size();if(!(t>=n||t<-n))return t<0&&(t+=n),t=this._head+t&this._capacityMask,this._list[t]}};fr.prototype.get=function(e){return this.peekAt(e)};fr.prototype.peek=function(){if(this._head!==this._tail)return this._list[this._head]};fr.prototype.peekFront=function(){return this.peek()};fr.prototype.peekBack=function(){return this.peekAt(-1)};Object.defineProperty(fr.prototype,"length",{get:function(){return this.size()}});fr.prototype.size=function(){return this._head===this._tail?0:this._head<this._tail?this._tail-this._head:this._capacityMask+1-(this._head-this._tail)};fr.prototype.unshift=function(e){if(arguments.length===0)return this.size();var t=this._list.length;return this._head=this._head-1+t&this._capacityMask,this._list[this._head]=e,this._tail===this._head&&this._growArray(),this._capacity&&this.size()>this._capacity&&this.pop(),this._head<this._tail?this._tail-this._head:this._capacityMask+1-(this._head-this._tail)};fr.prototype.shift=function(){var e=this._head;if(e!==this._tail){var t=this._list[e];return this._list[e]=void 0,this._head=e+1&this._capacityMask,e<2&&this._tail>1e4&&this._tail<=this._list.length>>>2&&this._shrinkArray(),t}};fr.prototype.push=function(e){if(arguments.length===0)return this.size();var t=this._tail;return this._list[t]=e,this._tail=t+1&this._capacityMask,this._tail===this._head&&this._growArray(),this._capacity&&this.size()>this._capacity&&this.shift(),this._head<this._tail?this._tail-this._head:this._capacityMask+1-(this._head-this._tail)};fr.prototype.pop=function(){var e=this._tail;if(e!==this._head){var t=this._list.length;this._tail=e-1+t&this._capacityMask;var n=this._list[this._tail];return this._list[this._tail]=void 0,this._head<2&&e>1e4&&e<=t>>>2&&this._shrinkArray(),n}};fr.prototype.removeOne=function(e){var t=e;if(t===(t|0)&&this._head!==this._tail){var n=this.size(),i=this._list.length;if(!(t>=n||t<-n)){t<0&&(t+=n),t=this._head+t&this._capacityMask;var s=this._list[t],o;if(e<n/2){for(o=e;o>0;o--)this._list[t]=this._list[t=t-1+i&this._capacityMask];this._list[t]=void 0,this._head=this._head+1+i&this._capacityMask}else{for(o=n-1-e;o>0;o--)this._list[t]=this._list[t=t+1+i&this._capacityMask];this._list[t]=void 0,this._tail=this._tail-1+i&this._capacityMask}return s}}};fr.prototype.remove=function(e,t){var n=e,i,s=t;if(n===(n|0)&&this._head!==this._tail){var o=this.size(),a=this._list.length;if(!(n>=o||n<-o||t<1)){if(n<0&&(n+=o),t===1||!t)return i=new Array(1),i[0]=this.removeOne(n),i;if(n===0&&n+t>=o)return i=this.toArray(),this.clear(),i;n+t>o&&(t=o-n);var u;for(i=new Array(t),u=0;u<t;u++)i[u]=this._list[this._head+n+u&this._capacityMask];if(n=this._head+n&this._capacityMask,e+t===o){for(this._tail=this._tail-t+a&this._capacityMask,u=t;u>0;u--)this._list[n=n+1+a&this._capacityMask]=void 0;return i}if(e===0){for(this._head=this._head+t+a&this._capacityMask,u=t-1;u>0;u--)this._list[n=n+1+a&this._capacityMask]=void 0;return i}if(n<o/2){for(this._head=this._head+e+t+a&this._capacityMask,u=e;u>0;u--)this.unshift(this._list[n=n-1+a&this._capacityMask]);for(n=this._head-1+a&this._capacityMask;s>0;)this._list[n=n-1+a&this._capacityMask]=void 0,s--;e<0&&(this._tail=n)}else{for(this._tail=n,n=n+t+a&this._capacityMask,u=o-(t+e);u>0;u--)this.push(this._list[n++]);for(n=this._tail;s>0;)this._list[n=n+1+a&this._capacityMask]=void 0,s--}return this._head<2&&this._tail>1e4&&this._tail<=a>>>2&&this._shrinkArray(),i}}};fr.prototype.splice=function(e,t){var n=e;if(n===(n|0)){var i=this.size();if(n<0&&(n+=i),!(n>i))if(arguments.length>2){var s,o,a,u=arguments.length,c=this._list.length,d=2;if(!i||n<i/2){for(o=new Array(n),s=0;s<n;s++)o[s]=this._list[this._head+s&this._capacityMask];for(t===0?(a=[],n>0&&(this._head=this._head+n+c&this._capacityMask)):(a=this.remove(n,t),this._head=this._head+n+c&this._capacityMask);u>d;)this.unshift(arguments[--u]);for(s=n;s>0;s--)this.unshift(o[s-1])}else{o=new Array(i-(n+t));var h=o.length;for(s=0;s<h;s++)o[s]=this._list[this._head+n+t+s&this._capacityMask];for(t===0?(a=[],n!=i&&(this._tail=this._head+n+c&this._capacityMask)):(a=this.remove(n,t),this._tail=this._tail-h+c&this._capacityMask);d<u;)this.push(arguments[d++]);for(s=0;s<h;s++)this.push(o[s])}return a}else return this.remove(n,t)}};fr.prototype.clear=function(){this._list=new Array(this._list.length),this._head=0,this._tail=0};fr.prototype.isEmpty=function(){return this._head===this._tail};fr.prototype.toArray=function(){return this._copyArray(!1)};fr.prototype._fromArray=function(e){var t=e.length,n=this._nextPowerOf2(t);this._list=new Array(n),this._capacityMask=n-1,this._tail=t;for(var i=0;i<t;i++)this._list[i]=e[i]};fr.prototype._copyArray=function(e,t){var n=this._list,i=n.length,s=this.length;if(t=t|s,t==s&&this._head<this._tail)return this._list.slice(this._head,this._tail);var o=new Array(t),a=0,u;if(e||this._head>this._tail){for(u=this._head;u<i;u++)o[a++]=n[u];for(u=0;u<this._tail;u++)o[a++]=n[u]}else for(u=this._head;u<this._tail;u++)o[a++]=n[u];return o};fr.prototype._growArray=function(){if(this._head!=0){var e=this._copyArray(!0,this._list.length<<1);this._tail=this._list.length,this._head=0,this._list=e}else this._tail=this._list.length,this._list.length<<=1;this._capacityMask=this._capacityMask<<1|1};fr.prototype._shrinkArray=function(){this._list.length>>>=1,this._capacityMask>>>=1};fr.prototype._nextPowerOf2=function(e){var t=Math.log(e)/Math.log(2),n=1<<t+1;return Math.max(n,4)};CP.exports=fr});var TP=E(YS=>{"use strict";Object.defineProperty(YS,"__esModule",{value:!0});var Lte=ln(),Dte=W0(),Nte=(0,Lte.Debug)("delayqueue"),HS=class{constructor(){this.queues={},this.timeouts={}}push(e,t,n){let i=n.callback||process.nextTick;this.queues[e]||(this.queues[e]=new Dte),this.queues[e].push(t),this.timeouts[e]||(this.timeouts[e]=setTimeout(()=>{i(()=>{this.timeouts[e]=null,this.execute(e)})},n.timeout))}execute(e){let t=this.queues[e];if(!t)return;let{length:n}=t;if(n)for(Nte("send %d commands in %s queue",n,e),this.queues[e]=null;t.length>0;)t.shift()()}};YS.default=HS});var ZS=E(QS=>{"use strict";Object.defineProperty(QS,"__esModule",{value:!0});var AP=jc(),LP=require("events"),z0=Ql(),MP=wa(),kP=To(),JS=aP(),jte=xa(),Kte=q0(),qte=FS(),Si=ln(),Fte=BS(),Vte=V0(),Bte=SP(),Ute=EP(),Gte=IP(),$te=TP(),$c=G0(),PP=W0(),Pr=(0,Si.Debug)("cluster"),RP=new WeakSet,ph=class r extends Vte.default{constructor(e,t={}){if(super(),this.slots=[],this._groupsIds={},this._groupsBySlot=Array(16384),this.isCluster=!0,this.retryAttempts=0,this.delayQueue=new $te.default,this.offlineQueue=new PP,this.isRefreshing=!1,this._autoPipelines=new Map,this._runningAutoPipelines=new Set,this._readyDelayedCallbacks=[],this.connectionEpoch=0,LP.EventEmitter.call(this),this.startupNodes=e,this.options=(0,Si.defaults)({},t,Bte.DEFAULT_CLUSTER_OPTIONS,this.options),this.options.redisOptions&&this.options.redisOptions.keyPrefix&&!this.options.keyPrefix&&(this.options.keyPrefix=this.options.redisOptions.keyPrefix),typeof this.options.scaleReads!="function"&&["all","master","slave"].indexOf(this.options.scaleReads)===-1)throw new Error('Invalid option scaleReads "'+this.options.scaleReads+'". Expected "all", "master", "slave" or a custom function');this.connectionPool=new Gte.default(this.options.redisOptions),this.connectionPool.on("-node",(n,i)=>{this.emit("-node",n)}),this.connectionPool.on("+node",n=>{this.emit("+node",n)}),this.connectionPool.on("drain",()=>{this.setStatus("close")}),this.connectionPool.on("nodeError",(n,i)=>{this.emit("node error",n,i)}),this.subscriber=new Ute.default(this.connectionPool,this),this.options.scripts&&Object.entries(this.options.scripts).forEach(([n,i])=>{this.defineCommand(n,i)}),this.options.lazyConnect?this.setStatus("wait"):this.connect().catch(n=>{Pr("connecting failed: %s",n)})}connect(){return new Promise((e,t)=>{if(this.status==="connecting"||this.status==="connect"||this.status==="ready"){t(new Error("Redis is already connecting/connected"));return}let n=++this.connectionEpoch;this.setStatus("connecting"),this.resolveStartupNodeHostnames().then(i=>{if(this.connectionEpoch!==n){Pr("discard connecting after resolving startup nodes because epoch not match: %d != %d",n,this.connectionEpoch),t(new z0.RedisError("Connection is discarded because a new connection is made"));return}if(this.status!=="connecting"){Pr("discard connecting after resolving startup nodes because the status changed to %s",this.status),t(new z0.RedisError("Connection is aborted"));return}this.connectionPool.reset(i);let s=()=>{this.setStatus("ready"),this.retryAttempts=0,this.executeOfflineCommands(),this.resetNodesRefreshInterval(),e()},o,a=()=>{this.invokeReadyDelayedCallbacks(void 0),this.removeListener("close",o),this.manuallyClosing=!1,this.setStatus("connect"),this.options.enableReadyCheck?this.readyCheck((u,c)=>{u||c?(Pr("Ready check failed (%s). Reconnecting...",u||c),this.status==="connect"&&this.disconnect(!0)):s()}):s()};o=()=>{let u=new Error("None of startup nodes is available");this.removeListener("refresh",a),this.invokeReadyDelayedCallbacks(u),t(u)},this.once("refresh",a),this.once("close",o),this.once("close",this.handleCloseEvent.bind(this)),this.refreshSlotsCache(u=>{u&&u.message===JS.default.defaultMessage&&(jte.default.prototype.silentEmit.call(this,"error",u),this.connectionPool.reset([]))}),this.subscriber.start()}).catch(i=>{this.setStatus("close"),this.handleCloseEvent(i),this.invokeReadyDelayedCallbacks(i),t(i)})})}disconnect(e=!1){let t=this.status;this.setStatus("disconnecting"),e||(this.manuallyClosing=!0),this.reconnectTimeout&&!e&&(clearTimeout(this.reconnectTimeout),this.reconnectTimeout=null,Pr("Canceled reconnecting attempts")),this.clearNodesRefreshInterval(),this.subscriber.stop(),t==="wait"?(this.setStatus("close"),this.handleCloseEvent()):this.connectionPool.reset([])}quit(e){let t=this.status;if(this.setStatus("disconnecting"),this.manuallyClosing=!0,this.reconnectTimeout&&(clearTimeout(this.reconnectTimeout),this.reconnectTimeout=null),this.clearNodesRefreshInterval(),this.subscriber.stop(),t==="wait"){let n=(0,MP.default)(Promise.resolve("OK"),e);return setImmediate(function(){this.setStatus("close"),this.handleCloseEvent()}.bind(this)),n}return(0,MP.default)(Promise.all(this.nodes().map(n=>n.quit().catch(i=>{if(i.message===Si.CONNECTION_CLOSED_ERROR_MSG)return"OK";throw i}))).then(()=>"OK"),e)}duplicate(e=[],t={}){let n=e.length>0?e:this.startupNodes.slice(0),i=Object.assign({},this.options,t);return new r(n,i)}nodes(e="all"){if(e!=="all"&&e!=="master"&&e!=="slave")throw new Error('Invalid role "'+e+'". Expected "all", "master" or "slave"');return this.connectionPool.getNodes(e)}delayUntilReady(e){this._readyDelayedCallbacks.push(e)}get autoPipelineQueueSize(){let e=0;for(let t of this._autoPipelines.values())e+=t.length;return e}refreshSlotsCache(e){if(this.isRefreshing){e&&process.nextTick(e);return}this.isRefreshing=!0;let t=this,n=a=>{this.isRefreshing=!1,e&&e(a)},i=(0,Si.shuffle)(this.connectionPool.getNodes()),s=null;function o(a){if(a===i.length){let d=new JS.default(JS.default.defaultMessage,s);return n(d)}let u=i[a],c=`${u.options.host}:${u.options.port}`;Pr("getting slot cache from %s",c),t.getInfoFromNode(u,function(d){switch(t.status){case"close":case"end":return n(new Error("Cluster is disconnected."));case"disconnecting":return n(new Error("Cluster is disconnecting."))}d?(t.emit("node error",d,c),s=d,o(a+1)):(t.emit("refresh"),n())})}o(0)}sendCommand(e,t,n){if(this.status==="wait"&&this.connect().catch(Si.noop),this.status==="end")return e.reject(new Error(Si.CONNECTION_CLOSED_ERROR_MSG)),e.promise;let i=this.options.scaleReads;i!=="master"&&(e.isReadOnly||(0,AP.exists)(e.name)&&(0,AP.hasFlag)(e.name,"readonly")||(i="master"));let s=n?n.slot:e.getSlot(),o={},a=this;if(!n&&!RP.has(e)){RP.add(e);let c=e.reject;e.reject=function(d){let h=u.bind(null,!0);a.handleError(d,o,{moved:function(p,m){Pr("command %s is moved to %s",e.name,m),s=Number(p),a.slots[p]?a.slots[p][0]=m:a.slots[p]=[m],a._groupsBySlot[p]=a._groupsIds[a.slots[p].join(";")],a.connectionPool.findOrCreate(a.natMapper(m)),u(),Pr("refreshing slot caches... (triggered by MOVED error)"),a.refreshSlotsCache()},ask:function(p,m){Pr("command %s is required to ask %s:%s",e.name,m);let y=a.natMapper(m);a.connectionPool.findOrCreate(y),u(!1,`${y.host}:${y.port}`)},tryagain:h,clusterDown:h,connectionClosed:h,maxRedirections:function(p){c.call(e,p)},defaults:function(){c.call(e,d)}})}}u();function u(c,d){if(a.status==="end"){e.reject(new z0.AbortError("Cluster is ended."));return}let h;if(a.status==="ready"||e.name==="cluster"){if(n&&n.redis)h=n.redis;else if(kP.default.checkFlag("ENTER_SUBSCRIBER_MODE",e.name)||kP.default.checkFlag("EXIT_SUBSCRIBER_MODE",e.name)){if(h=a.subscriber.getInstance(),!h){e.reject(new z0.AbortError("No subscriber for the cluster"));return}}else{if(!c){if(typeof s=="number"&&a.slots[s]){let p=a.slots[s];if(typeof i=="function"){let m=p.map(function(y){return a.connectionPool.getInstanceByKey(y)});h=i(m,e),Array.isArray(h)&&(h=(0,Si.sample)(h)),h||(h=m[0])}else{let m;i==="all"?m=(0,Si.sample)(p):i==="slave"&&p.length>1?m=(0,Si.sample)(p,1):m=p[0],h=a.connectionPool.getInstanceByKey(m)}}d&&(h=a.connectionPool.getInstanceByKey(d),h.asking())}h||(h=(typeof i=="function"?null:a.connectionPool.getSampleInstance(i))||a.connectionPool.getSampleInstance("all"))}n&&!n.redis&&(n.redis=h)}h?h.sendCommand(e,t):a.options.enableOfflineQueue?a.offlineQueue.push({command:e,stream:t,node:n}):e.reject(new Error("Cluster isn't ready and enableOfflineQueue options is false"))}return e.promise}sscanStream(e,t){return this.createScanStream("sscan",{key:e,options:t})}sscanBufferStream(e,t){return this.createScanStream("sscanBuffer",{key:e,options:t})}hscanStream(e,t){return this.createScanStream("hscan",{key:e,options:t})}hscanBufferStream(e,t){return this.createScanStream("hscanBuffer",{key:e,options:t})}zscanStream(e,t){return this.createScanStream("zscan",{key:e,options:t})}zscanBufferStream(e,t){return this.createScanStream("zscanBuffer",{key:e,options:t})}handleError(e,t,n){if(typeof t.value>"u"?t.value=this.options.maxRedirections:t.value-=1,t.value<=0){n.maxRedirections(new Error("Too many Cluster redirections. Last error: "+e));return}let i=e.message.split(" ");if(i[0]==="MOVED"){let s=this.options.retryDelayOnMoved;s&&typeof s=="number"?this.delayQueue.push("moved",n.moved.bind(null,i[1],i[2]),{timeout:s}):n.moved(i[1],i[2])}else i[0]==="ASK"?n.ask(i[1],i[2]):i[0]==="TRYAGAIN"?this.delayQueue.push("tryagain",n.tryagain,{timeout:this.options.retryDelayOnTryAgain}):i[0]==="CLUSTERDOWN"&&this.options.retryDelayOnClusterDown>0?this.delayQueue.push("clusterdown",n.connectionClosed,{timeout:this.options.retryDelayOnClusterDown,callback:this.refreshSlotsCache.bind(this)}):e.message===Si.CONNECTION_CLOSED_ERROR_MSG&&this.options.retryDelayOnFailover>0&&this.status==="ready"?this.delayQueue.push("failover",n.connectionClosed,{timeout:this.options.retryDelayOnFailover,callback:this.refreshSlotsCache.bind(this)}):n.defaults()}resetOfflineQueue(){this.offlineQueue=new PP}clearNodesRefreshInterval(){this.slotsTimer&&(clearTimeout(this.slotsTimer),this.slotsTimer=null)}resetNodesRefreshInterval(){if(this.slotsTimer||!this.options.slotsRefreshInterval)return;let e=()=>{this.slotsTimer=setTimeout(()=>{Pr('refreshing slot caches... (triggered by "slotsRefreshInterval" option)'),this.refreshSlotsCache(()=>{e()})},this.options.slotsRefreshInterval)};e()}setStatus(e){Pr("status: %s -> %s",this.status||"[empty]",e),this.status=e,process.nextTick(()=>{this.emit(e)})}handleCloseEvent(e){e&&Pr("closed because %s",e);let t;!this.manuallyClosing&&typeof this.options.clusterRetryStrategy=="function"&&(t=this.options.clusterRetryStrategy.call(this,++this.retryAttempts,e)),typeof t=="number"?(this.setStatus("reconnecting"),this.reconnectTimeout=setTimeout(()=>{this.reconnectTimeout=null,Pr("Cluster is disconnected. Retrying after %dms",t),this.connect().catch(function(n){Pr("Got error %s when reconnecting. Ignoring...",n)})},t)):(this.setStatus("end"),this.flushQueue(new Error("None of startup nodes is available")))}flushQueue(e){let t;for(;t=this.offlineQueue.shift();)t.command.reject(e)}executeOfflineCommands(){if(this.offlineQueue.length){Pr("send %d commands in offline queue",this.offlineQueue.length);let e=this.offlineQueue;this.resetOfflineQueue();let t;for(;t=e.shift();)this.sendCommand(t.command,t.stream,t.node)}}natMapper(e){if(this.options.natMap&&typeof this.options.natMap=="object"){let t=typeof e=="string"?e:`${e.host}:${e.port}`,n=this.options.natMap[t];if(n)return Pr("NAT mapping %s -> %O",t,n),Object.assign({},n)}return typeof e=="string"?(0,$c.nodeKeyToRedisOptions)(e):e}getInfoFromNode(e,t){if(!e)return t(new Error("Node is disconnected"));let n=e.duplicate({enableOfflineQueue:!0,enableReadyCheck:!1,retryStrategy:null,connectionName:(0,$c.getConnectionName)("refresher",this.options.redisOptions&&this.options.redisOptions.connectionName)});n.on("error",Si.noop),n.cluster("SLOTS",(0,Si.timeout)((i,s)=>{if(n.disconnect(),i)return t(i);if(this.status==="disconnecting"||this.status==="close"||this.status==="end"){Pr("ignore CLUSTER.SLOTS results (count: %d) since cluster status is %s",s.length,this.status),t();return}let o=[];Pr("cluster slots result count: %d",s.length);for(let u=0;u<s.length;++u){let c=s[u],d=c[0],h=c[1],p=[];for(let m=2;m<c.length;m++){if(!c[m][0])continue;let y=this.natMapper({host:c[m][0],port:c[m][1]});y.readOnly=m!==2,o.push(y),p.push(y.host+":"+y.port)}Pr("cluster slots result [%d]: slots %d~%d served by %s",u,d,h,p);for(let m=d;m<=h;m++)this.slots[m]=p}this._groupsIds=Object.create(null);let a=0;for(let u=0;u<16384;u++){let c=(this.slots[u]||[]).join(";");if(!c.length){this._groupsBySlot[u]=void 0;continue}this._groupsIds[c]||(this._groupsIds[c]=++a),this._groupsBySlot[u]=this._groupsIds[c]}this.connectionPool.reset(o),t()},this.options.slotsRefreshTimeout))}invokeReadyDelayedCallbacks(e){for(let t of this._readyDelayedCallbacks)process.nextTick(t,e);this._readyDelayedCallbacks=[]}readyCheck(e){this.cluster("INFO",(t,n)=>{if(t)return e(t);if(typeof n!="string")return e();let i,s=n.split(`\r
`);for(let o=0;o<s.length;++o){let a=s[o].split(":");if(a[0]==="cluster_state"){i=a[1];break}}i==="fail"?(Pr("cluster state not ok (%s)",i),e(null,i)):e()})}resolveSrv(e){return new Promise((t,n)=>{this.options.resolveSrv(e,(i,s)=>{if(i)return n(i);let o=this,a=(0,$c.groupSrvRecords)(s),u=Object.keys(a).sort((d,h)=>parseInt(d)-parseInt(h));function c(d){if(!u.length)return n(d);let h=u[0],p=a[h],m=(0,$c.weightSrvRecords)(p);p.records.length||u.shift(),o.dnsLookup(m.name).then(y=>t({host:y,port:m.port}),c)}c()})})}dnsLookup(e){return new Promise((t,n)=>{this.options.dnsLookup(e,(i,s)=>{i?(Pr("failed to resolve hostname %s to IP: %s",e,i.message),n(i)):(Pr("resolved hostname %s to IP %s",e,s),t(s))})})}async resolveStartupNodeHostnames(){if(!Array.isArray(this.startupNodes)||this.startupNodes.length===0)throw new Error("`startupNodes` should contain at least one node.");let e=(0,$c.normalizeNodeOptions)(this.startupNodes),t=(0,$c.getUniqueHostnamesFromOptions)(e);if(t.length===0)return e;let n=await Promise.all(t.map((this.options.useSRVRecords?this.resolveSrv:this.dnsLookup).bind(this))),i=(0,Si.zipMap)(t,n);return e.map(s=>{let o=i.get(s.host);return o?this.options.useSRVRecords?Object.assign({},s,o):Object.assign({},s,{host:o}):s})}createScanStream(e,{key:t,options:n={}}){return new Kte.default({objectMode:!0,key:t,redis:this,command:e,...n})}};(0,Fte.default)(ph,LP.EventEmitter);(0,qte.addTransactionSupport)(ph.prototype);QS.default=ph});var H0=E(e_=>{"use strict";Object.defineProperty(e_,"__esModule",{value:!0});var Wte=ln(),zte=(0,Wte.Debug)("AbstractConnector"),XS=class{constructor(e){this.connecting=!1,this.disconnectTimeout=e}check(e){return!0}disconnect(){if(this.connecting=!1,this.stream){let e=this.stream,t=setTimeout(()=>{zte("stream %s:%s still open, destroying it",e.remoteAddress,e.remotePort),e.destroy()},this.disconnectTimeout);e.on("close",()=>clearTimeout(t)),e.end()}}};e_.default=XS});var DP=E(r_=>{"use strict";Object.defineProperty(r_,"__esModule",{value:!0});var Hte=require("net"),Yte=require("tls"),Jte=ln(),Qte=H0(),t_=class extends Qte.default{constructor(e){super(e.disconnectTimeout),this.options=e}connect(e){let{options:t}=this;this.connecting=!0;let n;return"path"in t&&t.path?n={path:t.path}:(n={},"port"in t&&t.port!=null&&(n.port=t.port),"host"in t&&t.host!=null&&(n.host=t.host),"family"in t&&t.family!=null&&(n.family=t.family)),t.tls&&Object.assign(n,t.tls),new Promise((i,s)=>{process.nextTick(()=>{if(!this.connecting){s(new Error(Jte.CONNECTION_CLOSED_ERROR_MSG));return}try{t.tls?this.stream=(0,Yte.connect)(n):this.stream=(0,Hte.createConnection)(n)}catch(o){s(o);return}this.stream.once("error",o=>{this.firstError=o}),i(this.stream)})})}};r_.default=t_});var NP=E(i_=>{"use strict";Object.defineProperty(i_,"__esModule",{value:!0});function Zte(r,e){return(r.host||"127.0.0.1")===(e.host||"127.0.0.1")&&(r.port||26379)===(e.port||26379)}var n_=class{constructor(e){this.cursor=0,this.sentinels=e.slice(0)}next(){let e=this.cursor>=this.sentinels.length;return{done:e,value:e?void 0:this.sentinels[this.cursor++]}}reset(e){e&&this.sentinels.length>1&&this.cursor!==1&&this.sentinels.unshift(...this.sentinels.splice(this.cursor-1)),this.cursor=0}add(e){for(let t=0;t<this.sentinels.length;t++)if(Zte(e,this.sentinels[t]))return!1;return this.sentinels.push(e),!0}toString(){return`${JSON.stringify(this.sentinels)} @${this.cursor}`}};i_.default=n_});var KP=E(Y0=>{"use strict";Object.defineProperty(Y0,"__esModule",{value:!0});Y0.FailoverDetector=void 0;var Xte=ln(),s_=(0,Xte.Debug)("FailoverDetector"),jP="+switch-master",o_=class{constructor(e,t){this.isDisconnected=!1,this.connector=e,this.sentinels=t}cleanup(){this.isDisconnected=!0;for(let e of this.sentinels)e.client.disconnect()}async subscribe(){s_("Starting FailoverDetector");let e=[];for(let t of this.sentinels){let n=t.client.subscribe(jP).catch(i=>{s_("Failed to subscribe to failover messages on sentinel %s:%s (%s)",t.address.host||"127.0.0.1",t.address.port||26739,i.message)});e.push(n),t.client.on("message",i=>{!this.isDisconnected&&i===jP&&this.disconnect()})}await Promise.all(e)}disconnect(){this.isDisconnected=!0,s_("Failover detected, disconnecting"),this.connector.disconnect()}};Y0.FailoverDetector=o_});var J0=E(gh=>{"use strict";Object.defineProperty(gh,"__esModule",{value:!0});gh.SentinelIterator=void 0;var ere=require("net"),mh=ln(),tre=require("tls"),qP=NP();gh.SentinelIterator=qP.default;var rre=H0(),nre=xa(),ire=KP(),Wc=(0,mh.Debug)("SentinelConnector"),a_=class extends rre.default{constructor(e){if(super(e.disconnectTimeout),this.options=e,this.emitter=null,this.failoverDetector=null,!this.options.sentinels.length)throw new Error("Requires at least one sentinel to connect to.");if(!this.options.name)throw new Error("Requires the name of master.");this.sentinelIterator=new qP.default(this.options.sentinels)}check(e){let t=!e.role||this.options.role===e.role;return t||(Wc("role invalid, expected %s, but got %s",this.options.role,e.role),this.sentinelIterator.next(),this.sentinelIterator.next(),this.sentinelIterator.reset(!0)),t}disconnect(){super.disconnect(),this.failoverDetector&&this.failoverDetector.cleanup()}connect(e){this.connecting=!0,this.retryAttempts=0;let t,n=async()=>{let i=this.sentinelIterator.next();if(i.done){this.sentinelIterator.reset(!1);let u=typeof this.options.sentinelRetryStrategy=="function"?this.options.sentinelRetryStrategy(++this.retryAttempts):null,c=typeof u!="number"?"All sentinels are unreachable and retry is disabled.":`All sentinels are unreachable. Retrying from scratch after ${u}ms.`;t&&(c+=` Last error: ${t.message}`),Wc(c);let d=new Error(c);if(typeof u=="number")return e("error",d),await new Promise(h=>setTimeout(h,u)),n();throw d}let s=null,o=null;try{s=await this.resolve(i.value)}catch(u){o=u}if(!this.connecting)throw new Error(mh.CONNECTION_CLOSED_ERROR_MSG);let a=i.value.host+":"+i.value.port;if(s)return Wc("resolved: %s:%s from sentinel %s",s.host,s.port,a),this.options.enableTLSForSentinelMode&&this.options.tls?(Object.assign(s,this.options.tls),this.stream=(0,tre.connect)(s),this.stream.once("secureConnect",this.initFailoverDetector.bind(this))):(this.stream=(0,ere.createConnection)(s),this.stream.once("connect",this.initFailoverDetector.bind(this))),this.stream.once("error",u=>{this.firstError=u}),this.stream;{let u=o?"failed to connect to sentinel "+a+" because "+o.message:"connected to sentinel "+a+" successfully, but got an invalid reply: "+s;return Wc(u),e("sentinelError",new Error(u)),o&&(t=o),n()}};return n()}async updateSentinels(e){if(!this.options.updateSentinels)return;let t=await e.sentinel("sentinels",this.options.name);Array.isArray(t)&&(t.map(mh.packObject).forEach(n=>{if((n.flags?n.flags.split(","):[]).indexOf("disconnected")===-1&&n.ip&&n.port){let s=this.sentinelNatResolve(FP(n));this.sentinelIterator.add(s)&&Wc("adding sentinel %s:%s",s.host,s.port)}}),Wc("Updated internal sentinels: %s",this.sentinelIterator))}async resolveMaster(e){let t=await e.sentinel("get-master-addr-by-name",this.options.name);return await this.updateSentinels(e),this.sentinelNatResolve(Array.isArray(t)?{host:t[0],port:Number(t[1])}:null)}async resolveSlave(e){let t=await e.sentinel("slaves",this.options.name);if(!Array.isArray(t))return null;let n=t.map(mh.packObject).filter(i=>i.flags&&!i.flags.match(/(disconnected|s_down|o_down)/));return this.sentinelNatResolve(sre(n,this.options.preferredSlaves))}sentinelNatResolve(e){return!e||!this.options.natMap?e:this.options.natMap[`${e.host}:${e.port}`]||e}connectToSentinel(e,t){return new nre.default({port:e.port||26379,host:e.host,username:this.options.sentinelUsername||null,password:this.options.sentinelPassword||null,family:e.family||("path"in this.options&&this.options.path?void 0:this.options.family),tls:this.options.sentinelTLS,retryStrategy:null,enableReadyCheck:!1,connectTimeout:this.options.connectTimeout,commandTimeout:this.options.sentinelCommandTimeout,...t})}async resolve(e){let t=this.connectToSentinel(e);t.on("error",ore);try{return this.options.role==="slave"?await this.resolveSlave(t):await this.resolveMaster(t)}finally{t.disconnect()}}async initFailoverDetector(){var e;if(!this.options.failoverDetector)return;this.sentinelIterator.reset(!0);let t=[];for(;t.length<this.options.sentinelMaxConnections;){let{done:n,value:i}=this.sentinelIterator.next();if(n)break;let s=this.connectToSentinel(i,{lazyConnect:!0,retryStrategy:this.options.sentinelReconnectStrategy});s.on("reconnecting",()=>{var o;(o=this.emitter)===null||o===void 0||o.emit("sentinelReconnecting")}),t.push({address:i,client:s})}this.sentinelIterator.reset(!1),this.failoverDetector&&this.failoverDetector.cleanup(),this.failoverDetector=new ire.FailoverDetector(this,t),await this.failoverDetector.subscribe(),(e=this.emitter)===null||e===void 0||e.emit("failoverSubscribed")}};gh.default=a_;function sre(r,e){if(r.length===0)return null;let t;if(typeof e=="function")t=e(r);else if(e!==null&&typeof e=="object"){let n=Array.isArray(e)?e:[e];n.sort((i,s)=>(i.prio||(i.prio=1),s.prio||(s.prio=1),i.prio<s.prio?-1:i.prio>s.prio?1:0));for(let i=0;i<n.length;i++){for(let s=0;s<r.length;s++){let o=r[s];if(o.ip===n[i].ip&&o.port===n[i].port){t=o;break}}if(t)break}}return t||(t=(0,mh.sample)(r)),FP(t)}function FP(r){return{host:r.ip,port:Number(r.port)}}function ore(){}});var VP=E(zc=>{"use strict";Object.defineProperty(zc,"__esModule",{value:!0});zc.SentinelConnector=zc.StandaloneConnector=void 0;var are=DP();zc.StandaloneConnector=are.default;var lre=J0();zc.SentinelConnector=lre.default});var BP=E(u_=>{"use strict";Object.defineProperty(u_,"__esModule",{value:!0});var ure=Ql(),l_=class extends ure.AbortError{constructor(e){let t=`Reached the max retries per request limit (which is ${e}). Refer to "maxRetriesPerRequest" option for details.`;super(t),Error.captureStackTrace(this,this.constructor)}get name(){return this.constructor.name}};u_.default=l_});var UP=E(Q0=>{"use strict";Object.defineProperty(Q0,"__esModule",{value:!0});Q0.MaxRetriesPerRequestError=void 0;var cre=BP();Q0.MaxRetriesPerRequestError=cre.default});var JP=E((wTe,YP)=>{"use strict";var m_=require("buffer").Buffer,fre=require("string_decoder").StringDecoder,c_=new fre,GP=Ql(),dre=GP.ReplyError,hre=GP.ParserError,Is=m_.allocUnsafe(32*1024),Kn=0,Z0=null,yh=0,f_=0;function pre(r){let e=r.buffer.length-1;var t=r.offset,n=0,i=1;for(r.buffer[t]===45&&(i=-1,t++);t<e;){let s=r.buffer[t++];if(s===13)return r.offset=t+1,i*n;n=n*10+(s-48)}}function mre(r){let e=r.buffer.length-1;var t=r.offset,n=0,i="";for(r.buffer[t]===45&&(i+="-",t++);t<e;){var s=r.buffer[t++];if(s===13)return r.offset=t+1,n!==0&&(i+=n),i;n>429496728?(i+=n*10+(s-48),n=0):s===48&&n===0?i+=0:n=n*10+(s-48)}}function $P(r){let e=r.offset,t=r.buffer,n=t.length-1;for(var i=e;i<n;)if(t[i++]===13)return r.offset=i+1,r.optionReturnBuffers===!0?r.buffer.slice(e,i-1):r.buffer.toString("utf8",e,i-1)}function WP(r){let e=r.buffer.length-1;for(var t=r.offset,n=0;t<e;){let i=r.buffer[t++];if(i===13)return r.offset=t+1,n;n=n*10+(i-48)}}function gre(r){return r.optionStringNumbers===!0?mre(r):pre(r)}function yre(r){let e=WP(r);if(e===void 0)return;if(e<0)return null;let t=r.offset+e;if(t+2>r.buffer.length){r.bigStrSize=t+2,r.totalChunkSize=r.buffer.length,r.bufferCache.push(r.buffer);return}let n=r.offset;return r.offset=t+2,r.optionReturnBuffers===!0?r.buffer.slice(n,t):r.buffer.toString("utf8",n,t)}function vre(r){var e=$P(r);if(e!==void 0)return r.optionReturnBuffers===!0&&(e=e.toString()),new dre(e)}function wre(r,e){let t=new hre("Protocol error, got "+JSON.stringify(String.fromCharCode(e))+" as reply type byte",JSON.stringify(r.buffer),r.offset);r.buffer=null,r.returnFatalError(t)}function bre(r){let e=WP(r);if(e===void 0)return;if(e<0)return null;let t=new Array(e);return zP(r,t,0)}function d_(r,e,t){r.arrayCache.push(e),r.arrayPos.push(t)}function h_(r){let e=r.arrayCache.pop();var t=r.arrayPos.pop();if(r.arrayCache.length){let n=h_(r);if(n===void 0){d_(r,e,t);return}e[t++]=n}return zP(r,e,t)}function zP(r,e,t){let n=r.buffer.length;for(;t<e.length;){let i=r.offset;if(r.offset>=n){d_(r,e,t);return}let s=HP(r,r.buffer[r.offset++]);if(s===void 0){r.arrayCache.length||r.bufferCache.length||(r.offset=i),d_(r,e,t);return}e[t]=s,t++}return e}function HP(r,e){switch(e){case 36:return yre(r);case 43:return $P(r);case 42:return bre(r);case 58:return gre(r);case 45:return vre(r);default:return wre(r,e)}}function Sre(){if(Is.length>50*1024)if(yh===1||f_>yh*2){let r=Math.floor(Is.length/10),e=r<Kn?Kn:r;Kn=0,Is=Is.slice(e,Is.length)}else f_++,yh--;else clearInterval(Z0),yh=0,f_=0,Z0=null}function _re(r){if(Is.length<r+Kn){let e=r>78643200?2:3;Kn>1024*1024*111&&(Kn=1024*1024*50),Is=m_.allocUnsafe(r*e+Kn),Kn=0,yh++,Z0===null&&(Z0=setInterval(Sre,50))}}function xre(r){let e=r.bufferCache,t=r.offset;var n=e.length,i=r.bigStrSize-r.totalChunkSize;if(r.offset=i,i<=2){if(n===2)return e[0].toString("utf8",t,e[0].length+i-2);n--,i=e[e.length-2].length+i}for(var s=c_.write(e[0].slice(t)),o=1;o<n-1;o++)s+=c_.write(e[o]);return s+=c_.end(e[o].slice(0,i-2)),s}function Ere(r){let e=r.bufferCache,t=r.offset,n=r.bigStrSize-t-2;var i=e.length,s=r.bigStrSize-r.totalChunkSize;if(r.offset=s,s<=2){if(i===2)return e[0].slice(t,e[0].length+s-2);i--,s=e[e.length-2].length+s}_re(n);let o=Kn;e[0].copy(Is,o,t,e[0].length),Kn+=e[0].length-t;for(var a=1;a<i-1;a++)e[a].copy(Is,Kn),Kn+=e[a].length;return e[a].copy(Is,Kn,0,s-2),Kn+=s-2,Is.slice(o,Kn)}var p_=class{constructor(e){if(!e)throw new TypeError("Options are mandatory.");if(typeof e.returnError!="function"||typeof e.returnReply!="function")throw new TypeError("The returnReply and returnError options have to be functions.");this.setReturnBuffers(!!e.returnBuffers),this.setStringNumbers(!!e.stringNumbers),this.returnError=e.returnError,this.returnFatalError=e.returnFatalError||e.returnError,this.returnReply=e.returnReply,this.reset()}reset(){this.offset=0,this.buffer=null,this.bigStrSize=0,this.totalChunkSize=0,this.bufferCache=[],this.arrayCache=[],this.arrayPos=[]}setReturnBuffers(e){if(typeof e!="boolean")throw new TypeError("The returnBuffers argument has to be a boolean");this.optionReturnBuffers=e}setStringNumbers(e){if(typeof e!="boolean")throw new TypeError("The stringNumbers argument has to be a boolean");this.optionStringNumbers=e}execute(e){if(this.buffer===null)this.buffer=e,this.offset=0;else if(this.bigStrSize===0){let n=this.buffer.length,i=n-this.offset,s=m_.allocUnsafe(i+e.length);if(this.buffer.copy(s,0,this.offset,n),e.copy(s,i,0,e.length),this.buffer=s,this.offset=0,this.arrayCache.length){let o=h_(this);if(o===void 0)return;this.returnReply(o)}}else if(this.totalChunkSize+e.length>=this.bigStrSize){this.bufferCache.push(e);var t=this.optionReturnBuffers?Ere(this):xre(this);if(this.bigStrSize=0,this.bufferCache=[],this.buffer=e,this.arrayCache.length&&(this.arrayCache[0][this.arrayPos[0]++]=t,t=h_(this),t===void 0))return;this.returnReply(t)}else{this.bufferCache.push(e),this.totalChunkSize+=e.length;return}for(;this.offset<this.buffer.length;){let n=this.offset,i=this.buffer[this.offset++],s=HP(this,i);if(s===void 0){this.arrayCache.length||this.bufferCache.length||(this.offset=n);return}i===45?this.returnError(s):this.returnReply(s)}this.buffer=null}};YP.exports=p_});var ZP=E((bTe,QP)=>{"use strict";QP.exports=JP()});var XP=E(v_=>{"use strict";Object.defineProperty(v_,"__esModule",{value:!0});var y_=class{constructor(){this.set={subscribe:{},psubscribe:{},ssubscribe:{}}}add(e,t){this.set[g_(e)][t]=!0}del(e,t){delete this.set[g_(e)][t]}channels(e){return Object.keys(this.set[g_(e)])}isEmpty(){return this.channels("subscribe").length===0&&this.channels("psubscribe").length===0&&this.channels("ssubscribe").length===0}};v_.default=y_;function g_(r){return r==="unsubscribe"?"subscribe":r==="punsubscribe"?"psubscribe":r==="sunsubscribe"?"ssubscribe":r}});var nR=E(b_=>{"use strict";Object.defineProperty(b_,"__esModule",{value:!0});var eR=To(),Ore=ln(),Ire=ZP(),Cre=XP(),Tre=(0,Ore.Debug)("dataHandler"),w_=class{constructor(e,t){this.redis=e;let n=new Ire({stringNumbers:t.stringNumbers,returnBuffers:!0,returnError:i=>{this.returnError(i)},returnFatalError:i=>{this.returnFatalError(i)},returnReply:i=>{this.returnReply(i)}});e.stream.on("data",i=>{n.execute(i)})}returnFatalError(e){e.message+=". Please report this.",this.redis.recoverFromFatalError(e,e,{offlineQueue:!1})}returnError(e){let t=this.shiftCommand(e);t&&(e.command={name:t.command.name,args:t.command.args},this.redis.handleReconnection(e,t))}returnReply(e){if(this.handleMonitorReply(e)||this.handleSubscriberReply(e))return;let t=this.shiftCommand(e);t&&(eR.default.checkFlag("ENTER_SUBSCRIBER_MODE",t.command.name)?(this.redis.condition.subscriber=new Cre.default,this.redis.condition.subscriber.add(t.command.name,e[1].toString()),tR(t.command,e[2])||this.redis.commandQueue.unshift(t)):eR.default.checkFlag("EXIT_SUBSCRIBER_MODE",t.command.name)?rR(t.command,e[2])||this.redis.commandQueue.unshift(t):t.command.resolve(e))}handleSubscriberReply(e){if(!this.redis.condition.subscriber)return!1;let t=Array.isArray(e)?e[0].toString():null;switch(Tre('receive reply "%s" in subscriber mode',t),t){case"message":this.redis.listeners("message").length>0&&this.redis.emit("message",e[1].toString(),e[2]?e[2].toString():""),this.redis.emit("messageBuffer",e[1],e[2]);break;case"pmessage":{let n=e[1].toString();this.redis.listeners("pmessage").length>0&&this.redis.emit("pmessage",n,e[2].toString(),e[3].toString()),this.redis.emit("pmessageBuffer",n,e[2],e[3]);break}case"smessage":{this.redis.listeners("smessage").length>0&&this.redis.emit("smessage",e[1].toString(),e[2]?e[2].toString():""),this.redis.emit("smessageBuffer",e[1],e[2]);break}case"ssubscribe":case"subscribe":case"psubscribe":{let n=e[1].toString();this.redis.condition.subscriber.add(t,n);let i=this.shiftCommand(e);if(!i)return;tR(i.command,e[2])||this.redis.commandQueue.unshift(i);break}case"sunsubscribe":case"unsubscribe":case"punsubscribe":{let n=e[1]?e[1].toString():null;n&&this.redis.condition.subscriber.del(t,n);let i=e[2];Number(i)===0&&(this.redis.condition.subscriber=!1);let s=this.shiftCommand(e);if(!s)return;rR(s.command,i)||this.redis.commandQueue.unshift(s);break}default:{let n=this.shiftCommand(e);if(!n)return;n.command.resolve(e)}}return!0}handleMonitorReply(e){if(this.redis.status!=="monitoring")return!1;let t=e.toString();if(t==="OK")return!1;let n=t.indexOf(" "),i=t.slice(0,n),s=t.indexOf('"'),o=t.slice(s+1,-1).split('" "').map(u=>u.replace(/\\"/g,'"')),a=t.slice(n+2,s-2).split(" ");return this.redis.emit("monitor",i,o,a[1],a[0]),!0}shiftCommand(e){let t=this.redis.commandQueue.shift();if(!t){let n="Command queue state error. If you can reproduce this, please report it.",i=new Error(n+(e instanceof Error?` Last error: ${e.message}`:` Last reply: ${e.toString()}`));return this.redis.emit("error",i),null}return t}};b_.default=w_;var Ea=new WeakMap;function tR(r,e){let t=Ea.has(r)?Ea.get(r):r.args.length;return t-=1,t<=0?(r.resolve(e),Ea.delete(r),!0):(Ea.set(r,t),!1)}function rR(r,e){let t=Ea.has(r)?Ea.get(r):r.args.length;return t===0?Number(e)===0?(Ea.delete(r),r.resolve(e),!0):!1:(t-=1,t<=0?(r.resolve(e),!0):(Ea.set(r,t),!1))}});var iR=E(Wi=>{"use strict";Object.defineProperty(Wi,"__esModule",{value:!0});Wi.readyHandler=Wi.errorHandler=Wi.closeHandler=Wi.connectHandler=void 0;var Are=Ql(),Mre=To(),kre=UP(),vh=ln(),Pre=nR(),Cn=(0,vh.Debug)("connection");function Rre(r){return function(){r.setStatus("connect"),r.resetCommandQueue();let e=!1,{connectionEpoch:t}=r;r.condition.auth&&r.auth(r.condition.auth,function(n){t===r.connectionEpoch&&n&&(n.message.indexOf("no password is set")!==-1?console.warn("[WARN] Redis server does not require a password, but a password was supplied."):n.message.indexOf("without any password configured for the default user")!==-1?console.warn("[WARN] This Redis server's `default` user does not require a password, but a password was supplied"):n.message.indexOf("wrong number of arguments for 'auth' command")!==-1?console.warn(`[ERROR] The server returned "wrong number of arguments for 'auth' command". You are probably passing both username and password to Redis version 5 or below. You should only pass the 'password' option for Redis version 5 and under.`):(e=!0,r.recoverFromFatalError(n,n)))}),r.condition.select&&r.select(r.condition.select).catch(n=>{r.silentEmit("error",n)}),r.options.enableReadyCheck||Wi.readyHandler(r)(),new Pre.default(r,{stringNumbers:r.options.stringNumbers}),r.options.enableReadyCheck&&r._readyCheck(function(n,i){t===r.connectionEpoch&&(n?e||r.recoverFromFatalError(new Error("Ready check failed: "+n.message),n):r.connector.check(i)?Wi.readyHandler(r)():r.disconnect(!0))})}}Wi.connectHandler=Rre;function S_(r){let e=new Are.AbortError("Command aborted due to connection close");return e.command={name:r.name,args:r.args},e}function Lre(r){var e;let t=0;for(let n=0;n<r.length;){let i=(e=r.peekAt(n))===null||e===void 0?void 0:e.command,s=i.pipelineIndex;if((s===void 0||s===0)&&(t=0),s!==void 0&&s!==t++){r.remove(n,1),i.reject(S_(i));continue}n++}}function Dre(r){var e;for(let t=0;t<r.length;){let n=(e=r.peekAt(t))===null||e===void 0?void 0:e.command;if(n.name==="multi")break;if(n.name==="exec"){r.remove(t,1),n.reject(S_(n));break}n.inTransaction?(r.remove(t,1),n.reject(S_(n))):t++}}function Nre(r){return function(){let t=r.status;if(r.setStatus("close"),r.commandQueue.length&&Lre(r.commandQueue),r.offlineQueue.length&&Dre(r.offlineQueue),t==="ready"&&(r.prevCondition||(r.prevCondition=r.condition),r.commandQueue.length&&(r.prevCommandQueue=r.commandQueue)),r.manuallyClosing)return r.manuallyClosing=!1,Cn("skip reconnecting since the connection is manually closed."),e();if(typeof r.options.retryStrategy!="function")return Cn("skip reconnecting because `retryStrategy` is not a function"),e();let n=r.options.retryStrategy(++r.retryAttempts);if(typeof n!="number")return Cn("skip reconnecting because `retryStrategy` doesn't return a number"),e();Cn("reconnect in %sms",n),r.setStatus("reconnecting",n),r.reconnectTimeout=setTimeout(function(){r.reconnectTimeout=null,r.connect().catch(vh.noop)},n);let{maxRetriesPerRequest:i}=r.options;typeof i=="number"&&(i<0?Cn("maxRetriesPerRequest is negative, ignoring..."):r.retryAttempts%(i+1)===0&&(Cn("reach maxRetriesPerRequest limitation, flushing command queue..."),r.flushQueue(new kre.MaxRetriesPerRequestError(i))))};function e(){r.setStatus("end"),r.flushQueue(new Error(vh.CONNECTION_CLOSED_ERROR_MSG))}}Wi.closeHandler=Nre;function jre(r){return function(e){Cn("error: %s",e),r.silentEmit("error",e)}}Wi.errorHandler=jre;function Kre(r){return function(){if(r.setStatus("ready"),r.retryAttempts=0,r.options.monitor){r.call("monitor").then(()=>r.setStatus("monitoring"),n=>r.emit("error",n));let{sendCommand:t}=r;r.sendCommand=function(n){return Mre.default.checkFlag("VALID_IN_MONITOR_MODE",n.name)?t.call(r,n):(n.reject(new Error("Connection is in monitoring mode, can't process commands.")),n.promise)},r.once("close",function(){delete r.sendCommand});return}let e=r.prevCondition?r.prevCondition.select:r.condition.select;if(r.options.connectionName&&(Cn("set the connection name [%s]",r.options.connectionName),r.client("setname",r.options.connectionName).catch(vh.noop)),r.options.readOnly&&(Cn("set the connection to readonly mode"),r.readonly().catch(vh.noop)),r.prevCondition){let t=r.prevCondition;if(r.prevCondition=null,t.subscriber&&r.options.autoResubscribe){r.condition.select!==e&&(Cn("connect to db [%d]",e),r.select(e));let n=t.subscriber.channels("subscribe");n.length&&(Cn("subscribe %d channels",n.length),r.subscribe(n));let i=t.subscriber.channels("psubscribe");i.length&&(Cn("psubscribe %d channels",i.length),r.psubscribe(i));let s=t.subscriber.channels("ssubscribe");s.length&&(Cn("ssubscribe %d channels",s.length),r.ssubscribe(s))}}if(r.prevCommandQueue)if(r.options.autoResendUnfulfilledCommands)for(Cn("resend %d unfulfilled commands",r.prevCommandQueue.length);r.prevCommandQueue.length>0;){let t=r.prevCommandQueue.shift();t.select!==r.condition.select&&t.command.name!=="select"&&r.select(t.select),r.sendCommand(t.command,t.stream)}else r.prevCommandQueue=null;if(r.offlineQueue.length){Cn("send %d commands in offline queue",r.offlineQueue.length);let t=r.offlineQueue;for(r.resetOfflineQueue();t.length>0;){let n=t.shift();n.select!==r.condition.select&&n.command.name!=="select"&&r.select(n.select),r.sendCommand(n.command,n.stream)}}r.condition.select!==e&&(Cn("connect to db [%d]",e),r.select(e))}}Wi.readyHandler=Kre});var sR=E(X0=>{"use strict";Object.defineProperty(X0,"__esModule",{value:!0});X0.DEFAULT_REDIS_OPTIONS=void 0;X0.DEFAULT_REDIS_OPTIONS={port:6379,host:"localhost",family:4,connectTimeout:1e4,disconnectTimeout:2e3,retryStrategy:function(r){return Math.min(r*50,2e3)},keepAlive:0,noDelay:!0,connectionName:null,sentinels:null,name:null,role:"master",sentinelRetryStrategy:function(r){return Math.min(r*10,1e3)},sentinelReconnectStrategy:function(){return 6e4},natMap:null,enableTLSForSentinelMode:!1,updateSentinels:!0,failoverDetector:!1,username:null,password:null,db:0,enableOfflineQueue:!0,enableReadyCheck:!0,autoResubscribe:!0,autoResendUnfulfilledCommands:!0,lazyConnect:!1,keyPrefix:"",reconnectOnError:null,readOnly:!1,stringNumbers:!1,maxRetriesPerRequest:20,maxLoadingRetryTime:1e4,enableAutoPipelining:!1,autoPipeliningIgnoredCommands:[],sentinelMaxConnections:10}});var xa=E(E_=>{"use strict";Object.defineProperty(E_,"__esModule",{value:!0});var oR=jc(),lR=require("events"),__=wa(),qre=ZS(),x_=To(),Fre=VP(),Vre=J0(),Oa=iR(),Bre=sR(),Ure=q0(),Gre=FS(),eu=ln(),$re=BS(),Wre=V0(),Ia=P0(),aR=W0(),Ca=(0,eu.Debug)("redis"),Ta=class r extends Wre.default{constructor(e,t,n){if(super(),this.status="wait",this.isCluster=!1,this.reconnectTimeout=null,this.connectionEpoch=0,this.retryAttempts=0,this.manuallyClosing=!1,this._autoPipelines=new Map,this._runningAutoPipelines=new Set,this.parseOptions(e,t,n),lR.EventEmitter.call(this),this.resetCommandQueue(),this.resetOfflineQueue(),this.options.Connector)this.connector=new this.options.Connector(this.options);else if(this.options.sentinels){let i=new Vre.default(this.options);i.emitter=this,this.connector=i}else this.connector=new Fre.StandaloneConnector(this.options);this.options.scripts&&Object.entries(this.options.scripts).forEach(([i,s])=>{this.defineCommand(i,s)}),this.options.lazyConnect?this.setStatus("wait"):this.connect().catch(Ia.noop)}static createClient(...e){return new r(...e)}get autoPipelineQueueSize(){let e=0;for(let t of this._autoPipelines.values())e+=t.length;return e}connect(e){let t=new Promise((n,i)=>{if(this.status==="connecting"||this.status==="connect"||this.status==="ready"){i(new Error("Redis is already connecting/connected"));return}this.connectionEpoch+=1,this.setStatus("connecting");let{options:s}=this;this.condition={select:s.db,auth:s.username?[s.username,s.password]:s.password,subscriber:!1};let o=this;(0,__.default)(this.connector.connect(function(a,u){o.silentEmit(a,u)}),function(a,u){if(a){o.flushQueue(a),o.silentEmit("error",a),i(a),o.setStatus("end");return}let c=s.tls?"secureConnect":"connect";if("sentinels"in s&&s.sentinels&&!s.enableTLSForSentinelMode&&(c="connect"),o.stream=u,s.noDelay&&u.setNoDelay(!0),typeof s.keepAlive=="number"&&(u.connecting?u.once(c,()=>{u.setKeepAlive(!0,s.keepAlive)}):u.setKeepAlive(!0,s.keepAlive)),u.connecting){if(u.once(c,Oa.connectHandler(o)),s.connectTimeout){let p=!1;u.setTimeout(s.connectTimeout,function(){if(p)return;u.setTimeout(0),u.destroy();let m=new Error("connect ETIMEDOUT");m.errorno="ETIMEDOUT",m.code="ETIMEDOUT",m.syscall="connect",Oa.errorHandler(o)(m)}),u.once(c,function(){p=!0,u.setTimeout(0)})}}else if(u.destroyed){let p=o.connector.firstError;p&&process.nextTick(()=>{Oa.errorHandler(o)(p)}),process.nextTick(Oa.closeHandler(o))}else process.nextTick(Oa.connectHandler(o));u.destroyed||(u.once("error",Oa.errorHandler(o)),u.once("close",Oa.closeHandler(o)));let d=function(){o.removeListener("close",h),n()};var h=function(){o.removeListener("ready",d),i(new Error(eu.CONNECTION_CLOSED_ERROR_MSG))};o.once("ready",d),o.once("close",h)})});return(0,__.default)(t,e)}disconnect(e=!1){e||(this.manuallyClosing=!0),this.reconnectTimeout&&!e&&(clearTimeout(this.reconnectTimeout),this.reconnectTimeout=null),this.status==="wait"?Oa.closeHandler(this)():this.connector.disconnect()}end(){this.disconnect()}duplicate(e){return new r({...this.options,...e})}get mode(){var e;return this.options.monitor?"monitor":!((e=this.condition)===null||e===void 0)&&e.subscriber?"subscriber":"normal"}monitor(e){let t=this.duplicate({monitor:!0,lazyConnect:!1});return(0,__.default)(new Promise(function(n,i){t.once("error",i),t.once("monitoring",function(){n(t)})}),e)}sendCommand(e,t){var n,i;if(this.status==="wait"&&this.connect().catch(Ia.noop),this.status==="end")return e.reject(new Error(eu.CONNECTION_CLOSED_ERROR_MSG)),e.promise;if(!((n=this.condition)===null||n===void 0)&&n.subscriber&&!x_.default.checkFlag("VALID_IN_SUBSCRIBER_MODE",e.name))return e.reject(new Error("Connection in subscriber mode, only subscriber commands may be used")),e.promise;typeof this.options.commandTimeout=="number"&&e.setTimeout(this.options.commandTimeout);let s=this.status==="ready"||!t&&this.status==="connect"&&(0,oR.exists)(e.name)&&(0,oR.hasFlag)(e.name,"loading");if(this.stream&&this.stream.writable?this.stream._writableState&&this.stream._writableState.ended&&(s=!1):s=!1,s)Ca.enabled&&Ca("write command[%s]: %d -> %s(%o)",this._getDescription(),(i=this.condition)===null||i===void 0?void 0:i.select,e.name,e.args),t?"isPipeline"in t&&t.isPipeline?t.write(e.toWritable(t.destination.redis.stream)):t.write(e.toWritable(t)):this.stream.write(e.toWritable(this.stream)),this.commandQueue.push({command:e,stream:t,select:this.condition.select}),x_.default.checkFlag("WILL_DISCONNECT",e.name)&&(this.manuallyClosing=!0);else{if(!this.options.enableOfflineQueue)return e.reject(new Error("Stream isn't writeable and enableOfflineQueue options is false")),e.promise;if(e.name==="quit"&&this.offlineQueue.length===0)return this.disconnect(),e.resolve(Buffer.from("OK")),e.promise;Ca.enabled&&Ca("queue command[%s]: %d -> %s(%o)",this._getDescription(),this.condition.select,e.name,e.args),this.offlineQueue.push({command:e,stream:t,select:this.condition.select})}if(e.name==="select"&&(0,eu.isInt)(e.args[0])){let o=parseInt(e.args[0],10);this.condition.select!==o&&(this.condition.select=o,this.emit("select",o),Ca("switch to db [%d]",this.condition.select))}return e.promise}scanStream(e){return this.createScanStream("scan",{options:e})}scanBufferStream(e){return this.createScanStream("scanBuffer",{options:e})}sscanStream(e,t){return this.createScanStream("sscan",{key:e,options:t})}sscanBufferStream(e,t){return this.createScanStream("sscanBuffer",{key:e,options:t})}hscanStream(e,t){return this.createScanStream("hscan",{key:e,options:t})}hscanBufferStream(e,t){return this.createScanStream("hscanBuffer",{key:e,options:t})}zscanStream(e,t){return this.createScanStream("zscan",{key:e,options:t})}zscanBufferStream(e,t){return this.createScanStream("zscanBuffer",{key:e,options:t})}silentEmit(e,t){let n;if(!(e==="error"&&(n=t,this.status==="end"||this.manuallyClosing&&n instanceof Error&&(n.message===eu.CONNECTION_CLOSED_ERROR_MSG||n.syscall==="connect"||n.syscall==="read"))))return this.listeners(e).length>0?this.emit.apply(this,arguments):(n&&n instanceof Error&&console.error("[ioredis] Unhandled error event:",n.stack),!1)}recoverFromFatalError(e,t,n){this.flushQueue(t,n),this.silentEmit("error",t),this.disconnect(!0)}handleReconnection(e,t){var n;let i=!1;switch(this.options.reconnectOnError&&(i=this.options.reconnectOnError(e)),i){case 1:case!0:this.status!=="reconnecting"&&this.disconnect(!0),t.command.reject(e);break;case 2:this.status!=="reconnecting"&&this.disconnect(!0),((n=this.condition)===null||n===void 0?void 0:n.select)!==t.select&&t.command.name!=="select"&&this.select(t.select),this.sendCommand(t.command);break;default:t.command.reject(e)}}_getDescription(){let e;return"path"in this.options&&this.options.path?e=this.options.path:this.stream&&this.stream.remoteAddress&&this.stream.remotePort?e=this.stream.remoteAddress+":"+this.stream.remotePort:"host"in this.options&&this.options.host?e=this.options.host+":"+this.options.port:e="",this.options.connectionName&&(e+=` (${this.options.connectionName})`),e}resetCommandQueue(){this.commandQueue=new aR}resetOfflineQueue(){this.offlineQueue=new aR}parseOptions(...e){let t={},n=!1;for(let i=0;i<e.length;++i){let s=e[i];if(!(s===null||typeof s>"u"))if(typeof s=="object")(0,Ia.defaults)(t,s);else if(typeof s=="string")(0,Ia.defaults)(t,(0,eu.parseURL)(s)),s.startsWith("rediss://")&&(n=!0);else if(typeof s=="number")t.port=s;else throw new Error("Invalid argument "+s)}n&&(0,Ia.defaults)(t,{tls:!0}),(0,Ia.defaults)(t,r.defaultOptions),typeof t.port=="string"&&(t.port=parseInt(t.port,10)),typeof t.db=="string"&&(t.db=parseInt(t.db,10)),this.options=(0,eu.resolveTLSProfile)(t)}setStatus(e,t){Ca.enabled&&Ca("status[%s]: %s -> %s",this._getDescription(),this.status||"[empty]",e),this.status=e,process.nextTick(this.emit.bind(this,e,t))}createScanStream(e,{key:t,options:n={}}){return new Ure.default({objectMode:!0,key:t,redis:this,command:e,...n})}flushQueue(e,t){t=(0,Ia.defaults)({},t,{offlineQueue:!0,commandQueue:!0});let n;if(t.offlineQueue)for(;n=this.offlineQueue.shift();)n.command.reject(e);if(t.commandQueue&&this.commandQueue.length>0)for(this.stream&&this.stream.removeAllListeners("data");n=this.commandQueue.shift();)n.command.reject(e)}_readyCheck(e){let t=this;this.info(function(n,i){if(n)return n.message&&n.message.includes("NOPERM")?(console.warn(`Skipping the ready check because INFO command fails: "${n.message}". You can disable ready check with "enableReadyCheck". More: https://github.com/luin/ioredis/wiki/Disable-ready-check.`),e(null,{})):e(n);if(typeof i!="string")return e(null,i);let s={},o=i.split(`\r
`);for(let a=0;a<o.length;++a){let[u,...c]=o[a].split(":"),d=c.join(":");d&&(s[u]=d)}if(!s.loading||s.loading==="0")e(null,s);else{let a=(s.loading_eta_seconds||1)*1e3,u=t.options.maxLoadingRetryTime&&t.options.maxLoadingRetryTime<a?t.options.maxLoadingRetryTime:a;Ca("Redis server still loading, trying again in "+u+"ms"),setTimeout(function(){t._readyCheck(e)},u)}}).catch(Ia.noop)}};Ta.Cluster=qre.default;Ta.Command=x_.default;Ta.defaultOptions=Bre.DEFAULT_REDIS_OPTIONS;(0,$re.default)(Ta,lR.EventEmitter);(0,Gre.addTransactionSupport)(Ta.prototype);E_.default=Ta});var eg=E(($t,cR)=>{"use strict";Object.defineProperty($t,"__esModule",{value:!0});$t.print=$t.ReplyError=$t.SentinelIterator=$t.SentinelConnector=$t.AbstractConnector=$t.Pipeline=$t.ScanStream=$t.Command=$t.Cluster=$t.Redis=$t.default=void 0;$t=cR.exports=xa().default;var zre=xa();Object.defineProperty($t,"default",{enumerable:!0,get:function(){return zre.default}});var Hre=xa();Object.defineProperty($t,"Redis",{enumerable:!0,get:function(){return Hre.default}});var Yre=ZS();Object.defineProperty($t,"Cluster",{enumerable:!0,get:function(){return Yre.default}});var Jre=To();Object.defineProperty($t,"Command",{enumerable:!0,get:function(){return Jre.default}});var Qre=q0();Object.defineProperty($t,"ScanStream",{enumerable:!0,get:function(){return Qre.default}});var Zre=jS();Object.defineProperty($t,"Pipeline",{enumerable:!0,get:function(){return Zre.default}});var Xre=H0();Object.defineProperty($t,"AbstractConnector",{enumerable:!0,get:function(){return Xre.default}});var uR=J0();Object.defineProperty($t,"SentinelConnector",{enumerable:!0,get:function(){return uR.default}});Object.defineProperty($t,"SentinelIterator",{enumerable:!0,get:function(){return uR.SentinelIterator}});$t.ReplyError=Ql().ReplyError;Object.defineProperty($t,"Promise",{get(){return console.warn("ioredis v5 does not support plugging third-party Promise library anymore. Native Promise will be used."),Promise},set(r){console.warn("ioredis v5 does not support plugging third-party Promise library anymore. Native Promise will be used.")}});function ene(r,e){console.log(r?"Error: "+r:"Reply: "+e)}$t.print=ene});var fR=E((ITe,tne)=>{tne.exports={name:"dotenv",version:"16.3.1",description:"Loads environment variables from .env file",main:"lib/main.js",types:"lib/main.d.ts",exports:{".":{types:"./lib/main.d.ts",require:"./lib/main.js",default:"./lib/main.js"},"./config":"./config.js","./config.js":"./config.js","./lib/env-options":"./lib/env-options.js","./lib/env-options.js":"./lib/env-options.js","./lib/cli-options":"./lib/cli-options.js","./lib/cli-options.js":"./lib/cli-options.js","./package.json":"./package.json"},scripts:{"dts-check":"tsc --project tests/types/tsconfig.json",lint:"standard","lint-readme":"standard-markdown",pretest:"npm run lint && npm run dts-check",test:"tap tests/*.js --100 -Rspec",prerelease:"npm test",release:"standard-version"},repository:{type:"git",url:"git://github.com/motdotla/dotenv.git"},funding:"https://github.com/motdotla/dotenv?sponsor=1",keywords:["dotenv","env",".env","environment","variables","config","settings"],readmeFilename:"README.md",license:"BSD-2-Clause",devDependencies:{"@definitelytyped/dtslint":"^0.0.133","@types/node":"^18.11.3",decache:"^4.6.1",sinon:"^14.0.1",standard:"^17.0.0","standard-markdown":"^7.1.0","standard-version":"^9.5.0",tap:"^16.3.0",tar:"^6.1.11",typescript:"^4.8.4"},engines:{node:">=12"},browser:{fs:!1}}});var T_=E((CTe,Mo)=>{var dR=require("fs"),I_=require("path"),rne=require("os"),nne=require("crypto"),ine=fR(),C_=ine.version,sne=/(?:^|^)\s*(?:export\s+)?([\w.-]+)(?:\s*=\s*?|:\s+?)(\s*'(?:\\'|[^'])*'|\s*"(?:\\"|[^"])*"|\s*`(?:\\`|[^`])*`|[^#\r\n]+)?\s*(?:#.*)?(?:$|$)/mg;function one(r){let e={},t=r.toString();t=t.replace(/\r\n?/mg,`
`);let n;for(;(n=sne.exec(t))!=null;){let i=n[1],s=n[2]||"";s=s.trim();let o=s[0];s=s.replace(/^(['"`])([\s\S]*)\1$/mg,"$2"),o==='"'&&(s=s.replace(/\\n/g,`
`),s=s.replace(/\\r/g,"\r")),e[i]=s}return e}function ane(r){let e=pR(r),t=un.configDotenv({path:e});if(!t.parsed)throw new Error(`MISSING_DATA: Cannot parse ${e} for an unknown reason`);let n=hR(r).split(","),i=n.length,s;for(let o=0;o<i;o++)try{let a=n[o].trim(),u=cne(t,a);s=un.decrypt(u.ciphertext,u.key);break}catch(a){if(o+1>=i)throw a}return un.parse(s)}function lne(r){console.log(`[dotenv@${C_}][INFO] ${r}`)}function une(r){console.log(`[dotenv@${C_}][WARN] ${r}`)}function O_(r){console.log(`[dotenv@${C_}][DEBUG] ${r}`)}function hR(r){return r&&r.DOTENV_KEY&&r.DOTENV_KEY.length>0?r.DOTENV_KEY:process.env.DOTENV_KEY&&process.env.DOTENV_KEY.length>0?process.env.DOTENV_KEY:""}function cne(r,e){let t;try{t=new URL(e)}catch(a){throw a.code==="ERR_INVALID_URL"?new Error("INVALID_DOTENV_KEY: Wrong format. Must be in valid uri format like dotenv://:key_1234@dotenv.org/vault/.env.vault?environment=development"):a}let n=t.password;if(!n)throw new Error("INVALID_DOTENV_KEY: Missing key part");let i=t.searchParams.get("environment");if(!i)throw new Error("INVALID_DOTENV_KEY: Missing environment part");let s=`DOTENV_VAULT_${i.toUpperCase()}`,o=r.parsed[s];if(!o)throw new Error(`NOT_FOUND_DOTENV_ENVIRONMENT: Cannot locate environment ${s} in your .env.vault file.`);return{ciphertext:o,key:n}}function pR(r){let e=I_.resolve(process.cwd(),".env");return r&&r.path&&r.path.length>0&&(e=r.path),e.endsWith(".vault")?e:`${e}.vault`}function fne(r){return r[0]==="~"?I_.join(rne.homedir(),r.slice(1)):r}function dne(r){lne("Loading env from encrypted .env.vault");let e=un._parseVault(r),t=process.env;return r&&r.processEnv!=null&&(t=r.processEnv),un.populate(t,e,r),{parsed:e}}function hne(r){let e=I_.resolve(process.cwd(),".env"),t="utf8",n=!!(r&&r.debug);r&&(r.path!=null&&(e=fne(r.path)),r.encoding!=null&&(t=r.encoding));try{let i=un.parse(dR.readFileSync(e,{encoding:t})),s=process.env;return r&&r.processEnv!=null&&(s=r.processEnv),un.populate(s,i,r),{parsed:i}}catch(i){return n&&O_(`Failed to load ${e} ${i.message}`),{error:i}}}function pne(r){let e=pR(r);return hR(r).length===0?un.configDotenv(r):dR.existsSync(e)?un._configVault(r):(une(`You set DOTENV_KEY but you are missing a .env.vault file at ${e}. Did you forget to build it?`),un.configDotenv(r))}function mne(r,e){let t=Buffer.from(e.slice(-64),"hex"),n=Buffer.from(r,"base64"),i=n.slice(0,12),s=n.slice(-16);n=n.slice(12,-16);try{let o=nne.createDecipheriv("aes-256-gcm",t,i);return o.setAuthTag(s),`${o.update(n)}${o.final()}`}catch(o){let a=o instanceof RangeError,u=o.message==="Invalid key length",c=o.message==="Unsupported state or unable to authenticate data";if(a||u){let d="INVALID_DOTENV_KEY: It must be 64 characters long (or more)";throw new Error(d)}else if(c){let d="DECRYPTION_FAILED: Please check your DOTENV_KEY";throw new Error(d)}else throw console.error("Error: ",o.code),console.error("Error: ",o.message),o}}function gne(r,e,t={}){let n=!!(t&&t.debug),i=!!(t&&t.override);if(typeof e!="object")throw new Error("OBJECT_REQUIRED: Please check the processEnv argument being passed to populate");for(let s of Object.keys(e))Object.prototype.hasOwnProperty.call(r,s)?(i===!0&&(r[s]=e[s]),n&&O_(i===!0?`"${s}" is already defined and WAS overwritten`:`"${s}" is already defined and was NOT overwritten`)):r[s]=e[s]}var un={configDotenv:hne,_configVault:dne,_parseVault:ane,config:pne,decrypt:mne,parse:one,populate:gne};Mo.exports.configDotenv=un.configDotenv;Mo.exports._configVault=un._configVault;Mo.exports._parseVault=un._parseVault;Mo.exports.config=un.config;Mo.exports.decrypt=un.decrypt;Mo.exports.parse=un.parse;Mo.exports.populate=un.populate;Mo.exports=un});var Ys={};sS(Ys,{__addDisposableResource:()=>DR,__assign:()=>tg,__asyncDelegator:()=>CR,__asyncGenerator:()=>IR,__asyncValues:()=>TR,__await:()=>Hc,__awaiter:()=>bR,__classPrivateFieldGet:()=>PR,__classPrivateFieldIn:()=>LR,__classPrivateFieldSet:()=>RR,__createBinding:()=>ng,__decorate:()=>yR,__disposeResources:()=>NR,__esDecorate:()=>yne,__exportStar:()=>_R,__extends:()=>mR,__generator:()=>SR,__importDefault:()=>kR,__importStar:()=>MR,__makeTemplateObject:()=>AR,__metadata:()=>wR,__param:()=>vR,__propKey:()=>wne,__read:()=>M_,__rest:()=>gR,__runInitializers:()=>vne,__setFunctionName:()=>bne,__spread:()=>xR,__spreadArray:()=>OR,__spreadArrays:()=>ER,__values:()=>rg,default:()=>xne});function mR(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");A_(r,e);function t(){this.constructor=r}r.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}function gR(r,e){var t={};for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&e.indexOf(n)<0&&(t[n]=r[n]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(r);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(r,n[i])&&(t[n[i]]=r[n[i]]);return t}function yR(r,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,e,t,n);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(i<3?o(s):i>3?o(e,t,s):o(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s}function vR(r,e){return function(t,n){e(t,n,r)}}function yne(r,e,t,n,i,s){function o(x){if(x!==void 0&&typeof x!="function")throw new TypeError("Function expected");return x}for(var a=n.kind,u=a==="getter"?"get":a==="setter"?"set":"value",c=!e&&r?n.static?r:r.prototype:null,d=e||(c?Object.getOwnPropertyDescriptor(c,n.name):{}),h,p=!1,m=t.length-1;m>=0;m--){var y={};for(var _ in n)y[_]=_==="access"?{}:n[_];for(var _ in n.access)y.access[_]=n.access[_];y.addInitializer=function(x){if(p)throw new TypeError("Cannot add initializers after decoration has completed");s.push(o(x||null))};var O=(0,t[m])(a==="accessor"?{get:d.get,set:d.set}:d[u],y);if(a==="accessor"){if(O===void 0)continue;if(O===null||typeof O!="object")throw new TypeError("Object expected");(h=o(O.get))&&(d.get=h),(h=o(O.set))&&(d.set=h),(h=o(O.init))&&i.unshift(h)}else(h=o(O))&&(a==="field"?i.unshift(h):d[u]=h)}c&&Object.defineProperty(c,n.name,d),p=!0}function vne(r,e,t){for(var n=arguments.length>2,i=0;i<e.length;i++)t=n?e[i].call(r,t):e[i].call(r);return n?t:void 0}function wne(r){return typeof r=="symbol"?r:"".concat(r)}function bne(r,e,t){return typeof e=="symbol"&&(e=e.description?"[".concat(e.description,"]"):""),Object.defineProperty(r,"name",{configurable:!0,value:t?"".concat(t," ",e):e})}function wR(r,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(r,e)}function bR(r,e,t,n){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(d){try{c(n.next(d))}catch(h){o(h)}}function u(d){try{c(n.throw(d))}catch(h){o(h)}}function c(d){d.done?s(d.value):i(d.value).then(a,u)}c((n=n.apply(r,e||[])).next())})}function SR(r,e){var t={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},n,i,s,o;return o={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function a(c){return function(d){return u([c,d])}}function u(c){if(n)throw new TypeError("Generator is already executing.");for(;o&&(o=0,c[0]&&(t=0)),t;)try{if(n=1,i&&(s=c[0]&2?i.return:c[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,c[1])).done)return s;switch(i=0,s&&(c=[c[0]&2,s.value]),c[0]){case 0:case 1:s=c;break;case 4:return t.label++,{value:c[1],done:!1};case 5:t.label++,i=c[1],c=[0];continue;case 7:c=t.ops.pop(),t.trys.pop();continue;default:if(s=t.trys,!(s=s.length>0&&s[s.length-1])&&(c[0]===6||c[0]===2)){t=0;continue}if(c[0]===3&&(!s||c[1]>s[0]&&c[1]<s[3])){t.label=c[1];break}if(c[0]===6&&t.label<s[1]){t.label=s[1],s=c;break}if(s&&t.label<s[2]){t.label=s[2],t.ops.push(c);break}s[2]&&t.ops.pop(),t.trys.pop();continue}c=e.call(r,t)}catch(d){c=[6,d],i=0}finally{n=s=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}function _R(r,e){for(var t in r)t!=="default"&&!Object.prototype.hasOwnProperty.call(e,t)&&ng(e,r,t)}function rg(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function M_(r,e){var t=typeof Symbol=="function"&&r[Symbol.iterator];if(!t)return r;var n=t.call(r),i,s=[],o;try{for(;(e===void 0||e-- >0)&&!(i=n.next()).done;)s.push(i.value)}catch(a){o={error:a}}finally{try{i&&!i.done&&(t=n.return)&&t.call(n)}finally{if(o)throw o.error}}return s}function xR(){for(var r=[],e=0;e<arguments.length;e++)r=r.concat(M_(arguments[e]));return r}function ER(){for(var r=0,e=0,t=arguments.length;e<t;e++)r+=arguments[e].length;for(var n=Array(r),i=0,e=0;e<t;e++)for(var s=arguments[e],o=0,a=s.length;o<a;o++,i++)n[i]=s[o];return n}function OR(r,e,t){if(t||arguments.length===2)for(var n=0,i=e.length,s;n<i;n++)(s||!(n in e))&&(s||(s=Array.prototype.slice.call(e,0,n)),s[n]=e[n]);return r.concat(s||Array.prototype.slice.call(e))}function Hc(r){return this instanceof Hc?(this.v=r,this):new Hc(r)}function IR(r,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n=t.apply(r,e||[]),i,s=[];return i={},o("next"),o("throw"),o("return"),i[Symbol.asyncIterator]=function(){return this},i;function o(p){n[p]&&(i[p]=function(m){return new Promise(function(y,_){s.push([p,m,y,_])>1||a(p,m)})})}function a(p,m){try{u(n[p](m))}catch(y){h(s[0][3],y)}}function u(p){p.value instanceof Hc?Promise.resolve(p.value.v).then(c,d):h(s[0][2],p)}function c(p){a("next",p)}function d(p){a("throw",p)}function h(p,m){p(m),s.shift(),s.length&&a(s[0][0],s[0][1])}}function CR(r){var e,t;return e={},n("next"),n("throw",function(i){throw i}),n("return"),e[Symbol.iterator]=function(){return this},e;function n(i,s){e[i]=r[i]?function(o){return(t=!t)?{value:Hc(r[i](o)),done:!1}:s?s(o):o}:s}}function TR(r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=r[Symbol.asyncIterator],t;return e?e.call(r):(r=typeof rg=="function"?rg(r):r[Symbol.iterator](),t={},n("next"),n("throw"),n("return"),t[Symbol.asyncIterator]=function(){return this},t);function n(s){t[s]=r[s]&&function(o){return new Promise(function(a,u){o=r[s](o),i(a,u,o.done,o.value)})}}function i(s,o,a,u){Promise.resolve(u).then(function(c){s({value:c,done:a})},o)}}function AR(r,e){return Object.defineProperty?Object.defineProperty(r,"raw",{value:e}):r.raw=e,r}function MR(r){if(r&&r.__esModule)return r;var e={};if(r!=null)for(var t in r)t!=="default"&&Object.prototype.hasOwnProperty.call(r,t)&&ng(e,r,t);return Sne(e,r),e}function kR(r){return r&&r.__esModule?r:{default:r}}function PR(r,e,t,n){if(t==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?r!==e||!n:!e.has(r))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t==="m"?n:t==="a"?n.call(r):n?n.value:e.get(r)}function RR(r,e,t,n,i){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?r!==e||!i:!e.has(r))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?i.call(r,t):i?i.value=t:e.set(r,t),t}function LR(r,e){if(e===null||typeof e!="object"&&typeof e!="function")throw new TypeError("Cannot use 'in' operator on non-object");return typeof r=="function"?e===r:r.has(e)}function DR(r,e,t){if(e!=null){if(typeof e!="object"&&typeof e!="function")throw new TypeError("Object expected.");var n;if(t){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");n=e[Symbol.asyncDispose]}if(n===void 0){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");n=e[Symbol.dispose]}if(typeof n!="function")throw new TypeError("Object not disposable.");r.stack.push({value:e,dispose:n,async:t})}else t&&r.stack.push({async:!0});return e}function NR(r){function e(n){r.error=r.hasError?new _ne(n,r.error,"An error was suppressed during disposal."):n,r.hasError=!0}function t(){for(;r.stack.length;){var n=r.stack.pop();try{var i=n.dispose&&n.dispose.call(n.value);if(n.async)return Promise.resolve(i).then(t,function(s){return e(s),t()})}catch(s){e(s)}}if(r.hasError)throw r.error}return t()}var A_,tg,ng,Sne,_ne,xne,Js=an(()=>{A_=function(r,e){return A_=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])},A_(r,e)};tg=function(){return tg=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++){t=arguments[n];for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s])}return e},tg.apply(this,arguments)};ng=Object.create?function(r,e,t,n){n===void 0&&(n=t);var i=Object.getOwnPropertyDescriptor(e,t);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[t]}}),Object.defineProperty(r,n,i)}:function(r,e,t,n){n===void 0&&(n=t),r[n]=e[t]};Sne=Object.create?function(r,e){Object.defineProperty(r,"default",{enumerable:!0,value:e})}:function(r,e){r.default=e};_ne=typeof SuppressedError=="function"?SuppressedError:function(r,e,t){var n=new Error(t);return n.name="SuppressedError",n.error=r,n.suppressed=e,n};xne={__extends:mR,__assign:tg,__rest:gR,__decorate:yR,__param:vR,__metadata:wR,__awaiter:bR,__generator:SR,__createBinding:ng,__exportStar:_R,__values:rg,__read:M_,__spread:xR,__spreadArrays:ER,__spreadArray:OR,__await:Hc,__asyncGenerator:IR,__asyncDelegator:CR,__asyncValues:TR,__makeTemplateObject:AR,__importStar:MR,__importDefault:kR,__classPrivateFieldGet:PR,__classPrivateFieldSet:RR,__classPrivateFieldIn:LR,__addDisposableResource:DR,__disposeResources:NR}});var P_=E(ig=>{"use strict";Object.defineProperty(ig,"__esModule",{value:!0});ig.AsyncFifoQueue=void 0;var k_=class{constructor(e=!1){this.ignoreErrors=e,this.queue=[],this.pending=new Set,this.newPromise()}add(e){this.pending.add(e),e.then(t=>{this.pending.delete(e),this.queue.length===0&&this.resolvePromise(t),this.queue.push(t)}).catch(t=>{this.ignoreErrors&&this.queue.push(void 0),this.pending.delete(e),this.rejectPromise(t)})}async waitAll(){await Promise.all(this.pending)}numTotal(){return this.pending.size+this.queue.length}numPending(){return this.pending.size}numQueued(){return this.queue.length}resolvePromise(e){this.resolve(e),this.newPromise()}rejectPromise(e){this.reject(e),this.newPromise()}newPromise(){this.nextPromise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}async wait(){return this.nextPromise}async fetch(){if(!(this.pending.size===0&&this.queue.length===0)){for(;this.queue.length===0;)try{await this.wait()}catch(e){this.ignoreErrors||console.error("Unexpected Error in AsyncFifoQueue",e)}return this.queue.shift()}}};ig.AsyncFifoQueue=k_});var R_=E(sg=>{"use strict";Object.defineProperty(sg,"__esModule",{value:!0});sg.Backoffs=void 0;var Yc=class{static normalize(e){if(Number.isFinite(e))return{type:"fixed",delay:e};if(e)return e}static calculate(e,t,n,i,s){if(e)return Ene(e,s)(t,e.type,n,i)}};sg.Backoffs=Yc;Yc.builtinStrategies={fixed:function(r){return function(){return r}},exponential:function(r){return function(e){return Math.round(Math.pow(2,e-1)*r)}}};function Ene(r,e){if(r.type in Yc.builtinStrategies)return Yc.builtinStrategies[r.type](r.delay);if(e)return e;throw new Error(`Unknown backoff strategy ${r.type}.
      If a custom backoff strategy is used, specify it when the queue is created.`)}});var jR=E(wh=>{"use strict";Object.defineProperty(wh,"__esModule",{value:!0});wh.ChildCommand=void 0;var One;(function(r){r[r.Init=0]="Init",r[r.Start=1]="Start",r[r.Stop=2]="Stop"})(One=wh.ChildCommand||(wh.ChildCommand={}))});var KR=E(bh=>{"use strict";Object.defineProperty(bh,"__esModule",{value:!0});bh.ErrorCode=void 0;var Ine;(function(r){r[r.JobNotExist=-1]="JobNotExist",r[r.JobLockNotExist=-2]="JobLockNotExist",r[r.JobNotInState=-3]="JobNotInState",r[r.JobPendingDependencies=-4]="JobPendingDependencies",r[r.ParentJobNotExist=-5]="ParentJobNotExist",r[r.JobLockMismatch=-6]="JobLockMismatch"})(Ine=bh.ErrorCode||(bh.ErrorCode={}))});var qR=E(Sh=>{"use strict";Object.defineProperty(Sh,"__esModule",{value:!0});Sh.ParentCommand=void 0;var Cne;(function(r){r[r.Completed=0]="Completed",r[r.Error=1]="Error",r[r.Failed=2]="Failed",r[r.InitFailed=3]="InitFailed",r[r.InitCompleted=4]="InitCompleted",r[r.Log=5]="Log",r[r.MoveToDelayed=6]="MoveToDelayed",r[r.Progress=7]="Progress",r[r.Update=8]="Update"})(Cne=Sh.ParentCommand||(Sh.ParentCommand={}))});var FR=E(_h=>{"use strict";Object.defineProperty(_h,"__esModule",{value:!0});_h.MetricsTime=void 0;var Tne;(function(r){r[r.ONE_MINUTE=1]="ONE_MINUTE",r[r.FIVE_MINUTES=5]="FIVE_MINUTES",r[r.FIFTEEN_MINUTES=15]="FIFTEEN_MINUTES",r[r.THIRTY_MINUTES=30]="THIRTY_MINUTES",r[r.ONE_HOUR=60]="ONE_HOUR",r[r.ONE_WEEK=10080]="ONE_WEEK",r[r.TWO_WEEKS=20160]="TWO_WEEKS",r[r.ONE_MONTH=80640]="ONE_MONTH"})(Tne=_h.MetricsTime||(_h.MetricsTime={}))});var Qc=E(Jc=>{"use strict";Object.defineProperty(Jc,"__esModule",{value:!0});var og=(Js(),vi(Ys));og.__exportStar(jR(),Jc);og.__exportStar(KR(),Jc);og.__exportStar(qR(),Jc);og.__exportStar(FR(),Jc)});var VR=E(ag=>{"use strict";Object.defineProperty(ag,"__esModule",{value:!0});ag.Child=void 0;var Ane=require("child_process"),Mne=require("worker_threads"),kne=require("net"),L_=Qc(),Pne=require("events"),Rne={1:"Uncaught Fatal Exception",2:"Unused",3:"Internal JavaScript Parse Error",4:"Internal JavaScript Evaluation Failure",5:"Fatal Error",6:"Non-function Internal Exception Handler",7:"Internal Exception Handler Run-Time Failure",8:"Unused",9:"Invalid Argument",10:"Internal JavaScript Run-Time Failure",12:"Invalid Debug Argument",13:"Unfinished Top-Level Await"},D_=class extends Pne.EventEmitter{constructor(e,t,n={useWorkerThreads:!1}){super(),this.mainFile=e,this.processFile=t,this.opts=n,this._exitCode=null,this._signalCode=null,this._killed=!1}get pid(){if(this.childProcess)return this.childProcess.pid;if(this.worker)return this.worker.threadId;throw new Error("No child process or worker thread")}get exitCode(){return this._exitCode}get signalCode(){return this._signalCode}get killed(){return this.childProcess?this.childProcess.killed:this._killed}async init(){let e=await Nne(process.execArgv),t;this.opts.useWorkerThreads?this.worker=t=new Mne.Worker(this.mainFile,{execArgv:e,stdin:!0,stdout:!0,stderr:!0}):this.childProcess=t=(0,Ane.fork)(this.mainFile,[],{execArgv:e,stdio:"pipe"}),t.on("exit",(n,i)=>{this._exitCode=n,i=typeof i>"u"?null:i,this._signalCode=i,this._killed=!0,this.emit("exit",n,i),t.removeAllListeners(),this.removeAllListeners()}),t.on("error",(...n)=>this.emit("error",...n)),t.on("message",(...n)=>this.emit("message",...n)),t.on("close",(...n)=>this.emit("close",...n)),t.stdout.pipe(process.stdout),t.stderr.pipe(process.stderr),await this.initChild()}async send(e){return new Promise((t,n)=>{this.childProcess?this.childProcess.send(e,i=>{i?n(i):t()}):this.worker?t(this.worker.postMessage(e)):t()})}killProcess(e="SIGKILL"){this.childProcess?this.childProcess.kill(e):this.worker&&this.worker.terminate()}async kill(e="SIGKILL",t){if(this.hasProcessExited())return;let n=Lne(this.childProcess||this.worker);if(this.killProcess(e),t!==void 0&&(t===0||isFinite(t))){let i=setTimeout(()=>{this.hasProcessExited()||this.killProcess("SIGKILL")},t);await n,clearTimeout(i)}await n}async initChild(){let e=new Promise((t,n)=>{let i=o=>{if(o.cmd===L_.ParentCommand.InitCompleted)t();else if(o.cmd===L_.ParentCommand.InitFailed){let a=new Error;a.stack=o.err.stack,a.message=o.err.message,n(a)}this.off("message",i),this.off("close",s)},s=(o,a)=>{o>128&&(o-=128);let u=Rne[o]||`Unknown exit code ${o}`;n(new Error(`Error initializing child: ${u} and signal ${a}`)),this.off("message",i),this.off("close",s)};this.on("message",i),this.on("close",s)});await this.send({cmd:L_.ChildCommand.Init,value:this.processFile}),await e}hasProcessExited(){return!!(this.exitCode!==null||this.signalCode)}};ag.Child=D_;function Lne(r){return new Promise(e=>{r.once("exit",()=>e())})}var Dne=async()=>new Promise(r=>{let e=(0,kne.createServer)();e.listen(0,()=>{let{port:t}=e.address();e.close(()=>r(t))})}),Nne=async r=>{let e=[],t=[];for(let n=0;n<r.length;n++){let i=r[n];if(i.indexOf("--inspect")===-1)e.push(i);else{let s=i.split("=")[0],o=await Dne();t.push(`${s}=${o}`)}}return e.concat(t)}});var j_=E(lg=>{"use strict";Object.defineProperty(lg,"__esModule",{value:!0});lg.ChildPool=void 0;var jne=require("path"),Kne=VR(),qne=3e4,N_=class{constructor({mainFile:e=jne.join(process.cwd(),"dist/cjs/classes/main.js"),useWorkerThreads:t}){this.retained={},this.free={},this.opts={mainFile:e,useWorkerThreads:t}}async retain(e){let t=this.getFree(e).pop();if(t)return this.retained[t.pid]=t,t;t=new Kne.Child(this.opts.mainFile,e,{useWorkerThreads:this.opts.useWorkerThreads}),t.on("exit",this.remove.bind(this,t));try{return await t.init(),this.retained[t.pid]=t,t}catch(n){throw console.error(n),this.release(t),n}}release(e){delete this.retained[e.pid],this.getFree(e.processFile).push(e)}remove(e){delete this.retained[e.pid];let t=this.getFree(e.processFile),n=t.indexOf(e);n>-1&&t.splice(n,1)}async kill(e,t="SIGKILL"){return this.remove(e),e.kill(t,qne)}async clean(){let e=Object.values(this.retained).concat(this.getAllFree());this.retained={},this.free={},await Promise.all(e.map(t=>this.kill(t,"SIGTERM")))}getFree(e){return this.free[e]=this.free[e]||[]}getAllFree(){return Object.values(this.free).reduce((e,t)=>e.concat(t),[])}};lg.ChildPool=N_});var xh=E((jTe,BR)=>{var Fne="2.0.0",Vne=Number.MAX_SAFE_INTEGER||9007199254740991,Bne=16,Une=256-6,Gne=["major","premajor","minor","preminor","patch","prepatch","prerelease"];BR.exports={MAX_LENGTH:256,MAX_SAFE_COMPONENT_LENGTH:Bne,MAX_SAFE_BUILD_LENGTH:Une,MAX_SAFE_INTEGER:Vne,RELEASE_TYPES:Gne,SEMVER_SPEC_VERSION:Fne,FLAG_INCLUDE_PRERELEASE:1,FLAG_LOOSE:2}});var Eh=E((KTe,UR)=>{var $ne=typeof process=="object"&&process.env&&process.env.NODE_DEBUG&&/\bsemver\b/i.test(process.env.NODE_DEBUG)?(...r)=>console.error("SEMVER",...r):()=>{};UR.exports=$ne});var Zc=E((ko,GR)=>{var{MAX_SAFE_COMPONENT_LENGTH:K_,MAX_SAFE_BUILD_LENGTH:Wne,MAX_LENGTH:zne}=xh(),Hne=Eh();ko=GR.exports={};var Yne=ko.re=[],Jne=ko.safeRe=[],Ee=ko.src=[],Oe=ko.t={},Qne=0,q_="[a-zA-Z0-9-]",Zne=[["\\s",1],["\\d",zne],[q_,Wne]],Xne=r=>{for(let[e,t]of Zne)r=r.split(`${e}*`).join(`${e}{0,${t}}`).split(`${e}+`).join(`${e}{1,${t}}`);return r},tt=(r,e,t)=>{let n=Xne(e),i=Qne++;Hne(r,i,e),Oe[r]=i,Ee[i]=e,Yne[i]=new RegExp(e,t?"g":void 0),Jne[i]=new RegExp(n,t?"g":void 0)};tt("NUMERICIDENTIFIER","0|[1-9]\\d*");tt("NUMERICIDENTIFIERLOOSE","\\d+");tt("NONNUMERICIDENTIFIER",`\\d*[a-zA-Z-]${q_}*`);tt("MAINVERSION",`(${Ee[Oe.NUMERICIDENTIFIER]})\\.(${Ee[Oe.NUMERICIDENTIFIER]})\\.(${Ee[Oe.NUMERICIDENTIFIER]})`);tt("MAINVERSIONLOOSE",`(${Ee[Oe.NUMERICIDENTIFIERLOOSE]})\\.(${Ee[Oe.NUMERICIDENTIFIERLOOSE]})\\.(${Ee[Oe.NUMERICIDENTIFIERLOOSE]})`);tt("PRERELEASEIDENTIFIER",`(?:${Ee[Oe.NUMERICIDENTIFIER]}|${Ee[Oe.NONNUMERICIDENTIFIER]})`);tt("PRERELEASEIDENTIFIERLOOSE",`(?:${Ee[Oe.NUMERICIDENTIFIERLOOSE]}|${Ee[Oe.NONNUMERICIDENTIFIER]})`);tt("PRERELEASE",`(?:-(${Ee[Oe.PRERELEASEIDENTIFIER]}(?:\\.${Ee[Oe.PRERELEASEIDENTIFIER]})*))`);tt("PRERELEASELOOSE",`(?:-?(${Ee[Oe.PRERELEASEIDENTIFIERLOOSE]}(?:\\.${Ee[Oe.PRERELEASEIDENTIFIERLOOSE]})*))`);tt("BUILDIDENTIFIER",`${q_}+`);tt("BUILD",`(?:\\+(${Ee[Oe.BUILDIDENTIFIER]}(?:\\.${Ee[Oe.BUILDIDENTIFIER]})*))`);tt("FULLPLAIN",`v?${Ee[Oe.MAINVERSION]}${Ee[Oe.PRERELEASE]}?${Ee[Oe.BUILD]}?`);tt("FULL",`^${Ee[Oe.FULLPLAIN]}$`);tt("LOOSEPLAIN",`[v=\\s]*${Ee[Oe.MAINVERSIONLOOSE]}${Ee[Oe.PRERELEASELOOSE]}?${Ee[Oe.BUILD]}?`);tt("LOOSE",`^${Ee[Oe.LOOSEPLAIN]}$`);tt("GTLT","((?:<|>)?=?)");tt("XRANGEIDENTIFIERLOOSE",`${Ee[Oe.NUMERICIDENTIFIERLOOSE]}|x|X|\\*`);tt("XRANGEIDENTIFIER",`${Ee[Oe.NUMERICIDENTIFIER]}|x|X|\\*`);tt("XRANGEPLAIN",`[v=\\s]*(${Ee[Oe.XRANGEIDENTIFIER]})(?:\\.(${Ee[Oe.XRANGEIDENTIFIER]})(?:\\.(${Ee[Oe.XRANGEIDENTIFIER]})(?:${Ee[Oe.PRERELEASE]})?${Ee[Oe.BUILD]}?)?)?`);tt("XRANGEPLAINLOOSE",`[v=\\s]*(${Ee[Oe.XRANGEIDENTIFIERLOOSE]})(?:\\.(${Ee[Oe.XRANGEIDENTIFIERLOOSE]})(?:\\.(${Ee[Oe.XRANGEIDENTIFIERLOOSE]})(?:${Ee[Oe.PRERELEASELOOSE]})?${Ee[Oe.BUILD]}?)?)?`);tt("XRANGE",`^${Ee[Oe.GTLT]}\\s*${Ee[Oe.XRANGEPLAIN]}$`);tt("XRANGELOOSE",`^${Ee[Oe.GTLT]}\\s*${Ee[Oe.XRANGEPLAINLOOSE]}$`);tt("COERCE",`(^|[^\\d])(\\d{1,${K_}})(?:\\.(\\d{1,${K_}}))?(?:\\.(\\d{1,${K_}}))?(?:$|[^\\d])`);tt("COERCERTL",Ee[Oe.COERCE],!0);tt("LONETILDE","(?:~>?)");tt("TILDETRIM",`(\\s*)${Ee[Oe.LONETILDE]}\\s+`,!0);ko.tildeTrimReplace="$1~";tt("TILDE",`^${Ee[Oe.LONETILDE]}${Ee[Oe.XRANGEPLAIN]}$`);tt("TILDELOOSE",`^${Ee[Oe.LONETILDE]}${Ee[Oe.XRANGEPLAINLOOSE]}$`);tt("LONECARET","(?:\\^)");tt("CARETTRIM",`(\\s*)${Ee[Oe.LONECARET]}\\s+`,!0);ko.caretTrimReplace="$1^";tt("CARET",`^${Ee[Oe.LONECARET]}${Ee[Oe.XRANGEPLAIN]}$`);tt("CARETLOOSE",`^${Ee[Oe.LONECARET]}${Ee[Oe.XRANGEPLAINLOOSE]}$`);tt("COMPARATORLOOSE",`^${Ee[Oe.GTLT]}\\s*(${Ee[Oe.LOOSEPLAIN]})$|^$`);tt("COMPARATOR",`^${Ee[Oe.GTLT]}\\s*(${Ee[Oe.FULLPLAIN]})$|^$`);tt("COMPARATORTRIM",`(\\s*)${Ee[Oe.GTLT]}\\s*(${Ee[Oe.LOOSEPLAIN]}|${Ee[Oe.XRANGEPLAIN]})`,!0);ko.comparatorTrimReplace="$1$2$3";tt("HYPHENRANGE",`^\\s*(${Ee[Oe.XRANGEPLAIN]})\\s+-\\s+(${Ee[Oe.XRANGEPLAIN]})\\s*$`);tt("HYPHENRANGELOOSE",`^\\s*(${Ee[Oe.XRANGEPLAINLOOSE]})\\s+-\\s+(${Ee[Oe.XRANGEPLAINLOOSE]})\\s*$`);tt("STAR","(<|>)?=?\\s*\\*");tt("GTE0","^\\s*>=\\s*0\\.0\\.0\\s*$");tt("GTE0PRE","^\\s*>=\\s*0\\.0\\.0-0\\s*$")});var ug=E((qTe,$R)=>{var eie=Object.freeze({loose:!0}),tie=Object.freeze({}),rie=r=>r?typeof r!="object"?eie:r:tie;$R.exports=rie});var F_=E((FTe,HR)=>{var WR=/^[0-9]+$/,zR=(r,e)=>{let t=WR.test(r),n=WR.test(e);return t&&n&&(r=+r,e=+e),r===e?0:t&&!n?-1:n&&!t?1:r<e?-1:1},nie=(r,e)=>zR(e,r);HR.exports={compareIdentifiers:zR,rcompareIdentifiers:nie}});var Tn=E((VTe,ZR)=>{var cg=Eh(),{MAX_LENGTH:YR,MAX_SAFE_INTEGER:fg}=xh(),{safeRe:JR,t:QR}=Zc(),iie=ug(),{compareIdentifiers:Xc}=F_(),V_=class r{constructor(e,t){if(t=iie(t),e instanceof r){if(e.loose===!!t.loose&&e.includePrerelease===!!t.includePrerelease)return e;e=e.version}else if(typeof e!="string")throw new TypeError(`Invalid version. Must be a string. Got type "${typeof e}".`);if(e.length>YR)throw new TypeError(`version is longer than ${YR} characters`);cg("SemVer",e,t),this.options=t,this.loose=!!t.loose,this.includePrerelease=!!t.includePrerelease;let n=e.trim().match(t.loose?JR[QR.LOOSE]:JR[QR.FULL]);if(!n)throw new TypeError(`Invalid Version: ${e}`);if(this.raw=e,this.major=+n[1],this.minor=+n[2],this.patch=+n[3],this.major>fg||this.major<0)throw new TypeError("Invalid major version");if(this.minor>fg||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>fg||this.patch<0)throw new TypeError("Invalid patch version");n[4]?this.prerelease=n[4].split(".").map(i=>{if(/^[0-9]+$/.test(i)){let s=+i;if(s>=0&&s<fg)return s}return i}):this.prerelease=[],this.build=n[5]?n[5].split("."):[],this.format()}format(){return this.version=`${this.major}.${this.minor}.${this.patch}`,this.prerelease.length&&(this.version+=`-${this.prerelease.join(".")}`),this.version}toString(){return this.version}compare(e){if(cg("SemVer.compare",this.version,this.options,e),!(e instanceof r)){if(typeof e=="string"&&e===this.version)return 0;e=new r(e,this.options)}return e.version===this.version?0:this.compareMain(e)||this.comparePre(e)}compareMain(e){return e instanceof r||(e=new r(e,this.options)),Xc(this.major,e.major)||Xc(this.minor,e.minor)||Xc(this.patch,e.patch)}comparePre(e){if(e instanceof r||(e=new r(e,this.options)),this.prerelease.length&&!e.prerelease.length)return-1;if(!this.prerelease.length&&e.prerelease.length)return 1;if(!this.prerelease.length&&!e.prerelease.length)return 0;let t=0;do{let n=this.prerelease[t],i=e.prerelease[t];if(cg("prerelease compare",t,n,i),n===void 0&&i===void 0)return 0;if(i===void 0)return 1;if(n===void 0)return-1;if(n===i)continue;return Xc(n,i)}while(++t)}compareBuild(e){e instanceof r||(e=new r(e,this.options));let t=0;do{let n=this.build[t],i=e.build[t];if(cg("prerelease compare",t,n,i),n===void 0&&i===void 0)return 0;if(i===void 0)return 1;if(n===void 0)return-1;if(n===i)continue;return Xc(n,i)}while(++t)}inc(e,t,n){switch(e){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",t,n);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",t,n);break;case"prepatch":this.prerelease.length=0,this.inc("patch",t,n),this.inc("pre",t,n);break;case"prerelease":this.prerelease.length===0&&this.inc("patch",t,n),this.inc("pre",t,n);break;case"major":(this.minor!==0||this.patch!==0||this.prerelease.length===0)&&this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":(this.patch!==0||this.prerelease.length===0)&&this.minor++,this.patch=0,this.prerelease=[];break;case"patch":this.prerelease.length===0&&this.patch++,this.prerelease=[];break;case"pre":{let i=Number(n)?1:0;if(!t&&n===!1)throw new Error("invalid increment argument: identifier is empty");if(this.prerelease.length===0)this.prerelease=[i];else{let s=this.prerelease.length;for(;--s>=0;)typeof this.prerelease[s]=="number"&&(this.prerelease[s]++,s=-2);if(s===-1){if(t===this.prerelease.join(".")&&n===!1)throw new Error("invalid increment argument: identifier already exists");this.prerelease.push(i)}}if(t){let s=[t,i];n===!1&&(s=[t]),Xc(this.prerelease[0],t)===0?isNaN(this.prerelease[1])&&(this.prerelease=s):this.prerelease=s}break}default:throw new Error(`invalid increment argument: ${e}`)}return this.raw=this.format(),this.build.length&&(this.raw+=`+${this.build.join(".")}`),this}};ZR.exports=V_});var tu=E((BTe,eL)=>{var XR=Tn(),sie=(r,e,t=!1)=>{if(r instanceof XR)return r;try{return new XR(r,e)}catch(n){if(!t)return null;throw n}};eL.exports=sie});var rL=E((UTe,tL)=>{var oie=tu(),aie=(r,e)=>{let t=oie(r,e);return t?t.version:null};tL.exports=aie});var iL=E((GTe,nL)=>{var lie=tu(),uie=(r,e)=>{let t=lie(r.trim().replace(/^[=v]+/,""),e);return t?t.version:null};nL.exports=uie});var aL=E(($Te,oL)=>{var sL=Tn(),cie=(r,e,t,n,i)=>{typeof t=="string"&&(i=n,n=t,t=void 0);try{return new sL(r instanceof sL?r.version:r,t).inc(e,n,i).version}catch{return null}};oL.exports=cie});var cL=E((WTe,uL)=>{var lL=tu(),fie=(r,e)=>{let t=lL(r,null,!0),n=lL(e,null,!0),i=t.compare(n);if(i===0)return null;let s=i>0,o=s?t:n,a=s?n:t,u=!!o.prerelease.length;if(!!a.prerelease.length&&!u)return!a.patch&&!a.minor?"major":o.patch?"patch":o.minor?"minor":"major";let d=u?"pre":"";return t.major!==n.major?d+"major":t.minor!==n.minor?d+"minor":t.patch!==n.patch?d+"patch":"prerelease"};uL.exports=fie});var dL=E((zTe,fL)=>{var die=Tn(),hie=(r,e)=>new die(r,e).major;fL.exports=hie});var pL=E((HTe,hL)=>{var pie=Tn(),mie=(r,e)=>new pie(r,e).minor;hL.exports=mie});var gL=E((YTe,mL)=>{var gie=Tn(),yie=(r,e)=>new gie(r,e).patch;mL.exports=yie});var vL=E((JTe,yL)=>{var vie=tu(),wie=(r,e)=>{let t=vie(r,e);return t&&t.prerelease.length?t.prerelease:null};yL.exports=wie});var zi=E((QTe,bL)=>{var wL=Tn(),bie=(r,e,t)=>new wL(r,t).compare(new wL(e,t));bL.exports=bie});var _L=E((ZTe,SL)=>{var Sie=zi(),_ie=(r,e,t)=>Sie(e,r,t);SL.exports=_ie});var EL=E((XTe,xL)=>{var xie=zi(),Eie=(r,e)=>xie(r,e,!0);xL.exports=Eie});var dg=E((eAe,IL)=>{var OL=Tn(),Oie=(r,e,t)=>{let n=new OL(r,t),i=new OL(e,t);return n.compare(i)||n.compareBuild(i)};IL.exports=Oie});var TL=E((tAe,CL)=>{var Iie=dg(),Cie=(r,e)=>r.sort((t,n)=>Iie(t,n,e));CL.exports=Cie});var ML=E((rAe,AL)=>{var Tie=dg(),Aie=(r,e)=>r.sort((t,n)=>Tie(n,t,e));AL.exports=Aie});var Oh=E((nAe,kL)=>{var Mie=zi(),kie=(r,e,t)=>Mie(r,e,t)>0;kL.exports=kie});var hg=E((iAe,PL)=>{var Pie=zi(),Rie=(r,e,t)=>Pie(r,e,t)<0;PL.exports=Rie});var B_=E((sAe,RL)=>{var Lie=zi(),Die=(r,e,t)=>Lie(r,e,t)===0;RL.exports=Die});var U_=E((oAe,LL)=>{var Nie=zi(),jie=(r,e,t)=>Nie(r,e,t)!==0;LL.exports=jie});var pg=E((aAe,DL)=>{var Kie=zi(),qie=(r,e,t)=>Kie(r,e,t)>=0;DL.exports=qie});var mg=E((lAe,NL)=>{var Fie=zi(),Vie=(r,e,t)=>Fie(r,e,t)<=0;NL.exports=Vie});var G_=E((uAe,jL)=>{var Bie=B_(),Uie=U_(),Gie=Oh(),$ie=pg(),Wie=hg(),zie=mg(),Hie=(r,e,t,n)=>{switch(e){case"===":return typeof r=="object"&&(r=r.version),typeof t=="object"&&(t=t.version),r===t;case"!==":return typeof r=="object"&&(r=r.version),typeof t=="object"&&(t=t.version),r!==t;case"":case"=":case"==":return Bie(r,t,n);case"!=":return Uie(r,t,n);case">":return Gie(r,t,n);case">=":return $ie(r,t,n);case"<":return Wie(r,t,n);case"<=":return zie(r,t,n);default:throw new TypeError(`Invalid operator: ${e}`)}};jL.exports=Hie});var qL=E((cAe,KL)=>{var Yie=Tn(),Jie=tu(),{safeRe:gg,t:yg}=Zc(),Qie=(r,e)=>{if(r instanceof Yie)return r;if(typeof r=="number"&&(r=String(r)),typeof r!="string")return null;e=e||{};let t=null;if(!e.rtl)t=r.match(gg[yg.COERCE]);else{let n;for(;(n=gg[yg.COERCERTL].exec(r))&&(!t||t.index+t[0].length!==r.length);)(!t||n.index+n[0].length!==t.index+t[0].length)&&(t=n),gg[yg.COERCERTL].lastIndex=n.index+n[1].length+n[2].length;gg[yg.COERCERTL].lastIndex=-1}return t===null?null:Jie(`${t[2]}.${t[3]||"0"}.${t[4]||"0"}`,e)};KL.exports=Qie});var VL=E((fAe,FL)=>{"use strict";FL.exports=function(r){r.prototype[Symbol.iterator]=function*(){for(let e=this.head;e;e=e.next)yield e.value}}});var UL=E((dAe,BL)=>{"use strict";BL.exports=_t;_t.Node=ru;_t.create=_t;function _t(r){var e=this;if(e instanceof _t||(e=new _t),e.tail=null,e.head=null,e.length=0,r&&typeof r.forEach=="function")r.forEach(function(i){e.push(i)});else if(arguments.length>0)for(var t=0,n=arguments.length;t<n;t++)e.push(arguments[t]);return e}_t.prototype.removeNode=function(r){if(r.list!==this)throw new Error("removing node which does not belong to this list");var e=r.next,t=r.prev;return e&&(e.prev=t),t&&(t.next=e),r===this.head&&(this.head=e),r===this.tail&&(this.tail=t),r.list.length--,r.next=null,r.prev=null,r.list=null,e};_t.prototype.unshiftNode=function(r){if(r!==this.head){r.list&&r.list.removeNode(r);var e=this.head;r.list=this,r.next=e,e&&(e.prev=r),this.head=r,this.tail||(this.tail=r),this.length++}};_t.prototype.pushNode=function(r){if(r!==this.tail){r.list&&r.list.removeNode(r);var e=this.tail;r.list=this,r.prev=e,e&&(e.next=r),this.tail=r,this.head||(this.head=r),this.length++}};_t.prototype.push=function(){for(var r=0,e=arguments.length;r<e;r++)Xie(this,arguments[r]);return this.length};_t.prototype.unshift=function(){for(var r=0,e=arguments.length;r<e;r++)ese(this,arguments[r]);return this.length};_t.prototype.pop=function(){if(this.tail){var r=this.tail.value;return this.tail=this.tail.prev,this.tail?this.tail.next=null:this.head=null,this.length--,r}};_t.prototype.shift=function(){if(this.head){var r=this.head.value;return this.head=this.head.next,this.head?this.head.prev=null:this.tail=null,this.length--,r}};_t.prototype.forEach=function(r,e){e=e||this;for(var t=this.head,n=0;t!==null;n++)r.call(e,t.value,n,this),t=t.next};_t.prototype.forEachReverse=function(r,e){e=e||this;for(var t=this.tail,n=this.length-1;t!==null;n--)r.call(e,t.value,n,this),t=t.prev};_t.prototype.get=function(r){for(var e=0,t=this.head;t!==null&&e<r;e++)t=t.next;if(e===r&&t!==null)return t.value};_t.prototype.getReverse=function(r){for(var e=0,t=this.tail;t!==null&&e<r;e++)t=t.prev;if(e===r&&t!==null)return t.value};_t.prototype.map=function(r,e){e=e||this;for(var t=new _t,n=this.head;n!==null;)t.push(r.call(e,n.value,this)),n=n.next;return t};_t.prototype.mapReverse=function(r,e){e=e||this;for(var t=new _t,n=this.tail;n!==null;)t.push(r.call(e,n.value,this)),n=n.prev;return t};_t.prototype.reduce=function(r,e){var t,n=this.head;if(arguments.length>1)t=e;else if(this.head)n=this.head.next,t=this.head.value;else throw new TypeError("Reduce of empty list with no initial value");for(var i=0;n!==null;i++)t=r(t,n.value,i),n=n.next;return t};_t.prototype.reduceReverse=function(r,e){var t,n=this.tail;if(arguments.length>1)t=e;else if(this.tail)n=this.tail.prev,t=this.tail.value;else throw new TypeError("Reduce of empty list with no initial value");for(var i=this.length-1;n!==null;i--)t=r(t,n.value,i),n=n.prev;return t};_t.prototype.toArray=function(){for(var r=new Array(this.length),e=0,t=this.head;t!==null;e++)r[e]=t.value,t=t.next;return r};_t.prototype.toArrayReverse=function(){for(var r=new Array(this.length),e=0,t=this.tail;t!==null;e++)r[e]=t.value,t=t.prev;return r};_t.prototype.slice=function(r,e){e=e||this.length,e<0&&(e+=this.length),r=r||0,r<0&&(r+=this.length);var t=new _t;if(e<r||e<0)return t;r<0&&(r=0),e>this.length&&(e=this.length);for(var n=0,i=this.head;i!==null&&n<r;n++)i=i.next;for(;i!==null&&n<e;n++,i=i.next)t.push(i.value);return t};_t.prototype.sliceReverse=function(r,e){e=e||this.length,e<0&&(e+=this.length),r=r||0,r<0&&(r+=this.length);var t=new _t;if(e<r||e<0)return t;r<0&&(r=0),e>this.length&&(e=this.length);for(var n=this.length,i=this.tail;i!==null&&n>e;n--)i=i.prev;for(;i!==null&&n>r;n--,i=i.prev)t.push(i.value);return t};_t.prototype.splice=function(r,e,...t){r>this.length&&(r=this.length-1),r<0&&(r=this.length+r);for(var n=0,i=this.head;i!==null&&n<r;n++)i=i.next;for(var s=[],n=0;i&&n<e;n++)s.push(i.value),i=this.removeNode(i);i===null&&(i=this.tail),i!==this.head&&i!==this.tail&&(i=i.prev);for(var n=0;n<t.length;n++)i=Zie(this,i,t[n]);return s};_t.prototype.reverse=function(){for(var r=this.head,e=this.tail,t=r;t!==null;t=t.prev){var n=t.prev;t.prev=t.next,t.next=n}return this.head=e,this.tail=r,this};function Zie(r,e,t){var n=e===r.head?new ru(t,null,e,r):new ru(t,e,e.next,r);return n.next===null&&(r.tail=n),n.prev===null&&(r.head=n),r.length++,n}function Xie(r,e){r.tail=new ru(e,r.tail,null,r),r.head||(r.head=r.tail),r.length++}function ese(r,e){r.head=new ru(e,null,r.head,r),r.tail||(r.tail=r.head),r.length++}function ru(r,e,t,n){if(!(this instanceof ru))return new ru(r,e,t,n);this.list=n,this.value=r,e?(e.next=this,this.prev=e):this.prev=null,t?(t.prev=this,this.next=t):this.next=null}try{VL()(_t)}catch{}});var HL=E((hAe,zL)=>{"use strict";var tse=UL(),nu=Symbol("max"),Ro=Symbol("length"),ef=Symbol("lengthCalculator"),Ch=Symbol("allowStale"),iu=Symbol("maxAge"),Po=Symbol("dispose"),GL=Symbol("noDisposeOnSet"),cn=Symbol("lruList"),Cs=Symbol("cache"),WL=Symbol("updateAgeOnGet"),$_=()=>1,z_=class{constructor(e){if(typeof e=="number"&&(e={max:e}),e||(e={}),e.max&&(typeof e.max!="number"||e.max<0))throw new TypeError("max must be a non-negative number");let t=this[nu]=e.max||1/0,n=e.length||$_;if(this[ef]=typeof n!="function"?$_:n,this[Ch]=e.stale||!1,e.maxAge&&typeof e.maxAge!="number")throw new TypeError("maxAge must be a number");this[iu]=e.maxAge||0,this[Po]=e.dispose,this[GL]=e.noDisposeOnSet||!1,this[WL]=e.updateAgeOnGet||!1,this.reset()}set max(e){if(typeof e!="number"||e<0)throw new TypeError("max must be a non-negative number");this[nu]=e||1/0,Ih(this)}get max(){return this[nu]}set allowStale(e){this[Ch]=!!e}get allowStale(){return this[Ch]}set maxAge(e){if(typeof e!="number")throw new TypeError("maxAge must be a non-negative number");this[iu]=e,Ih(this)}get maxAge(){return this[iu]}set lengthCalculator(e){typeof e!="function"&&(e=$_),e!==this[ef]&&(this[ef]=e,this[Ro]=0,this[cn].forEach(t=>{t.length=this[ef](t.value,t.key),this[Ro]+=t.length})),Ih(this)}get lengthCalculator(){return this[ef]}get length(){return this[Ro]}get itemCount(){return this[cn].length}rforEach(e,t){t=t||this;for(let n=this[cn].tail;n!==null;){let i=n.prev;$L(this,e,n,t),n=i}}forEach(e,t){t=t||this;for(let n=this[cn].head;n!==null;){let i=n.next;$L(this,e,n,t),n=i}}keys(){return this[cn].toArray().map(e=>e.key)}values(){return this[cn].toArray().map(e=>e.value)}reset(){this[Po]&&this[cn]&&this[cn].length&&this[cn].forEach(e=>this[Po](e.key,e.value)),this[Cs]=new Map,this[cn]=new tse,this[Ro]=0}dump(){return this[cn].map(e=>vg(this,e)?!1:{k:e.key,v:e.value,e:e.now+(e.maxAge||0)}).toArray().filter(e=>e)}dumpLru(){return this[cn]}set(e,t,n){if(n=n||this[iu],n&&typeof n!="number")throw new TypeError("maxAge must be a number");let i=n?Date.now():0,s=this[ef](t,e);if(this[Cs].has(e)){if(s>this[nu])return tf(this,this[Cs].get(e)),!1;let u=this[Cs].get(e).value;return this[Po]&&(this[GL]||this[Po](e,u.value)),u.now=i,u.maxAge=n,u.value=t,this[Ro]+=s-u.length,u.length=s,this.get(e),Ih(this),!0}let o=new H_(e,t,s,i,n);return o.length>this[nu]?(this[Po]&&this[Po](e,t),!1):(this[Ro]+=o.length,this[cn].unshift(o),this[Cs].set(e,this[cn].head),Ih(this),!0)}has(e){if(!this[Cs].has(e))return!1;let t=this[Cs].get(e).value;return!vg(this,t)}get(e){return W_(this,e,!0)}peek(e){return W_(this,e,!1)}pop(){let e=this[cn].tail;return e?(tf(this,e),e.value):null}del(e){tf(this,this[Cs].get(e))}load(e){this.reset();let t=Date.now();for(let n=e.length-1;n>=0;n--){let i=e[n],s=i.e||0;if(s===0)this.set(i.k,i.v);else{let o=s-t;o>0&&this.set(i.k,i.v,o)}}}prune(){this[Cs].forEach((e,t)=>W_(this,t,!1))}},W_=(r,e,t)=>{let n=r[Cs].get(e);if(n){let i=n.value;if(vg(r,i)){if(tf(r,n),!r[Ch])return}else t&&(r[WL]&&(n.value.now=Date.now()),r[cn].unshiftNode(n));return i.value}},vg=(r,e)=>{if(!e||!e.maxAge&&!r[iu])return!1;let t=Date.now()-e.now;return e.maxAge?t>e.maxAge:r[iu]&&t>r[iu]},Ih=r=>{if(r[Ro]>r[nu])for(let e=r[cn].tail;r[Ro]>r[nu]&&e!==null;){let t=e.prev;tf(r,e),e=t}},tf=(r,e)=>{if(e){let t=e.value;r[Po]&&r[Po](t.key,t.value),r[Ro]-=t.length,r[Cs].delete(t.key),r[cn].removeNode(e)}},H_=class{constructor(e,t,n,i,s){this.key=e,this.value=t,this.length=n,this.now=i,this.maxAge=s||0}},$L=(r,e,t,n)=>{let i=t.value;vg(r,i)&&(tf(r,t),r[Ch]||(i=void 0)),i&&e.call(n,i.value,i.key,r)};zL.exports=z_});var Hi=E((pAe,ZL)=>{var Y_=class r{constructor(e,t){if(t=nse(t),e instanceof r)return e.loose===!!t.loose&&e.includePrerelease===!!t.includePrerelease?e:new r(e.raw,t);if(e instanceof J_)return this.raw=e.value,this.set=[[e]],this.format(),this;if(this.options=t,this.loose=!!t.loose,this.includePrerelease=!!t.includePrerelease,this.raw=e.trim().split(/\s+/).join(" "),this.set=this.raw.split("||").map(n=>this.parseRange(n.trim())).filter(n=>n.length),!this.set.length)throw new TypeError(`Invalid SemVer Range: ${this.raw}`);if(this.set.length>1){let n=this.set[0];if(this.set=this.set.filter(i=>!JL(i[0])),this.set.length===0)this.set=[n];else if(this.set.length>1){for(let i of this.set)if(i.length===1&&cse(i[0])){this.set=[i];break}}}this.format()}format(){return this.range=this.set.map(e=>e.join(" ").trim()).join("||").trim(),this.range}toString(){return this.range}parseRange(e){let n=((this.options.includePrerelease&&lse)|(this.options.loose&&use))+":"+e,i=YL.get(n);if(i)return i;let s=this.options.loose,o=s?ei[qn.HYPHENRANGELOOSE]:ei[qn.HYPHENRANGE];e=e.replace(o,bse(this.options.includePrerelease)),Yt("hyphen replace",e),e=e.replace(ei[qn.COMPARATORTRIM],sse),Yt("comparator trim",e),e=e.replace(ei[qn.TILDETRIM],ose),Yt("tilde trim",e),e=e.replace(ei[qn.CARETTRIM],ase),Yt("caret trim",e);let a=e.split(" ").map(h=>fse(h,this.options)).join(" ").split(/\s+/).map(h=>wse(h,this.options));s&&(a=a.filter(h=>(Yt("loose invalid filter",h,this.options),!!h.match(ei[qn.COMPARATORLOOSE])))),Yt("range list",a);let u=new Map,c=a.map(h=>new J_(h,this.options));for(let h of c){if(JL(h))return[h];u.set(h.value,h)}u.size>1&&u.has("")&&u.delete("");let d=[...u.values()];return YL.set(n,d),d}intersects(e,t){if(!(e instanceof r))throw new TypeError("a Range is required");return this.set.some(n=>QL(n,t)&&e.set.some(i=>QL(i,t)&&n.every(s=>i.every(o=>s.intersects(o,t)))))}test(e){if(!e)return!1;if(typeof e=="string")try{e=new ise(e,this.options)}catch{return!1}for(let t=0;t<this.set.length;t++)if(Sse(this.set[t],e,this.options))return!0;return!1}};ZL.exports=Y_;var rse=HL(),YL=new rse({max:1e3}),nse=ug(),J_=Th(),Yt=Eh(),ise=Tn(),{safeRe:ei,t:qn,comparatorTrimReplace:sse,tildeTrimReplace:ose,caretTrimReplace:ase}=Zc(),{FLAG_INCLUDE_PRERELEASE:lse,FLAG_LOOSE:use}=xh(),JL=r=>r.value==="<0.0.0-0",cse=r=>r.value==="",QL=(r,e)=>{let t=!0,n=r.slice(),i=n.pop();for(;t&&n.length;)t=n.every(s=>i.intersects(s,e)),i=n.pop();return t},fse=(r,e)=>(Yt("comp",r,e),r=pse(r,e),Yt("caret",r),r=dse(r,e),Yt("tildes",r),r=gse(r,e),Yt("xrange",r),r=vse(r,e),Yt("stars",r),r),Fn=r=>!r||r.toLowerCase()==="x"||r==="*",dse=(r,e)=>r.trim().split(/\s+/).map(t=>hse(t,e)).join(" "),hse=(r,e)=>{let t=e.loose?ei[qn.TILDELOOSE]:ei[qn.TILDE];return r.replace(t,(n,i,s,o,a)=>{Yt("tilde",r,n,i,s,o,a);let u;return Fn(i)?u="":Fn(s)?u=`>=${i}.0.0 <${+i+1}.0.0-0`:Fn(o)?u=`>=${i}.${s}.0 <${i}.${+s+1}.0-0`:a?(Yt("replaceTilde pr",a),u=`>=${i}.${s}.${o}-${a} <${i}.${+s+1}.0-0`):u=`>=${i}.${s}.${o} <${i}.${+s+1}.0-0`,Yt("tilde return",u),u})},pse=(r,e)=>r.trim().split(/\s+/).map(t=>mse(t,e)).join(" "),mse=(r,e)=>{Yt("caret",r,e);let t=e.loose?ei[qn.CARETLOOSE]:ei[qn.CARET],n=e.includePrerelease?"-0":"";return r.replace(t,(i,s,o,a,u)=>{Yt("caret",r,i,s,o,a,u);let c;return Fn(s)?c="":Fn(o)?c=`>=${s}.0.0${n} <${+s+1}.0.0-0`:Fn(a)?s==="0"?c=`>=${s}.${o}.0${n} <${s}.${+o+1}.0-0`:c=`>=${s}.${o}.0${n} <${+s+1}.0.0-0`:u?(Yt("replaceCaret pr",u),s==="0"?o==="0"?c=`>=${s}.${o}.${a}-${u} <${s}.${o}.${+a+1}-0`:c=`>=${s}.${o}.${a}-${u} <${s}.${+o+1}.0-0`:c=`>=${s}.${o}.${a}-${u} <${+s+1}.0.0-0`):(Yt("no pr"),s==="0"?o==="0"?c=`>=${s}.${o}.${a}${n} <${s}.${o}.${+a+1}-0`:c=`>=${s}.${o}.${a}${n} <${s}.${+o+1}.0-0`:c=`>=${s}.${o}.${a} <${+s+1}.0.0-0`),Yt("caret return",c),c})},gse=(r,e)=>(Yt("replaceXRanges",r,e),r.split(/\s+/).map(t=>yse(t,e)).join(" ")),yse=(r,e)=>{r=r.trim();let t=e.loose?ei[qn.XRANGELOOSE]:ei[qn.XRANGE];return r.replace(t,(n,i,s,o,a,u)=>{Yt("xRange",r,n,i,s,o,a,u);let c=Fn(s),d=c||Fn(o),h=d||Fn(a),p=h;return i==="="&&p&&(i=""),u=e.includePrerelease?"-0":"",c?i===">"||i==="<"?n="<0.0.0-0":n="*":i&&p?(d&&(o=0),a=0,i===">"?(i=">=",d?(s=+s+1,o=0,a=0):(o=+o+1,a=0)):i==="<="&&(i="<",d?s=+s+1:o=+o+1),i==="<"&&(u="-0"),n=`${i+s}.${o}.${a}${u}`):d?n=`>=${s}.0.0${u} <${+s+1}.0.0-0`:h&&(n=`>=${s}.${o}.0${u} <${s}.${+o+1}.0-0`),Yt("xRange return",n),n})},vse=(r,e)=>(Yt("replaceStars",r,e),r.trim().replace(ei[qn.STAR],"")),wse=(r,e)=>(Yt("replaceGTE0",r,e),r.trim().replace(ei[e.includePrerelease?qn.GTE0PRE:qn.GTE0],"")),bse=r=>(e,t,n,i,s,o,a,u,c,d,h,p,m)=>(Fn(n)?t="":Fn(i)?t=`>=${n}.0.0${r?"-0":""}`:Fn(s)?t=`>=${n}.${i}.0${r?"-0":""}`:o?t=`>=${t}`:t=`>=${t}${r?"-0":""}`,Fn(c)?u="":Fn(d)?u=`<${+c+1}.0.0-0`:Fn(h)?u=`<${c}.${+d+1}.0-0`:p?u=`<=${c}.${d}.${h}-${p}`:r?u=`<${c}.${d}.${+h+1}-0`:u=`<=${u}`,`${t} ${u}`.trim()),Sse=(r,e,t)=>{for(let n=0;n<r.length;n++)if(!r[n].test(e))return!1;if(e.prerelease.length&&!t.includePrerelease){for(let n=0;n<r.length;n++)if(Yt(r[n].semver),r[n].semver!==J_.ANY&&r[n].semver.prerelease.length>0){let i=r[n].semver;if(i.major===e.major&&i.minor===e.minor&&i.patch===e.patch)return!0}return!1}return!0}});var Th=E((mAe,iD)=>{var Ah=Symbol("SemVer ANY"),X_=class r{static get ANY(){return Ah}constructor(e,t){if(t=XL(t),e instanceof r){if(e.loose===!!t.loose)return e;e=e.value}e=e.trim().split(/\s+/).join(" "),Z_("comparator",e,t),this.options=t,this.loose=!!t.loose,this.parse(e),this.semver===Ah?this.value="":this.value=this.operator+this.semver.version,Z_("comp",this)}parse(e){let t=this.options.loose?eD[tD.COMPARATORLOOSE]:eD[tD.COMPARATOR],n=e.match(t);if(!n)throw new TypeError(`Invalid comparator: ${e}`);this.operator=n[1]!==void 0?n[1]:"",this.operator==="="&&(this.operator=""),n[2]?this.semver=new rD(n[2],this.options.loose):this.semver=Ah}toString(){return this.value}test(e){if(Z_("Comparator.test",e,this.options.loose),this.semver===Ah||e===Ah)return!0;if(typeof e=="string")try{e=new rD(e,this.options)}catch{return!1}return Q_(e,this.operator,this.semver,this.options)}intersects(e,t){if(!(e instanceof r))throw new TypeError("a Comparator is required");return this.operator===""?this.value===""?!0:new nD(e.value,t).test(this.value):e.operator===""?e.value===""?!0:new nD(this.value,t).test(e.semver):(t=XL(t),t.includePrerelease&&(this.value==="<0.0.0-0"||e.value==="<0.0.0-0")||!t.includePrerelease&&(this.value.startsWith("<0.0.0")||e.value.startsWith("<0.0.0"))?!1:!!(this.operator.startsWith(">")&&e.operator.startsWith(">")||this.operator.startsWith("<")&&e.operator.startsWith("<")||this.semver.version===e.semver.version&&this.operator.includes("=")&&e.operator.includes("=")||Q_(this.semver,"<",e.semver,t)&&this.operator.startsWith(">")&&e.operator.startsWith("<")||Q_(this.semver,">",e.semver,t)&&this.operator.startsWith("<")&&e.operator.startsWith(">")))}};iD.exports=X_;var XL=ug(),{safeRe:eD,t:tD}=Zc(),Q_=G_(),Z_=Eh(),rD=Tn(),nD=Hi()});var Mh=E((gAe,sD)=>{var _se=Hi(),xse=(r,e,t)=>{try{e=new _se(e,t)}catch{return!1}return e.test(r)};sD.exports=xse});var aD=E((yAe,oD)=>{var Ese=Hi(),Ose=(r,e)=>new Ese(r,e).set.map(t=>t.map(n=>n.value).join(" ").trim().split(" "));oD.exports=Ose});var uD=E((vAe,lD)=>{var Ise=Tn(),Cse=Hi(),Tse=(r,e,t)=>{let n=null,i=null,s=null;try{s=new Cse(e,t)}catch{return null}return r.forEach(o=>{s.test(o)&&(!n||i.compare(o)===-1)&&(n=o,i=new Ise(n,t))}),n};lD.exports=Tse});var fD=E((wAe,cD)=>{var Ase=Tn(),Mse=Hi(),kse=(r,e,t)=>{let n=null,i=null,s=null;try{s=new Mse(e,t)}catch{return null}return r.forEach(o=>{s.test(o)&&(!n||i.compare(o)===1)&&(n=o,i=new Ase(n,t))}),n};cD.exports=kse});var pD=E((bAe,hD)=>{var ex=Tn(),Pse=Hi(),dD=Oh(),Rse=(r,e)=>{r=new Pse(r,e);let t=new ex("0.0.0");if(r.test(t)||(t=new ex("0.0.0-0"),r.test(t)))return t;t=null;for(let n=0;n<r.set.length;++n){let i=r.set[n],s=null;i.forEach(o=>{let a=new ex(o.semver.version);switch(o.operator){case">":a.prerelease.length===0?a.patch++:a.prerelease.push(0),a.raw=a.format();case"":case">=":(!s||dD(a,s))&&(s=a);break;case"<":case"<=":break;default:throw new Error(`Unexpected operation: ${o.operator}`)}}),s&&(!t||dD(t,s))&&(t=s)}return t&&r.test(t)?t:null};hD.exports=Rse});var gD=E((SAe,mD)=>{var Lse=Hi(),Dse=(r,e)=>{try{return new Lse(r,e).range||"*"}catch{return null}};mD.exports=Dse});var wg=E((_Ae,bD)=>{var Nse=Tn(),wD=Th(),{ANY:jse}=wD,Kse=Hi(),qse=Mh(),yD=Oh(),vD=hg(),Fse=mg(),Vse=pg(),Bse=(r,e,t,n)=>{r=new Nse(r,n),e=new Kse(e,n);let i,s,o,a,u;switch(t){case">":i=yD,s=Fse,o=vD,a=">",u=">=";break;case"<":i=vD,s=Vse,o=yD,a="<",u="<=";break;default:throw new TypeError('Must provide a hilo val of "<" or ">"')}if(qse(r,e,n))return!1;for(let c=0;c<e.set.length;++c){let d=e.set[c],h=null,p=null;if(d.forEach(m=>{m.semver===jse&&(m=new wD(">=0.0.0")),h=h||m,p=p||m,i(m.semver,h.semver,n)?h=m:o(m.semver,p.semver,n)&&(p=m)}),h.operator===a||h.operator===u||(!p.operator||p.operator===a)&&s(r,p.semver))return!1;if(p.operator===u&&o(r,p.semver))return!1}return!0};bD.exports=Bse});var _D=E((xAe,SD)=>{var Use=wg(),Gse=(r,e,t)=>Use(r,e,">",t);SD.exports=Gse});var ED=E((EAe,xD)=>{var $se=wg(),Wse=(r,e,t)=>$se(r,e,"<",t);xD.exports=Wse});var CD=E((OAe,ID)=>{var OD=Hi(),zse=(r,e,t)=>(r=new OD(r,t),e=new OD(e,t),r.intersects(e,t));ID.exports=zse});var AD=E((IAe,TD)=>{var Hse=Mh(),Yse=zi();TD.exports=(r,e,t)=>{let n=[],i=null,s=null,o=r.sort((d,h)=>Yse(d,h,t));for(let d of o)Hse(d,e,t)?(s=d,i||(i=d)):(s&&n.push([i,s]),s=null,i=null);i&&n.push([i,null]);let a=[];for(let[d,h]of n)d===h?a.push(d):!h&&d===o[0]?a.push("*"):h?d===o[0]?a.push(`<=${h}`):a.push(`${d} - ${h}`):a.push(`>=${d}`);let u=a.join(" || "),c=typeof e.raw=="string"?e.raw:String(e);return u.length<c.length?u:e}});var DD=E((CAe,LD)=>{var MD=Hi(),rx=Th(),{ANY:tx}=rx,kh=Mh(),nx=zi(),Jse=(r,e,t={})=>{if(r===e)return!0;r=new MD(r,t),e=new MD(e,t);let n=!1;e:for(let i of r.set){for(let s of e.set){let o=Zse(i,s,t);if(n=n||o!==null,o)continue e}if(n)return!1}return!0},Qse=[new rx(">=0.0.0-0")],kD=[new rx(">=0.0.0")],Zse=(r,e,t)=>{if(r===e)return!0;if(r.length===1&&r[0].semver===tx){if(e.length===1&&e[0].semver===tx)return!0;t.includePrerelease?r=Qse:r=kD}if(e.length===1&&e[0].semver===tx){if(t.includePrerelease)return!0;e=kD}let n=new Set,i,s;for(let m of r)m.operator===">"||m.operator===">="?i=PD(i,m,t):m.operator==="<"||m.operator==="<="?s=RD(s,m,t):n.add(m.semver);if(n.size>1)return null;let o;if(i&&s){if(o=nx(i.semver,s.semver,t),o>0)return null;if(o===0&&(i.operator!==">="||s.operator!=="<="))return null}for(let m of n){if(i&&!kh(m,String(i),t)||s&&!kh(m,String(s),t))return null;for(let y of e)if(!kh(m,String(y),t))return!1;return!0}let a,u,c,d,h=s&&!t.includePrerelease&&s.semver.prerelease.length?s.semver:!1,p=i&&!t.includePrerelease&&i.semver.prerelease.length?i.semver:!1;h&&h.prerelease.length===1&&s.operator==="<"&&h.prerelease[0]===0&&(h=!1);for(let m of e){if(d=d||m.operator===">"||m.operator===">=",c=c||m.operator==="<"||m.operator==="<=",i){if(p&&m.semver.prerelease&&m.semver.prerelease.length&&m.semver.major===p.major&&m.semver.minor===p.minor&&m.semver.patch===p.patch&&(p=!1),m.operator===">"||m.operator===">="){if(a=PD(i,m,t),a===m&&a!==i)return!1}else if(i.operator===">="&&!kh(i.semver,String(m),t))return!1}if(s){if(h&&m.semver.prerelease&&m.semver.prerelease.length&&m.semver.major===h.major&&m.semver.minor===h.minor&&m.semver.patch===h.patch&&(h=!1),m.operator==="<"||m.operator==="<="){if(u=RD(s,m,t),u===m&&u!==s)return!1}else if(s.operator==="<="&&!kh(s.semver,String(m),t))return!1}if(!m.operator&&(s||i)&&o!==0)return!1}return!(i&&c&&!s&&o!==0||s&&d&&!i&&o!==0||p||h)},PD=(r,e,t)=>{if(!r)return e;let n=nx(r.semver,e.semver,t);return n>0?r:n<0||e.operator===">"&&r.operator===">="?e:r},RD=(r,e,t)=>{if(!r)return e;let n=nx(r.semver,e.semver,t);return n<0?r:n>0||e.operator==="<"&&r.operator==="<="?e:r};LD.exports=Jse});var qD=E((TAe,KD)=>{var ix=Zc(),ND=xh(),Xse=Tn(),jD=F_(),eoe=tu(),toe=rL(),roe=iL(),noe=aL(),ioe=cL(),soe=dL(),ooe=pL(),aoe=gL(),loe=vL(),uoe=zi(),coe=_L(),foe=EL(),doe=dg(),hoe=TL(),poe=ML(),moe=Oh(),goe=hg(),yoe=B_(),voe=U_(),woe=pg(),boe=mg(),Soe=G_(),_oe=qL(),xoe=Th(),Eoe=Hi(),Ooe=Mh(),Ioe=aD(),Coe=uD(),Toe=fD(),Aoe=pD(),Moe=gD(),koe=wg(),Poe=_D(),Roe=ED(),Loe=CD(),Doe=AD(),Noe=DD();KD.exports={parse:eoe,valid:toe,clean:roe,inc:noe,diff:ioe,major:soe,minor:ooe,patch:aoe,prerelease:loe,compare:uoe,rcompare:coe,compareLoose:foe,compareBuild:doe,sort:hoe,rsort:poe,gt:moe,lt:goe,eq:yoe,neq:voe,gte:woe,lte:boe,cmp:Soe,coerce:_oe,Comparator:xoe,Range:Eoe,satisfies:Ooe,toComparators:Ioe,maxSatisfying:Coe,minSatisfying:Toe,minVersion:Aoe,validRange:Moe,outside:koe,gtr:Poe,ltr:Roe,intersects:Loe,simplifyRange:Doe,subset:Noe,SemVer:Xse,re:ix.re,src:ix.src,tokens:ix.t,SEMVER_SPEC_VERSION:ND.SEMVER_SPEC_VERSION,RELEASE_TYPES:ND.RELEASE_TYPES,compareIdentifiers:jD.compareIdentifiers,rcompareIdentifiers:jD.rcompareIdentifiers}});var Yi=E(Fe=>{"use strict";Object.defineProperty(Fe,"__esModule",{value:!0});Fe.QUEUE_EVENT_SUFFIX=Fe.WORKER_SUFFIX=Fe.errorToJSON=Fe.parseObjectValues=Fe.isRedisVersionLowerThan=Fe.childSend=Fe.asyncSend=Fe.isNotConnectionError=Fe.DELAY_TIME_1=Fe.DELAY_TIME_5=Fe.clientCommandMessageReg=Fe.getParentKey=Fe.removeAllQueueData=Fe.isRedisCluster=Fe.isRedisInstance=Fe.delay=Fe.array2obj=Fe.isEmpty=Fe.lengthInUtf8Bytes=Fe.tryCatch=Fe.errorObject=void 0;var joe=eg(),Koe=ln(),sx=qD();Fe.errorObject={value:null};function qoe(r,e,t){try{return r.apply(e,t)}catch(n){return Fe.errorObject.value=n,Fe.errorObject}}Fe.tryCatch=qoe;function Foe(r){return Buffer.byteLength(r,"utf8")}Fe.lengthInUtf8Bytes=Foe;function Voe(r){for(let e in r)if(Object.prototype.hasOwnProperty.call(r,e))return!1;return!0}Fe.isEmpty=Voe;function Boe(r){let e={};for(let t=0;t<r.length;t+=2)e[r[t]]=r[t+1];return e}Fe.array2obj=Boe;function Uoe(r,e){return new Promise(t=>{let n,i=()=>{e?.signal.removeEventListener("abort",i),clearTimeout(n),t()};n=setTimeout(i,r),e?.signal.addEventListener("abort",i)})}Fe.delay=Uoe;function FD(r){return r?["connect","disconnect","duplicate"].every(t=>typeof r[t]=="function"):!1}Fe.isRedisInstance=FD;function Goe(r){return FD(r)&&r.isCluster}Fe.isRedisCluster=Goe;async function $oe(r,e,t=process.env.BULLMQ_TEST_PREFIX||"bull"){if(r instanceof joe.Cluster)return Promise.resolve(!1);let n=`${t}:${e}:*`;return new Promise((i,s)=>{let o=r.scanStream({match:n});o.on("data",a=>{if(a.length){let u=r.pipeline();a.forEach(c=>{u.del(c)}),u.exec().catch(c=>{s(c)})}}),o.on("end",()=>i()),o.on("error",a=>s(a))})}Fe.removeAllQueueData=$oe;function Woe(r){if(r)return`${r.queue}:${r.id}`}Fe.getParentKey=Woe;Fe.clientCommandMessageReg=/ERR unknown command ['`]\s*client\s*['`]/;Fe.DELAY_TIME_5=5e3;Fe.DELAY_TIME_1=100;function zoe(r){let e=`${r.message}`;return e!==Koe.CONNECTION_CLOSED_ERROR_MSG&&!e.includes("ECONNREFUSED")}Fe.isNotConnectionError=zoe;var Hoe=(r,e)=>new Promise((t,n)=>{typeof r.send=="function"?r.send(e,i=>{i?n(i):t()}):typeof r.postMessage=="function"?t(r.postMessage(e)):t()});Fe.asyncSend=Hoe;var Yoe=(r,e)=>(0,Fe.asyncSend)(r,e);Fe.childSend=Yoe;var Joe=(r,e)=>{let t=sx.valid(sx.coerce(r));return sx.lt(t,e)};Fe.isRedisVersionLowerThan=Joe;var Qoe=r=>{let e={};for(let t of Object.entries(r))e[t[0]]=JSON.parse(t[1]);return e};Fe.parseObjectValues=Qoe;var Zoe=r=>{let e={};return Object.getOwnPropertyNames(r).forEach(function(t){e[t]=r[t]}),e};Fe.errorToJSON=Zoe;Fe.WORKER_SUFFIX="";Fe.QUEUE_EVENT_SUFFIX=":qe"});var VD=E(bg=>{"use strict";Object.defineProperty(bg,"__esModule",{value:!0});bg.ChildProcessor=void 0;var Lo=Qc(),ox=Yi(),Aa;(function(r){r[r.Idle=0]="Idle",r[r.Started=1]="Started",r[r.Terminating=2]="Terminating",r[r.Errored=3]="Errored"})(Aa||(Aa={}));var ax=class{constructor(e){this.send=e}async init(e){let t;try{if(t=require(e),t.default&&(t=t.default),typeof t!="function")throw new Error("No function is exported in processor file")}catch(i){return this.status=Aa.Errored,this.send({cmd:Lo.ParentCommand.InitFailed,err:(0,ox.errorToJSON)(i)})}let n=t;t=function(i,s){try{return Promise.resolve(n(i,s))}catch(o){return Promise.reject(o)}},this.processor=t,this.status=Aa.Idle,await this.send({cmd:Lo.ParentCommand.InitCompleted})}async start(e,t){if(this.status!==Aa.Idle)return this.send({cmd:Lo.ParentCommand.Error,err:(0,ox.errorToJSON)(new Error("cannot start a not idling child process"))});this.status=Aa.Started,this.currentJobPromise=(async()=>{try{let n=this.wrapJob(e,this.send),i=await this.processor(n,t);await this.send({cmd:Lo.ParentCommand.Completed,value:typeof i>"u"?null:i})}catch(n){await this.send({cmd:Lo.ParentCommand.Failed,value:(0,ox.errorToJSON)(n.message?n:new Error(n))})}finally{this.status=Aa.Idle,this.currentJobPromise=void 0}})()}async stop(){}async waitForCurrentJobAndExit(){this.status=Aa.Terminating;try{await this.currentJobPromise}finally{process.exit(process.exitCode||0)}}wrapJob(e,t){return Object.assign(Object.assign({},e),{data:JSON.parse(e.data||"{}"),opts:e.opts,returnValue:JSON.parse(e.returnvalue||"{}"),async updateProgress(n){this.progress=n,await t({cmd:Lo.ParentCommand.Progress,value:n})},log:async n=>{t({cmd:Lo.ParentCommand.Log,value:n})},moveToDelayed:async(n,i)=>{t({cmd:Lo.ParentCommand.MoveToDelayed,value:{timestamp:n,token:i}})},updateData:async n=>{t({cmd:Lo.ParentCommand.Update,value:n})}})}};bg.ChildProcessor=ax});var ux=E(Sg=>{"use strict";Object.defineProperty(Sg,"__esModule",{value:!0});Sg.DelayedError=void 0;var lx=class extends Error{constructor(e){super(e),this.name=this.constructor.name,Object.setPrototypeOf(this,new.target.prototype)}};Sg.DelayedError=lx});var _g=E((rf,Ph)=>{(function(){var r,e="4.17.21",t=200,n="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",i="Expected a function",s="Invalid `variable` option passed into `_.template`",o="__lodash_hash_undefined__",a=500,u="__lodash_placeholder__",c=1,d=2,h=4,p=1,m=2,y=1,_=2,O=4,x=8,A=16,P=32,q=64,F=128,z=256,B=512,G=30,H="...",N=800,v=16,w=1,I=2,T=3,k=1/0,M=9007199254740991,K=17976931348623157e292,L=0/0,b=4294967295,R=b-1,X=b>>>1,fe=[["ary",F],["bind",y],["bindKey",_],["curry",x],["curryRight",A],["flip",B],["partial",P],["partialRight",q],["rearg",z]],he="[object Arguments]",Ce="[object Array]",ft="[object AsyncFunction]",st="[object Boolean]",Sn="[object Date]",Ze="[object DOMException]",bt="[object Error]",yo="[object Function]",Bt="[object GeneratorFunction]",dt="[object Map]",fi="[object Number]",jt="[object Null]",St="[object Object]",bs="[object Promise]",kt="[object Proxy]",Ct="[object RegExp]",_n="[object Set]",Pt="[object String]",zt="[object Symbol]",Lm="[object Undefined]",Ut="[object WeakMap]",gr="[object WeakSet]",sa="[object ArrayBuffer]",Kt="[object DataView]",Qt="[object Float32Array]",yc="[object Float64Array]",Zt="[object Int8Array]",Xt="[object Int16Array]",vc="[object Int32Array]",er="[object Uint8Array]",tr="[object Uint8ClampedArray]",wc="[object Uint16Array]",rr="[object Uint32Array]",yr=/\b__p \+= '';/g,Dm=/\b(__p \+=) '' \+/g,vr=/(__e\(.*?\)|\b__t\)) \+\n'';/g,ar=/&(?:amp|lt|gt|quot|#39);/g,Ld=/[&<>"']/g,wr=RegExp(ar.source),br=RegExp(Ld.source),Nm=/<%-([\s\S]+?)%>/g,Sr=/<%([\s\S]+?)%>/g,lr=/<%=([\s\S]+?)%>/g,jm=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,_r=/^\w*$/,xr=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,bc=/[\\^$.*+?()[\]{}|]/g,Er=RegExp(bc.source),nr=/^\s+/,Km=/\s/,Or=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,Ir=/\{\n\/\* \[wrapped with (.+)\] \*/,qm=/,? & /,Cr=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,Tr=/[()=,{}\[\]\/\s]/,Fm=/\\(\\)?/g,Ar=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,ur=/\w*$/,Dd=/^[-+]0x[0-9a-f]+$/i,Nd=/^0b[01]+$/i,jd=/^\[object .+?Constructor\]$/,Kd=/^0o[0-7]+$/i,qd=/^(?:0|[1-9]\d*)$/,Fd=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,oa=/($^)/,Vd=/['\n\r\u2028\u2029\\]/g,aa="\\ud800-\\udfff",Bd="\\u0300-\\u036f",Ud="\\ufe20-\\ufe2f",Gd="\\u20d0-\\u20ff",Sc=Bd+Ud+Gd,_c="\\u2700-\\u27bf",xc="a-z\\xdf-\\xf6\\xf8-\\xff",$d="\\xac\\xb1\\xd7\\xf7",Wd="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",zd="\\u2000-\\u206f",Hd=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",zT="A-Z\\xc0-\\xd6\\xd8-\\xde",HT="\\ufe0e\\ufe0f",YT=$d+Wd+zd+Hd,Yw="['\u2019]",m7="["+aa+"]",JT="["+YT+"]",Vm="["+Sc+"]",QT="\\d+",g7="["+_c+"]",ZT="["+xc+"]",XT="[^"+aa+YT+QT+_c+xc+zT+"]",Jw="\\ud83c[\\udffb-\\udfff]",y7="(?:"+Vm+"|"+Jw+")",eA="[^"+aa+"]",Qw="(?:\\ud83c[\\udde6-\\uddff]){2}",Zw="[\\ud800-\\udbff][\\udc00-\\udfff]",Ec="["+zT+"]",tA="\\u200d",rA="(?:"+ZT+"|"+XT+")",v7="(?:"+Ec+"|"+XT+")",nA="(?:"+Yw+"(?:d|ll|m|re|s|t|ve))?",iA="(?:"+Yw+"(?:D|LL|M|RE|S|T|VE))?",sA=y7+"?",oA="["+HT+"]?",w7="(?:"+tA+"(?:"+[eA,Qw,Zw].join("|")+")"+oA+sA+")*",b7="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",S7="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",aA=oA+sA+w7,_7="(?:"+[g7,Qw,Zw].join("|")+")"+aA,x7="(?:"+[eA+Vm+"?",Vm,Qw,Zw,m7].join("|")+")",E7=RegExp(Yw,"g"),O7=RegExp(Vm,"g"),Xw=RegExp(Jw+"(?="+Jw+")|"+x7+aA,"g"),I7=RegExp([Ec+"?"+ZT+"+"+nA+"(?="+[JT,Ec,"$"].join("|")+")",v7+"+"+iA+"(?="+[JT,Ec+rA,"$"].join("|")+")",Ec+"?"+rA+"+"+nA,Ec+"+"+iA,S7,b7,QT,_7].join("|"),"g"),C7=RegExp("["+tA+aa+Sc+HT+"]"),T7=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,A7=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],M7=-1,Ht={};Ht[Qt]=Ht[yc]=Ht[Zt]=Ht[Xt]=Ht[vc]=Ht[er]=Ht[tr]=Ht[wc]=Ht[rr]=!0,Ht[he]=Ht[Ce]=Ht[sa]=Ht[st]=Ht[Kt]=Ht[Sn]=Ht[bt]=Ht[yo]=Ht[dt]=Ht[fi]=Ht[St]=Ht[Ct]=Ht[_n]=Ht[Pt]=Ht[Ut]=!1;var Gt={};Gt[he]=Gt[Ce]=Gt[sa]=Gt[Kt]=Gt[st]=Gt[Sn]=Gt[Qt]=Gt[yc]=Gt[Zt]=Gt[Xt]=Gt[vc]=Gt[dt]=Gt[fi]=Gt[St]=Gt[Ct]=Gt[_n]=Gt[Pt]=Gt[zt]=Gt[er]=Gt[tr]=Gt[wc]=Gt[rr]=!0,Gt[bt]=Gt[yo]=Gt[Ut]=!1;var k7={\u00C0:"A",\u00C1:"A",\u00C2:"A",\u00C3:"A",\u00C4:"A",\u00C5:"A",\u00E0:"a",\u00E1:"a",\u00E2:"a",\u00E3:"a",\u00E4:"a",\u00E5:"a",\u00C7:"C",\u00E7:"c",\u00D0:"D",\u00F0:"d",\u00C8:"E",\u00C9:"E",\u00CA:"E",\u00CB:"E",\u00E8:"e",\u00E9:"e",\u00EA:"e",\u00EB:"e",\u00CC:"I",\u00CD:"I",\u00CE:"I",\u00CF:"I",\u00EC:"i",\u00ED:"i",\u00EE:"i",\u00EF:"i",\u00D1:"N",\u00F1:"n",\u00D2:"O",\u00D3:"O",\u00D4:"O",\u00D5:"O",\u00D6:"O",\u00D8:"O",\u00F2:"o",\u00F3:"o",\u00F4:"o",\u00F5:"o",\u00F6:"o",\u00F8:"o",\u00D9:"U",\u00DA:"U",\u00DB:"U",\u00DC:"U",\u00F9:"u",\u00FA:"u",\u00FB:"u",\u00FC:"u",\u00DD:"Y",\u00FD:"y",\u00FF:"y",\u00C6:"Ae",\u00E6:"ae",\u00DE:"Th",\u00FE:"th",\u00DF:"ss",\u0100:"A",\u0102:"A",\u0104:"A",\u0101:"a",\u0103:"a",\u0105:"a",\u0106:"C",\u0108:"C",\u010A:"C",\u010C:"C",\u0107:"c",\u0109:"c",\u010B:"c",\u010D:"c",\u010E:"D",\u0110:"D",\u010F:"d",\u0111:"d",\u0112:"E",\u0114:"E",\u0116:"E",\u0118:"E",\u011A:"E",\u0113:"e",\u0115:"e",\u0117:"e",\u0119:"e",\u011B:"e",\u011C:"G",\u011E:"G",\u0120:"G",\u0122:"G",\u011D:"g",\u011F:"g",\u0121:"g",\u0123:"g",\u0124:"H",\u0126:"H",\u0125:"h",\u0127:"h",\u0128:"I",\u012A:"I",\u012C:"I",\u012E:"I",\u0130:"I",\u0129:"i",\u012B:"i",\u012D:"i",\u012F:"i",\u0131:"i",\u0134:"J",\u0135:"j",\u0136:"K",\u0137:"k",\u0138:"k",\u0139:"L",\u013B:"L",\u013D:"L",\u013F:"L",\u0141:"L",\u013A:"l",\u013C:"l",\u013E:"l",\u0140:"l",\u0142:"l",\u0143:"N",\u0145:"N",\u0147:"N",\u014A:"N",\u0144:"n",\u0146:"n",\u0148:"n",\u014B:"n",\u014C:"O",\u014E:"O",\u0150:"O",\u014D:"o",\u014F:"o",\u0151:"o",\u0154:"R",\u0156:"R",\u0158:"R",\u0155:"r",\u0157:"r",\u0159:"r",\u015A:"S",\u015C:"S",\u015E:"S",\u0160:"S",\u015B:"s",\u015D:"s",\u015F:"s",\u0161:"s",\u0162:"T",\u0164:"T",\u0166:"T",\u0163:"t",\u0165:"t",\u0167:"t",\u0168:"U",\u016A:"U",\u016C:"U",\u016E:"U",\u0170:"U",\u0172:"U",\u0169:"u",\u016B:"u",\u016D:"u",\u016F:"u",\u0171:"u",\u0173:"u",\u0174:"W",\u0175:"w",\u0176:"Y",\u0177:"y",\u0178:"Y",\u0179:"Z",\u017B:"Z",\u017D:"Z",\u017A:"z",\u017C:"z",\u017E:"z",\u0132:"IJ",\u0133:"ij",\u0152:"Oe",\u0153:"oe",\u0149:"'n",\u017F:"s"},P7={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},R7={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},L7={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},D7=parseFloat,N7=parseInt,lA=typeof global=="object"&&global&&global.Object===Object&&global,j7=typeof self=="object"&&self&&self.Object===Object&&self,sn=lA||j7||Function("return this")(),eb=typeof rf=="object"&&rf&&!rf.nodeType&&rf,Bl=eb&&typeof Ph=="object"&&Ph&&!Ph.nodeType&&Ph,uA=Bl&&Bl.exports===eb,tb=uA&&lA.process,Ki=function(){try{var W=Bl&&Bl.require&&Bl.require("util").types;return W||tb&&tb.binding&&tb.binding("util")}catch{}}(),cA=Ki&&Ki.isArrayBuffer,fA=Ki&&Ki.isDate,dA=Ki&&Ki.isMap,hA=Ki&&Ki.isRegExp,pA=Ki&&Ki.isSet,mA=Ki&&Ki.isTypedArray;function di(W,te,Z){switch(Z.length){case 0:return W.call(te);case 1:return W.call(te,Z[0]);case 2:return W.call(te,Z[0],Z[1]);case 3:return W.call(te,Z[0],Z[1],Z[2])}return W.apply(te,Z)}function K7(W,te,Z,be){for(var Ge=-1,Ot=W==null?0:W.length;++Ge<Ot;){var Jr=W[Ge];te(be,Jr,Z(Jr),W)}return be}function qi(W,te){for(var Z=-1,be=W==null?0:W.length;++Z<be&&te(W[Z],Z,W)!==!1;);return W}function q7(W,te){for(var Z=W==null?0:W.length;Z--&&te(W[Z],Z,W)!==!1;);return W}function gA(W,te){for(var Z=-1,be=W==null?0:W.length;++Z<be;)if(!te(W[Z],Z,W))return!1;return!0}function la(W,te){for(var Z=-1,be=W==null?0:W.length,Ge=0,Ot=[];++Z<be;){var Jr=W[Z];te(Jr,Z,W)&&(Ot[Ge++]=Jr)}return Ot}function Bm(W,te){var Z=W==null?0:W.length;return!!Z&&Oc(W,te,0)>-1}function rb(W,te,Z){for(var be=-1,Ge=W==null?0:W.length;++be<Ge;)if(Z(te,W[be]))return!0;return!1}function ir(W,te){for(var Z=-1,be=W==null?0:W.length,Ge=Array(be);++Z<be;)Ge[Z]=te(W[Z],Z,W);return Ge}function ua(W,te){for(var Z=-1,be=te.length,Ge=W.length;++Z<be;)W[Ge+Z]=te[Z];return W}function nb(W,te,Z,be){var Ge=-1,Ot=W==null?0:W.length;for(be&&Ot&&(Z=W[++Ge]);++Ge<Ot;)Z=te(Z,W[Ge],Ge,W);return Z}function F7(W,te,Z,be){var Ge=W==null?0:W.length;for(be&&Ge&&(Z=W[--Ge]);Ge--;)Z=te(Z,W[Ge],Ge,W);return Z}function ib(W,te){for(var Z=-1,be=W==null?0:W.length;++Z<be;)if(te(W[Z],Z,W))return!0;return!1}var V7=sb("length");function B7(W){return W.split("")}function U7(W){return W.match(Cr)||[]}function yA(W,te,Z){var be;return Z(W,function(Ge,Ot,Jr){if(te(Ge,Ot,Jr))return be=Ot,!1}),be}function Um(W,te,Z,be){for(var Ge=W.length,Ot=Z+(be?1:-1);be?Ot--:++Ot<Ge;)if(te(W[Ot],Ot,W))return Ot;return-1}function Oc(W,te,Z){return te===te?tz(W,te,Z):Um(W,vA,Z)}function G7(W,te,Z,be){for(var Ge=Z-1,Ot=W.length;++Ge<Ot;)if(be(W[Ge],te))return Ge;return-1}function vA(W){return W!==W}function wA(W,te){var Z=W==null?0:W.length;return Z?ab(W,te)/Z:L}function sb(W){return function(te){return te==null?r:te[W]}}function ob(W){return function(te){return W==null?r:W[te]}}function bA(W,te,Z,be,Ge){return Ge(W,function(Ot,Jr,qt){Z=be?(be=!1,Ot):te(Z,Ot,Jr,qt)}),Z}function $7(W,te){var Z=W.length;for(W.sort(te);Z--;)W[Z]=W[Z].value;return W}function ab(W,te){for(var Z,be=-1,Ge=W.length;++be<Ge;){var Ot=te(W[be]);Ot!==r&&(Z=Z===r?Ot:Z+Ot)}return Z}function lb(W,te){for(var Z=-1,be=Array(W);++Z<W;)be[Z]=te(Z);return be}function W7(W,te){return ir(te,function(Z){return[Z,W[Z]]})}function SA(W){return W&&W.slice(0,OA(W)+1).replace(nr,"")}function hi(W){return function(te){return W(te)}}function ub(W,te){return ir(te,function(Z){return W[Z]})}function Yd(W,te){return W.has(te)}function _A(W,te){for(var Z=-1,be=W.length;++Z<be&&Oc(te,W[Z],0)>-1;);return Z}function xA(W,te){for(var Z=W.length;Z--&&Oc(te,W[Z],0)>-1;);return Z}function z7(W,te){for(var Z=W.length,be=0;Z--;)W[Z]===te&&++be;return be}var H7=ob(k7),Y7=ob(P7);function J7(W){return"\\"+L7[W]}function Q7(W,te){return W==null?r:W[te]}function Ic(W){return C7.test(W)}function Z7(W){return T7.test(W)}function X7(W){for(var te,Z=[];!(te=W.next()).done;)Z.push(te.value);return Z}function cb(W){var te=-1,Z=Array(W.size);return W.forEach(function(be,Ge){Z[++te]=[Ge,be]}),Z}function EA(W,te){return function(Z){return W(te(Z))}}function ca(W,te){for(var Z=-1,be=W.length,Ge=0,Ot=[];++Z<be;){var Jr=W[Z];(Jr===te||Jr===u)&&(W[Z]=u,Ot[Ge++]=Z)}return Ot}function Gm(W){var te=-1,Z=Array(W.size);return W.forEach(function(be){Z[++te]=be}),Z}function ez(W){var te=-1,Z=Array(W.size);return W.forEach(function(be){Z[++te]=[be,be]}),Z}function tz(W,te,Z){for(var be=Z-1,Ge=W.length;++be<Ge;)if(W[be]===te)return be;return-1}function rz(W,te,Z){for(var be=Z+1;be--;)if(W[be]===te)return be;return be}function Cc(W){return Ic(W)?iz(W):V7(W)}function Ss(W){return Ic(W)?sz(W):B7(W)}function OA(W){for(var te=W.length;te--&&Km.test(W.charAt(te)););return te}var nz=ob(R7);function iz(W){for(var te=Xw.lastIndex=0;Xw.test(W);)++te;return te}function sz(W){return W.match(Xw)||[]}function oz(W){return W.match(I7)||[]}var az=function W(te){te=te==null?sn:fa.defaults(sn.Object(),te,fa.pick(sn,A7));var Z=te.Array,be=te.Date,Ge=te.Error,Ot=te.Function,Jr=te.Math,qt=te.Object,fb=te.RegExp,lz=te.String,Fi=te.TypeError,$m=Z.prototype,uz=Ot.prototype,Tc=qt.prototype,Wm=te["__core-js_shared__"],zm=uz.toString,Rt=Tc.hasOwnProperty,cz=0,IA=function(){var l=/[^.]+$/.exec(Wm&&Wm.keys&&Wm.keys.IE_PROTO||"");return l?"Symbol(src)_1."+l:""}(),Hm=Tc.toString,fz=zm.call(qt),dz=sn._,hz=fb("^"+zm.call(Rt).replace(bc,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Ym=uA?te.Buffer:r,da=te.Symbol,Jm=te.Uint8Array,CA=Ym?Ym.allocUnsafe:r,Qm=EA(qt.getPrototypeOf,qt),TA=qt.create,AA=Tc.propertyIsEnumerable,Zm=$m.splice,MA=da?da.isConcatSpreadable:r,Jd=da?da.iterator:r,Ul=da?da.toStringTag:r,Xm=function(){try{var l=Hl(qt,"defineProperty");return l({},"",{}),l}catch{}}(),pz=te.clearTimeout!==sn.clearTimeout&&te.clearTimeout,mz=be&&be.now!==sn.Date.now&&be.now,gz=te.setTimeout!==sn.setTimeout&&te.setTimeout,e0=Jr.ceil,t0=Jr.floor,db=qt.getOwnPropertySymbols,yz=Ym?Ym.isBuffer:r,kA=te.isFinite,vz=$m.join,wz=EA(qt.keys,qt),Qr=Jr.max,xn=Jr.min,bz=be.now,Sz=te.parseInt,PA=Jr.random,_z=$m.reverse,hb=Hl(te,"DataView"),Qd=Hl(te,"Map"),pb=Hl(te,"Promise"),Ac=Hl(te,"Set"),Zd=Hl(te,"WeakMap"),Xd=Hl(qt,"create"),r0=Zd&&new Zd,Mc={},xz=Yl(hb),Ez=Yl(Qd),Oz=Yl(pb),Iz=Yl(Ac),Cz=Yl(Zd),n0=da?da.prototype:r,eh=n0?n0.valueOf:r,RA=n0?n0.toString:r;function D(l){if(Mr(l)&&!We(l)&&!(l instanceof ut)){if(l instanceof Vi)return l;if(Rt.call(l,"__wrapped__"))return LM(l)}return new Vi(l)}var kc=function(){function l(){}return function(f){if(!cr(f))return{};if(TA)return TA(f);l.prototype=f;var g=new l;return l.prototype=r,g}}();function i0(){}function Vi(l,f){this.__wrapped__=l,this.__actions__=[],this.__chain__=!!f,this.__index__=0,this.__values__=r}D.templateSettings={escape:Nm,evaluate:Sr,interpolate:lr,variable:"",imports:{_:D}},D.prototype=i0.prototype,D.prototype.constructor=D,Vi.prototype=kc(i0.prototype),Vi.prototype.constructor=Vi;function ut(l){this.__wrapped__=l,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=b,this.__views__=[]}function Tz(){var l=new ut(this.__wrapped__);return l.__actions__=Jn(this.__actions__),l.__dir__=this.__dir__,l.__filtered__=this.__filtered__,l.__iteratees__=Jn(this.__iteratees__),l.__takeCount__=this.__takeCount__,l.__views__=Jn(this.__views__),l}function Az(){if(this.__filtered__){var l=new ut(this);l.__dir__=-1,l.__filtered__=!0}else l=this.clone(),l.__dir__*=-1;return l}function Mz(){var l=this.__wrapped__.value(),f=this.__dir__,g=We(l),S=f<0,C=g?l.length:0,j=BH(0,C,this.__views__),V=j.start,U=j.end,Y=U-V,ne=S?U:V-1,ie=this.__iteratees__,oe=ie.length,pe=0,Te=xn(Y,this.__takeCount__);if(!g||!S&&C==Y&&Te==Y)return nM(l,this.__actions__);var Ne=[];e:for(;Y--&&pe<Te;){ne+=f;for(var Xe=-1,je=l[ne];++Xe<oe;){var ot=ie[Xe],ht=ot.iteratee,gi=ot.type,jn=ht(je);if(gi==I)je=jn;else if(!jn){if(gi==w)continue e;break e}}Ne[pe++]=je}return Ne}ut.prototype=kc(i0.prototype),ut.prototype.constructor=ut;function Gl(l){var f=-1,g=l==null?0:l.length;for(this.clear();++f<g;){var S=l[f];this.set(S[0],S[1])}}function kz(){this.__data__=Xd?Xd(null):{},this.size=0}function Pz(l){var f=this.has(l)&&delete this.__data__[l];return this.size-=f?1:0,f}function Rz(l){var f=this.__data__;if(Xd){var g=f[l];return g===o?r:g}return Rt.call(f,l)?f[l]:r}function Lz(l){var f=this.__data__;return Xd?f[l]!==r:Rt.call(f,l)}function Dz(l,f){var g=this.__data__;return this.size+=this.has(l)?0:1,g[l]=Xd&&f===r?o:f,this}Gl.prototype.clear=kz,Gl.prototype.delete=Pz,Gl.prototype.get=Rz,Gl.prototype.has=Lz,Gl.prototype.set=Dz;function vo(l){var f=-1,g=l==null?0:l.length;for(this.clear();++f<g;){var S=l[f];this.set(S[0],S[1])}}function Nz(){this.__data__=[],this.size=0}function jz(l){var f=this.__data__,g=s0(f,l);if(g<0)return!1;var S=f.length-1;return g==S?f.pop():Zm.call(f,g,1),--this.size,!0}function Kz(l){var f=this.__data__,g=s0(f,l);return g<0?r:f[g][1]}function qz(l){return s0(this.__data__,l)>-1}function Fz(l,f){var g=this.__data__,S=s0(g,l);return S<0?(++this.size,g.push([l,f])):g[S][1]=f,this}vo.prototype.clear=Nz,vo.prototype.delete=jz,vo.prototype.get=Kz,vo.prototype.has=qz,vo.prototype.set=Fz;function wo(l){var f=-1,g=l==null?0:l.length;for(this.clear();++f<g;){var S=l[f];this.set(S[0],S[1])}}function Vz(){this.size=0,this.__data__={hash:new Gl,map:new(Qd||vo),string:new Gl}}function Bz(l){var f=y0(this,l).delete(l);return this.size-=f?1:0,f}function Uz(l){return y0(this,l).get(l)}function Gz(l){return y0(this,l).has(l)}function $z(l,f){var g=y0(this,l),S=g.size;return g.set(l,f),this.size+=g.size==S?0:1,this}wo.prototype.clear=Vz,wo.prototype.delete=Bz,wo.prototype.get=Uz,wo.prototype.has=Gz,wo.prototype.set=$z;function $l(l){var f=-1,g=l==null?0:l.length;for(this.__data__=new wo;++f<g;)this.add(l[f])}function Wz(l){return this.__data__.set(l,o),this}function zz(l){return this.__data__.has(l)}$l.prototype.add=$l.prototype.push=Wz,$l.prototype.has=zz;function _s(l){var f=this.__data__=new vo(l);this.size=f.size}function Hz(){this.__data__=new vo,this.size=0}function Yz(l){var f=this.__data__,g=f.delete(l);return this.size=f.size,g}function Jz(l){return this.__data__.get(l)}function Qz(l){return this.__data__.has(l)}function Zz(l,f){var g=this.__data__;if(g instanceof vo){var S=g.__data__;if(!Qd||S.length<t-1)return S.push([l,f]),this.size=++g.size,this;g=this.__data__=new wo(S)}return g.set(l,f),this.size=g.size,this}_s.prototype.clear=Hz,_s.prototype.delete=Yz,_s.prototype.get=Jz,_s.prototype.has=Qz,_s.prototype.set=Zz;function LA(l,f){var g=We(l),S=!g&&Jl(l),C=!g&&!S&&ya(l),j=!g&&!S&&!C&&Dc(l),V=g||S||C||j,U=V?lb(l.length,lz):[],Y=U.length;for(var ne in l)(f||Rt.call(l,ne))&&!(V&&(ne=="length"||C&&(ne=="offset"||ne=="parent")||j&&(ne=="buffer"||ne=="byteLength"||ne=="byteOffset")||xo(ne,Y)))&&U.push(ne);return U}function DA(l){var f=l.length;return f?l[Ob(0,f-1)]:r}function Xz(l,f){return v0(Jn(l),Wl(f,0,l.length))}function eH(l){return v0(Jn(l))}function mb(l,f,g){(g!==r&&!xs(l[f],g)||g===r&&!(f in l))&&bo(l,f,g)}function th(l,f,g){var S=l[f];(!(Rt.call(l,f)&&xs(S,g))||g===r&&!(f in l))&&bo(l,f,g)}function s0(l,f){for(var g=l.length;g--;)if(xs(l[g][0],f))return g;return-1}function tH(l,f,g,S){return ha(l,function(C,j,V){f(S,C,g(C),V)}),S}function NA(l,f){return l&&$s(f,on(f),l)}function rH(l,f){return l&&$s(f,Zn(f),l)}function bo(l,f,g){f=="__proto__"&&Xm?Xm(l,f,{configurable:!0,enumerable:!0,value:g,writable:!0}):l[f]=g}function gb(l,f){for(var g=-1,S=f.length,C=Z(S),j=l==null;++g<S;)C[g]=j?r:Jb(l,f[g]);return C}function Wl(l,f,g){return l===l&&(g!==r&&(l=l<=g?l:g),f!==r&&(l=l>=f?l:f)),l}function Bi(l,f,g,S,C,j){var V,U=f&c,Y=f&d,ne=f&h;if(g&&(V=C?g(l,S,C,j):g(l)),V!==r)return V;if(!cr(l))return l;var ie=We(l);if(ie){if(V=GH(l),!U)return Jn(l,V)}else{var oe=En(l),pe=oe==yo||oe==Bt;if(ya(l))return oM(l,U);if(oe==St||oe==he||pe&&!C){if(V=Y||pe?{}:OM(l),!U)return Y?RH(l,rH(V,l)):PH(l,NA(V,l))}else{if(!Gt[oe])return C?l:{};V=$H(l,oe,U)}}j||(j=new _s);var Te=j.get(l);if(Te)return Te;j.set(l,V),ek(l)?l.forEach(function(je){V.add(Bi(je,f,g,je,l,j))}):ZM(l)&&l.forEach(function(je,ot){V.set(ot,Bi(je,f,g,ot,l,j))});var Ne=ne?Y?Nb:Db:Y?Zn:on,Xe=ie?r:Ne(l);return qi(Xe||l,function(je,ot){Xe&&(ot=je,je=l[ot]),th(V,ot,Bi(je,f,g,ot,l,j))}),V}function nH(l){var f=on(l);return function(g){return jA(g,l,f)}}function jA(l,f,g){var S=g.length;if(l==null)return!S;for(l=qt(l);S--;){var C=g[S],j=f[C],V=l[C];if(V===r&&!(C in l)||!j(V))return!1}return!0}function KA(l,f,g){if(typeof l!="function")throw new Fi(i);return lh(function(){l.apply(r,g)},f)}function rh(l,f,g,S){var C=-1,j=Bm,V=!0,U=l.length,Y=[],ne=f.length;if(!U)return Y;g&&(f=ir(f,hi(g))),S?(j=rb,V=!1):f.length>=t&&(j=Yd,V=!1,f=new $l(f));e:for(;++C<U;){var ie=l[C],oe=g==null?ie:g(ie);if(ie=S||ie!==0?ie:0,V&&oe===oe){for(var pe=ne;pe--;)if(f[pe]===oe)continue e;Y.push(ie)}else j(f,oe,S)||Y.push(ie)}return Y}var ha=fM(Gs),qA=fM(vb,!0);function iH(l,f){var g=!0;return ha(l,function(S,C,j){return g=!!f(S,C,j),g}),g}function o0(l,f,g){for(var S=-1,C=l.length;++S<C;){var j=l[S],V=f(j);if(V!=null&&(U===r?V===V&&!mi(V):g(V,U)))var U=V,Y=j}return Y}function sH(l,f,g,S){var C=l.length;for(g=Qe(g),g<0&&(g=-g>C?0:C+g),S=S===r||S>C?C:Qe(S),S<0&&(S+=C),S=g>S?0:rk(S);g<S;)l[g++]=f;return l}function FA(l,f){var g=[];return ha(l,function(S,C,j){f(S,C,j)&&g.push(S)}),g}function gn(l,f,g,S,C){var j=-1,V=l.length;for(g||(g=zH),C||(C=[]);++j<V;){var U=l[j];f>0&&g(U)?f>1?gn(U,f-1,g,S,C):ua(C,U):S||(C[C.length]=U)}return C}var yb=dM(),VA=dM(!0);function Gs(l,f){return l&&yb(l,f,on)}function vb(l,f){return l&&VA(l,f,on)}function a0(l,f){return la(f,function(g){return Eo(l[g])})}function zl(l,f){f=ma(f,l);for(var g=0,S=f.length;l!=null&&g<S;)l=l[Ws(f[g++])];return g&&g==S?l:r}function BA(l,f,g){var S=f(l);return We(l)?S:ua(S,g(l))}function Dn(l){return l==null?l===r?Lm:jt:Ul&&Ul in qt(l)?VH(l):eY(l)}function wb(l,f){return l>f}function oH(l,f){return l!=null&&Rt.call(l,f)}function aH(l,f){return l!=null&&f in qt(l)}function lH(l,f,g){return l>=xn(f,g)&&l<Qr(f,g)}function bb(l,f,g){for(var S=g?rb:Bm,C=l[0].length,j=l.length,V=j,U=Z(j),Y=1/0,ne=[];V--;){var ie=l[V];V&&f&&(ie=ir(ie,hi(f))),Y=xn(ie.length,Y),U[V]=!g&&(f||C>=120&&ie.length>=120)?new $l(V&&ie):r}ie=l[0];var oe=-1,pe=U[0];e:for(;++oe<C&&ne.length<Y;){var Te=ie[oe],Ne=f?f(Te):Te;if(Te=g||Te!==0?Te:0,!(pe?Yd(pe,Ne):S(ne,Ne,g))){for(V=j;--V;){var Xe=U[V];if(!(Xe?Yd(Xe,Ne):S(l[V],Ne,g)))continue e}pe&&pe.push(Ne),ne.push(Te)}}return ne}function uH(l,f,g,S){return Gs(l,function(C,j,V){f(S,g(C),j,V)}),S}function nh(l,f,g){f=ma(f,l),l=AM(l,f);var S=l==null?l:l[Ws(Gi(f))];return S==null?r:di(S,l,g)}function UA(l){return Mr(l)&&Dn(l)==he}function cH(l){return Mr(l)&&Dn(l)==sa}function fH(l){return Mr(l)&&Dn(l)==Sn}function ih(l,f,g,S,C){return l===f?!0:l==null||f==null||!Mr(l)&&!Mr(f)?l!==l&&f!==f:dH(l,f,g,S,ih,C)}function dH(l,f,g,S,C,j){var V=We(l),U=We(f),Y=V?Ce:En(l),ne=U?Ce:En(f);Y=Y==he?St:Y,ne=ne==he?St:ne;var ie=Y==St,oe=ne==St,pe=Y==ne;if(pe&&ya(l)){if(!ya(f))return!1;V=!0,ie=!1}if(pe&&!ie)return j||(j=new _s),V||Dc(l)?_M(l,f,g,S,C,j):qH(l,f,Y,g,S,C,j);if(!(g&p)){var Te=ie&&Rt.call(l,"__wrapped__"),Ne=oe&&Rt.call(f,"__wrapped__");if(Te||Ne){var Xe=Te?l.value():l,je=Ne?f.value():f;return j||(j=new _s),C(Xe,je,g,S,j)}}return pe?(j||(j=new _s),FH(l,f,g,S,C,j)):!1}function hH(l){return Mr(l)&&En(l)==dt}function Sb(l,f,g,S){var C=g.length,j=C,V=!S;if(l==null)return!j;for(l=qt(l);C--;){var U=g[C];if(V&&U[2]?U[1]!==l[U[0]]:!(U[0]in l))return!1}for(;++C<j;){U=g[C];var Y=U[0],ne=l[Y],ie=U[1];if(V&&U[2]){if(ne===r&&!(Y in l))return!1}else{var oe=new _s;if(S)var pe=S(ne,ie,Y,l,f,oe);if(!(pe===r?ih(ie,ne,p|m,S,oe):pe))return!1}}return!0}function GA(l){if(!cr(l)||YH(l))return!1;var f=Eo(l)?hz:jd;return f.test(Yl(l))}function pH(l){return Mr(l)&&Dn(l)==Ct}function mH(l){return Mr(l)&&En(l)==_n}function gH(l){return Mr(l)&&E0(l.length)&&!!Ht[Dn(l)]}function $A(l){return typeof l=="function"?l:l==null?Xn:typeof l=="object"?We(l)?HA(l[0],l[1]):zA(l):hk(l)}function _b(l){if(!ah(l))return wz(l);var f=[];for(var g in qt(l))Rt.call(l,g)&&g!="constructor"&&f.push(g);return f}function yH(l){if(!cr(l))return XH(l);var f=ah(l),g=[];for(var S in l)S=="constructor"&&(f||!Rt.call(l,S))||g.push(S);return g}function xb(l,f){return l<f}function WA(l,f){var g=-1,S=Qn(l)?Z(l.length):[];return ha(l,function(C,j,V){S[++g]=f(C,j,V)}),S}function zA(l){var f=Kb(l);return f.length==1&&f[0][2]?CM(f[0][0],f[0][1]):function(g){return g===l||Sb(g,l,f)}}function HA(l,f){return Fb(l)&&IM(f)?CM(Ws(l),f):function(g){var S=Jb(g,l);return S===r&&S===f?Qb(g,l):ih(f,S,p|m)}}function l0(l,f,g,S,C){l!==f&&yb(f,function(j,V){if(C||(C=new _s),cr(j))vH(l,f,V,g,l0,S,C);else{var U=S?S(Bb(l,V),j,V+"",l,f,C):r;U===r&&(U=j),mb(l,V,U)}},Zn)}function vH(l,f,g,S,C,j,V){var U=Bb(l,g),Y=Bb(f,g),ne=V.get(Y);if(ne){mb(l,g,ne);return}var ie=j?j(U,Y,g+"",l,f,V):r,oe=ie===r;if(oe){var pe=We(Y),Te=!pe&&ya(Y),Ne=!pe&&!Te&&Dc(Y);ie=Y,pe||Te||Ne?We(U)?ie=U:Kr(U)?ie=Jn(U):Te?(oe=!1,ie=oM(Y,!0)):Ne?(oe=!1,ie=aM(Y,!0)):ie=[]:uh(Y)||Jl(Y)?(ie=U,Jl(U)?ie=nk(U):(!cr(U)||Eo(U))&&(ie=OM(Y))):oe=!1}oe&&(V.set(Y,ie),C(ie,Y,S,j,V),V.delete(Y)),mb(l,g,ie)}function YA(l,f){var g=l.length;if(g)return f+=f<0?g:0,xo(f,g)?l[f]:r}function JA(l,f,g){f.length?f=ir(f,function(j){return We(j)?function(V){return zl(V,j.length===1?j[0]:j)}:j}):f=[Xn];var S=-1;f=ir(f,hi(Le()));var C=WA(l,function(j,V,U){var Y=ir(f,function(ne){return ne(j)});return{criteria:Y,index:++S,value:j}});return $7(C,function(j,V){return kH(j,V,g)})}function wH(l,f){return QA(l,f,function(g,S){return Qb(l,S)})}function QA(l,f,g){for(var S=-1,C=f.length,j={};++S<C;){var V=f[S],U=zl(l,V);g(U,V)&&sh(j,ma(V,l),U)}return j}function bH(l){return function(f){return zl(f,l)}}function Eb(l,f,g,S){var C=S?G7:Oc,j=-1,V=f.length,U=l;for(l===f&&(f=Jn(f)),g&&(U=ir(l,hi(g)));++j<V;)for(var Y=0,ne=f[j],ie=g?g(ne):ne;(Y=C(U,ie,Y,S))>-1;)U!==l&&Zm.call(U,Y,1),Zm.call(l,Y,1);return l}function ZA(l,f){for(var g=l?f.length:0,S=g-1;g--;){var C=f[g];if(g==S||C!==j){var j=C;xo(C)?Zm.call(l,C,1):Tb(l,C)}}return l}function Ob(l,f){return l+t0(PA()*(f-l+1))}function SH(l,f,g,S){for(var C=-1,j=Qr(e0((f-l)/(g||1)),0),V=Z(j);j--;)V[S?j:++C]=l,l+=g;return V}function Ib(l,f){var g="";if(!l||f<1||f>M)return g;do f%2&&(g+=l),f=t0(f/2),f&&(l+=l);while(f);return g}function rt(l,f){return Ub(TM(l,f,Xn),l+"")}function _H(l){return DA(Nc(l))}function xH(l,f){var g=Nc(l);return v0(g,Wl(f,0,g.length))}function sh(l,f,g,S){if(!cr(l))return l;f=ma(f,l);for(var C=-1,j=f.length,V=j-1,U=l;U!=null&&++C<j;){var Y=Ws(f[C]),ne=g;if(Y==="__proto__"||Y==="constructor"||Y==="prototype")return l;if(C!=V){var ie=U[Y];ne=S?S(ie,Y,U):r,ne===r&&(ne=cr(ie)?ie:xo(f[C+1])?[]:{})}th(U,Y,ne),U=U[Y]}return l}var XA=r0?function(l,f){return r0.set(l,f),l}:Xn,EH=Xm?function(l,f){return Xm(l,"toString",{configurable:!0,enumerable:!1,value:Xb(f),writable:!0})}:Xn;function OH(l){return v0(Nc(l))}function Ui(l,f,g){var S=-1,C=l.length;f<0&&(f=-f>C?0:C+f),g=g>C?C:g,g<0&&(g+=C),C=f>g?0:g-f>>>0,f>>>=0;for(var j=Z(C);++S<C;)j[S]=l[S+f];return j}function IH(l,f){var g;return ha(l,function(S,C,j){return g=f(S,C,j),!g}),!!g}function u0(l,f,g){var S=0,C=l==null?S:l.length;if(typeof f=="number"&&f===f&&C<=X){for(;S<C;){var j=S+C>>>1,V=l[j];V!==null&&!mi(V)&&(g?V<=f:V<f)?S=j+1:C=j}return C}return Cb(l,f,Xn,g)}function Cb(l,f,g,S){var C=0,j=l==null?0:l.length;if(j===0)return 0;f=g(f);for(var V=f!==f,U=f===null,Y=mi(f),ne=f===r;C<j;){var ie=t0((C+j)/2),oe=g(l[ie]),pe=oe!==r,Te=oe===null,Ne=oe===oe,Xe=mi(oe);if(V)var je=S||Ne;else ne?je=Ne&&(S||pe):U?je=Ne&&pe&&(S||!Te):Y?je=Ne&&pe&&!Te&&(S||!Xe):Te||Xe?je=!1:je=S?oe<=f:oe<f;je?C=ie+1:j=ie}return xn(j,R)}function eM(l,f){for(var g=-1,S=l.length,C=0,j=[];++g<S;){var V=l[g],U=f?f(V):V;if(!g||!xs(U,Y)){var Y=U;j[C++]=V===0?0:V}}return j}function tM(l){return typeof l=="number"?l:mi(l)?L:+l}function pi(l){if(typeof l=="string")return l;if(We(l))return ir(l,pi)+"";if(mi(l))return RA?RA.call(l):"";var f=l+"";return f=="0"&&1/l==-k?"-0":f}function pa(l,f,g){var S=-1,C=Bm,j=l.length,V=!0,U=[],Y=U;if(g)V=!1,C=rb;else if(j>=t){var ne=f?null:jH(l);if(ne)return Gm(ne);V=!1,C=Yd,Y=new $l}else Y=f?[]:U;e:for(;++S<j;){var ie=l[S],oe=f?f(ie):ie;if(ie=g||ie!==0?ie:0,V&&oe===oe){for(var pe=Y.length;pe--;)if(Y[pe]===oe)continue e;f&&Y.push(oe),U.push(ie)}else C(Y,oe,g)||(Y!==U&&Y.push(oe),U.push(ie))}return U}function Tb(l,f){return f=ma(f,l),l=AM(l,f),l==null||delete l[Ws(Gi(f))]}function rM(l,f,g,S){return sh(l,f,g(zl(l,f)),S)}function c0(l,f,g,S){for(var C=l.length,j=S?C:-1;(S?j--:++j<C)&&f(l[j],j,l););return g?Ui(l,S?0:j,S?j+1:C):Ui(l,S?j+1:0,S?C:j)}function nM(l,f){var g=l;return g instanceof ut&&(g=g.value()),nb(f,function(S,C){return C.func.apply(C.thisArg,ua([S],C.args))},g)}function Ab(l,f,g){var S=l.length;if(S<2)return S?pa(l[0]):[];for(var C=-1,j=Z(S);++C<S;)for(var V=l[C],U=-1;++U<S;)U!=C&&(j[C]=rh(j[C]||V,l[U],f,g));return pa(gn(j,1),f,g)}function iM(l,f,g){for(var S=-1,C=l.length,j=f.length,V={};++S<C;){var U=S<j?f[S]:r;g(V,l[S],U)}return V}function Mb(l){return Kr(l)?l:[]}function kb(l){return typeof l=="function"?l:Xn}function ma(l,f){return We(l)?l:Fb(l,f)?[l]:RM(Tt(l))}var CH=rt;function ga(l,f,g){var S=l.length;return g=g===r?S:g,!f&&g>=S?l:Ui(l,f,g)}var sM=pz||function(l){return sn.clearTimeout(l)};function oM(l,f){if(f)return l.slice();var g=l.length,S=CA?CA(g):new l.constructor(g);return l.copy(S),S}function Pb(l){var f=new l.constructor(l.byteLength);return new Jm(f).set(new Jm(l)),f}function TH(l,f){var g=f?Pb(l.buffer):l.buffer;return new l.constructor(g,l.byteOffset,l.byteLength)}function AH(l){var f=new l.constructor(l.source,ur.exec(l));return f.lastIndex=l.lastIndex,f}function MH(l){return eh?qt(eh.call(l)):{}}function aM(l,f){var g=f?Pb(l.buffer):l.buffer;return new l.constructor(g,l.byteOffset,l.length)}function lM(l,f){if(l!==f){var g=l!==r,S=l===null,C=l===l,j=mi(l),V=f!==r,U=f===null,Y=f===f,ne=mi(f);if(!U&&!ne&&!j&&l>f||j&&V&&Y&&!U&&!ne||S&&V&&Y||!g&&Y||!C)return 1;if(!S&&!j&&!ne&&l<f||ne&&g&&C&&!S&&!j||U&&g&&C||!V&&C||!Y)return-1}return 0}function kH(l,f,g){for(var S=-1,C=l.criteria,j=f.criteria,V=C.length,U=g.length;++S<V;){var Y=lM(C[S],j[S]);if(Y){if(S>=U)return Y;var ne=g[S];return Y*(ne=="desc"?-1:1)}}return l.index-f.index}function uM(l,f,g,S){for(var C=-1,j=l.length,V=g.length,U=-1,Y=f.length,ne=Qr(j-V,0),ie=Z(Y+ne),oe=!S;++U<Y;)ie[U]=f[U];for(;++C<V;)(oe||C<j)&&(ie[g[C]]=l[C]);for(;ne--;)ie[U++]=l[C++];return ie}function cM(l,f,g,S){for(var C=-1,j=l.length,V=-1,U=g.length,Y=-1,ne=f.length,ie=Qr(j-U,0),oe=Z(ie+ne),pe=!S;++C<ie;)oe[C]=l[C];for(var Te=C;++Y<ne;)oe[Te+Y]=f[Y];for(;++V<U;)(pe||C<j)&&(oe[Te+g[V]]=l[C++]);return oe}function Jn(l,f){var g=-1,S=l.length;for(f||(f=Z(S));++g<S;)f[g]=l[g];return f}function $s(l,f,g,S){var C=!g;g||(g={});for(var j=-1,V=f.length;++j<V;){var U=f[j],Y=S?S(g[U],l[U],U,g,l):r;Y===r&&(Y=l[U]),C?bo(g,U,Y):th(g,U,Y)}return g}function PH(l,f){return $s(l,qb(l),f)}function RH(l,f){return $s(l,xM(l),f)}function f0(l,f){return function(g,S){var C=We(g)?K7:tH,j=f?f():{};return C(g,l,Le(S,2),j)}}function Pc(l){return rt(function(f,g){var S=-1,C=g.length,j=C>1?g[C-1]:r,V=C>2?g[2]:r;for(j=l.length>3&&typeof j=="function"?(C--,j):r,V&&Nn(g[0],g[1],V)&&(j=C<3?r:j,C=1),f=qt(f);++S<C;){var U=g[S];U&&l(f,U,S,j)}return f})}function fM(l,f){return function(g,S){if(g==null)return g;if(!Qn(g))return l(g,S);for(var C=g.length,j=f?C:-1,V=qt(g);(f?j--:++j<C)&&S(V[j],j,V)!==!1;);return g}}function dM(l){return function(f,g,S){for(var C=-1,j=qt(f),V=S(f),U=V.length;U--;){var Y=V[l?U:++C];if(g(j[Y],Y,j)===!1)break}return f}}function LH(l,f,g){var S=f&y,C=oh(l);function j(){var V=this&&this!==sn&&this instanceof j?C:l;return V.apply(S?g:this,arguments)}return j}function hM(l){return function(f){f=Tt(f);var g=Ic(f)?Ss(f):r,S=g?g[0]:f.charAt(0),C=g?ga(g,1).join(""):f.slice(1);return S[l]()+C}}function Rc(l){return function(f){return nb(fk(ck(f).replace(E7,"")),l,"")}}function oh(l){return function(){var f=arguments;switch(f.length){case 0:return new l;case 1:return new l(f[0]);case 2:return new l(f[0],f[1]);case 3:return new l(f[0],f[1],f[2]);case 4:return new l(f[0],f[1],f[2],f[3]);case 5:return new l(f[0],f[1],f[2],f[3],f[4]);case 6:return new l(f[0],f[1],f[2],f[3],f[4],f[5]);case 7:return new l(f[0],f[1],f[2],f[3],f[4],f[5],f[6])}var g=kc(l.prototype),S=l.apply(g,f);return cr(S)?S:g}}function DH(l,f,g){var S=oh(l);function C(){for(var j=arguments.length,V=Z(j),U=j,Y=Lc(C);U--;)V[U]=arguments[U];var ne=j<3&&V[0]!==Y&&V[j-1]!==Y?[]:ca(V,Y);if(j-=ne.length,j<g)return vM(l,f,d0,C.placeholder,r,V,ne,r,r,g-j);var ie=this&&this!==sn&&this instanceof C?S:l;return di(ie,this,V)}return C}function pM(l){return function(f,g,S){var C=qt(f);if(!Qn(f)){var j=Le(g,3);f=on(f),g=function(U){return j(C[U],U,C)}}var V=l(f,g,S);return V>-1?C[j?f[V]:V]:r}}function mM(l){return _o(function(f){var g=f.length,S=g,C=Vi.prototype.thru;for(l&&f.reverse();S--;){var j=f[S];if(typeof j!="function")throw new Fi(i);if(C&&!V&&g0(j)=="wrapper")var V=new Vi([],!0)}for(S=V?S:g;++S<g;){j=f[S];var U=g0(j),Y=U=="wrapper"?jb(j):r;Y&&Vb(Y[0])&&Y[1]==(F|x|P|z)&&!Y[4].length&&Y[9]==1?V=V[g0(Y[0])].apply(V,Y[3]):V=j.length==1&&Vb(j)?V[U]():V.thru(j)}return function(){var ne=arguments,ie=ne[0];if(V&&ne.length==1&&We(ie))return V.plant(ie).value();for(var oe=0,pe=g?f[oe].apply(this,ne):ie;++oe<g;)pe=f[oe].call(this,pe);return pe}})}function d0(l,f,g,S,C,j,V,U,Y,ne){var ie=f&F,oe=f&y,pe=f&_,Te=f&(x|A),Ne=f&B,Xe=pe?r:oh(l);function je(){for(var ot=arguments.length,ht=Z(ot),gi=ot;gi--;)ht[gi]=arguments[gi];if(Te)var jn=Lc(je),yi=z7(ht,jn);if(S&&(ht=uM(ht,S,C,Te)),j&&(ht=cM(ht,j,V,Te)),ot-=yi,Te&&ot<ne){var qr=ca(ht,jn);return vM(l,f,d0,je.placeholder,g,ht,qr,U,Y,ne-ot)}var Es=oe?g:this,Io=pe?Es[l]:l;return ot=ht.length,U?ht=tY(ht,U):Ne&&ot>1&&ht.reverse(),ie&&Y<ot&&(ht.length=Y),this&&this!==sn&&this instanceof je&&(Io=Xe||oh(Io)),Io.apply(Es,ht)}return je}function gM(l,f){return function(g,S){return uH(g,l,f(S),{})}}function h0(l,f){return function(g,S){var C;if(g===r&&S===r)return f;if(g!==r&&(C=g),S!==r){if(C===r)return S;typeof g=="string"||typeof S=="string"?(g=pi(g),S=pi(S)):(g=tM(g),S=tM(S)),C=l(g,S)}return C}}function Rb(l){return _o(function(f){return f=ir(f,hi(Le())),rt(function(g){var S=this;return l(f,function(C){return di(C,S,g)})})})}function p0(l,f){f=f===r?" ":pi(f);var g=f.length;if(g<2)return g?Ib(f,l):f;var S=Ib(f,e0(l/Cc(f)));return Ic(f)?ga(Ss(S),0,l).join(""):S.slice(0,l)}function NH(l,f,g,S){var C=f&y,j=oh(l);function V(){for(var U=-1,Y=arguments.length,ne=-1,ie=S.length,oe=Z(ie+Y),pe=this&&this!==sn&&this instanceof V?j:l;++ne<ie;)oe[ne]=S[ne];for(;Y--;)oe[ne++]=arguments[++U];return di(pe,C?g:this,oe)}return V}function yM(l){return function(f,g,S){return S&&typeof S!="number"&&Nn(f,g,S)&&(g=S=r),f=Oo(f),g===r?(g=f,f=0):g=Oo(g),S=S===r?f<g?1:-1:Oo(S),SH(f,g,S,l)}}function m0(l){return function(f,g){return typeof f=="string"&&typeof g=="string"||(f=$i(f),g=$i(g)),l(f,g)}}function vM(l,f,g,S,C,j,V,U,Y,ne){var ie=f&x,oe=ie?V:r,pe=ie?r:V,Te=ie?j:r,Ne=ie?r:j;f|=ie?P:q,f&=~(ie?q:P),f&O||(f&=~(y|_));var Xe=[l,f,C,Te,oe,Ne,pe,U,Y,ne],je=g.apply(r,Xe);return Vb(l)&&MM(je,Xe),je.placeholder=S,kM(je,l,f)}function Lb(l){var f=Jr[l];return function(g,S){if(g=$i(g),S=S==null?0:xn(Qe(S),292),S&&kA(g)){var C=(Tt(g)+"e").split("e"),j=f(C[0]+"e"+(+C[1]+S));return C=(Tt(j)+"e").split("e"),+(C[0]+"e"+(+C[1]-S))}return f(g)}}var jH=Ac&&1/Gm(new Ac([,-0]))[1]==k?function(l){return new Ac(l)}:rS;function wM(l){return function(f){var g=En(f);return g==dt?cb(f):g==_n?ez(f):W7(f,l(f))}}function So(l,f,g,S,C,j,V,U){var Y=f&_;if(!Y&&typeof l!="function")throw new Fi(i);var ne=S?S.length:0;if(ne||(f&=~(P|q),S=C=r),V=V===r?V:Qr(Qe(V),0),U=U===r?U:Qe(U),ne-=C?C.length:0,f&q){var ie=S,oe=C;S=C=r}var pe=Y?r:jb(l),Te=[l,f,g,S,C,ie,oe,j,V,U];if(pe&&ZH(Te,pe),l=Te[0],f=Te[1],g=Te[2],S=Te[3],C=Te[4],U=Te[9]=Te[9]===r?Y?0:l.length:Qr(Te[9]-ne,0),!U&&f&(x|A)&&(f&=~(x|A)),!f||f==y)var Ne=LH(l,f,g);else f==x||f==A?Ne=DH(l,f,U):(f==P||f==(y|P))&&!C.length?Ne=NH(l,f,g,S):Ne=d0.apply(r,Te);var Xe=pe?XA:MM;return kM(Xe(Ne,Te),l,f)}function bM(l,f,g,S){return l===r||xs(l,Tc[g])&&!Rt.call(S,g)?f:l}function SM(l,f,g,S,C,j){return cr(l)&&cr(f)&&(j.set(f,l),l0(l,f,r,SM,j),j.delete(f)),l}function KH(l){return uh(l)?r:l}function _M(l,f,g,S,C,j){var V=g&p,U=l.length,Y=f.length;if(U!=Y&&!(V&&Y>U))return!1;var ne=j.get(l),ie=j.get(f);if(ne&&ie)return ne==f&&ie==l;var oe=-1,pe=!0,Te=g&m?new $l:r;for(j.set(l,f),j.set(f,l);++oe<U;){var Ne=l[oe],Xe=f[oe];if(S)var je=V?S(Xe,Ne,oe,f,l,j):S(Ne,Xe,oe,l,f,j);if(je!==r){if(je)continue;pe=!1;break}if(Te){if(!ib(f,function(ot,ht){if(!Yd(Te,ht)&&(Ne===ot||C(Ne,ot,g,S,j)))return Te.push(ht)})){pe=!1;break}}else if(!(Ne===Xe||C(Ne,Xe,g,S,j))){pe=!1;break}}return j.delete(l),j.delete(f),pe}function qH(l,f,g,S,C,j,V){switch(g){case Kt:if(l.byteLength!=f.byteLength||l.byteOffset!=f.byteOffset)return!1;l=l.buffer,f=f.buffer;case sa:return!(l.byteLength!=f.byteLength||!j(new Jm(l),new Jm(f)));case st:case Sn:case fi:return xs(+l,+f);case bt:return l.name==f.name&&l.message==f.message;case Ct:case Pt:return l==f+"";case dt:var U=cb;case _n:var Y=S&p;if(U||(U=Gm),l.size!=f.size&&!Y)return!1;var ne=V.get(l);if(ne)return ne==f;S|=m,V.set(l,f);var ie=_M(U(l),U(f),S,C,j,V);return V.delete(l),ie;case zt:if(eh)return eh.call(l)==eh.call(f)}return!1}function FH(l,f,g,S,C,j){var V=g&p,U=Db(l),Y=U.length,ne=Db(f),ie=ne.length;if(Y!=ie&&!V)return!1;for(var oe=Y;oe--;){var pe=U[oe];if(!(V?pe in f:Rt.call(f,pe)))return!1}var Te=j.get(l),Ne=j.get(f);if(Te&&Ne)return Te==f&&Ne==l;var Xe=!0;j.set(l,f),j.set(f,l);for(var je=V;++oe<Y;){pe=U[oe];var ot=l[pe],ht=f[pe];if(S)var gi=V?S(ht,ot,pe,f,l,j):S(ot,ht,pe,l,f,j);if(!(gi===r?ot===ht||C(ot,ht,g,S,j):gi)){Xe=!1;break}je||(je=pe=="constructor")}if(Xe&&!je){var jn=l.constructor,yi=f.constructor;jn!=yi&&"constructor"in l&&"constructor"in f&&!(typeof jn=="function"&&jn instanceof jn&&typeof yi=="function"&&yi instanceof yi)&&(Xe=!1)}return j.delete(l),j.delete(f),Xe}function _o(l){return Ub(TM(l,r,jM),l+"")}function Db(l){return BA(l,on,qb)}function Nb(l){return BA(l,Zn,xM)}var jb=r0?function(l){return r0.get(l)}:rS;function g0(l){for(var f=l.name+"",g=Mc[f],S=Rt.call(Mc,f)?g.length:0;S--;){var C=g[S],j=C.func;if(j==null||j==l)return C.name}return f}function Lc(l){var f=Rt.call(D,"placeholder")?D:l;return f.placeholder}function Le(){var l=D.iteratee||eS;return l=l===eS?$A:l,arguments.length?l(arguments[0],arguments[1]):l}function y0(l,f){var g=l.__data__;return HH(f)?g[typeof f=="string"?"string":"hash"]:g.map}function Kb(l){for(var f=on(l),g=f.length;g--;){var S=f[g],C=l[S];f[g]=[S,C,IM(C)]}return f}function Hl(l,f){var g=Q7(l,f);return GA(g)?g:r}function VH(l){var f=Rt.call(l,Ul),g=l[Ul];try{l[Ul]=r;var S=!0}catch{}var C=Hm.call(l);return S&&(f?l[Ul]=g:delete l[Ul]),C}var qb=db?function(l){return l==null?[]:(l=qt(l),la(db(l),function(f){return AA.call(l,f)}))}:nS,xM=db?function(l){for(var f=[];l;)ua(f,qb(l)),l=Qm(l);return f}:nS,En=Dn;(hb&&En(new hb(new ArrayBuffer(1)))!=Kt||Qd&&En(new Qd)!=dt||pb&&En(pb.resolve())!=bs||Ac&&En(new Ac)!=_n||Zd&&En(new Zd)!=Ut)&&(En=function(l){var f=Dn(l),g=f==St?l.constructor:r,S=g?Yl(g):"";if(S)switch(S){case xz:return Kt;case Ez:return dt;case Oz:return bs;case Iz:return _n;case Cz:return Ut}return f});function BH(l,f,g){for(var S=-1,C=g.length;++S<C;){var j=g[S],V=j.size;switch(j.type){case"drop":l+=V;break;case"dropRight":f-=V;break;case"take":f=xn(f,l+V);break;case"takeRight":l=Qr(l,f-V);break}}return{start:l,end:f}}function UH(l){var f=l.match(Ir);return f?f[1].split(qm):[]}function EM(l,f,g){f=ma(f,l);for(var S=-1,C=f.length,j=!1;++S<C;){var V=Ws(f[S]);if(!(j=l!=null&&g(l,V)))break;l=l[V]}return j||++S!=C?j:(C=l==null?0:l.length,!!C&&E0(C)&&xo(V,C)&&(We(l)||Jl(l)))}function GH(l){var f=l.length,g=new l.constructor(f);return f&&typeof l[0]=="string"&&Rt.call(l,"index")&&(g.index=l.index,g.input=l.input),g}function OM(l){return typeof l.constructor=="function"&&!ah(l)?kc(Qm(l)):{}}function $H(l,f,g){var S=l.constructor;switch(f){case sa:return Pb(l);case st:case Sn:return new S(+l);case Kt:return TH(l,g);case Qt:case yc:case Zt:case Xt:case vc:case er:case tr:case wc:case rr:return aM(l,g);case dt:return new S;case fi:case Pt:return new S(l);case Ct:return AH(l);case _n:return new S;case zt:return MH(l)}}function WH(l,f){var g=f.length;if(!g)return l;var S=g-1;return f[S]=(g>1?"& ":"")+f[S],f=f.join(g>2?", ":" "),l.replace(Or,`{
/* [wrapped with `+f+`] */
`)}function zH(l){return We(l)||Jl(l)||!!(MA&&l&&l[MA])}function xo(l,f){var g=typeof l;return f=f??M,!!f&&(g=="number"||g!="symbol"&&qd.test(l))&&l>-1&&l%1==0&&l<f}function Nn(l,f,g){if(!cr(g))return!1;var S=typeof f;return(S=="number"?Qn(g)&&xo(f,g.length):S=="string"&&f in g)?xs(g[f],l):!1}function Fb(l,f){if(We(l))return!1;var g=typeof l;return g=="number"||g=="symbol"||g=="boolean"||l==null||mi(l)?!0:_r.test(l)||!jm.test(l)||f!=null&&l in qt(f)}function HH(l){var f=typeof l;return f=="string"||f=="number"||f=="symbol"||f=="boolean"?l!=="__proto__":l===null}function Vb(l){var f=g0(l),g=D[f];if(typeof g!="function"||!(f in ut.prototype))return!1;if(l===g)return!0;var S=jb(g);return!!S&&l===S[0]}function YH(l){return!!IA&&IA in l}var JH=Wm?Eo:iS;function ah(l){var f=l&&l.constructor,g=typeof f=="function"&&f.prototype||Tc;return l===g}function IM(l){return l===l&&!cr(l)}function CM(l,f){return function(g){return g==null?!1:g[l]===f&&(f!==r||l in qt(g))}}function QH(l){var f=_0(l,function(S){return g.size===a&&g.clear(),S}),g=f.cache;return f}function ZH(l,f){var g=l[1],S=f[1],C=g|S,j=C<(y|_|F),V=S==F&&g==x||S==F&&g==z&&l[7].length<=f[8]||S==(F|z)&&f[7].length<=f[8]&&g==x;if(!(j||V))return l;S&y&&(l[2]=f[2],C|=g&y?0:O);var U=f[3];if(U){var Y=l[3];l[3]=Y?uM(Y,U,f[4]):U,l[4]=Y?ca(l[3],u):f[4]}return U=f[5],U&&(Y=l[5],l[5]=Y?cM(Y,U,f[6]):U,l[6]=Y?ca(l[5],u):f[6]),U=f[7],U&&(l[7]=U),S&F&&(l[8]=l[8]==null?f[8]:xn(l[8],f[8])),l[9]==null&&(l[9]=f[9]),l[0]=f[0],l[1]=C,l}function XH(l){var f=[];if(l!=null)for(var g in qt(l))f.push(g);return f}function eY(l){return Hm.call(l)}function TM(l,f,g){return f=Qr(f===r?l.length-1:f,0),function(){for(var S=arguments,C=-1,j=Qr(S.length-f,0),V=Z(j);++C<j;)V[C]=S[f+C];C=-1;for(var U=Z(f+1);++C<f;)U[C]=S[C];return U[f]=g(V),di(l,this,U)}}function AM(l,f){return f.length<2?l:zl(l,Ui(f,0,-1))}function tY(l,f){for(var g=l.length,S=xn(f.length,g),C=Jn(l);S--;){var j=f[S];l[S]=xo(j,g)?C[j]:r}return l}function Bb(l,f){if(!(f==="constructor"&&typeof l[f]=="function")&&f!="__proto__")return l[f]}var MM=PM(XA),lh=gz||function(l,f){return sn.setTimeout(l,f)},Ub=PM(EH);function kM(l,f,g){var S=f+"";return Ub(l,WH(S,rY(UH(S),g)))}function PM(l){var f=0,g=0;return function(){var S=bz(),C=v-(S-g);if(g=S,C>0){if(++f>=N)return arguments[0]}else f=0;return l.apply(r,arguments)}}function v0(l,f){var g=-1,S=l.length,C=S-1;for(f=f===r?S:f;++g<f;){var j=Ob(g,C),V=l[j];l[j]=l[g],l[g]=V}return l.length=f,l}var RM=QH(function(l){var f=[];return l.charCodeAt(0)===46&&f.push(""),l.replace(xr,function(g,S,C,j){f.push(C?j.replace(Fm,"$1"):S||g)}),f});function Ws(l){if(typeof l=="string"||mi(l))return l;var f=l+"";return f=="0"&&1/l==-k?"-0":f}function Yl(l){if(l!=null){try{return zm.call(l)}catch{}try{return l+""}catch{}}return""}function rY(l,f){return qi(fe,function(g){var S="_."+g[0];f&g[1]&&!Bm(l,S)&&l.push(S)}),l.sort()}function LM(l){if(l instanceof ut)return l.clone();var f=new Vi(l.__wrapped__,l.__chain__);return f.__actions__=Jn(l.__actions__),f.__index__=l.__index__,f.__values__=l.__values__,f}function nY(l,f,g){(g?Nn(l,f,g):f===r)?f=1:f=Qr(Qe(f),0);var S=l==null?0:l.length;if(!S||f<1)return[];for(var C=0,j=0,V=Z(e0(S/f));C<S;)V[j++]=Ui(l,C,C+=f);return V}function iY(l){for(var f=-1,g=l==null?0:l.length,S=0,C=[];++f<g;){var j=l[f];j&&(C[S++]=j)}return C}function sY(){var l=arguments.length;if(!l)return[];for(var f=Z(l-1),g=arguments[0],S=l;S--;)f[S-1]=arguments[S];return ua(We(g)?Jn(g):[g],gn(f,1))}var oY=rt(function(l,f){return Kr(l)?rh(l,gn(f,1,Kr,!0)):[]}),aY=rt(function(l,f){var g=Gi(f);return Kr(g)&&(g=r),Kr(l)?rh(l,gn(f,1,Kr,!0),Le(g,2)):[]}),lY=rt(function(l,f){var g=Gi(f);return Kr(g)&&(g=r),Kr(l)?rh(l,gn(f,1,Kr,!0),r,g):[]});function uY(l,f,g){var S=l==null?0:l.length;return S?(f=g||f===r?1:Qe(f),Ui(l,f<0?0:f,S)):[]}function cY(l,f,g){var S=l==null?0:l.length;return S?(f=g||f===r?1:Qe(f),f=S-f,Ui(l,0,f<0?0:f)):[]}function fY(l,f){return l&&l.length?c0(l,Le(f,3),!0,!0):[]}function dY(l,f){return l&&l.length?c0(l,Le(f,3),!0):[]}function hY(l,f,g,S){var C=l==null?0:l.length;return C?(g&&typeof g!="number"&&Nn(l,f,g)&&(g=0,S=C),sH(l,f,g,S)):[]}function DM(l,f,g){var S=l==null?0:l.length;if(!S)return-1;var C=g==null?0:Qe(g);return C<0&&(C=Qr(S+C,0)),Um(l,Le(f,3),C)}function NM(l,f,g){var S=l==null?0:l.length;if(!S)return-1;var C=S-1;return g!==r&&(C=Qe(g),C=g<0?Qr(S+C,0):xn(C,S-1)),Um(l,Le(f,3),C,!0)}function jM(l){var f=l==null?0:l.length;return f?gn(l,1):[]}function pY(l){var f=l==null?0:l.length;return f?gn(l,k):[]}function mY(l,f){var g=l==null?0:l.length;return g?(f=f===r?1:Qe(f),gn(l,f)):[]}function gY(l){for(var f=-1,g=l==null?0:l.length,S={};++f<g;){var C=l[f];S[C[0]]=C[1]}return S}function KM(l){return l&&l.length?l[0]:r}function yY(l,f,g){var S=l==null?0:l.length;if(!S)return-1;var C=g==null?0:Qe(g);return C<0&&(C=Qr(S+C,0)),Oc(l,f,C)}function vY(l){var f=l==null?0:l.length;return f?Ui(l,0,-1):[]}var wY=rt(function(l){var f=ir(l,Mb);return f.length&&f[0]===l[0]?bb(f):[]}),bY=rt(function(l){var f=Gi(l),g=ir(l,Mb);return f===Gi(g)?f=r:g.pop(),g.length&&g[0]===l[0]?bb(g,Le(f,2)):[]}),SY=rt(function(l){var f=Gi(l),g=ir(l,Mb);return f=typeof f=="function"?f:r,f&&g.pop(),g.length&&g[0]===l[0]?bb(g,r,f):[]});function _Y(l,f){return l==null?"":vz.call(l,f)}function Gi(l){var f=l==null?0:l.length;return f?l[f-1]:r}function xY(l,f,g){var S=l==null?0:l.length;if(!S)return-1;var C=S;return g!==r&&(C=Qe(g),C=C<0?Qr(S+C,0):xn(C,S-1)),f===f?rz(l,f,C):Um(l,vA,C,!0)}function EY(l,f){return l&&l.length?YA(l,Qe(f)):r}var OY=rt(qM);function qM(l,f){return l&&l.length&&f&&f.length?Eb(l,f):l}function IY(l,f,g){return l&&l.length&&f&&f.length?Eb(l,f,Le(g,2)):l}function CY(l,f,g){return l&&l.length&&f&&f.length?Eb(l,f,r,g):l}var TY=_o(function(l,f){var g=l==null?0:l.length,S=gb(l,f);return ZA(l,ir(f,function(C){return xo(C,g)?+C:C}).sort(lM)),S});function AY(l,f){var g=[];if(!(l&&l.length))return g;var S=-1,C=[],j=l.length;for(f=Le(f,3);++S<j;){var V=l[S];f(V,S,l)&&(g.push(V),C.push(S))}return ZA(l,C),g}function Gb(l){return l==null?l:_z.call(l)}function MY(l,f,g){var S=l==null?0:l.length;return S?(g&&typeof g!="number"&&Nn(l,f,g)?(f=0,g=S):(f=f==null?0:Qe(f),g=g===r?S:Qe(g)),Ui(l,f,g)):[]}function kY(l,f){return u0(l,f)}function PY(l,f,g){return Cb(l,f,Le(g,2))}function RY(l,f){var g=l==null?0:l.length;if(g){var S=u0(l,f);if(S<g&&xs(l[S],f))return S}return-1}function LY(l,f){return u0(l,f,!0)}function DY(l,f,g){return Cb(l,f,Le(g,2),!0)}function NY(l,f){var g=l==null?0:l.length;if(g){var S=u0(l,f,!0)-1;if(xs(l[S],f))return S}return-1}function jY(l){return l&&l.length?eM(l):[]}function KY(l,f){return l&&l.length?eM(l,Le(f,2)):[]}function qY(l){var f=l==null?0:l.length;return f?Ui(l,1,f):[]}function FY(l,f,g){return l&&l.length?(f=g||f===r?1:Qe(f),Ui(l,0,f<0?0:f)):[]}function VY(l,f,g){var S=l==null?0:l.length;return S?(f=g||f===r?1:Qe(f),f=S-f,Ui(l,f<0?0:f,S)):[]}function BY(l,f){return l&&l.length?c0(l,Le(f,3),!1,!0):[]}function UY(l,f){return l&&l.length?c0(l,Le(f,3)):[]}var GY=rt(function(l){return pa(gn(l,1,Kr,!0))}),$Y=rt(function(l){var f=Gi(l);return Kr(f)&&(f=r),pa(gn(l,1,Kr,!0),Le(f,2))}),WY=rt(function(l){var f=Gi(l);return f=typeof f=="function"?f:r,pa(gn(l,1,Kr,!0),r,f)});function zY(l){return l&&l.length?pa(l):[]}function HY(l,f){return l&&l.length?pa(l,Le(f,2)):[]}function YY(l,f){return f=typeof f=="function"?f:r,l&&l.length?pa(l,r,f):[]}function $b(l){if(!(l&&l.length))return[];var f=0;return l=la(l,function(g){if(Kr(g))return f=Qr(g.length,f),!0}),lb(f,function(g){return ir(l,sb(g))})}function FM(l,f){if(!(l&&l.length))return[];var g=$b(l);return f==null?g:ir(g,function(S){return di(f,r,S)})}var JY=rt(function(l,f){return Kr(l)?rh(l,f):[]}),QY=rt(function(l){return Ab(la(l,Kr))}),ZY=rt(function(l){var f=Gi(l);return Kr(f)&&(f=r),Ab(la(l,Kr),Le(f,2))}),XY=rt(function(l){var f=Gi(l);return f=typeof f=="function"?f:r,Ab(la(l,Kr),r,f)}),eJ=rt($b);function tJ(l,f){return iM(l||[],f||[],th)}function rJ(l,f){return iM(l||[],f||[],sh)}var nJ=rt(function(l){var f=l.length,g=f>1?l[f-1]:r;return g=typeof g=="function"?(l.pop(),g):r,FM(l,g)});function VM(l){var f=D(l);return f.__chain__=!0,f}function iJ(l,f){return f(l),l}function w0(l,f){return f(l)}var sJ=_o(function(l){var f=l.length,g=f?l[0]:0,S=this.__wrapped__,C=function(j){return gb(j,l)};return f>1||this.__actions__.length||!(S instanceof ut)||!xo(g)?this.thru(C):(S=S.slice(g,+g+(f?1:0)),S.__actions__.push({func:w0,args:[C],thisArg:r}),new Vi(S,this.__chain__).thru(function(j){return f&&!j.length&&j.push(r),j}))});function oJ(){return VM(this)}function aJ(){return new Vi(this.value(),this.__chain__)}function lJ(){this.__values__===r&&(this.__values__=tk(this.value()));var l=this.__index__>=this.__values__.length,f=l?r:this.__values__[this.__index__++];return{done:l,value:f}}function uJ(){return this}function cJ(l){for(var f,g=this;g instanceof i0;){var S=LM(g);S.__index__=0,S.__values__=r,f?C.__wrapped__=S:f=S;var C=S;g=g.__wrapped__}return C.__wrapped__=l,f}function fJ(){var l=this.__wrapped__;if(l instanceof ut){var f=l;return this.__actions__.length&&(f=new ut(this)),f=f.reverse(),f.__actions__.push({func:w0,args:[Gb],thisArg:r}),new Vi(f,this.__chain__)}return this.thru(Gb)}function dJ(){return nM(this.__wrapped__,this.__actions__)}var hJ=f0(function(l,f,g){Rt.call(l,g)?++l[g]:bo(l,g,1)});function pJ(l,f,g){var S=We(l)?gA:iH;return g&&Nn(l,f,g)&&(f=r),S(l,Le(f,3))}function mJ(l,f){var g=We(l)?la:FA;return g(l,Le(f,3))}var gJ=pM(DM),yJ=pM(NM);function vJ(l,f){return gn(b0(l,f),1)}function wJ(l,f){return gn(b0(l,f),k)}function bJ(l,f,g){return g=g===r?1:Qe(g),gn(b0(l,f),g)}function BM(l,f){var g=We(l)?qi:ha;return g(l,Le(f,3))}function UM(l,f){var g=We(l)?q7:qA;return g(l,Le(f,3))}var SJ=f0(function(l,f,g){Rt.call(l,g)?l[g].push(f):bo(l,g,[f])});function _J(l,f,g,S){l=Qn(l)?l:Nc(l),g=g&&!S?Qe(g):0;var C=l.length;return g<0&&(g=Qr(C+g,0)),O0(l)?g<=C&&l.indexOf(f,g)>-1:!!C&&Oc(l,f,g)>-1}var xJ=rt(function(l,f,g){var S=-1,C=typeof f=="function",j=Qn(l)?Z(l.length):[];return ha(l,function(V){j[++S]=C?di(f,V,g):nh(V,f,g)}),j}),EJ=f0(function(l,f,g){bo(l,g,f)});function b0(l,f){var g=We(l)?ir:WA;return g(l,Le(f,3))}function OJ(l,f,g,S){return l==null?[]:(We(f)||(f=f==null?[]:[f]),g=S?r:g,We(g)||(g=g==null?[]:[g]),JA(l,f,g))}var IJ=f0(function(l,f,g){l[g?0:1].push(f)},function(){return[[],[]]});function CJ(l,f,g){var S=We(l)?nb:bA,C=arguments.length<3;return S(l,Le(f,4),g,C,ha)}function TJ(l,f,g){var S=We(l)?F7:bA,C=arguments.length<3;return S(l,Le(f,4),g,C,qA)}function AJ(l,f){var g=We(l)?la:FA;return g(l,x0(Le(f,3)))}function MJ(l){var f=We(l)?DA:_H;return f(l)}function kJ(l,f,g){(g?Nn(l,f,g):f===r)?f=1:f=Qe(f);var S=We(l)?Xz:xH;return S(l,f)}function PJ(l){var f=We(l)?eH:OH;return f(l)}function RJ(l){if(l==null)return 0;if(Qn(l))return O0(l)?Cc(l):l.length;var f=En(l);return f==dt||f==_n?l.size:_b(l).length}function LJ(l,f,g){var S=We(l)?ib:IH;return g&&Nn(l,f,g)&&(f=r),S(l,Le(f,3))}var DJ=rt(function(l,f){if(l==null)return[];var g=f.length;return g>1&&Nn(l,f[0],f[1])?f=[]:g>2&&Nn(f[0],f[1],f[2])&&(f=[f[0]]),JA(l,gn(f,1),[])}),S0=mz||function(){return sn.Date.now()};function NJ(l,f){if(typeof f!="function")throw new Fi(i);return l=Qe(l),function(){if(--l<1)return f.apply(this,arguments)}}function GM(l,f,g){return f=g?r:f,f=l&&f==null?l.length:f,So(l,F,r,r,r,r,f)}function $M(l,f){var g;if(typeof f!="function")throw new Fi(i);return l=Qe(l),function(){return--l>0&&(g=f.apply(this,arguments)),l<=1&&(f=r),g}}var Wb=rt(function(l,f,g){var S=y;if(g.length){var C=ca(g,Lc(Wb));S|=P}return So(l,S,f,g,C)}),WM=rt(function(l,f,g){var S=y|_;if(g.length){var C=ca(g,Lc(WM));S|=P}return So(f,S,l,g,C)});function zM(l,f,g){f=g?r:f;var S=So(l,x,r,r,r,r,r,f);return S.placeholder=zM.placeholder,S}function HM(l,f,g){f=g?r:f;var S=So(l,A,r,r,r,r,r,f);return S.placeholder=HM.placeholder,S}function YM(l,f,g){var S,C,j,V,U,Y,ne=0,ie=!1,oe=!1,pe=!0;if(typeof l!="function")throw new Fi(i);f=$i(f)||0,cr(g)&&(ie=!!g.leading,oe="maxWait"in g,j=oe?Qr($i(g.maxWait)||0,f):j,pe="trailing"in g?!!g.trailing:pe);function Te(qr){var Es=S,Io=C;return S=C=r,ne=qr,V=l.apply(Io,Es),V}function Ne(qr){return ne=qr,U=lh(ot,f),ie?Te(qr):V}function Xe(qr){var Es=qr-Y,Io=qr-ne,pk=f-Es;return oe?xn(pk,j-Io):pk}function je(qr){var Es=qr-Y,Io=qr-ne;return Y===r||Es>=f||Es<0||oe&&Io>=j}function ot(){var qr=S0();if(je(qr))return ht(qr);U=lh(ot,Xe(qr))}function ht(qr){return U=r,pe&&S?Te(qr):(S=C=r,V)}function gi(){U!==r&&sM(U),ne=0,S=Y=C=U=r}function jn(){return U===r?V:ht(S0())}function yi(){var qr=S0(),Es=je(qr);if(S=arguments,C=this,Y=qr,Es){if(U===r)return Ne(Y);if(oe)return sM(U),U=lh(ot,f),Te(Y)}return U===r&&(U=lh(ot,f)),V}return yi.cancel=gi,yi.flush=jn,yi}var jJ=rt(function(l,f){return KA(l,1,f)}),KJ=rt(function(l,f,g){return KA(l,$i(f)||0,g)});function qJ(l){return So(l,B)}function _0(l,f){if(typeof l!="function"||f!=null&&typeof f!="function")throw new Fi(i);var g=function(){var S=arguments,C=f?f.apply(this,S):S[0],j=g.cache;if(j.has(C))return j.get(C);var V=l.apply(this,S);return g.cache=j.set(C,V)||j,V};return g.cache=new(_0.Cache||wo),g}_0.Cache=wo;function x0(l){if(typeof l!="function")throw new Fi(i);return function(){var f=arguments;switch(f.length){case 0:return!l.call(this);case 1:return!l.call(this,f[0]);case 2:return!l.call(this,f[0],f[1]);case 3:return!l.call(this,f[0],f[1],f[2])}return!l.apply(this,f)}}function FJ(l){return $M(2,l)}var VJ=CH(function(l,f){f=f.length==1&&We(f[0])?ir(f[0],hi(Le())):ir(gn(f,1),hi(Le()));var g=f.length;return rt(function(S){for(var C=-1,j=xn(S.length,g);++C<j;)S[C]=f[C].call(this,S[C]);return di(l,this,S)})}),zb=rt(function(l,f){var g=ca(f,Lc(zb));return So(l,P,r,f,g)}),JM=rt(function(l,f){var g=ca(f,Lc(JM));return So(l,q,r,f,g)}),BJ=_o(function(l,f){return So(l,z,r,r,r,f)});function UJ(l,f){if(typeof l!="function")throw new Fi(i);return f=f===r?f:Qe(f),rt(l,f)}function GJ(l,f){if(typeof l!="function")throw new Fi(i);return f=f==null?0:Qr(Qe(f),0),rt(function(g){var S=g[f],C=ga(g,0,f);return S&&ua(C,S),di(l,this,C)})}function $J(l,f,g){var S=!0,C=!0;if(typeof l!="function")throw new Fi(i);return cr(g)&&(S="leading"in g?!!g.leading:S,C="trailing"in g?!!g.trailing:C),YM(l,f,{leading:S,maxWait:f,trailing:C})}function WJ(l){return GM(l,1)}function zJ(l,f){return zb(kb(f),l)}function HJ(){if(!arguments.length)return[];var l=arguments[0];return We(l)?l:[l]}function YJ(l){return Bi(l,h)}function JJ(l,f){return f=typeof f=="function"?f:r,Bi(l,h,f)}function QJ(l){return Bi(l,c|h)}function ZJ(l,f){return f=typeof f=="function"?f:r,Bi(l,c|h,f)}function XJ(l,f){return f==null||jA(l,f,on(f))}function xs(l,f){return l===f||l!==l&&f!==f}var eQ=m0(wb),tQ=m0(function(l,f){return l>=f}),Jl=UA(function(){return arguments}())?UA:function(l){return Mr(l)&&Rt.call(l,"callee")&&!AA.call(l,"callee")},We=Z.isArray,rQ=cA?hi(cA):cH;function Qn(l){return l!=null&&E0(l.length)&&!Eo(l)}function Kr(l){return Mr(l)&&Qn(l)}function nQ(l){return l===!0||l===!1||Mr(l)&&Dn(l)==st}var ya=yz||iS,iQ=fA?hi(fA):fH;function sQ(l){return Mr(l)&&l.nodeType===1&&!uh(l)}function oQ(l){if(l==null)return!0;if(Qn(l)&&(We(l)||typeof l=="string"||typeof l.splice=="function"||ya(l)||Dc(l)||Jl(l)))return!l.length;var f=En(l);if(f==dt||f==_n)return!l.size;if(ah(l))return!_b(l).length;for(var g in l)if(Rt.call(l,g))return!1;return!0}function aQ(l,f){return ih(l,f)}function lQ(l,f,g){g=typeof g=="function"?g:r;var S=g?g(l,f):r;return S===r?ih(l,f,r,g):!!S}function Hb(l){if(!Mr(l))return!1;var f=Dn(l);return f==bt||f==Ze||typeof l.message=="string"&&typeof l.name=="string"&&!uh(l)}function uQ(l){return typeof l=="number"&&kA(l)}function Eo(l){if(!cr(l))return!1;var f=Dn(l);return f==yo||f==Bt||f==ft||f==kt}function QM(l){return typeof l=="number"&&l==Qe(l)}function E0(l){return typeof l=="number"&&l>-1&&l%1==0&&l<=M}function cr(l){var f=typeof l;return l!=null&&(f=="object"||f=="function")}function Mr(l){return l!=null&&typeof l=="object"}var ZM=dA?hi(dA):hH;function cQ(l,f){return l===f||Sb(l,f,Kb(f))}function fQ(l,f,g){return g=typeof g=="function"?g:r,Sb(l,f,Kb(f),g)}function dQ(l){return XM(l)&&l!=+l}function hQ(l){if(JH(l))throw new Ge(n);return GA(l)}function pQ(l){return l===null}function mQ(l){return l==null}function XM(l){return typeof l=="number"||Mr(l)&&Dn(l)==fi}function uh(l){if(!Mr(l)||Dn(l)!=St)return!1;var f=Qm(l);if(f===null)return!0;var g=Rt.call(f,"constructor")&&f.constructor;return typeof g=="function"&&g instanceof g&&zm.call(g)==fz}var Yb=hA?hi(hA):pH;function gQ(l){return QM(l)&&l>=-M&&l<=M}var ek=pA?hi(pA):mH;function O0(l){return typeof l=="string"||!We(l)&&Mr(l)&&Dn(l)==Pt}function mi(l){return typeof l=="symbol"||Mr(l)&&Dn(l)==zt}var Dc=mA?hi(mA):gH;function yQ(l){return l===r}function vQ(l){return Mr(l)&&En(l)==Ut}function wQ(l){return Mr(l)&&Dn(l)==gr}var bQ=m0(xb),SQ=m0(function(l,f){return l<=f});function tk(l){if(!l)return[];if(Qn(l))return O0(l)?Ss(l):Jn(l);if(Jd&&l[Jd])return X7(l[Jd]());var f=En(l),g=f==dt?cb:f==_n?Gm:Nc;return g(l)}function Oo(l){if(!l)return l===0?l:0;if(l=$i(l),l===k||l===-k){var f=l<0?-1:1;return f*K}return l===l?l:0}function Qe(l){var f=Oo(l),g=f%1;return f===f?g?f-g:f:0}function rk(l){return l?Wl(Qe(l),0,b):0}function $i(l){if(typeof l=="number")return l;if(mi(l))return L;if(cr(l)){var f=typeof l.valueOf=="function"?l.valueOf():l;l=cr(f)?f+"":f}if(typeof l!="string")return l===0?l:+l;l=SA(l);var g=Nd.test(l);return g||Kd.test(l)?N7(l.slice(2),g?2:8):Dd.test(l)?L:+l}function nk(l){return $s(l,Zn(l))}function _Q(l){return l?Wl(Qe(l),-M,M):l===0?l:0}function Tt(l){return l==null?"":pi(l)}var xQ=Pc(function(l,f){if(ah(f)||Qn(f)){$s(f,on(f),l);return}for(var g in f)Rt.call(f,g)&&th(l,g,f[g])}),ik=Pc(function(l,f){$s(f,Zn(f),l)}),I0=Pc(function(l,f,g,S){$s(f,Zn(f),l,S)}),EQ=Pc(function(l,f,g,S){$s(f,on(f),l,S)}),OQ=_o(gb);function IQ(l,f){var g=kc(l);return f==null?g:NA(g,f)}var CQ=rt(function(l,f){l=qt(l);var g=-1,S=f.length,C=S>2?f[2]:r;for(C&&Nn(f[0],f[1],C)&&(S=1);++g<S;)for(var j=f[g],V=Zn(j),U=-1,Y=V.length;++U<Y;){var ne=V[U],ie=l[ne];(ie===r||xs(ie,Tc[ne])&&!Rt.call(l,ne))&&(l[ne]=j[ne])}return l}),TQ=rt(function(l){return l.push(r,SM),di(sk,r,l)});function AQ(l,f){return yA(l,Le(f,3),Gs)}function MQ(l,f){return yA(l,Le(f,3),vb)}function kQ(l,f){return l==null?l:yb(l,Le(f,3),Zn)}function PQ(l,f){return l==null?l:VA(l,Le(f,3),Zn)}function RQ(l,f){return l&&Gs(l,Le(f,3))}function LQ(l,f){return l&&vb(l,Le(f,3))}function DQ(l){return l==null?[]:a0(l,on(l))}function NQ(l){return l==null?[]:a0(l,Zn(l))}function Jb(l,f,g){var S=l==null?r:zl(l,f);return S===r?g:S}function jQ(l,f){return l!=null&&EM(l,f,oH)}function Qb(l,f){return l!=null&&EM(l,f,aH)}var KQ=gM(function(l,f,g){f!=null&&typeof f.toString!="function"&&(f=Hm.call(f)),l[f]=g},Xb(Xn)),qQ=gM(function(l,f,g){f!=null&&typeof f.toString!="function"&&(f=Hm.call(f)),Rt.call(l,f)?l[f].push(g):l[f]=[g]},Le),FQ=rt(nh);function on(l){return Qn(l)?LA(l):_b(l)}function Zn(l){return Qn(l)?LA(l,!0):yH(l)}function VQ(l,f){var g={};return f=Le(f,3),Gs(l,function(S,C,j){bo(g,f(S,C,j),S)}),g}function BQ(l,f){var g={};return f=Le(f,3),Gs(l,function(S,C,j){bo(g,C,f(S,C,j))}),g}var UQ=Pc(function(l,f,g){l0(l,f,g)}),sk=Pc(function(l,f,g,S){l0(l,f,g,S)}),GQ=_o(function(l,f){var g={};if(l==null)return g;var S=!1;f=ir(f,function(j){return j=ma(j,l),S||(S=j.length>1),j}),$s(l,Nb(l),g),S&&(g=Bi(g,c|d|h,KH));for(var C=f.length;C--;)Tb(g,f[C]);return g});function $Q(l,f){return ok(l,x0(Le(f)))}var WQ=_o(function(l,f){return l==null?{}:wH(l,f)});function ok(l,f){if(l==null)return{};var g=ir(Nb(l),function(S){return[S]});return f=Le(f),QA(l,g,function(S,C){return f(S,C[0])})}function zQ(l,f,g){f=ma(f,l);var S=-1,C=f.length;for(C||(C=1,l=r);++S<C;){var j=l==null?r:l[Ws(f[S])];j===r&&(S=C,j=g),l=Eo(j)?j.call(l):j}return l}function HQ(l,f,g){return l==null?l:sh(l,f,g)}function YQ(l,f,g,S){return S=typeof S=="function"?S:r,l==null?l:sh(l,f,g,S)}var ak=wM(on),lk=wM(Zn);function JQ(l,f,g){var S=We(l),C=S||ya(l)||Dc(l);if(f=Le(f,4),g==null){var j=l&&l.constructor;C?g=S?new j:[]:cr(l)?g=Eo(j)?kc(Qm(l)):{}:g={}}return(C?qi:Gs)(l,function(V,U,Y){return f(g,V,U,Y)}),g}function QQ(l,f){return l==null?!0:Tb(l,f)}function ZQ(l,f,g){return l==null?l:rM(l,f,kb(g))}function XQ(l,f,g,S){return S=typeof S=="function"?S:r,l==null?l:rM(l,f,kb(g),S)}function Nc(l){return l==null?[]:ub(l,on(l))}function eZ(l){return l==null?[]:ub(l,Zn(l))}function tZ(l,f,g){return g===r&&(g=f,f=r),g!==r&&(g=$i(g),g=g===g?g:0),f!==r&&(f=$i(f),f=f===f?f:0),Wl($i(l),f,g)}function rZ(l,f,g){return f=Oo(f),g===r?(g=f,f=0):g=Oo(g),l=$i(l),lH(l,f,g)}function nZ(l,f,g){if(g&&typeof g!="boolean"&&Nn(l,f,g)&&(f=g=r),g===r&&(typeof f=="boolean"?(g=f,f=r):typeof l=="boolean"&&(g=l,l=r)),l===r&&f===r?(l=0,f=1):(l=Oo(l),f===r?(f=l,l=0):f=Oo(f)),l>f){var S=l;l=f,f=S}if(g||l%1||f%1){var C=PA();return xn(l+C*(f-l+D7("1e-"+((C+"").length-1))),f)}return Ob(l,f)}var iZ=Rc(function(l,f,g){return f=f.toLowerCase(),l+(g?uk(f):f)});function uk(l){return Zb(Tt(l).toLowerCase())}function ck(l){return l=Tt(l),l&&l.replace(Fd,H7).replace(O7,"")}function sZ(l,f,g){l=Tt(l),f=pi(f);var S=l.length;g=g===r?S:Wl(Qe(g),0,S);var C=g;return g-=f.length,g>=0&&l.slice(g,C)==f}function oZ(l){return l=Tt(l),l&&br.test(l)?l.replace(Ld,Y7):l}function aZ(l){return l=Tt(l),l&&Er.test(l)?l.replace(bc,"\\$&"):l}var lZ=Rc(function(l,f,g){return l+(g?"-":"")+f.toLowerCase()}),uZ=Rc(function(l,f,g){return l+(g?" ":"")+f.toLowerCase()}),cZ=hM("toLowerCase");function fZ(l,f,g){l=Tt(l),f=Qe(f);var S=f?Cc(l):0;if(!f||S>=f)return l;var C=(f-S)/2;return p0(t0(C),g)+l+p0(e0(C),g)}function dZ(l,f,g){l=Tt(l),f=Qe(f);var S=f?Cc(l):0;return f&&S<f?l+p0(f-S,g):l}function hZ(l,f,g){l=Tt(l),f=Qe(f);var S=f?Cc(l):0;return f&&S<f?p0(f-S,g)+l:l}function pZ(l,f,g){return g||f==null?f=0:f&&(f=+f),Sz(Tt(l).replace(nr,""),f||0)}function mZ(l,f,g){return(g?Nn(l,f,g):f===r)?f=1:f=Qe(f),Ib(Tt(l),f)}function gZ(){var l=arguments,f=Tt(l[0]);return l.length<3?f:f.replace(l[1],l[2])}var yZ=Rc(function(l,f,g){return l+(g?"_":"")+f.toLowerCase()});function vZ(l,f,g){return g&&typeof g!="number"&&Nn(l,f,g)&&(f=g=r),g=g===r?b:g>>>0,g?(l=Tt(l),l&&(typeof f=="string"||f!=null&&!Yb(f))&&(f=pi(f),!f&&Ic(l))?ga(Ss(l),0,g):l.split(f,g)):[]}var wZ=Rc(function(l,f,g){return l+(g?" ":"")+Zb(f)});function bZ(l,f,g){return l=Tt(l),g=g==null?0:Wl(Qe(g),0,l.length),f=pi(f),l.slice(g,g+f.length)==f}function SZ(l,f,g){var S=D.templateSettings;g&&Nn(l,f,g)&&(f=r),l=Tt(l),f=I0({},f,S,bM);var C=I0({},f.imports,S.imports,bM),j=on(C),V=ub(C,j),U,Y,ne=0,ie=f.interpolate||oa,oe="__p += '",pe=fb((f.escape||oa).source+"|"+ie.source+"|"+(ie===lr?Ar:oa).source+"|"+(f.evaluate||oa).source+"|$","g"),Te="//# sourceURL="+(Rt.call(f,"sourceURL")?(f.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++M7+"]")+`
`;l.replace(pe,function(je,ot,ht,gi,jn,yi){return ht||(ht=gi),oe+=l.slice(ne,yi).replace(Vd,J7),ot&&(U=!0,oe+=`' +
__e(`+ot+`) +
'`),jn&&(Y=!0,oe+=`';
`+jn+`;
__p += '`),ht&&(oe+=`' +
((__t = (`+ht+`)) == null ? '' : __t) +
'`),ne=yi+je.length,je}),oe+=`';
`;var Ne=Rt.call(f,"variable")&&f.variable;if(!Ne)oe=`with (obj) {
`+oe+`
}
`;else if(Tr.test(Ne))throw new Ge(s);oe=(Y?oe.replace(yr,""):oe).replace(Dm,"$1").replace(vr,"$1;"),oe="function("+(Ne||"obj")+`) {
`+(Ne?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(U?", __e = _.escape":"")+(Y?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+oe+`return __p
}`;var Xe=dk(function(){return Ot(j,Te+"return "+oe).apply(r,V)});if(Xe.source=oe,Hb(Xe))throw Xe;return Xe}function _Z(l){return Tt(l).toLowerCase()}function xZ(l){return Tt(l).toUpperCase()}function EZ(l,f,g){if(l=Tt(l),l&&(g||f===r))return SA(l);if(!l||!(f=pi(f)))return l;var S=Ss(l),C=Ss(f),j=_A(S,C),V=xA(S,C)+1;return ga(S,j,V).join("")}function OZ(l,f,g){if(l=Tt(l),l&&(g||f===r))return l.slice(0,OA(l)+1);if(!l||!(f=pi(f)))return l;var S=Ss(l),C=xA(S,Ss(f))+1;return ga(S,0,C).join("")}function IZ(l,f,g){if(l=Tt(l),l&&(g||f===r))return l.replace(nr,"");if(!l||!(f=pi(f)))return l;var S=Ss(l),C=_A(S,Ss(f));return ga(S,C).join("")}function CZ(l,f){var g=G,S=H;if(cr(f)){var C="separator"in f?f.separator:C;g="length"in f?Qe(f.length):g,S="omission"in f?pi(f.omission):S}l=Tt(l);var j=l.length;if(Ic(l)){var V=Ss(l);j=V.length}if(g>=j)return l;var U=g-Cc(S);if(U<1)return S;var Y=V?ga(V,0,U).join(""):l.slice(0,U);if(C===r)return Y+S;if(V&&(U+=Y.length-U),Yb(C)){if(l.slice(U).search(C)){var ne,ie=Y;for(C.global||(C=fb(C.source,Tt(ur.exec(C))+"g")),C.lastIndex=0;ne=C.exec(ie);)var oe=ne.index;Y=Y.slice(0,oe===r?U:oe)}}else if(l.indexOf(pi(C),U)!=U){var pe=Y.lastIndexOf(C);pe>-1&&(Y=Y.slice(0,pe))}return Y+S}function TZ(l){return l=Tt(l),l&&wr.test(l)?l.replace(ar,nz):l}var AZ=Rc(function(l,f,g){return l+(g?" ":"")+f.toUpperCase()}),Zb=hM("toUpperCase");function fk(l,f,g){return l=Tt(l),f=g?r:f,f===r?Z7(l)?oz(l):U7(l):l.match(f)||[]}var dk=rt(function(l,f){try{return di(l,r,f)}catch(g){return Hb(g)?g:new Ge(g)}}),MZ=_o(function(l,f){return qi(f,function(g){g=Ws(g),bo(l,g,Wb(l[g],l))}),l});function kZ(l){var f=l==null?0:l.length,g=Le();return l=f?ir(l,function(S){if(typeof S[1]!="function")throw new Fi(i);return[g(S[0]),S[1]]}):[],rt(function(S){for(var C=-1;++C<f;){var j=l[C];if(di(j[0],this,S))return di(j[1],this,S)}})}function PZ(l){return nH(Bi(l,c))}function Xb(l){return function(){return l}}function RZ(l,f){return l==null||l!==l?f:l}var LZ=mM(),DZ=mM(!0);function Xn(l){return l}function eS(l){return $A(typeof l=="function"?l:Bi(l,c))}function NZ(l){return zA(Bi(l,c))}function jZ(l,f){return HA(l,Bi(f,c))}var KZ=rt(function(l,f){return function(g){return nh(g,l,f)}}),qZ=rt(function(l,f){return function(g){return nh(l,g,f)}});function tS(l,f,g){var S=on(f),C=a0(f,S);g==null&&!(cr(f)&&(C.length||!S.length))&&(g=f,f=l,l=this,C=a0(f,on(f)));var j=!(cr(g)&&"chain"in g)||!!g.chain,V=Eo(l);return qi(C,function(U){var Y=f[U];l[U]=Y,V&&(l.prototype[U]=function(){var ne=this.__chain__;if(j||ne){var ie=l(this.__wrapped__),oe=ie.__actions__=Jn(this.__actions__);return oe.push({func:Y,args:arguments,thisArg:l}),ie.__chain__=ne,ie}return Y.apply(l,ua([this.value()],arguments))})}),l}function FZ(){return sn._===this&&(sn._=dz),this}function rS(){}function VZ(l){return l=Qe(l),rt(function(f){return YA(f,l)})}var BZ=Rb(ir),UZ=Rb(gA),GZ=Rb(ib);function hk(l){return Fb(l)?sb(Ws(l)):bH(l)}function $Z(l){return function(f){return l==null?r:zl(l,f)}}var WZ=yM(),zZ=yM(!0);function nS(){return[]}function iS(){return!1}function HZ(){return{}}function YZ(){return""}function JZ(){return!0}function QZ(l,f){if(l=Qe(l),l<1||l>M)return[];var g=b,S=xn(l,b);f=Le(f),l-=b;for(var C=lb(S,f);++g<l;)f(g);return C}function ZZ(l){return We(l)?ir(l,Ws):mi(l)?[l]:Jn(RM(Tt(l)))}function XZ(l){var f=++cz;return Tt(l)+f}var eX=h0(function(l,f){return l+f},0),tX=Lb("ceil"),rX=h0(function(l,f){return l/f},1),nX=Lb("floor");function iX(l){return l&&l.length?o0(l,Xn,wb):r}function sX(l,f){return l&&l.length?o0(l,Le(f,2),wb):r}function oX(l){return wA(l,Xn)}function aX(l,f){return wA(l,Le(f,2))}function lX(l){return l&&l.length?o0(l,Xn,xb):r}function uX(l,f){return l&&l.length?o0(l,Le(f,2),xb):r}var cX=h0(function(l,f){return l*f},1),fX=Lb("round"),dX=h0(function(l,f){return l-f},0);function hX(l){return l&&l.length?ab(l,Xn):0}function pX(l,f){return l&&l.length?ab(l,Le(f,2)):0}return D.after=NJ,D.ary=GM,D.assign=xQ,D.assignIn=ik,D.assignInWith=I0,D.assignWith=EQ,D.at=OQ,D.before=$M,D.bind=Wb,D.bindAll=MZ,D.bindKey=WM,D.castArray=HJ,D.chain=VM,D.chunk=nY,D.compact=iY,D.concat=sY,D.cond=kZ,D.conforms=PZ,D.constant=Xb,D.countBy=hJ,D.create=IQ,D.curry=zM,D.curryRight=HM,D.debounce=YM,D.defaults=CQ,D.defaultsDeep=TQ,D.defer=jJ,D.delay=KJ,D.difference=oY,D.differenceBy=aY,D.differenceWith=lY,D.drop=uY,D.dropRight=cY,D.dropRightWhile=fY,D.dropWhile=dY,D.fill=hY,D.filter=mJ,D.flatMap=vJ,D.flatMapDeep=wJ,D.flatMapDepth=bJ,D.flatten=jM,D.flattenDeep=pY,D.flattenDepth=mY,D.flip=qJ,D.flow=LZ,D.flowRight=DZ,D.fromPairs=gY,D.functions=DQ,D.functionsIn=NQ,D.groupBy=SJ,D.initial=vY,D.intersection=wY,D.intersectionBy=bY,D.intersectionWith=SY,D.invert=KQ,D.invertBy=qQ,D.invokeMap=xJ,D.iteratee=eS,D.keyBy=EJ,D.keys=on,D.keysIn=Zn,D.map=b0,D.mapKeys=VQ,D.mapValues=BQ,D.matches=NZ,D.matchesProperty=jZ,D.memoize=_0,D.merge=UQ,D.mergeWith=sk,D.method=KZ,D.methodOf=qZ,D.mixin=tS,D.negate=x0,D.nthArg=VZ,D.omit=GQ,D.omitBy=$Q,D.once=FJ,D.orderBy=OJ,D.over=BZ,D.overArgs=VJ,D.overEvery=UZ,D.overSome=GZ,D.partial=zb,D.partialRight=JM,D.partition=IJ,D.pick=WQ,D.pickBy=ok,D.property=hk,D.propertyOf=$Z,D.pull=OY,D.pullAll=qM,D.pullAllBy=IY,D.pullAllWith=CY,D.pullAt=TY,D.range=WZ,D.rangeRight=zZ,D.rearg=BJ,D.reject=AJ,D.remove=AY,D.rest=UJ,D.reverse=Gb,D.sampleSize=kJ,D.set=HQ,D.setWith=YQ,D.shuffle=PJ,D.slice=MY,D.sortBy=DJ,D.sortedUniq=jY,D.sortedUniqBy=KY,D.split=vZ,D.spread=GJ,D.tail=qY,D.take=FY,D.takeRight=VY,D.takeRightWhile=BY,D.takeWhile=UY,D.tap=iJ,D.throttle=$J,D.thru=w0,D.toArray=tk,D.toPairs=ak,D.toPairsIn=lk,D.toPath=ZZ,D.toPlainObject=nk,D.transform=JQ,D.unary=WJ,D.union=GY,D.unionBy=$Y,D.unionWith=WY,D.uniq=zY,D.uniqBy=HY,D.uniqWith=YY,D.unset=QQ,D.unzip=$b,D.unzipWith=FM,D.update=ZQ,D.updateWith=XQ,D.values=Nc,D.valuesIn=eZ,D.without=JY,D.words=fk,D.wrap=zJ,D.xor=QY,D.xorBy=ZY,D.xorWith=XY,D.zip=eJ,D.zipObject=tJ,D.zipObjectDeep=rJ,D.zipWith=nJ,D.entries=ak,D.entriesIn=lk,D.extend=ik,D.extendWith=I0,tS(D,D),D.add=eX,D.attempt=dk,D.camelCase=iZ,D.capitalize=uk,D.ceil=tX,D.clamp=tZ,D.clone=YJ,D.cloneDeep=QJ,D.cloneDeepWith=ZJ,D.cloneWith=JJ,D.conformsTo=XJ,D.deburr=ck,D.defaultTo=RZ,D.divide=rX,D.endsWith=sZ,D.eq=xs,D.escape=oZ,D.escapeRegExp=aZ,D.every=pJ,D.find=gJ,D.findIndex=DM,D.findKey=AQ,D.findLast=yJ,D.findLastIndex=NM,D.findLastKey=MQ,D.floor=nX,D.forEach=BM,D.forEachRight=UM,D.forIn=kQ,D.forInRight=PQ,D.forOwn=RQ,D.forOwnRight=LQ,D.get=Jb,D.gt=eQ,D.gte=tQ,D.has=jQ,D.hasIn=Qb,D.head=KM,D.identity=Xn,D.includes=_J,D.indexOf=yY,D.inRange=rZ,D.invoke=FQ,D.isArguments=Jl,D.isArray=We,D.isArrayBuffer=rQ,D.isArrayLike=Qn,D.isArrayLikeObject=Kr,D.isBoolean=nQ,D.isBuffer=ya,D.isDate=iQ,D.isElement=sQ,D.isEmpty=oQ,D.isEqual=aQ,D.isEqualWith=lQ,D.isError=Hb,D.isFinite=uQ,D.isFunction=Eo,D.isInteger=QM,D.isLength=E0,D.isMap=ZM,D.isMatch=cQ,D.isMatchWith=fQ,D.isNaN=dQ,D.isNative=hQ,D.isNil=mQ,D.isNull=pQ,D.isNumber=XM,D.isObject=cr,D.isObjectLike=Mr,D.isPlainObject=uh,D.isRegExp=Yb,D.isSafeInteger=gQ,D.isSet=ek,D.isString=O0,D.isSymbol=mi,D.isTypedArray=Dc,D.isUndefined=yQ,D.isWeakMap=vQ,D.isWeakSet=wQ,D.join=_Y,D.kebabCase=lZ,D.last=Gi,D.lastIndexOf=xY,D.lowerCase=uZ,D.lowerFirst=cZ,D.lt=bQ,D.lte=SQ,D.max=iX,D.maxBy=sX,D.mean=oX,D.meanBy=aX,D.min=lX,D.minBy=uX,D.stubArray=nS,D.stubFalse=iS,D.stubObject=HZ,D.stubString=YZ,D.stubTrue=JZ,D.multiply=cX,D.nth=EY,D.noConflict=FZ,D.noop=rS,D.now=S0,D.pad=fZ,D.padEnd=dZ,D.padStart=hZ,D.parseInt=pZ,D.random=nZ,D.reduce=CJ,D.reduceRight=TJ,D.repeat=mZ,D.replace=gZ,D.result=zQ,D.round=fX,D.runInContext=W,D.sample=MJ,D.size=RJ,D.snakeCase=yZ,D.some=LJ,D.sortedIndex=kY,D.sortedIndexBy=PY,D.sortedIndexOf=RY,D.sortedLastIndex=LY,D.sortedLastIndexBy=DY,D.sortedLastIndexOf=NY,D.startCase=wZ,D.startsWith=bZ,D.subtract=dX,D.sum=hX,D.sumBy=pX,D.template=SZ,D.times=QZ,D.toFinite=Oo,D.toInteger=Qe,D.toLength=rk,D.toLower=_Z,D.toNumber=$i,D.toSafeInteger=_Q,D.toString=Tt,D.toUpper=xZ,D.trim=EZ,D.trimEnd=OZ,D.trimStart=IZ,D.truncate=CZ,D.unescape=TZ,D.uniqueId=XZ,D.upperCase=AZ,D.upperFirst=Zb,D.each=BM,D.eachRight=UM,D.first=KM,tS(D,function(){var l={};return Gs(D,function(f,g){Rt.call(D.prototype,g)||(l[g]=f)}),l}(),{chain:!1}),D.VERSION=e,qi(["bind","bindKey","curry","curryRight","partial","partialRight"],function(l){D[l].placeholder=D}),qi(["drop","take"],function(l,f){ut.prototype[l]=function(g){g=g===r?1:Qr(Qe(g),0);var S=this.__filtered__&&!f?new ut(this):this.clone();return S.__filtered__?S.__takeCount__=xn(g,S.__takeCount__):S.__views__.push({size:xn(g,b),type:l+(S.__dir__<0?"Right":"")}),S},ut.prototype[l+"Right"]=function(g){return this.reverse()[l](g).reverse()}}),qi(["filter","map","takeWhile"],function(l,f){var g=f+1,S=g==w||g==T;ut.prototype[l]=function(C){var j=this.clone();return j.__iteratees__.push({iteratee:Le(C,3),type:g}),j.__filtered__=j.__filtered__||S,j}}),qi(["head","last"],function(l,f){var g="take"+(f?"Right":"");ut.prototype[l]=function(){return this[g](1).value()[0]}}),qi(["initial","tail"],function(l,f){var g="drop"+(f?"":"Right");ut.prototype[l]=function(){return this.__filtered__?new ut(this):this[g](1)}}),ut.prototype.compact=function(){return this.filter(Xn)},ut.prototype.find=function(l){return this.filter(l).head()},ut.prototype.findLast=function(l){return this.reverse().find(l)},ut.prototype.invokeMap=rt(function(l,f){return typeof l=="function"?new ut(this):this.map(function(g){return nh(g,l,f)})}),ut.prototype.reject=function(l){return this.filter(x0(Le(l)))},ut.prototype.slice=function(l,f){l=Qe(l);var g=this;return g.__filtered__&&(l>0||f<0)?new ut(g):(l<0?g=g.takeRight(-l):l&&(g=g.drop(l)),f!==r&&(f=Qe(f),g=f<0?g.dropRight(-f):g.take(f-l)),g)},ut.prototype.takeRightWhile=function(l){return this.reverse().takeWhile(l).reverse()},ut.prototype.toArray=function(){return this.take(b)},Gs(ut.prototype,function(l,f){var g=/^(?:filter|find|map|reject)|While$/.test(f),S=/^(?:head|last)$/.test(f),C=D[S?"take"+(f=="last"?"Right":""):f],j=S||/^find/.test(f);C&&(D.prototype[f]=function(){var V=this.__wrapped__,U=S?[1]:arguments,Y=V instanceof ut,ne=U[0],ie=Y||We(V),oe=function(ot){var ht=C.apply(D,ua([ot],U));return S&&pe?ht[0]:ht};ie&&g&&typeof ne=="function"&&ne.length!=1&&(Y=ie=!1);var pe=this.__chain__,Te=!!this.__actions__.length,Ne=j&&!pe,Xe=Y&&!Te;if(!j&&ie){V=Xe?V:new ut(this);var je=l.apply(V,U);return je.__actions__.push({func:w0,args:[oe],thisArg:r}),new Vi(je,pe)}return Ne&&Xe?l.apply(this,U):(je=this.thru(oe),Ne?S?je.value()[0]:je.value():je)})}),qi(["pop","push","shift","sort","splice","unshift"],function(l){var f=$m[l],g=/^(?:push|sort|unshift)$/.test(l)?"tap":"thru",S=/^(?:pop|shift)$/.test(l);D.prototype[l]=function(){var C=arguments;if(S&&!this.__chain__){var j=this.value();return f.apply(We(j)?j:[],C)}return this[g](function(V){return f.apply(We(V)?V:[],C)})}}),Gs(ut.prototype,function(l,f){var g=D[f];if(g){var S=g.name+"";Rt.call(Mc,S)||(Mc[S]=[]),Mc[S].push({name:f,func:g})}}),Mc[d0(r,_).name]=[{name:"wrapper",func:r}],ut.prototype.clone=Tz,ut.prototype.reverse=Az,ut.prototype.value=Mz,D.prototype.at=sJ,D.prototype.chain=oJ,D.prototype.commit=aJ,D.prototype.next=lJ,D.prototype.plant=cJ,D.prototype.reverse=fJ,D.prototype.toJSON=D.prototype.valueOf=D.prototype.value=dJ,D.prototype.first=D.prototype.head,Jd&&(D.prototype[Jd]=uJ),D},fa=az();typeof define=="function"&&typeof define.amd=="object"&&define.amd?(sn._=fa,define(function(){return fa})):Bl?((Bl.exports=fa)._=fa,eb._=fa):sn._=fa}).call(rf)});function Rh(){return xg>Eg.length-16&&(BD.default.randomFillSync(Eg),xg=0),Eg.slice(xg,xg+=16)}var BD,Eg,xg,cx=an(()=>{BD=et(require("crypto")),Eg=new Uint8Array(256),xg=Eg.length});var UD,GD=an(()=>{UD=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i});function Xoe(r){return typeof r=="string"&&UD.test(r)}var Ma,Lh=an(()=>{GD();Ma=Xoe});function su(r,e=0){return vn[r[e+0]]+vn[r[e+1]]+vn[r[e+2]]+vn[r[e+3]]+"-"+vn[r[e+4]]+vn[r[e+5]]+"-"+vn[r[e+6]]+vn[r[e+7]]+"-"+vn[r[e+8]]+vn[r[e+9]]+"-"+vn[r[e+10]]+vn[r[e+11]]+vn[r[e+12]]+vn[r[e+13]]+vn[r[e+14]]+vn[r[e+15]]}function eae(r,e=0){let t=su(r,e);if(!Ma(t))throw TypeError("Stringified UUID is invalid");return t}var vn,$D,Dh=an(()=>{Lh();vn=[];for(let r=0;r<256;++r)vn.push((r+256).toString(16).slice(1));$D=eae});function tae(r,e,t){let n=e&&t||0,i=e||new Array(16);r=r||{};let s=r.node||WD,o=r.clockseq!==void 0?r.clockseq:fx;if(s==null||o==null){let p=r.random||(r.rng||Rh)();s==null&&(s=WD=[p[0]|1,p[1],p[2],p[3],p[4],p[5]]),o==null&&(o=fx=(p[6]<<8|p[7])&16383)}let a=r.msecs!==void 0?r.msecs:Date.now(),u=r.nsecs!==void 0?r.nsecs:hx+1,c=a-dx+(u-hx)/1e4;if(c<0&&r.clockseq===void 0&&(o=o+1&16383),(c<0||a>dx)&&r.nsecs===void 0&&(u=0),u>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");dx=a,hx=u,fx=o,a+=122192928e5;let d=((a&268435455)*1e4+u)%4294967296;i[n++]=d>>>24&255,i[n++]=d>>>16&255,i[n++]=d>>>8&255,i[n++]=d&255;let h=a/4294967296*1e4&268435455;i[n++]=h>>>8&255,i[n++]=h&255,i[n++]=h>>>24&15|16,i[n++]=h>>>16&255,i[n++]=o>>>8|128,i[n++]=o&255;for(let p=0;p<6;++p)i[n+p]=s[p];return e||su(i)}var WD,fx,dx,hx,zD,HD=an(()=>{cx();Dh();dx=0,hx=0;zD=tae});function rae(r){if(!Ma(r))throw TypeError("Invalid UUID");let e,t=new Uint8Array(16);return t[0]=(e=parseInt(r.slice(0,8),16))>>>24,t[1]=e>>>16&255,t[2]=e>>>8&255,t[3]=e&255,t[4]=(e=parseInt(r.slice(9,13),16))>>>8,t[5]=e&255,t[6]=(e=parseInt(r.slice(14,18),16))>>>8,t[7]=e&255,t[8]=(e=parseInt(r.slice(19,23),16))>>>8,t[9]=e&255,t[10]=(e=parseInt(r.slice(24,36),16))/1099511627776&255,t[11]=e/4294967296&255,t[12]=e>>>24&255,t[13]=e>>>16&255,t[14]=e>>>8&255,t[15]=e&255,t}var Og,px=an(()=>{Lh();Og=rae});function nae(r){r=unescape(encodeURIComponent(r));let e=[];for(let t=0;t<r.length;++t)e.push(r.charCodeAt(t));return e}function Nh(r,e,t){function n(i,s,o,a){var u;if(typeof i=="string"&&(i=nae(i)),typeof s=="string"&&(s=Og(s)),((u=s)===null||u===void 0?void 0:u.length)!==16)throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");let c=new Uint8Array(16+i.length);if(c.set(s),c.set(i,s.length),c=t(c),c[6]=c[6]&15|e,c[8]=c[8]&63|128,o){a=a||0;for(let d=0;d<16;++d)o[a+d]=c[d];return o}return su(c)}try{n.name=r}catch{}return n.DNS=iae,n.URL=sae,n}var iae,sae,mx=an(()=>{Dh();px();iae="6ba7b810-9dad-11d1-80b4-00c04fd430c8",sae="6ba7b811-9dad-11d1-80b4-00c04fd430c8"});function oae(r){return Array.isArray(r)?r=Buffer.from(r):typeof r=="string"&&(r=Buffer.from(r,"utf8")),YD.default.createHash("md5").update(r).digest()}var YD,JD,QD=an(()=>{YD=et(require("crypto"));JD=oae});var aae,ZD,XD=an(()=>{mx();QD();aae=Nh("v3",48,JD),ZD=aae});var e3,gx,t3=an(()=>{e3=et(require("crypto")),gx={randomUUID:e3.default.randomUUID}});function lae(r,e,t){if(gx.randomUUID&&!e&&!r)return gx.randomUUID();r=r||{};let n=r.random||(r.rng||Rh)();if(n[6]=n[6]&15|64,n[8]=n[8]&63|128,e){t=t||0;for(let i=0;i<16;++i)e[t+i]=n[i];return e}return su(n)}var r3,n3=an(()=>{t3();cx();Dh();r3=lae});function uae(r){return Array.isArray(r)?r=Buffer.from(r):typeof r=="string"&&(r=Buffer.from(r,"utf8")),i3.default.createHash("sha1").update(r).digest()}var i3,s3,o3=an(()=>{i3=et(require("crypto"));s3=uae});var cae,a3,l3=an(()=>{mx();o3();cae=Nh("v5",80,s3),a3=cae});var u3,c3=an(()=>{u3="00000000-0000-0000-0000-000000000000"});function fae(r){if(!Ma(r))throw TypeError("Invalid UUID");return parseInt(r.slice(14,15),16)}var f3,d3=an(()=>{Lh();f3=fae});var Ig={};sS(Ig,{NIL:()=>u3,parse:()=>Og,stringify:()=>$D,v1:()=>zD,v3:()=>ZD,v4:()=>r3,v5:()=>a3,validate:()=>Ma,version:()=>f3});var Cg=an(()=>{HD();XD();n3();l3();c3();d3();Lh();Dh();px()});var O3=E((yMe,E3)=>{var m3=require("fs"),Ji=require("path"),dae=require("url"),hae=process.config&&process.config.variables||{},pae=!!process.env.PREBUILDS_ONLY,Sx=process.versions,vx=Sx.modules;(Sx.deno||process.isBun)&&(vx="unsupported");var yx=gae()?"electron":"node",Tg=process.arch,Ag=process.platform,g3=process.env.LIBC||(yae(Ag)?"musl":"glibc"),wx=process.env.ARM_VERSION||(Tg==="arm64"?"8":hae.arm_version)||"",y3=(Sx.uv||"").split(".")[0];E3.exports=Qs;function Qs(r){return typeof __webpack_require__=="function"?__non_webpack_require__(Qs.path(r)):require(Qs.path(r))}Qs.path=function(r){r=Ji.resolve(r||".");var e;try{typeof __webpack_require__=="function"?e=__non_webpack_require__(Ji.join(r,"package.json")).name:e=require(Ji.join(r,"package.json")).name;var t=e.toUpperCase().replace(/-/g,"_")+"_PREBUILD";process.env[t]&&(r=process.env[t])}catch{}if(!pae){var n=h3(Ji.join(r,"build/Release"),p3);if(n)return n;var i=h3(Ji.join(r,"build/Debug"),p3);if(i)return i}var s=d(r);if(s)return s;var o=d(Ji.dirname(process.execPath));if(o)return o;var a=(e[0]=="@"?"":"@"+e+"/")+e+"-"+Ag+"-"+Tg;try{var u=Ji.dirname(require("module").createRequire(dae.pathToFileURL(Ji.join(r,"package.json"))).resolve(a));return h(u)}catch{}var c=["platform="+Ag,"arch="+Tg,"runtime="+yx,"abi="+vx,"uv="+y3,wx?"armv="+wx:"","libc="+g3,"node="+process.versions.node,process.versions.electron?"electron="+process.versions.electron:"",typeof __webpack_require__=="function"?"webpack=true":""].filter(Boolean).join(" ");throw new Error("No native build was found for "+c+`
    loaded from: `+r+" and package: "+a+`
`);function d(p){var m=bx(Ji.join(p,"prebuilds")).map(v3),y=m.filter(w3(Ag,Tg)).sort(b3)[0];if(y)return h(Ji.join(p,"prebuilds",y.name))}function h(p){var m=bx(p).map(S3),y=m.filter(_3(yx,vx)),_=y.sort(x3(yx))[0];if(_)return Ji.join(p,_.file)}};function bx(r){try{return m3.readdirSync(r)}catch{return[]}}function h3(r,e){var t=bx(r).filter(e);return t[0]&&Ji.join(r,t[0])}function p3(r){return/\.node$/.test(r)}function v3(r){var e=r.split("-");if(e.length===2){var t=e[0],n=e[1].split("+");if(t&&n.length&&n.every(Boolean))return{name:r,platform:t,architectures:n}}}function w3(r,e){return function(t){return t==null||t.platform!==r?!1:t.architectures.includes(e)}}function b3(r,e){return r.architectures.length-e.architectures.length}function S3(r){var e=r.split("."),t=e.pop(),n={file:r,specificity:0};if(t==="node"){for(var i=0;i<e.length;i++){var s=e[i];if(s==="node"||s==="electron"||s==="node-webkit")n.runtime=s;else if(s==="napi")n.napi=!0;else if(s.slice(0,3)==="abi")n.abi=s.slice(3);else if(s.slice(0,2)==="uv")n.uv=s.slice(2);else if(s.slice(0,4)==="armv")n.armv=s.slice(4);else if(s==="glibc"||s==="musl")n.libc=s;else continue;n.specificity++}return n}}function _3(r,e){return function(t){return!(t==null||t.runtime!==r&&!mae(t)||t.abi!==e&&!t.napi||t.uv&&t.uv!==y3||t.armv&&t.armv!==wx||t.libc&&t.libc!==g3)}}function mae(r){return r.runtime==="node"&&r.napi}function x3(r){return function(e,t){return e.runtime!==t.runtime?e.runtime===r?-1:1:e.abi!==t.abi?e.abi?-1:1:e.specificity!==t.specificity?e.specificity>t.specificity?-1:1:0}}function gae(){return process.versions&&process.versions.electron||process.env.ELECTRON_RUN_AS_NODE?!0:typeof window<"u"&&window.process&&window.process.type==="renderer"}function yae(r){return r==="linux"&&m3.existsSync("/etc/alpine-release")}Qs.parseTags=S3;Qs.matchTags=_3;Qs.compareTags=x3;Qs.parseTuple=v3;Qs.matchTuple=w3;Qs.compareTuples=b3});var C3=E((vMe,I3)=>{I3.exports=O3()(__dirname)});var aN=E(Lt=>{"use strict";var B3=require("stream"),vae=require("module"),xx;try{xx=new TextDecoder}catch{}var ce,xi,$=0,Ax=[],lu=Ax,qh=0,sr={},pt,No,_i=0,Qi=0,Zr,jo,Bn=[],ct,T3={useRecords:!1,mapsAsObjects:!0},Dg=class{},Mx=new Dg;Mx.name="MessagePack 0xC1";var ka=!1,U3=2,Ex,Ox,Ix;try{new Function("")}catch{U3=1/0}var Pa=class r{constructor(e){e&&(e.useRecords===!1&&e.mapsAsObjects===void 0&&(e.mapsAsObjects=!0),e.sequential&&e.trusted!==!1&&(e.trusted=!0,!e.structures&&e.useRecords!=!1&&(e.structures=[],e.maxSharedStructures||(e.maxSharedStructures=0))),e.structures?e.structures.sharedLength=e.structures.length:e.getStructures&&((e.structures=[]).uninitialized=!0,e.structures.sharedLength=0),e.int64AsNumber&&(e.int64AsType="number")),Object.assign(this,e)}unpack(e,t){if(ce)return Q3(()=>(jg(),this?this.unpack(e,t):r.prototype.unpack.call(T3,e,t)));!e.buffer&&e.constructor===ArrayBuffer&&(e=typeof Buffer<"u"?Buffer.from(e):new Uint8Array(e)),typeof t=="object"?(xi=t.end||e.length,$=t.start||0):($=0,xi=t>-1?t:e.length),qh=0,Qi=0,No=null,lu=Ax,Zr=null,ce=e;try{ct=e.dataView||(e.dataView=new DataView(e.buffer,e.byteOffset,e.byteLength))}catch(n){throw ce=null,e instanceof Uint8Array?n:new Error("Source must be a Uint8Array or Buffer but was a "+(e&&typeof e=="object"?e.constructor.name:typeof e))}if(this instanceof r){if(sr=this,this.structures)return pt=this.structures,Mg(t);(!pt||pt.length>0)&&(pt=[])}else sr=T3,(!pt||pt.length>0)&&(pt=[]);return Mg(t)}unpackMultiple(e,t){let n,i=0;try{ka=!0;let s=e.length,o=this?this.unpack(e,s):Vg.unpack(e,s);if(t){if(t(o,i,$)===!1)return;for(;$<s;)if(i=$,t(Mg(),i,$)===!1)return}else{for(n=[o];$<s;)i=$,n.push(Mg());return n}}catch(s){throw s.lastPosition=i,s.values=n,s}finally{ka=!1,jg()}}_mergeStructures(e,t){Ox&&(e=Ox.call(this,e)),e=e||[],Object.isFrozen(e)&&(e=e.map(n=>n.slice(0)));for(let n=0,i=e.length;n<i;n++){let s=e[n];s&&(s.isShared=!0,n>=32&&(s.highByte=n-32>>5))}e.sharedLength=e.length;for(let n in t||[])if(n>=0){let i=e[n],s=t[n];s&&(i&&((e.restoreStructures||(e.restoreStructures=[]))[n]=i),e[n]=s)}return this.structures=e}decode(e,t){return this.unpack(e,t)}};function Mg(r){try{if(!sr.trusted&&!ka){let t=pt.sharedLength||0;t<pt.length&&(pt.length=t)}let e;if(sr.randomAccessStructure&&ce[$]<64&&ce[$]>=32&&Ex?(e=Ex(ce,$,xi,sr),ce=null,!(r&&r.lazy)&&e&&(e=e.toJSON()),$=xi):e=Fr(),Zr&&($=Zr.postBundlePosition,Zr=null),ka&&(pt.restoreStructures=null),$==xi)pt&&pt.restoreStructures&&A3(),pt=null,ce=null,jo&&(jo=null);else{if($>xi)throw new Error("Unexpected end of MessagePack data");if(!ka){let t;try{t=JSON.stringify(e,(n,i)=>typeof i=="bigint"?`${i}n`:i).slice(0,100)}catch(n){t="(JSON view not available "+n+")"}throw new Error("Data read, but end of buffer not reached "+t)}}return e}catch(e){throw pt&&pt.restoreStructures&&A3(),jg(),(e instanceof RangeError||e.message.startsWith("Unexpected end of buffer")||$>xi)&&(e.incomplete=!0),e}}function A3(){for(let r in pt.restoreStructures)pt[r]=pt.restoreStructures[r];pt.restoreStructures=null}function Fr(){let r=ce[$++];if(r<160)if(r<128){if(r<64)return r;{let e=pt[r&63]||sr.getStructures&&G3()[r&63];return e?(e.read||(e.read=kx(e,r&63)),e.read()):r}}else if(r<144)if(r-=128,sr.mapsAsObjects){let e={};for(let t=0;t<r;t++){let n=Y3();n==="__proto__"&&(n="__proto_"),e[n]=Fr()}return e}else{let e=new Map;for(let t=0;t<r;t++)e.set(Fr(),Fr());return e}else{r-=144;let e=new Array(r);for(let t=0;t<r;t++)e[t]=Fr();return sr.freezeData?Object.freeze(e):e}else if(r<192){let e=r-160;if(Qi>=$)return No.slice($-_i,($+=e)-_i);if(Qi==0&&xi<140){let t=e<16?Px(e):H3(e);if(t!=null)return t}return Ng(e)}else{let e;switch(r){case 192:return null;case 193:return Zr?(e=Fr(),e>0?Zr[1].slice(Zr.position1,Zr.position1+=e):Zr[0].slice(Zr.position0,Zr.position0-=e)):Mx;case 194:return!1;case 195:return!0;case 196:if(e=ce[$++],e===void 0)throw new Error("Unexpected end of buffer");return _x(e);case 197:return e=ct.getUint16($),$+=2,_x(e);case 198:return e=ct.getUint32($),$+=4,_x(e);case 199:return ou(ce[$++]);case 200:return e=ct.getUint16($),$+=2,ou(e);case 201:return e=ct.getUint32($),$+=4,ou(e);case 202:if(e=ct.getFloat32($),sr.useFloat32>2){let t=of[(ce[$]&127)<<1|ce[$+1]>>7];return $+=4,(t*e+(e>0?.5:-.5)>>0)/t}return $+=4,e;case 203:return e=ct.getFloat64($),$+=8,e;case 204:return ce[$++];case 205:return e=ct.getUint16($),$+=2,e;case 206:return e=ct.getUint32($),$+=4,e;case 207:return sr.int64AsType==="number"?(e=ct.getUint32($)*4294967296,e+=ct.getUint32($+4)):sr.int64AsType==="string"?e=ct.getBigUint64($).toString():sr.int64AsType==="auto"?(e=ct.getBigUint64($),e<=BigInt(2)<<BigInt(52)&&(e=Number(e))):e=ct.getBigUint64($),$+=8,e;case 208:return ct.getInt8($++);case 209:return e=ct.getInt16($),$+=2,e;case 210:return e=ct.getInt32($),$+=4,e;case 211:return sr.int64AsType==="number"?(e=ct.getInt32($)*4294967296,e+=ct.getUint32($+4)):sr.int64AsType==="string"?e=ct.getBigInt64($).toString():sr.int64AsType==="auto"?(e=ct.getBigInt64($),e>=BigInt(-2)<<BigInt(52)&&e<=BigInt(2)<<BigInt(52)&&(e=Number(e))):e=ct.getBigInt64($),$+=8,e;case 212:if(e=ce[$++],e==114)return D3(ce[$++]&63);{let t=Bn[e];if(t)return t.read?($++,t.read(Fr())):t.noBuffer?($++,t()):t(ce.subarray($,++$));throw new Error("Unknown extension "+e)}case 213:return e=ce[$],e==114?($++,D3(ce[$++]&63,ce[$++])):ou(2);case 214:return ou(4);case 215:return ou(8);case 216:return ou(16);case 217:return e=ce[$++],Qi>=$?No.slice($-_i,($+=e)-_i):$3(e);case 218:return e=ct.getUint16($),$+=2,Qi>=$?No.slice($-_i,($+=e)-_i):W3(e);case 219:return e=ct.getUint32($),$+=4,Qi>=$?No.slice($-_i,($+=e)-_i):z3(e);case 220:return e=ct.getUint16($),$+=2,k3(e);case 221:return e=ct.getUint32($),$+=4,k3(e);case 222:return e=ct.getUint16($),$+=2,P3(e);case 223:return e=ct.getUint32($),$+=4,P3(e);default:if(r>=224)return r-256;if(r===void 0){let t=new Error("Unexpected end of MessagePack data");throw t.incomplete=!0,t}throw new Error("Unknown MessagePack token "+r)}}}var wae=/^[a-zA-Z_$][a-zA-Z\d_$]*$/;function kx(r,e){function t(){if(t.count++>U3){let i=r.read=new Function("r","return function(){return "+(sr.freezeData?"Object.freeze":"")+"({"+r.map(s=>s==="__proto__"?"__proto_:r()":wae.test(s)?s+":r()":"["+JSON.stringify(s)+"]:r()").join(",")+"})}")(Fr);return r.highByte===0&&(r.read=M3(e,r.read)),i()}let n={};for(let i=0,s=r.length;i<s;i++){let o=r[i];o==="__proto__"&&(o="__proto_"),n[o]=Fr()}return sr.freezeData?Object.freeze(n):n}return t.count=0,r.highByte===0?M3(e,t):t}var M3=(r,e)=>function(){let t=ce[$++];if(t===0)return e();let n=r<32?-(r+(t<<5)):r+(t<<5),i=pt[n]||G3()[n];if(!i)throw new Error("Record id is not defined for "+n);return i.read||(i.read=kx(i,r)),i.read()};function G3(){let r=Q3(()=>(ce=null,sr.getStructures()));return pt=sr._mergeStructures(r,pt)}var Ng=uu,$3=uu,W3=uu,z3=uu;Lt.isNativeAccelerationEnabled=!1;function bae(r){Lt.isNativeAccelerationEnabled=!0,Ng=e(1),$3=e(2),W3=e(3),z3=e(5);function e(t){return function(i){let s=lu[qh++];if(s==null){if(Zr)return uu(i);let a=ce.byteOffset,u=r($-t+a,xi+a,ce.buffer);if(typeof u=="string")s=u,lu=Ax;else if(lu=u,qh=1,Qi=1,s=lu[0],s===void 0)throw new Error("Unexpected end of buffer")}let o=s.length;return o<=i?($+=i,s):(No=s,_i=$,Qi=$+o,$+=i,s.slice(0,i))}}}function uu(r){let e;if(r<16&&(e=Px(r)))return e;if(r>64&&xx)return xx.decode(ce.subarray($,$+=r));let t=$+r,n=[];for(e="";$<t;){let i=ce[$++];if(!(i&128))n.push(i);else if((i&224)===192){let s=ce[$++]&63;n.push((i&31)<<6|s)}else if((i&240)===224){let s=ce[$++]&63,o=ce[$++]&63;n.push((i&31)<<12|s<<6|o)}else if((i&248)===240){let s=ce[$++]&63,o=ce[$++]&63,a=ce[$++]&63,u=(i&7)<<18|s<<12|o<<6|a;u>65535&&(u-=65536,n.push(u>>>10&1023|55296),u=56320|u&1023),n.push(u)}else n.push(i);n.length>=4096&&(e+=fn.apply(String,n),n.length=0)}return n.length>0&&(e+=fn.apply(String,n)),e}function Sae(r,e,t){let n=ce;ce=r,$=e;try{return uu(t)}finally{ce=n}}function k3(r){let e=new Array(r);for(let t=0;t<r;t++)e[t]=Fr();return sr.freezeData?Object.freeze(e):e}function P3(r){if(sr.mapsAsObjects){let e={};for(let t=0;t<r;t++){let n=Y3();n==="__proto__"&&(n="__proto_"),e[n]=Fr()}return e}else{let e=new Map;for(let t=0;t<r;t++)e.set(Fr(),Fr());return e}}var fn=String.fromCharCode;function H3(r){let e=$,t=new Array(r);for(let n=0;n<r;n++){let i=ce[$++];if((i&128)>0){$=e;return}t[n]=i}return fn.apply(String,t)}function Px(r){if(r<4)if(r<2){if(r===0)return"";{let e=ce[$++];if((e&128)>1){$-=1;return}return fn(e)}}else{let e=ce[$++],t=ce[$++];if((e&128)>0||(t&128)>0){$-=2;return}if(r<3)return fn(e,t);let n=ce[$++];if((n&128)>0){$-=3;return}return fn(e,t,n)}else{let e=ce[$++],t=ce[$++],n=ce[$++],i=ce[$++];if((e&128)>0||(t&128)>0||(n&128)>0||(i&128)>0){$-=4;return}if(r<6){if(r===4)return fn(e,t,n,i);{let s=ce[$++];if((s&128)>0){$-=5;return}return fn(e,t,n,i,s)}}else if(r<8){let s=ce[$++],o=ce[$++];if((s&128)>0||(o&128)>0){$-=6;return}if(r<7)return fn(e,t,n,i,s,o);let a=ce[$++];if((a&128)>0){$-=7;return}return fn(e,t,n,i,s,o,a)}else{let s=ce[$++],o=ce[$++],a=ce[$++],u=ce[$++];if((s&128)>0||(o&128)>0||(a&128)>0||(u&128)>0){$-=8;return}if(r<10){if(r===8)return fn(e,t,n,i,s,o,a,u);{let c=ce[$++];if((c&128)>0){$-=9;return}return fn(e,t,n,i,s,o,a,u,c)}}else if(r<12){let c=ce[$++],d=ce[$++];if((c&128)>0||(d&128)>0){$-=10;return}if(r<11)return fn(e,t,n,i,s,o,a,u,c,d);let h=ce[$++];if((h&128)>0){$-=11;return}return fn(e,t,n,i,s,o,a,u,c,d,h)}else{let c=ce[$++],d=ce[$++],h=ce[$++],p=ce[$++];if((c&128)>0||(d&128)>0||(h&128)>0||(p&128)>0){$-=12;return}if(r<14){if(r===12)return fn(e,t,n,i,s,o,a,u,c,d,h,p);{let m=ce[$++];if((m&128)>0){$-=13;return}return fn(e,t,n,i,s,o,a,u,c,d,h,p,m)}}else{let m=ce[$++],y=ce[$++];if((m&128)>0||(y&128)>0){$-=14;return}if(r<15)return fn(e,t,n,i,s,o,a,u,c,d,h,p,m,y);let _=ce[$++];if((_&128)>0){$-=15;return}return fn(e,t,n,i,s,o,a,u,c,d,h,p,m,y,_)}}}}}function R3(){let r=ce[$++],e;if(r<192)e=r-160;else switch(r){case 217:e=ce[$++];break;case 218:e=ct.getUint16($),$+=2;break;case 219:e=ct.getUint32($),$+=4;break;default:throw new Error("Expected string")}return uu(e)}function _x(r){return sr.copyBuffers?Uint8Array.prototype.slice.call(ce,$,$+=r):ce.subarray($,$+=r)}function ou(r){let e=ce[$++];if(Bn[e]){let t;return Bn[e](ce.subarray($,t=$+=r),n=>{$=n;try{return Fr()}finally{$=t}})}else throw new Error("Unknown extension type "+e)}var L3=new Array(4096);function Y3(){let r=ce[$++];if(r>=160&&r<192){if(r=r-160,Qi>=$)return No.slice($-_i,($+=r)-_i);if(!(Qi==0&&xi<180))return Ng(r)}else return $--,Fr().toString();let e=(r<<5^(r>1?ct.getUint16($):r>0?ce[$]:0))&4095,t=L3[e],n=$,i=$+r-3,s,o=0;if(t&&t.bytes==r){for(;n<i;){if(s=ct.getUint32(n),s!=t[o++]){n=1879048192;break}n+=4}for(i+=3;n<i;)if(s=ce[n++],s!=t[o++]){n=1879048192;break}if(n===i)return $=n,t.string;i-=3,n=$}for(t=[],L3[e]=t,t.bytes=r;n<i;)s=ct.getUint32(n),t.push(s),n+=4;for(i+=3;n<i;)s=ce[n++],t.push(s);let a=r<16?Px(r):H3(r);return a!=null?t.string=a:t.string=Ng(r)}var D3=(r,e)=>{let t=Fr().map(s=>s.toString()),n=r;e!==void 0&&(r=r<32?-((e<<5)+r):(e<<5)+r,t.highByte=e);let i=pt[r];return i&&(i.isShared||ka)&&((pt.restoreStructures||(pt.restoreStructures=[]))[r]=i),pt[r]=t,t.read=kx(t,n),t.read()};Bn[0]=()=>{};Bn[0].noBuffer=!0;var _ae={Error,TypeError,ReferenceError};Bn[101]=()=>{let r=Fr();return(_ae[r[0]]||Error)(r[1])};Bn[105]=r=>{let e=ct.getUint32($-4);jo||(jo=new Map);let t=ce[$],n;t>=144&&t<160||t==220||t==221?n=[]:n={};let i={target:n};jo.set(e,i);let s=Fr();return i.used?Object.assign(n,s):(i.target=s,s)};Bn[112]=r=>{let e=ct.getUint32($-4),t=jo.get(e);return t.used=!0,t.target};Bn[115]=()=>new Set(Fr());var J3=["Int8","Uint8","Uint8Clamped","Int16","Uint16","Int32","Uint32","Float32","Float64","BigInt64","BigUint64"].map(r=>r+"Array"),xae=typeof globalThis=="object"?globalThis:window;Bn[116]=r=>{let e=r[0],t=J3[e];if(!t)throw new Error("Could not find typed array for code "+e);return new xae[t](Uint8Array.prototype.slice.call(r,1).buffer)};Bn[120]=()=>{let r=Fr();return new RegExp(r[0],r[1])};var Eae=[];Bn[98]=r=>{let e=(r[0]<<24)+(r[1]<<16)+(r[2]<<8)+r[3],t=$;return $+=e-r.length,Zr=Eae,Zr=[R3(),R3()],Zr.position0=0,Zr.position1=0,Zr.postBundlePosition=$,$=t,Fr()};Bn[255]=r=>r.length==4?new Date((r[0]*16777216+(r[1]<<16)+(r[2]<<8)+r[3])*1e3):r.length==8?new Date(((r[0]<<22)+(r[1]<<14)+(r[2]<<6)+(r[3]>>2))/1e6+((r[3]&3)*4294967296+r[4]*16777216+(r[5]<<16)+(r[6]<<8)+r[7])*1e3):r.length==12?new Date(((r[0]<<24)+(r[1]<<16)+(r[2]<<8)+r[3])/1e6+((r[4]&128?-281474976710656:0)+r[6]*1099511627776+r[7]*4294967296+r[8]*16777216+(r[9]<<16)+(r[10]<<8)+r[11])*1e3):new Date("invalid");function Q3(r){Ix&&Ix();let e=xi,t=$,n=qh,i=_i,s=Qi,o=No,a=lu,u=jo,c=Zr,d=new Uint8Array(ce.slice(0,xi)),h=pt,p=pt.slice(0,pt.length),m=sr,y=ka,_=r();return xi=e,$=t,qh=n,_i=i,Qi=s,No=o,lu=a,jo=u,Zr=c,ce=d,ka=y,pt=h,pt.splice(0,pt.length,...p),sr=m,ct=new DataView(ce.buffer,ce.byteOffset,ce.byteLength),_}function jg(){ce=null,jo=null,pt=null}function Oae(r){r.unpack?Bn[r.type]=r.unpack:Bn[r.type]=r}var of=new Array(147);for(let r=0;r<256;r++)of[r]=+("1e"+Math.floor(45.15-r*.30103));var Iae=Pa,Vg=new Pa({useRecords:!1}),Cae=Vg.unpack,Tae=Vg.unpackMultiple,Aae=Vg.unpack,Z3={NEVER:0,ALWAYS:1,DECIMAL_ROUND:3,DECIMAL_FIT:4},X3=new Float32Array(1),N3=new Uint8Array(X3.buffer,0,4);function Mae(r){X3[0]=r;let e=of[(N3[3]&127)<<1|N3[2]>>7];return(e*r+(r>0?.5:-.5)>>0)/e}function kae(r,e,t){Ex=r,Ox=e,Ix=t}var Pg;try{Pg=new TextEncoder}catch{}var Kg,Rx,Bg=typeof Buffer<"u",kg=Bg?function(r){return Buffer.allocUnsafeSlow(r)}:Uint8Array,eN=Bg?Buffer:Uint8Array,j3=Bg?4294967296:2144337920,Q,jh,Ft,J=0,Vn,dr=null,tN,Pae=21760,Rae=/[\u0080-\uFFFF]/,Do=Symbol("record-id"),Ra=class extends Pa{constructor(e){super(e),this.offset=0;let t,n,i,s,o=eN.prototype.utf8Write?function(w,I){return Q.utf8Write(w,I,4294967295)}:Pg&&Pg.encodeInto?function(w,I){return Pg.encodeInto(w,Q.subarray(I)).written}:!1,a=this;e||(e={});let u=e&&e.sequential,c=e.structures||e.saveStructures,d=e.maxSharedStructures;if(d==null&&(d=c?32:0),d>8160)throw new Error("Maximum maxSharedStructure is 8160");e.structuredClone&&e.moreTypes==null&&(this.moreTypes=!0);let h=e.maxOwnStructures;h==null&&(h=c?32:64),!this.structures&&e.useRecords!=!1&&(this.structures=[]);let p=d>32||h+d>64,m=d+64,y=d+h+64;if(y>8256)throw new Error("Maximum maxSharedStructure + maxOwnStructure is 8192");let _=[],O=0,x=0;this.pack=this.encode=function(w,I){if(Q||(Q=new kg(8192),Ft=Q.dataView||(Q.dataView=new DataView(Q.buffer,0,8192)),J=0),Vn=Q.length-10,Vn-J<2048?(Q=new kg(Q.length),Ft=Q.dataView||(Q.dataView=new DataView(Q.buffer,0,Q.length)),Vn=Q.length-10,J=0):J=J+7&2147483640,t=J,s=a.structuredClone?new Map:null,a.bundleStrings&&typeof w!="string"?(dr=[],dr.size=1/0):dr=null,i=a.structures,i){i.uninitialized&&(i=a._mergeStructures(a.getStructures()));let T=i.sharedLength||0;if(T>d)throw new Error("Shared structures is larger than maximum shared structures, try increasing maxSharedStructures to "+i.sharedLength);if(!i.transitions){i.transitions=Object.create(null);for(let k=0;k<T;k++){let M=i[k];if(!M)continue;let K,L=i.transitions;for(let b=0,R=M.length;b<R;b++){let X=M[b];K=L[X],K||(K=L[X]=Object.create(null)),L=K}L[Do]=k+64}this.lastNamedStructuresLength=T}u||(i.nextId=T+64)}n&&(n=!1);try{a.randomAccessStructure&&w&&w.constructor&&w.constructor===Object?v(w):P(w);let T=dr;if(dr&&F3(t,P,0),s&&s.idsToInsert){let k=s.idsToInsert.sort((b,R)=>b.offset>R.offset?1:-1),M=k.length,K=-1;for(;T&&M>0;){let b=k[--M].offset+t;b<T.stringsPosition+t&&K===-1&&(K=0),b>T.position+t?K>=0&&(K+=6):(K>=0&&(Ft.setUint32(T.position+t,Ft.getUint32(T.position+t)+K),K=-1),T=T.previous,M++)}K>=0&&T&&Ft.setUint32(T.position+t,Ft.getUint32(T.position+t)+K),J+=k.length*6,J>Vn&&G(J),a.offset=J;let L=Dae(Q.subarray(t,J),k);return s=null,L}return a.offset=J,I&$ae?(Q.start=t,Q.end=J,Q):Q.subarray(t,J)}finally{if(i){x<10&&x++;let T=i.sharedLength||0;if(i.length>T&&!u&&(i.length=T),O>1e4)i.transitions=null,x=0,O=0,_.length>0&&(_=[]);else if(_.length>0&&!u){for(let k=0,M=_.length;k<M;k++)_[k][Do]=0;_=[]}if(n&&a.saveStructures){let k=Q.subarray(t,J),M=rN(i,a);return a.saveStructures(M,M.isCompatible)===!1?a.pack(w):(a.lastNamedStructuresLength=T,k)}}I&Wae&&(J=t)}};let A=w=>{var I=w.length;I<16?Q[J++]=144|I:I<65536?(Q[J++]=220,Q[J++]=I>>8,Q[J++]=I&255):(Q[J++]=221,Ft.setUint32(J,I),J+=4);for(let T=0;T<I;T++)P(w[T])},P=w=>{J>Vn&&(Q=G(J));var I=typeof w,T;if(I==="string"){let k=w.length;if(dr&&k>=4&&k<4096){if((dr.size+=k)>Pae){let b,R=(dr[0]?dr[0].length*3+dr[1].length:0)+10;J+R>Vn&&(Q=G(J+R));let X;dr.position?(X=dr,Q[J]=200,J+=3,Q[J++]=98,b=J-t,J+=4,F3(t,P,0),Ft.setUint16(b+t-3,J-t-b)):(Q[J++]=214,Q[J++]=98,b=J-t,J+=4),dr=["",""],dr.previous=X,dr.size=0,dr.position=b}let L=Rae.test(w);dr[L?0:1]+=w,Q[J++]=193,P(L?-k:k);return}let M;k<32?M=1:k<256?M=2:k<65536?M=3:M=5;let K=k*3;if(J+K>Vn&&(Q=G(J+K)),k<64||!o){let L,b,R,X=J+M;for(L=0;L<k;L++)b=w.charCodeAt(L),b<128?Q[X++]=b:b<2048?(Q[X++]=b>>6|192,Q[X++]=b&63|128):(b&64512)===55296&&((R=w.charCodeAt(L+1))&64512)===56320?(b=65536+((b&1023)<<10)+(R&1023),L++,Q[X++]=b>>18|240,Q[X++]=b>>12&63|128,Q[X++]=b>>6&63|128,Q[X++]=b&63|128):(Q[X++]=b>>12|224,Q[X++]=b>>6&63|128,Q[X++]=b&63|128);T=X-J-M}else T=o(w,J+M);T<32?Q[J++]=160|T:T<256?(M<2&&Q.copyWithin(J+2,J+1,J+1+T),Q[J++]=217,Q[J++]=T):T<65536?(M<3&&Q.copyWithin(J+3,J+2,J+2+T),Q[J++]=218,Q[J++]=T>>8,Q[J++]=T&255):(M<5&&Q.copyWithin(J+5,J+3,J+3+T),Q[J++]=219,Ft.setUint32(J,T),J+=4),J+=T}else if(I==="number")if(w>>>0===w)w<32||w<128&&this.useRecords===!1||w<64&&!this.randomAccessStructure?Q[J++]=w:w<256?(Q[J++]=204,Q[J++]=w):w<65536?(Q[J++]=205,Q[J++]=w>>8,Q[J++]=w&255):(Q[J++]=206,Ft.setUint32(J,w),J+=4);else if(w>>0===w)w>=-32?Q[J++]=256+w:w>=-128?(Q[J++]=208,Q[J++]=w+256):w>=-32768?(Q[J++]=209,Ft.setInt16(J,w),J+=2):(Q[J++]=210,Ft.setInt32(J,w),J+=4);else{let k;if((k=this.useFloat32)>0&&w<4294967296&&w>=-2147483648){Q[J++]=202,Ft.setFloat32(J,w);let M;if(k<4||(M=w*of[(Q[J]&127)<<1|Q[J+1]>>7])>>0===M){J+=4;return}else J--}Q[J++]=203,Ft.setFloat64(J,w),J+=8}else if(I==="object"||I==="function")if(!w)Q[J++]=192;else{if(s){let M=s.get(w);if(M){if(!M.id){let K=s.idsToInsert||(s.idsToInsert=[]);M.id=K.push(M)}Q[J++]=214,Q[J++]=112,Ft.setUint32(J,M.id),J+=4;return}else s.set(w,{offset:J-t})}let k=w.constructor;if(k===Object)B(w,!0);else if(k===Array)A(w);else if(k===Map)if(this.mapAsEmptyObject)Q[J++]=128;else{T=w.size,T<16?Q[J++]=128|T:T<65536?(Q[J++]=222,Q[J++]=T>>8,Q[J++]=T&255):(Q[J++]=223,Ft.setUint32(J,T),J+=4);for(let[M,K]of w)P(M),P(K)}else{for(let M=0,K=Kg.length;M<K;M++){let L=Rx[M];if(w instanceof L){let b=Kg[M];if(b.write){b.type&&(Q[J++]=212,Q[J++]=b.type,Q[J++]=0);let Ce=b.write.call(this,w);Ce===w?Array.isArray(w)?A(w):B(w):P(Ce);return}let R=Q,X=Ft,fe=J;Q=null;let he;try{he=b.pack.call(this,w,Ce=>(Q=R,R=null,J+=Ce,J>Vn&&G(J),{target:Q,targetView:Ft,position:J-Ce}),P)}finally{R&&(Q=R,Ft=X,J=fe,Vn=Q.length-10)}he&&(he.length+J>Vn&&G(he.length+J),J=Lae(he,Q,J,b.type));return}}if(Array.isArray(w))A(w);else{if(w.toJSON){let M=w.toJSON();if(M!==w)return P(M)}if(I==="function")return P(this.writeFunction&&this.writeFunction(w));B(w,!w.hasOwnProperty)}}}else if(I==="boolean")Q[J++]=w?195:194;else if(I==="bigint"){if(w<BigInt(1)<<BigInt(63)&&w>=-(BigInt(1)<<BigInt(63)))Q[J++]=211,Ft.setBigInt64(J,w);else if(w<BigInt(1)<<BigInt(64)&&w>0)Q[J++]=207,Ft.setBigUint64(J,w);else if(this.largeBigIntToFloat)Q[J++]=203,Ft.setFloat64(J,Number(w));else throw new RangeError(w+" was too large to fit in MessagePack 64-bit integer format, set largeBigIntToFloat to convert to float-64");J+=8}else if(I==="undefined")this.encodeUndefinedAsNil?Q[J++]=192:(Q[J++]=212,Q[J++]=0,Q[J++]=0);else throw new Error("Unknown type: "+I)},q=this.variableMapSize||this.coercibleKeyAsNumber?w=>{let I=Object.keys(w),T=I.length;T<16?Q[J++]=128|T:T<65536?(Q[J++]=222,Q[J++]=T>>8,Q[J++]=T&255):(Q[J++]=223,Ft.setUint32(J,T),J+=4);let k;if(this.coercibleKeyAsNumber)for(let M=0;M<T;M++){k=I[M];let K=Number(k);P(isNaN(K)?k:K),P(w[k])}else for(let M=0;M<T;M++)P(k=I[M]),P(w[k])}:(w,I)=>{Q[J++]=222;let T=J-t;J+=2;let k=0;for(let M in w)(I||w.hasOwnProperty(M))&&(P(M),P(w[M]),k++);Q[T+++t]=k>>8,Q[T+t]=k&255},F=this.useRecords===!1?q:e.progressiveRecords&&!p?(w,I)=>{let T,k=i.transitions||(i.transitions=Object.create(null)),M=J++-t,K;for(let L in w)if(I||w.hasOwnProperty(L)){if(T=k[L],T)k=T;else{let b=Object.keys(w),R=k;k=i.transitions;let X=0;for(let fe=0,he=b.length;fe<he;fe++){let Ce=b[fe];T=k[Ce],T||(T=k[Ce]=Object.create(null),X++),k=T}M+t+1==J?(J--,H(k,b,X)):N(k,b,M,X),K=!0,k=R[L]}P(w[L])}if(!K){let L=k[Do];L?Q[M+t]=L:N(k,Object.keys(w),M,0)}}:(w,I)=>{let T,k=i.transitions||(i.transitions=Object.create(null)),M=0;for(let L in w)(I||w.hasOwnProperty(L))&&(T=k[L],T||(T=k[L]=Object.create(null),M++),k=T);let K=k[Do];K?K>=96&&p?(Q[J++]=((K-=96)&31)+96,Q[J++]=K>>5):Q[J++]=K:H(k,k.__keys__||Object.keys(w),M);for(let L in w)(I||w.hasOwnProperty(L))&&P(w[L])},z=typeof this.useRecords=="function"&&this.useRecords,B=z?(w,I)=>{z(w)?F(w,I):q(w,I)}:F,G=w=>{let I;if(w>16777216){if(w-t>j3)throw new Error("Packed buffer would be larger than maximum buffer size");I=Math.min(j3,Math.round(Math.max((w-t)*(w>67108864?1.25:2),4194304)/4096)*4096)}else I=(Math.max(w-t<<2,Q.length-1)>>12)+1<<12;let T=new kg(I);return Ft=T.dataView||(T.dataView=new DataView(T.buffer,0,I)),w=Math.min(w,Q.length),Q.copy?Q.copy(T,0,t,w):T.set(Q.slice(t,w)),J-=t,t=0,Vn=T.length-10,Q=T},H=(w,I,T)=>{let k=i.nextId;k||(k=64),k<m&&this.shouldShareStructure&&!this.shouldShareStructure(I)?(k=i.nextOwnId,k<y||(k=m),i.nextOwnId=k+1):(k>=y&&(k=m),i.nextId=k+1);let M=I.highByte=k>=96&&p?k-96>>5:-1;w[Do]=k,w.__keys__=I,i[k-64]=I,k<m?(I.isShared=!0,i.sharedLength=k-63,n=!0,M>=0?(Q[J++]=(k&31)+96,Q[J++]=M):Q[J++]=k):(M>=0?(Q[J++]=213,Q[J++]=114,Q[J++]=(k&31)+96,Q[J++]=M):(Q[J++]=212,Q[J++]=114,Q[J++]=k),T&&(O+=x*T),_.length>=h&&(_.shift()[Do]=0),_.push(w),P(I))},N=(w,I,T,k)=>{let M=Q,K=J,L=Vn,b=t;Q=jh,J=0,t=0,Q||(jh=Q=new kg(8192)),Vn=Q.length-10,H(w,I,k),jh=Q;let R=J;if(Q=M,J=K,Vn=L,t=b,R>1){let X=J+R-1;X>Vn&&G(X);let fe=T+t;Q.copyWithin(fe+R,fe+1,J),Q.set(jh.slice(0,R),fe),J=X}else Q[T+t]=jh[0]},v=(w,I)=>{let T=tN(w,Q,J,i,G,(k,M,K)=>{if(K)return n=!0;J=M;let L=Q;return P(k),L!==Q?{position:J,targetView:Ft,target:Q}:J},this);if(T===0)return B(w,!0);J=T}}useBuffer(e){Q=e,Ft=new DataView(Q.buffer,Q.byteOffset,Q.byteLength),J=0}clearSharedData(){this.structures&&(this.structures=[]),this.typedStructs&&(this.typedStructs=[])}};Rx=[Date,Set,Error,RegExp,ArrayBuffer,Object.getPrototypeOf(Uint8Array.prototype).constructor,Dg];Kg=[{pack(r,e,t){let n=r.getTime()/1e3;if((this.useTimestamp32||r.getMilliseconds()===0)&&n>=0&&n<4294967296){let{target:i,targetView:s,position:o}=e(6);i[o++]=214,i[o++]=255,s.setUint32(o,n)}else if(n>0&&n<4294967296){let{target:i,targetView:s,position:o}=e(10);i[o++]=215,i[o++]=255,s.setUint32(o,r.getMilliseconds()*4e6+(n/1e3/4294967296>>0)),s.setUint32(o+4,n)}else if(isNaN(n)){if(this.onInvalidDate)return e(0),t(this.onInvalidDate());let{target:i,targetView:s,position:o}=e(3);i[o++]=212,i[o++]=255,i[o++]=255}else{let{target:i,targetView:s,position:o}=e(15);i[o++]=199,i[o++]=12,i[o++]=255,s.setUint32(o,r.getMilliseconds()*1e6),s.setBigInt64(o+4,BigInt(Math.floor(n)))}}},{pack(r,e,t){if(this.setAsEmptyObject)return e(0),t({});let n=Array.from(r),{target:i,position:s}=e(this.moreTypes?3:0);this.moreTypes&&(i[s++]=212,i[s++]=115,i[s++]=0),t(n)}},{pack(r,e,t){let{target:n,position:i}=e(this.moreTypes?3:0);this.moreTypes&&(n[i++]=212,n[i++]=101,n[i++]=0),t([r.name,r.message])}},{pack(r,e,t){let{target:n,position:i}=e(this.moreTypes?3:0);this.moreTypes&&(n[i++]=212,n[i++]=120,n[i++]=0),t([r.source,r.flags])}},{pack(r,e){this.moreTypes?K3(r,16,e):q3(Bg?Buffer.from(r):new Uint8Array(r),e)}},{pack(r,e){let t=r.constructor;t!==eN&&this.moreTypes?K3(r,J3.indexOf(t.name),e):q3(r,e)}},{pack(r,e){let{target:t,position:n}=e(1);t[n]=193}}];function K3(r,e,t,n){let i=r.byteLength;if(i+1<256){var{target:s,position:o}=t(4+i);s[o++]=199,s[o++]=i+1}else if(i+1<65536){var{target:s,position:o}=t(5+i);s[o++]=200,s[o++]=i+1>>8,s[o++]=i+1&255}else{var{target:s,position:o,targetView:a}=t(7+i);s[o++]=201,a.setUint32(o,i+1),o+=4}s[o++]=116,s[o++]=e,s.set(new Uint8Array(r.buffer,r.byteOffset,r.byteLength),o)}function q3(r,e){let t=r.byteLength;var n,i;if(t<256){var{target:n,position:i}=e(t+2);n[i++]=196,n[i++]=t}else if(t<65536){var{target:n,position:i}=e(t+3);n[i++]=197,n[i++]=t>>8,n[i++]=t&255}else{var{target:n,position:i,targetView:s}=e(t+5);n[i++]=198,s.setUint32(i,t),i+=4}n.set(r,i)}function Lae(r,e,t,n){let i=r.length;switch(i){case 1:e[t++]=212;break;case 2:e[t++]=213;break;case 4:e[t++]=214;break;case 8:e[t++]=215;break;case 16:e[t++]=216;break;default:i<256?(e[t++]=199,e[t++]=i):i<65536?(e[t++]=200,e[t++]=i>>8,e[t++]=i&255):(e[t++]=201,e[t++]=i>>24,e[t++]=i>>16&255,e[t++]=i>>8&255,e[t++]=i&255)}return e[t++]=n,e.set(r,t),t+=i,t}function Dae(r,e){let t,n=e.length*6,i=r.length-n;for(;t=e.pop();){let s=t.offset,o=t.id;r.copyWithin(s+n,s,i),n-=6;let a=s+n;r[a++]=214,r[a++]=105,r[a++]=o>>24,r[a++]=o>>16&255,r[a++]=o>>8&255,r[a++]=o&255,i=s}return r}function F3(r,e,t){if(dr.length>0){Ft.setUint32(dr.position+r,J+t-dr.position-r),dr.stringsPosition=J-r;let n=dr;dr=null,e(n[0]),e(n[1])}}function Nae(r){if(r.Class){if(!r.pack&&!r.write)throw new Error("Extension has no pack or write function");if(r.pack&&!r.type)throw new Error("Extension has no type (numeric code to identify the extension)");Rx.unshift(r.Class),Kg.unshift(r)}Oae(r)}function rN(r,e){return r.isCompatible=t=>{let n=!t||(e.lastNamedStructuresLength||0)===t.length;return n||e._mergeStructures(t),n},r}function jae(r,e){tN=r,rN=e}var nN=new Ra({useRecords:!1}),Kae=nN.pack,qae=nN.pack,Fae=Ra,{NEVER:Vae,ALWAYS:Bae,DECIMAL_ROUND:Uae,DECIMAL_FIT:Gae}=Z3,$ae=512,Wae=1024,Cx=3,sf=0,Kh=2,Rg=1,Lx=16,iN=["num","object","string","ascii"];iN[Lx]="date";var zae=[!1,!0,!0,!1,!1,!0,!0,!1],sN;try{new Function(""),sN=!0}catch{}var au,Hae=typeof Buffer<"u",Lg,Zs;try{Lg=new TextEncoder}catch{}var Yae=Hae?function(r,e,t){return r.utf8Write(e,t,4294967295)}:Lg&&Lg.encodeInto?function(r,e,t){return Lg.encodeInto(e,r.subarray(t)).written}:!1;jae(oN,ele);function oN(r,e,t,n,i,s,o){let a=o.typedStructs||(o.typedStructs=[]),u=e.dataView,c=(a.lastStringStart||100)+t,d=e.length-10,h=t;if(t>d){let F=h;e=i(t),u=e.dataView,t-=F,c-=F,h=0,d=e.length-10}let p,m=c,y=a.transitions||(a.transitions=Object.create(null)),_=a.nextId||a.length,O=_<15?1:_<240?2:_<61440?3:_<15728640?4:0;if(O===0)return 0;t+=O;let x=[],A,P=0;for(let F in r){let z=r[F],B=y[F];if(B||(y[F]=B={key:F,parent:y,enumerationOffset:0,ascii0:null,ascii8:null,num8:null,string16:null,object16:null,num32:null,float64:null,date64:null}),t>d){let G=h;e=i(t),u=e.dataView,t-=G,c-=G,m-=G,h=0,d=e.length-10}switch(typeof z){case"number":let G=z;if(G>>0===G&&G<536870912&&G>-520093696){G<246&&G>=0&&(B.num8||G<32&&!B.num32)?(y=B.num8||ti(B,sf,1),e[t++]=G):(y=B.num32||ti(B,sf,4),u.setUint32(t,G,!0),t+=4);break}else if(G<4294967296&&G>=-2147483648&&(u.setFloat32(t,G,!0),zae[e[t+3]>>>5])){let w;if((w=G*of[(e[t+3]&127)<<1|e[t+2]>>7])>>0===w){y=B.num32||ti(B,sf,4),t+=4;break}}y=B.num64||ti(B,sf,8),u.setFloat64(t,G,!0),t+=8;break;case"string":let H=z.length;if(p=m-c,(H<<2)+m>d){let w=h;e=i((H<<2)+m),u=e.dataView,t-=w,c-=w,m-=w,h=0,d=e.length-10}if(H>65280+p>>2){x.push(F,z,t-h);break}let N,v=m;if(H<64){let w,I,T;for(w=0;w<H;w++)I=z.charCodeAt(w),I<128?e[m++]=I:I<2048?(N=!0,e[m++]=I>>6|192,e[m++]=I&63|128):(I&64512)===55296&&((T=z.charCodeAt(w+1))&64512)===56320?(N=!0,I=65536+((I&1023)<<10)+(T&1023),w++,e[m++]=I>>18|240,e[m++]=I>>12&63|128,e[m++]=I>>6&63|128,e[m++]=I&63|128):(N=!0,e[m++]=I>>12|224,e[m++]=I>>6&63|128,e[m++]=I&63|128)}else m+=Yae(e,z,m),N=m-v>H;if(p<160||p<246&&(B.ascii8||B.string8)){if(N)(y=B.string8)||(a.length>10&&(y=B.ascii8)?(y.__type=Kh,B.ascii8=null,B.string8=y,s(null,0,!0)):y=ti(B,Kh,1));else if(p===0&&!A){A=!0,y=B.ascii0||ti(B,Cx,0);break}else!(y=B.ascii8)&&!(a.length>10&&(y=B.string8))&&(y=ti(B,Cx,1));e[t++]=p}else y=B.string16||ti(B,Kh,2),u.setUint16(t,p,!0),t+=2;break;case"object":if(z){z.constructor===Date?(y=B.date64||ti(B,Lx,8),u.setFloat64(t,z.getTime(),!0),t+=8):x.push(F,z,P);break}else B=V3(B,t,u,-10),B?(y=B,t=au):x.push(F,z,P);break;case"boolean":y=B.num8||B.ascii8||ti(B,sf,1),e[t++]=z?249:248;break;case"undefined":B=V3(B,t,u,-9),B?(y=B,t=au):x.push(F,z,P);break}P++}for(let F=0,z=x.length;F<z;){let B=x[F++],G=x[F++],H=x[F++],N=y[B];N||(y[B]=N={key:B,parent:y,enumerationOffset:H-P,ascii0:null,ascii8:null,num8:null,string16:null,object16:null,num32:null,float64:null});let v;if(G){let w;p=m-c,p<65280?(y=N.object16,y?w=2:(y=N.object32)?w=4:(y=ti(N,Rg,2),w=2)):(y=N.object32||ti(N,Rg,4),w=4),v=s(G,m),typeof v=="object"?(m=v.position,u=v.targetView,e=v.target,c-=h,t-=h,h=0):m=v,w===2?(u.setUint16(t,p,!0),t+=2):(u.setUint32(t,p,!0),t+=4)}else y=N.object16||ti(N,Rg,2),u.setInt16(t,G===null?-10:-9,!0),t+=2;P++}let q=y[Do];if(q==null){q=o.typedStructs.length;let F=[],z=y,B,G;for(;(G=z.__type)!==void 0;){let H=z.__size;z=z.__parent,B=z.key;let N=[G,H,B];z.enumerationOffset&&N.push(z.enumerationOffset),F.push(N),z=z.parent}F.reverse(),y[Do]=q,o.typedStructs[q]=F,s(null,0,!0)}switch(O){case 1:if(q>=16)return 0;e[h]=q+32;break;case 2:if(q>=256)return 0;e[h]=56,e[h+1]=q;break;case 3:if(q>=65536)return 0;e[h]=57,u.setUint16(h+1,q,!0);break;case 4:if(q>=16777216)return 0;u.setUint32(h,(q<<8)+58,!0);break}if(t<c){if(c===m)return t;e.copyWithin(t,c,m),m+=t-c,a.lastStringStart=t-h}else if(t>c)return c===m?t:(a.lastStringStart=t-h,oN(r,e,h,n,i,s,o));return m}function V3(r,e,t,n){let i;if(i=r.ascii8||r.num8)return t.setInt8(e,n,!0),au=e+1,i;if(i=r.string16||r.object16)return t.setInt16(e,n,!0),au=e+2,i;if(i=r.num32)return t.setUint32(e,3758096640+n,!0),au=e+4,i;if(i=r.num64)return t.setFloat64(e,NaN,!0),t.setInt8(e,n),au=e+8,i;au=e}function ti(r,e,t){let n=iN[e]+(t<<3),i=r[n]||(r[n]=Object.create(null));return i.__type=e,i.__size=t,i.__parent=r,i}function Jae(r){if(!(r instanceof Map))return r;let e=r.get("typed")||[];Object.isFrozen(e)&&(e=e.map(i=>i.slice(0)));let t=r.get("named"),n=Object.create(null);for(let i=0,s=e.length;i<s;i++){let o=e[i],a=n;for(let[u,c,d]of o){let h=a[d];h||(a[d]=h={key:d,parent:a,enumerationOffset:0,ascii0:null,ascii8:null,num8:null,string16:null,object16:null,num32:null,float64:null,date64:null}),a=ti(h,u,c)}a[Do]=i}return e.transitions=n,this.typedStructs=e,this.lastTypedStructuresLength=e.length,t}var Tx=Symbol.for("source");function Qae(r,e,t,n){let i=r[e++]-32;if(i>=24)switch(i){case 24:i=r[e++];break;case 25:i=r[e++]+(r[e++]<<8);break;case 26:i=r[e++]+(r[e++]<<8)+(r[e++]<<16);break;case 27:i=r[e++]+(r[e++]<<8)+(r[e++]<<16)+(r[e++]<<24);break}let s=n.typedStructs&&n.typedStructs[i];if(!s){if(r=Uint8Array.prototype.slice.call(r,e,t),t-=e,e=0,n._mergeStructures(n.getStructures()),!n.typedStructs)throw new Error("Could not find any shared typed structures");if(n.lastTypedStructuresLength=n.typedStructs.length,s=n.typedStructs[i],!s)throw new Error("Could not find typed structure "+i)}var o=s.construct;if(!o){o=s.construct=function(){};var a=o.prototype;let c=[],d=0,h;for(let p=0,m=s.length;p<m;p++){let y=s[p],[_,O,x,A]=y;x==="__proto__"&&(x="__proto_");let P={key:x,offset:d};A?c.splice(p+A,0,P):c.push(P);let q;switch(O){case 0:q=()=>0;break;case 1:q=(z,B)=>{let G=z.bytes[B+P.offset];return G>=246?nf(G):G};break;case 2:q=(z,B)=>{let G=z.bytes,N=(G.dataView||(G.dataView=new DataView(G.buffer,G.byteOffset,G.byteLength))).getUint16(B+P.offset,!0);return N>=65280?nf(N&255):N};break;case 4:q=(z,B)=>{let G=z.bytes,N=(G.dataView||(G.dataView=new DataView(G.buffer,G.byteOffset,G.byteLength))).getUint32(B+P.offset,!0);return N>=4294967040?nf(N&255):N};break}P.getRef=q,d+=O;let F;switch(_){case Cx:h&&!h.next&&(h.next=P),h=P,P.multiGetCount=0,F=function(z){let B=z.bytes,G=z.position,H=d+G,N=q(z,G);if(typeof N!="number")return N;let v,w=P.next;for(;w&&(v=w.getRef(z,G),typeof v!="number");)v=null,w=w.next;return v==null&&(v=z.bytesEnd-H),z.srcString?z.srcString.slice(N,v):Sae(B,N+H,v-N)};break;case Kh:case Rg:h&&!h.next&&(h.next=P),h=P,F=function(z){let B=z.position,G=d+B,H=q(z,B);if(typeof H!="number")return H;let N=z.bytes,v,w=P.next;for(;w&&(v=w.getRef(z,B),typeof v!="number");)v=null,w=w.next;if(v==null&&(v=z.bytesEnd-G),_===Kh)return N.toString("utf8",H+G,v+G);Zs=z;try{return n.unpack(N,{start:H+G,end:v+G})}finally{Zs=null}};break;case sf:switch(O){case 4:F=function(z){let B=z.bytes,G=B.dataView||(B.dataView=new DataView(B.buffer,B.byteOffset,B.byteLength)),H=z.position+P.offset,N=G.getInt32(H,!0);if(N<536870912){if(N>-520093696)return N;if(N>-536870912)return nf(N&255)}let v=G.getFloat32(H,!0),w=of[(B[H+3]&127)<<1|B[H+2]>>7];return(w*v+(v>0?.5:-.5)>>0)/w};break;case 8:F=function(z){let B=z.bytes,H=(B.dataView||(B.dataView=new DataView(B.buffer,B.byteOffset,B.byteLength))).getFloat64(z.position+P.offset,!0);if(isNaN(H)){let N=B[z.position+P.offset];if(N>=246)return nf(N)}return H};break;case 1:F=function(z){let G=z.bytes[z.position+P.offset];return G<246?G:nf(G)};break}break;case Lx:F=function(z){let B=z.bytes,G=B.dataView||(B.dataView=new DataView(B.buffer,B.byteOffset,B.byteLength));return new Date(G.getFloat64(z.position+P.offset,!0))};break}P.get=F}if(sN){let p=[],m=[],y=0,_;for(let x of c){if(n.alwaysLazyProperty&&n.alwaysLazyProperty(x.key)){_=!0;continue}Object.defineProperty(a,x.key,{get:Zae(x.get),enumerable:!0});let A="v"+y++;m.push(A),p.push("["+JSON.stringify(x.key)+"]:"+A+"(s)")}_&&p.push("__proto__:this");let O=new Function(...m,"return function(s){return{"+p.join(",")+"}}").apply(null,c.map(x=>x.get));Object.defineProperty(a,"toJSON",{value(x){return O.call(this,this[Tx])}})}else Object.defineProperty(a,"toJSON",{value(p){let m={};for(let y=0,_=c.length;y<_;y++){let O=c[y].key;m[O]=this[O]}return m}})}var u=new o;return u[Tx]={bytes:r,position:e,srcString:"",bytesEnd:t},u}function nf(r){switch(r){case 246:return null;case 247:return;case 248:return!1;case 249:return!0}throw new Error("Unknown constant")}function Zae(r){return function(){return r(this[Tx])}}function Xae(){Zs&&(Zs.bytes=Uint8Array.prototype.slice.call(Zs.bytes,Zs.position,Zs.bytesEnd),Zs.position=0,Zs.bytesEnd=Zs.bytes.length)}function ele(r,e){if(e.typedStructs){let n=new Map;n.set("named",r),n.set("typed",e.typedStructs),r=n}let t=e.lastTypedStructuresLength||0;return r.isCompatible=n=>{let i=!0;return n instanceof Map?((n.get("named")||[]).length!==(e.lastNamedStructuresLength||0)&&(i=!1),(n.get("typed")||[]).length!==t&&(i=!1)):(n instanceof Array||Array.isArray(n))&&n.length!==(e.lastNamedStructuresLength||0)&&(i=!1),i||e._mergeStructures(n),i},e.lastTypedStructuresLength=e.typedStructs&&e.typedStructs.length,r}kae(Qae,Jae,Xae);var qg=class extends B3.Transform{constructor(e){e||(e={}),e.writableObjectMode=!0,super(e),e.sequential=!0,this.packr=e.packr||new Ra(e)}_transform(e,t,n){this.push(this.packr.pack(e)),n()}},Fg=class extends B3.Transform{constructor(e){e||(e={}),e.objectMode=!0,super(e),e.structures=[],this.unpackr=e.unpackr||new Pa(e)}_transform(e,t,n){this.incompleteBuffer&&(e=Buffer.concat([this.incompleteBuffer,e]),this.incompleteBuffer=null);let i;try{i=this.unpackr.unpackMultiple(e)}catch(s){if(s.incomplete)this.incompleteBuffer=e.slice(s.lastPosition),i=s.values;else throw s}finally{for(let s of i||[])s===null&&(s=this.getNullValue()),this.push(s)}n&&n()}getNullValue(){return Symbol.for(null)}};function tle(r,e={}){if(!r||typeof r!="object")throw new Error("first argument must be an Iterable, Async Iterable, or a Promise for an Async Iterable");if(typeof r[Symbol.iterator]=="function")return rle(r,e);if(typeof r.then=="function"||typeof r[Symbol.asyncIterator]=="function")return nle(r,e);throw new Error("first argument must be an Iterable, Async Iterable, Iterator, Async Iterator, or a Promise")}function*rle(r,e){let t=new Ra(e);for(let n of r)yield t.pack(n)}async function*nle(r,e){let t=new Ra(e);for await(let n of r)yield t.pack(n)}function ile(r,e={}){if(!r||typeof r!="object")throw new Error("first argument must be an Iterable, Async Iterable, Iterator, Async Iterator, or a promise");let t=new Pa(e),n,i=s=>{let o;n&&(s=Buffer.concat([n,s]),n=void 0);try{o=t.unpackMultiple(s)}catch(a){if(a.incomplete)n=s.slice(a.lastPosition),o=a.values;else throw a}return o};if(typeof r[Symbol.iterator]=="function")return function*(){for(let o of r)yield*i(o)}();if(typeof r[Symbol.asyncIterator]=="function")return async function*(){for await(let o of r)yield*i(o)}()}var sle=ile,ole=tle,ale=!1,lle=!0,ule=process.env.MSGPACKR_NATIVE_ACCELERATION_DISABLED!==void 0&&process.env.MSGPACKR_NATIVE_ACCELERATION_DISABLED.toLowerCase()==="true";if(!ule){let r;try{typeof require=="function"?r=C3():r=vae.createRequire(typeof document>"u"?new(require("url")).URL("file:"+__filename).href:document.currentScript&&document.currentScript.src||new URL("node.cjs",document.baseURI).href)("msgpackr-extract"),r&&bae(r.extractStrings)}catch{}}Lt.ALWAYS=Bae;Lt.C1=Mx;Lt.DECIMAL_FIT=Gae;Lt.DECIMAL_ROUND=Uae;Lt.Decoder=Iae;Lt.DecoderStream=Fg;Lt.Encoder=Fae;Lt.EncoderStream=qg;Lt.FLOAT32_OPTIONS=Z3;Lt.NEVER=Vae;Lt.Packr=Ra;Lt.PackrStream=qg;Lt.Unpackr=Pa;Lt.UnpackrStream=Fg;Lt.addExtension=Nae;Lt.clearSource=jg;Lt.decode=Aae;Lt.decodeIter=sle;Lt.encode=qae;Lt.encodeIter=ole;Lt.mapsAsObjects=lle;Lt.pack=Kae;Lt.roundFloat32=Mae;Lt.unpack=Cae;Lt.unpackMultiple=Tae;Lt.useRecords=ale});var Gg=E(lf=>{"use strict";Object.defineProperty(lf,"__esModule",{value:!0});lf.raw2NextJobData=lf.Scripts=void 0;var cle=aN(),fle=new cle.Packr({useRecords:!1,encodeUndefinedAsNil:!0}),Fh=fle.pack,af=Qc(),Ug=Yi(),Dx=class{constructor(e){this.queue=e;let t=this.queue.keys;this.moveToFinishedKeys=[t.wait,t.active,t.prioritized,t.events,t.stalled,t.limiter,t.delayed,t.paused,t.meta,t.pc,void 0,void 0,void 0]}async isJobInList(e,t){let n=await this.queue.client,i;return(0,Ug.isRedisVersionLowerThan)(this.queue.redisVersion,"6.0.6")?i=await n.isJobInList([e,t]):i=await n.lpos(e,t),Number.isInteger(i)}async addJob(e,t,n,i,s={}){let o=this.queue.keys,a=[o.wait,o.paused,o.meta,o.id,o.delayed,o.prioritized,o.completed,o.events,o.pc],u=t.parent?Object.assign(Object.assign({},t.parent),{fpof:n.fpof,rdof:n.rdof}):null,c=[o[""],typeof i<"u"?i:"",t.name,t.timestamp,t.parentKey||null,s.waitChildrenKey||null,s.parentDependenciesKey||null,u,t.repeatJobKey],d;if(n.repeat){let p=Object.assign({},n.repeat);p.startDate&&(p.startDate=+new Date(p.startDate)),p.endDate&&(p.endDate=+new Date(p.endDate)),d=Fh(Object.assign(Object.assign({},n),{repeat:p}))}else d=Fh(n);a.push(Fh(c),t.data,d);let h=await e.addJob(a);if(h<0)throw this.finishedErrors(h,s.parentKey,"addJob");return h}async pause(e){let t=await this.queue.client,n="wait",i="paused";e||(n="paused",i="wait");let s=[n,i,"meta","prioritized"].map(o=>this.queue.toKey(o));return s.push(this.queue.keys.events),t.pause(s.concat([e?"paused":"resumed"]))}removeRepeatableArgs(e,t){let n=this.queue.keys,i=[n.repeat,n.delayed],s=[e,t,n[""]];return i.concat(s)}async removeRepeatable(e,t){let n=await this.queue.client,i=this.removeRepeatableArgs(e,t);return n.removeRepeatable(i)}async remove(e,t){let n=await this.queue.client,i=[""].map(s=>this.queue.toKey(s));return n.removeJob(i.concat([e,t?1:0]))}async extendLock(e,t,n,i){i=i||await this.queue.client;let s=[this.queue.toKey(e)+":lock",this.queue.keys.stalled,t,n,e];return i.extendLock(s)}async updateData(e,t){let n=await this.queue.client,i=[this.queue.toKey(e.id)],s=JSON.stringify(t),o=await n.updateData(i.concat([s]));if(o<0)throw this.finishedErrors(o,e.id,"updateData")}async updateProgress(e,t){let n=await this.queue.client,i=[this.queue.toKey(e),this.queue.keys.events],s=JSON.stringify(t),o=await n.updateProgress(i.concat([e,s]));if(o<0)throw this.finishedErrors(o,e,"updateProgress")}moveToFinishedArgs(e,t,n,i,s,o,a,u=!0){var c,d,h,p,m;let y=this.queue.keys,_=this.queue.opts,O=s==="completed"?_.removeOnComplete:_.removeOnFail,x=this.queue.toKey(`metrics:${s}`),A=this.moveToFinishedKeys;A[10]=y[s],A[11]=this.queue.toKey((c=e.id)!==null&&c!==void 0?c:""),A[12]=x;let P=this.getKeepJobs(i,O),q=[e.id,a,n,typeof t>"u"?"null":t,s,JSON.stringify({jobId:e.id,val:t}),!u||this.queue.closing?0:1,y[""],Fh({token:o,keepJobs:P,limiter:_.limiter,lockDuration:_.lockDuration,attempts:e.opts.attempts,attemptsMade:e.attemptsMade,maxMetricsSize:!((d=_.metrics)===null||d===void 0)&&d.maxDataPoints?(h=_.metrics)===null||h===void 0?void 0:h.maxDataPoints:"",fpof:!!(!((p=e.opts)===null||p===void 0)&&p.failParentOnFailure),rdof:!!(!((m=e.opts)===null||m===void 0)&&m.removeDependencyOnFailure)})];return A.concat(q)}getKeepJobs(e,t){return typeof e>"u"?t||{count:e?0:-1}:typeof e=="object"?e:typeof e=="number"?{count:e}:{count:e?0:-1}}async moveToFinished(e,t){let i=await(await this.queue.client).moveToFinished(t);if(i<0)throw this.finishedErrors(i,e,"moveToFinished","active");if(typeof i<"u")return Nx(i)}finishedErrors(e,t,n,i){switch(e){case af.ErrorCode.JobNotExist:return new Error(`Missing key for job ${t}. ${n}`);case af.ErrorCode.JobLockNotExist:return new Error(`Missing lock for job ${t}. ${n}`);case af.ErrorCode.JobNotInState:return new Error(`Job ${t} is not in the ${i} state. ${n}`);case af.ErrorCode.JobPendingDependencies:return new Error(`Job ${t} has pending dependencies. ${n}`);case af.ErrorCode.ParentJobNotExist:return new Error(`Missing key for parent job ${t}. ${n}`);case af.ErrorCode.JobLockMismatch:return new Error(`Lock mismatch for job ${t}. Cmd ${n} from ${i}`);default:return new Error(`Unknown code ${e} error for ${t}. ${n}`)}}drainArgs(e){let t=this.queue.keys,n=[t.wait,t.paused,e?t.delayed:"",t.prioritized],i=[t[""]];return n.concat(i)}async drain(e){let t=await this.queue.client,n=this.drainArgs(e);return t.drain(n)}getRangesArgs(e,t,n,i){let s=this.queue.keys,o=e.map(c=>c==="waiting"?"wait":c),a=[s[""]],u=[t,n,i?"1":"0",...o];return a.concat(u)}async getRanges(e,t=0,n=1,i=!1){let s=await this.queue.client,o=this.getRangesArgs(e,t,n,i);return s.getRanges(o)}getCountsArgs(e){let t=this.queue.keys,n=e.map(o=>o==="waiting"?"wait":o),i=[t[""]],s=[...n];return i.concat(s)}async getCounts(e){let t=await this.queue.client,n=this.getCountsArgs(e);return t.getCounts(n)}moveToCompletedArgs(e,t,n,i,s=!1){let o=Date.now();return this.moveToFinishedArgs(e,t,"returnvalue",n,"completed",i,o,s)}moveToFailedArgs(e,t,n,i,s=!1){let o=Date.now();return this.moveToFinishedArgs(e,t,"failedReason",n,"failed",i,o,s)}async isFinished(e,t=!1){let n=await this.queue.client,i=["completed","failed",e].map(s=>this.queue.toKey(s));return n.isFinished(i.concat([e,t?"1":""]))}async getState(e){let t=await this.queue.client,n=["completed","failed","delayed","active","wait","paused","waiting-children","prioritized"].map(i=>this.queue.toKey(i));return(0,Ug.isRedisVersionLowerThan)(this.queue.redisVersion,"6.0.6")?t.getState(n.concat([e])):t.getStateV2(n.concat([e]))}async changeDelay(e,t){let n=await this.queue.client,i=this.changeDelayArgs(e,t),s=await n.changeDelay(i);if(s<0)throw this.finishedErrors(s,e,"changeDelay","delayed")}changeDelayArgs(e,t){let n=Date.now()+t;n>0&&(n=n*4096+(+e&4095));let i=["delayed",e].map(s=>this.queue.toKey(s));return i.push.apply(i,[this.queue.keys.events]),i.concat([t,JSON.stringify(n),e])}async changePriority(e,t=0,n=!1){let i=await this.queue.client,s=this.changePriorityArgs(e,t,n),o=await i.changePriority(s);if(o<0)throw this.finishedErrors(o,e,"changePriority")}changePriorityArgs(e,t=0,n=!1){return[this.queue.keys.wait,this.queue.keys.paused,this.queue.keys.meta,this.queue.keys.prioritized,this.queue.keys.pc].concat([t,this.queue.toKey(e),e,n?1:0])}moveToDelayedArgs(e,t,n,i){t=Math.max(0,t??0),t>0&&(t=t*4096+(+e&4095));let s=["wait","active","prioritized","delayed",e].map(o=>this.queue.toKey(o));return s.push.apply(s,[this.queue.keys.events,this.queue.keys.paused,this.queue.keys.meta]),s.concat([this.queue.keys[""],Date.now(),JSON.stringify(t),e,n,i])}saveStacktraceArgs(e,t,n){return[this.queue.toKey(e)].concat([t,n])}moveToWaitingChildrenArgs(e,t,n){let i=Date.now(),s=(0,Ug.getParentKey)(n.child);return[`${e}:lock`,"active","waiting-children",e].map(a=>this.queue.toKey(a)).concat([t,s??"",JSON.stringify(i),e])}async moveToDelayed(e,t,n,i="0"){let s=await this.queue.client,o=this.moveToDelayedArgs(e,t,i,n),a=await s.moveToDelayed(o);if(a<0)throw this.finishedErrors(a,e,"moveToDelayed","active")}async moveToWaitingChildren(e,t,n={}){let i=await this.queue.client,s=this.moveToWaitingChildrenArgs(e,t,n),o=await i.moveToWaitingChildren(s);switch(o){case 0:return!0;case 1:return!1;default:throw this.finishedErrors(o,e,"moveToWaitingChildren","active")}}async cleanJobsInSet(e,t,n=0){return(await this.queue.client).cleanJobsInSet([this.queue.toKey(e),this.queue.toKey("events"),this.queue.toKey(""),t,n,e])}retryJobArgs(e,t,n){let i=["active","wait","paused",e,"meta"].map(o=>this.queue.toKey(o));i.push(this.queue.keys.events,this.queue.keys.delayed,this.queue.keys.prioritized,this.queue.keys.pc);let s=(t?"R":"L")+"PUSH";return i.concat([this.queue.toKey(""),Date.now(),s,e,n])}moveJobsToWaitArgs(e,t,n){let i=[this.queue.toKey(""),this.queue.keys.events,this.queue.toKey(e),this.queue.toKey("wait"),this.queue.toKey("paused"),this.queue.toKey("meta")],s=[t,n,e];return i.concat(s)}async retryJobs(e="failed",t=1e3,n=new Date().getTime()){let i=await this.queue.client,s=this.moveJobsToWaitArgs(e,t,n);return i.moveJobsToWait(s)}async promoteJobs(e=1e3){let t=await this.queue.client,n=this.moveJobsToWaitArgs("delayed",e,Number.MAX_VALUE);return t.moveJobsToWait(n)}async reprocessJob(e,t){let n=await this.queue.client,i=[this.queue.toKey(e.id),this.queue.keys.events,this.queue.toKey(t),this.queue.keys.wait,this.queue.keys.meta,this.queue.keys.paused],s=[e.id,(e.opts.lifo?"R":"L")+"PUSH",t==="failed"?"failedReason":"returnvalue",t],o=await n.reprocessJob(i.concat(s));switch(o){case 1:return;default:throw this.finishedErrors(o,e.id,"reprocessJob",t)}}async moveToActive(e,t){let n=await this.queue.client,i=this.queue.opts,s=this.queue.keys,o=[s.wait,s.active,s.prioritized,s.events,s.stalled,s.limiter,s.delayed,s.paused,s.meta,s.pc],a=[s[""],Date.now(),t||"",Fh({token:e,lockDuration:i.lockDuration,limiter:i.limiter})],u=await n.moveToActive(o.concat(a));return Nx(u)}async promote(e){let t=await this.queue.client,n=[this.queue.keys.delayed,this.queue.keys.wait,this.queue.keys.paused,this.queue.keys.meta,this.queue.keys.prioritized,this.queue.keys.pc,this.queue.keys.events],i=[this.queue.toKey(""),e];return t.promote(n.concat(i))}async moveStalledJobsToWait(){let e=await this.queue.client,t=this.queue.opts,n=[this.queue.keys.stalled,this.queue.keys.wait,this.queue.keys.active,this.queue.keys.failed,this.queue.keys["stalled-check"],this.queue.keys.meta,this.queue.keys.paused,this.queue.keys.events],i=[t.maxStalledCount,this.queue.toKey(""),Date.now(),t.stalledInterval];return e.moveStalledJobsToWait(n.concat(i))}async moveJobFromActiveToWait(e,t){let n=await this.queue.client,i=`${this.queue.toKey(e)}:lock`,s=[this.queue.keys.active,this.queue.keys.wait,this.queue.keys.stalled,i,this.queue.keys.paused,this.queue.keys.meta,this.queue.keys.limiter,this.queue.keys.prioritized,this.queue.keys.events],o=[e,t,this.queue.toKey(e)],a=await n.moveJobFromActiveToWait(s.concat(o));return a<0?0:a}async obliterate(e){let t=await this.queue.client,n=[this.queue.keys.meta,this.queue.toKey("")],i=[e.count,e.force?"force":null],s=await t.obliterate(n.concat(i));if(s<0)switch(s){case-1:throw new Error("Cannot obliterate non-paused queue");case-2:throw new Error("Cannot obliterate queue with active jobs")}return s}};lf.Scripts=Dx;function Nx(r){if(r){let e=[null,r[1],r[2],r[3]];return r[0]&&(e[0]=(0,Ug.array2obj)(r[0])),e}return[]}lf.raw2NextJobData=Nx});var Kx=E($g=>{"use strict";Object.defineProperty($g,"__esModule",{value:!0});$g.UnrecoverableError=void 0;var jx=class extends Error{constructor(e){super(e),this.name=this.constructor.name,Object.setPrototypeOf(this,new.target.prototype)}};$g.UnrecoverableError=jx});var cu=E(La=>{"use strict";Object.defineProperty(La,"__esModule",{value:!0});La.Job=La.PRIORITY_LIMIT=void 0;var lN=(Js(),vi(Ys)),dle=_g(),hle=require("util"),Zi=Yi(),uN=R_(),ple=Gg(),mle=Kx(),gle=(0,hle.debuglog)("bull"),qx={fpof:"failParentOnFailure",kl:"keepLogs",rdof:"removeDependencyOnFailure"},cN=(0,dle.invert)(qx);La.PRIORITY_LIMIT=2**21;var Fx=class r{constructor(e,t,n,i={},s){this.queue=e,this.name=t,this.data=n,this.opts=i,this.id=s,this.progress=0,this.returnvalue=null,this.stacktrace=null,this.attemptsMade=0;let o=this.opts,{repeatJobKey:a}=o,u=lN.__rest(o,["repeatJobKey"]);this.opts=Object.assign({attempts:0,delay:0},u),this.delay=this.opts.delay,this.repeatJobKey=a,this.timestamp=i.timestamp?i.timestamp:Date.now(),this.opts.backoff=uN.Backoffs.normalize(i.backoff),this.parentKey=(0,Zi.getParentKey)(i.parent),this.parent=i.parent?{id:i.parent.id,queueKey:i.parent.queue}:void 0,this.toKey=e.toKey.bind(e),this.scripts=new ple.Scripts(e),this.queueQualifiedName=e.qualifiedName}static async create(e,t,n,i){let s=await e.client,o=new this(e,t,n,i,i&&i.jobId);return o.id=await o.addJob(s,{parentKey:o.parentKey,parentDependenciesKey:o.parentKey?`${o.parentKey}:dependencies`:""}),o}static async createBulk(e,t){let n=await e.client,i=t.map(a=>{var u;return new this(e,a.name,a.data,a.opts,(u=a.opts)===null||u===void 0?void 0:u.jobId)}),s=n.multi();for(let a of i)a.addJob(s,{parentKey:a.parentKey,parentDependenciesKey:a.parentKey?`${a.parentKey}:dependencies`:""});let o=await s.exec();for(let a=0;a<o.length;++a){let[u,c]=o[a];if(u)throw u;i[a].id=c}return i}static fromJSON(e,t,n){let i=JSON.parse(t.data||"{}"),s=r.optsFromJSON(t.opts),o=new this(e,t.name,i,s,t.id||n);return o.progress=JSON.parse(t.progress||"0"),o.delay=parseInt(t.delay),o.timestamp=parseInt(t.timestamp),t.finishedOn&&(o.finishedOn=parseInt(t.finishedOn)),t.processedOn&&(o.processedOn=parseInt(t.processedOn)),t.rjk&&(o.repeatJobKey=t.rjk),o.failedReason=t.failedReason,o.attemptsMade=parseInt(t.attemptsMade||"0"),o.stacktrace=yle(t.stacktrace),typeof t.returnvalue=="string"&&(o.returnvalue=fN(t.returnvalue)),t.parentKey&&(o.parentKey=t.parentKey),t.parent&&(o.parent=JSON.parse(t.parent)),o}static optsFromJSON(e){let t=JSON.parse(e||"{}"),n=Object.entries(t),i={};for(let s of n){let[o,a]=s;qx[o]?i[qx[o]]=a:i[o]=a}return i}static async fromId(e,t){if(t){let i=await(await e.client).hgetall(e.toKey(t));return(0,Zi.isEmpty)(i)?void 0:this.fromJSON(e,i,t)}}static async addJobLog(e,t,n,i){let s=await e.client,o=e.toKey(t)+":logs",a=s.multi();a.rpush(o,n),i&&a.ltrim(o,-i,-1);let u=await a.exec();return i?Math.min(i,u[0][1]):u[0][1]}toJSON(){let e=this,{queue:t,scripts:n}=e;return lN.__rest(e,["queue","scripts"])}asJSON(){return{id:this.id,name:this.name,data:JSON.stringify(typeof this.data>"u"?{}:this.data),opts:this.optsAsJSON(this.opts),parent:this.parent?Object.assign({},this.parent):void 0,parentKey:this.parentKey,progress:this.progress,attemptsMade:this.attemptsMade,finishedOn:this.finishedOn,processedOn:this.processedOn,timestamp:this.timestamp,failedReason:JSON.stringify(this.failedReason),stacktrace:JSON.stringify(this.stacktrace),repeatJobKey:this.repeatJobKey,returnvalue:JSON.stringify(this.returnvalue)}}optsAsJSON(e={}){let t=Object.entries(e),n={};for(let i of t){let[s,o]=i;cN[s]?n[cN[s]]=o:n[s]=o}return n}asJSONSandbox(){return Object.assign(Object.assign({},this.asJSON()),{queueName:this.queueName,prefix:this.prefix})}updateData(e){return this.data=e,this.scripts.updateData(this,e)}async updateProgress(e){this.progress=e,await this.scripts.updateProgress(this.id,e),this.queue.emit("progress",this,e)}async log(e){return r.addJobLog(this.queue,this.id,e,this.opts.keepLogs)}async clearLogs(e){let t=await this.queue.client,n=this.toKey(this.id)+":logs";e?await t.ltrim(n,-e,-1):await t.del(n)}async remove({removeChildren:e=!0}={}){await this.queue.waitUntilReady();let t=this.queue,n=this;if(await this.scripts.remove(n.id,e))t.emit("removed",n);else throw new Error(`Job ${this.id} could not be removed because it is locked by another worker`)}extendLock(e,t){return this.scripts.extendLock(this.id,e,t)}async moveToCompleted(e,t,n=!0){await this.queue.waitUntilReady(),this.returnvalue=e||void 0;let i=(0,Zi.tryCatch)(JSON.stringify,JSON,[e]);if(i===Zi.errorObject)throw Zi.errorObject.value;let s=this.scripts.moveToCompletedArgs(this,i,this.opts.removeOnComplete,t,n),o=await this.scripts.moveToFinished(this.id,s);return this.finishedOn=s[14],o}async moveToFailed(e,t,n=!1){let i=await this.queue.client,s=e?.message,o=this.queue;this.failedReason=s;let a,u=i.multi();this.saveStacktrace(u,e);let c=!1,d;if(this.attemptsMade<this.opts.attempts&&!this.discarded&&!(e instanceof mle.UnrecoverableError||e.name=="UnrecoverableError")){let y=o.opts,_=await uN.Backoffs.calculate(this.opts.backoff,this.attemptsMade,e,this,y.settings&&y.settings.backoffStrategy);if(_===-1)c=!0;else if(_){let O=this.scripts.moveToDelayedArgs(this.id,Date.now()+_,t,_);u.moveToDelayed(O),a="delayed"}else u.retryJob(this.scripts.retryJobArgs(this.id,this.opts.lifo,t)),a="retryJob"}else c=!0;if(c){let y=this.scripts.moveToFailedArgs(this,s,this.opts.removeOnFail,t,n);u.moveToFinished(y),d=y[14],a="failed"}let h=await u.exec(),p=h.find(y=>y[0]);if(p)throw new Error(`Error "moveToFailed" with command ${a}: ${p}`);let m=h[h.length-1][1];if(m<0)throw this.scripts.finishedErrors(m,this.id,a,"active");d&&typeof d=="number"&&(this.finishedOn=d)}isCompleted(){return this.isInZSet("completed")}isFailed(){return this.isInZSet("failed")}isDelayed(){return this.isInZSet("delayed")}isWaitingChildren(){return this.isInZSet("waiting-children")}isActive(){return this.isInList("active")}async isWaiting(){return await this.isInList("wait")||await this.isInList("paused")}get queueName(){return this.queue.name}get prefix(){return this.queue.opts.prefix}getState(){return this.scripts.getState(this.id)}async changeDelay(e){await this.scripts.changeDelay(this.id,e),this.delay=e}async changePriority(e){await this.scripts.changePriority(this.id,e.priority,e.lifo)}async getChildrenValues(){let t=await(await this.queue.client).hgetall(this.toKey(`${this.id}:processed`));if(t)return(0,Zi.parseObjectValues)(t)}async getDependencies(e={}){let n=(await this.queue.client).multi();if(!e.processed&&!e.unprocessed){n.hgetall(this.toKey(`${this.id}:processed`)),n.smembers(this.toKey(`${this.id}:dependencies`));let[[i,s],[o,a]]=await n.exec();return{processed:(0,Zi.parseObjectValues)(s),unprocessed:a}}else{let i={cursor:0,count:20};if(e.processed){let p=Object.assign(Object.assign({},i),e.processed);n.hscan(this.toKey(`${this.id}:processed`),p.cursor,"COUNT",p.count)}if(e.unprocessed){let p=Object.assign(Object.assign({},i),e.unprocessed);n.sscan(this.toKey(`${this.id}:dependencies`),p.cursor,"COUNT",p.count)}let[s,o]=await n.exec(),[a,u=[]]=e.processed?s[1]:[],[c,d=[]]=e.unprocessed?e.processed?o[1]:s[1]:[],h={};for(let p=0;p<u.length;++p)p%2&&(h[u[p-1]]=JSON.parse(u[p]));return Object.assign(Object.assign({},a?{processed:h,nextProcessedCursor:Number(a)}:{}),c?{unprocessed:d,nextUnprocessedCursor:Number(c)}:{})}}async getDependenciesCount(e={}){let n=(await this.queue.client).multi(),i=!e.processed&&!e.unprocessed?{processed:!0,unprocessed:!0}:e;i.processed&&n.hlen(this.toKey(`${this.id}:processed`)),i.unprocessed&&n.scard(this.toKey(`${this.id}:dependencies`));let[[s,o]=[],[a,u]=[]]=await n.exec(),c=i.processed?o:void 0,d=i.unprocessed?i.processed?u:o:void 0;return Object.assign(Object.assign({},i.processed?{processed:c}:{}),i.unprocessed?{unprocessed:d}:{})}async waitUntilFinished(e,t){await this.queue.waitUntilReady();let n=this.id;return new Promise(async(i,s)=>{let o;t&&(o=setTimeout(()=>u(`Job wait ${this.name} timed out before finishing, no finish notification arrived after ${t}ms (id=${n})`),t));function a(_){h(),i(_.returnvalue)}function u(_){h(),s(new Error(_.failedReason||_))}let c=`completed:${n}`,d=`failed:${n}`;e.on(c,a),e.on(d,u),this.queue.on("closing",u);let h=()=>{clearInterval(o),e.removeListener(c,a),e.removeListener(d,u),this.queue.removeListener("closing",u)};await e.waitUntilReady();let[p,m]=await this.scripts.isFinished(n,!0);p!=0&&(p==-1||p==2?u({failedReason:m}):a({returnvalue:fN(m)}))})}moveToDelayed(e,t){let n=e-Date.now();return this.scripts.moveToDelayed(this.id,e,n>0?n:0,t)}moveToWaitingChildren(e,t={}){return this.scripts.moveToWaitingChildren(this.id,e,t)}async promote(){let e=this.id,t=await this.scripts.promote(e);if(t<0)throw this.scripts.finishedErrors(t,this.id,"promote","delayed")}retry(e="failed"){return this.failedReason=null,this.finishedOn=null,this.processedOn=null,this.returnvalue=null,this.scripts.reprocessJob(this,e)}discard(){this.discarded=!0}async isInZSet(e){return await(await this.queue.client).zscore(this.queue.toKey(e),this.id)!==null}async isInList(e){return this.scripts.isJobInList(this.queue.toKey(e),this.id)}addJob(e,t){let n=this.asJSON();return this.validateOptions(n),this.scripts.addJob(e,n,n.opts,this.id,t)}validateOptions(e){var t;if(this.opts.sizeLimit&&(0,Zi.lengthInUtf8Bytes)(e.data)>this.opts.sizeLimit)throw new Error(`The size of job ${this.name} exceeds the limit ${this.opts.sizeLimit} bytes`);if(this.opts.delay&&this.opts.repeat&&!(!((t=this.opts.repeat)===null||t===void 0)&&t.count))throw new Error("Delay and repeat options could not be used together");if(this.opts.removeDependencyOnFailure&&this.opts.failParentOnFailure)throw new Error("RemoveDependencyOnFailure and failParentOnFailure options can not be used together");if(`${parseInt(this.id,10)}`===this.id&&console.warn("Custom Ids should not be integers: https://github.com/taskforcesh/bullmq/pull/1569"),this.opts.priority){if(Math.trunc(this.opts.priority)!==this.opts.priority)throw new Error("Priority should not be float");if(this.opts.priority>La.PRIORITY_LIMIT)throw new Error(`Priority should be between 0 and ${La.PRIORITY_LIMIT}`)}}saveStacktrace(e,t){this.stacktrace=this.stacktrace||[],t?.stack&&(this.stacktrace.push(t.stack),this.opts.stackTraceLimit&&(this.stacktrace=this.stacktrace.slice(0,this.opts.stackTraceLimit)));let n=this.scripts.saveStacktraceArgs(this.id,JSON.stringify(this.stacktrace),t?.message);e.saveStacktrace(n)}};La.Job=Fx;function yle(r){let e=(0,Zi.tryCatch)(JSON.parse,JSON,[r]);return e===Zi.errorObject||!(e instanceof Array)?[]:e}function fN(r){let e=(0,Zi.tryCatch)(JSON.parse,JSON,[r]);if(e!==Zi.errorObject)return e;gle("corrupted returnvalue: "+r,e)}});var zg=E(Wg=>{"use strict";Object.defineProperty(Wg,"__esModule",{value:!0});Wg.QueueKeys=void 0;var Vx=class{constructor(e="bull"){this.prefix=e}getKeys(e){let t={};return["","active","wait","waiting-children","paused","id","delayed","prioritized","stalled-check","completed","failed","stalled","repeat","limiter","meta","events","pc"].forEach(n=>{t[n]=this.toKey(e,n)}),t}toKey(e,t){return`${this.getQueueQualifiedName(e)}:${t}`}getQueueQualifiedName(e){return`${this.prefix}:${e}`}};Wg.QueueKeys=Vx});var dN=E(Hg=>{"use strict";Object.defineProperty(Hg,"__esModule",{value:!0});Hg.addJob=void 0;var vle=`--[[
  Adds a job to the queue by doing the following:
    - Increases the job counter if needed.
    - Creates a new job key with the job data.
    - if delayed:
      - computes timestamp.
      - adds to delayed zset.
      - Emits a global event 'delayed' if the job is delayed.
    - if not delayed
      - Adds the jobId to the wait/paused list in one of three ways:
         - LIFO
         - FIFO
         - prioritized.
      - Adds the job to the "added" list so that workers gets notified.
    Input:
      KEYS[1] 'wait',
      KEYS[2] 'paused'
      KEYS[3] 'meta'
      KEYS[4] 'id'
      KEYS[5] 'delayed'
      KEYS[6] 'prioritized'
      KEYS[7] 'completed'
      KEYS[8] events stream key
      KEYS[9] 'pc' priority counter
      ARGV[1] msgpacked arguments array
            [1]  key prefix,
            [2]  custom id (will not generate one automatically)
            [3]  name
            [4]  timestamp
            [5]  parentKey?
            [6]  waitChildrenKey key.
            [7]  parent dependencies key.
            [8]  parent? {id, queueKey}
            [9]  repeat job key
      ARGV[2] Json stringified job data
      ARGV[3] msgpacked options
      Output:
        jobId  - OK
        -5     - Missing parent key
]]
local jobId
local jobIdKey
local rcall = redis.call
local args = cmsgpack.unpack(ARGV[1])
local data = ARGV[2]
local opts = cmsgpack.unpack(ARGV[3])
local parentKey = args[5]
local repeatJobKey = args[9]
local parent = args[8]
local parentData
-- Includes
--[[
  Add delay marker if needed.
]]
-- Includes
--[[
  Function to return the next delayed job timestamp.
]] 
local function getNextDelayedTimestamp(delayedKey)
  local result = rcall("ZRANGE", delayedKey, 0, 0, "WITHSCORES")
  if #result then
    local nextTimestamp = tonumber(result[2])
    if (nextTimestamp ~= nil) then 
      nextTimestamp = nextTimestamp / 0x1000
    end
    return nextTimestamp
  end
end
local function addDelayMarkerIfNeeded(targetKey, delayedKey)
  if rcall("LLEN", targetKey) == 0 then
    local nextTimestamp = getNextDelayedTimestamp(delayedKey)
    if nextTimestamp ~= nil then
      rcall("LPUSH", targetKey, "0:" .. nextTimestamp)
    end
  end
end
--[[
  Function to add job considering priority.
]]
-- Includes
--[[
  Function priority marker to wait if needed
  in order to wake up our workers and to respect priority
  order as much as possible
]]
local function addPriorityMarkerIfNeeded(waitKey)
  local waitLen = rcall("LLEN", waitKey)
  if waitLen == 0 then
    rcall("LPUSH", waitKey, "0:0")
  end
end
local function addJobWithPriority(waitKey, prioritizedKey, priority, paused, jobId, priorityCounterKey)
  local prioCounter = rcall("INCR", priorityCounterKey)
  local score = priority * 0x100000000 + bit.band(prioCounter, 0xffffffffffff)
  rcall("ZADD", prioritizedKey, score, jobId)
  if not paused then
    addPriorityMarkerIfNeeded(waitKey)
  end
end
--[[
  Function to check for the meta.paused key to decide if we are paused or not
  (since an empty list and !EXISTS are not really the same).
]]
local function getTargetQueueList(queueMetaKey, waitKey, pausedKey)
  if rcall("HEXISTS", queueMetaKey, "paused") ~= 1 then
    return waitKey, false
  else
    return pausedKey, true
  end
end
--[[
  Validate and move or add dependencies to parent.
]]
-- Includes
--[[
  Validate and move parent to active if needed.
]]
-- Includes
local function moveParentToWaitIfNeeded(parentQueueKey, parentDependenciesKey, parentKey, parentId, timestamp)
  local isParentActive = rcall("ZSCORE", parentQueueKey .. ":waiting-children", parentId)
  if rcall("SCARD", parentDependenciesKey) == 0 and isParentActive then 
    rcall("ZREM", parentQueueKey .. ":waiting-children", parentId)
    local parentWaitKey = parentQueueKey .. ":wait"
    local parentTarget, paused = getTargetQueueList(parentQueueKey .. ":meta", parentWaitKey,
      parentQueueKey .. ":paused")
    local jobAttributes = rcall("HMGET", parentKey, "priority", "delay")
    local priority = tonumber(jobAttributes[1]) or 0
    local delay = tonumber(jobAttributes[2]) or 0
    if delay > 0 then
      local delayedTimestamp = tonumber(timestamp) + delay 
      local score = delayedTimestamp * 0x1000
      local parentDelayedKey = parentQueueKey .. ":delayed" 
      rcall("ZADD", parentDelayedKey, score, parentId)
      rcall("XADD", parentQueueKey .. ":events", "*", "event", "delayed", "jobId", parentId,
        "delay", delayedTimestamp)
      addDelayMarkerIfNeeded(parentTarget, parentDelayedKey)
    else
      if priority == 0 then
        rcall("RPUSH", parentTarget, parentId)
      else
        addJobWithPriority(parentWaitKey, parentQueueKey .. ":prioritized", priority, paused,
          parentId, parentQueueKey .. ":pc")
      end
      rcall("XADD", parentQueueKey .. ":events", "*", "event", "waiting", "jobId", parentId,
        "prev", "waiting-children")
    end
  end
end
local function updateParentDepsIfNeeded(parentKey, parentQueueKey, parentDependenciesKey,
  parentId, jobIdKey, returnvalue, timestamp )
  local processedSet = parentKey .. ":processed"
  rcall("HSET", processedSet, jobIdKey, returnvalue)
  moveParentToWaitIfNeeded(parentQueueKey, parentDependenciesKey, parentKey, parentId, timestamp)
end
if parentKey ~= nil then
  if rcall("EXISTS", parentKey) ~= 1 then
    return -5
  end
  parentData = cjson.encode(parent)
end
local jobCounter = rcall("INCR", KEYS[4])
local maxEvents = rcall("HGET", KEYS[3], "opts.maxLenEvents") or 10000
local parentDependenciesKey = args[7]
local timestamp = args[4]
if args[2] == "" then
  jobId = jobCounter
  jobIdKey = args[1] .. jobId
else
  jobId = args[2]
  jobIdKey = args[1] .. jobId
  if rcall("EXISTS", jobIdKey) == 1 then
    if parentKey ~= nil then
      if rcall("ZSCORE", KEYS[7], jobId) ~= false then
        local returnvalue = rcall("HGET", jobIdKey, "returnvalue")
        updateParentDepsIfNeeded(parentKey, parent['queueKey'], parentDependenciesKey,
          parent['id'], jobIdKey, returnvalue, timestamp)
      else
        if parentDependenciesKey ~= nil then
          rcall("SADD", parentDependenciesKey, jobIdKey)
        end
      end
      rcall("HMSET", jobIdKey, "parentKey", parentKey, "parent", parentData)
    end
    rcall("XADD", KEYS[8], "MAXLEN", "~", maxEvents, "*", "event", "duplicated",
      "jobId", jobId)
    return jobId .. "" -- convert to string
  end
end
-- Store the job.
local jsonOpts = cjson.encode(opts)
local delay = opts['delay'] or 0
local priority = opts['priority'] or 0
local optionalValues = {}
if parentKey ~= nil then
  table.insert(optionalValues, "parentKey")
  table.insert(optionalValues, parentKey)
  table.insert(optionalValues, "parent")
  table.insert(optionalValues, parentData)
end
if repeatJobKey ~= nil then
  table.insert(optionalValues, "rjk")
  table.insert(optionalValues, repeatJobKey)
end
rcall("HMSET", jobIdKey, "name", args[3], "data", ARGV[2], "opts", jsonOpts,
  "timestamp", timestamp, "delay", delay, "priority", priority, unpack(optionalValues))
rcall("XADD", KEYS[8], "*", "event", "added", "jobId", jobId, "name", args[3])
-- Check if job is delayed
local delayedTimestamp = (delay > 0 and (timestamp + delay)) or 0
-- Check if job is a parent, if so add to the parents set
local waitChildrenKey = args[6]
if waitChildrenKey ~= nil then
  rcall("ZADD", waitChildrenKey, timestamp, jobId)
  rcall("XADD", KEYS[8], "MAXLEN", "~", maxEvents, "*", "event", "waiting-children", "jobId", jobId)
elseif (delayedTimestamp ~= 0) then
  local score = delayedTimestamp * 0x1000 + bit.band(jobCounter, 0xfff)
  rcall("ZADD", KEYS[5], score, jobId)
  rcall("XADD", KEYS[8], "MAXLEN", "~", maxEvents, "*", "event", "delayed", "jobId", jobId,
    "delay", delayedTimestamp)
  -- If wait list is empty, and this delayed job is the next one to be processed,
  -- then we need to signal the workers by adding a dummy job (jobId 0:delay) to the wait list.
  local target = getTargetQueueList(KEYS[3], KEYS[1], KEYS[2])
  addDelayMarkerIfNeeded(target, KEYS[5])
else
  local target, paused = getTargetQueueList(KEYS[3], KEYS[1], KEYS[2])
  -- Standard or priority add
  if priority == 0 then
    -- LIFO or FIFO
    local pushCmd = opts['lifo'] and 'RPUSH' or 'LPUSH'
    rcall(pushCmd, target, jobId)
  else
    addJobWithPriority(KEYS[1], KEYS[6], priority, paused, jobId, KEYS[9])
  end
  -- Emit waiting event
  rcall("XADD", KEYS[8], "MAXLEN", "~", maxEvents, "*", "event", "waiting",
    "jobId", jobId)
end
-- Check if this job is a child of another job, if so add it to the parents dependencies
-- TODO: Should not be possible to add a child job to a parent that is not in the "waiting-children" status.
-- fail in this case.
if parentDependenciesKey ~= nil then
  rcall("SADD", parentDependenciesKey, jobIdKey)
end
return jobId .. "" -- convert to string
`;Hg.addJob={name:"addJob",content:vle,keys:9}});var hN=E(Yg=>{"use strict";Object.defineProperty(Yg,"__esModule",{value:!0});Yg.changeDelay=void 0;var wle=`--[[
  Change job delay when it is in delayed set.
  Input:
    KEYS[1] delayed key
    KEYS[2] job key
    KEYS[3] events stream
    ARGV[1] delay
    ARGV[2] delayedTimestamp
    ARGV[3] the id of the job
  Output:
    0 - OK
   -1 - Missing job.
   -3 - Job not in delayed set.
  Events:
    - delayed key.
]]
local rcall = redis.call
if rcall("EXISTS", KEYS[2]) == 1 then
  local jobId = ARGV[3]
  local score = tonumber(ARGV[2])
  local delayedTimestamp = (score / 0x1000)
  local numRemovedElements = rcall("ZREM", KEYS[1], jobId)
  if numRemovedElements < 1 then
    return -3
  end
  rcall("HSET", KEYS[2], "delay", tonumber(ARGV[1]))
  rcall("ZADD", KEYS[1], score, jobId)
  rcall("XADD", KEYS[3], "*", "event", "delayed", "jobId", jobId, "delay", delayedTimestamp)
  return 0
else
  return -1
end`;Yg.changeDelay={name:"changeDelay",content:wle,keys:3}});var pN=E(Jg=>{"use strict";Object.defineProperty(Jg,"__esModule",{value:!0});Jg.changePriority=void 0;var ble=`--[[
  Change job priority
  Input:
    KEYS[1] 'wait',
    KEYS[2] 'paused'
    KEYS[3] 'meta'
    KEYS[4] 'prioritized'
    KEYS[5] 'pc' priority counter
    ARGV[1] priority value
    ARGV[2] job key
    ARGV[3] job id
    ARGV[4] lifo
    Output:
       0  - OK
      -1  - Missing job
]]
local jobKey = ARGV[2]
local jobId = ARGV[3]
local priority = tonumber(ARGV[1])
local rcall = redis.call
-- Includes
--[[
  Function to add job considering priority.
]]
-- Includes
--[[
  Function priority marker to wait if needed
  in order to wake up our workers and to respect priority
  order as much as possible
]]
local function addPriorityMarkerIfNeeded(waitKey)
  local waitLen = rcall("LLEN", waitKey)
  if waitLen == 0 then
    rcall("LPUSH", waitKey, "0:0")
  end
end
local function addJobWithPriority(waitKey, prioritizedKey, priority, paused, jobId, priorityCounterKey)
  local prioCounter = rcall("INCR", priorityCounterKey)
  local score = priority * 0x100000000 + bit.band(prioCounter, 0xffffffffffff)
  rcall("ZADD", prioritizedKey, score, jobId)
  if not paused then
    addPriorityMarkerIfNeeded(waitKey)
  end
end
--[[
  Function to check for the meta.paused key to decide if we are paused or not
  (since an empty list and !EXISTS are not really the same).
]]
local function getTargetQueueList(queueMetaKey, waitKey, pausedKey)
  if rcall("HEXISTS", queueMetaKey, "paused") ~= 1 then
    return waitKey, false
  else
    return pausedKey, true
  end
end
if rcall("EXISTS", jobKey) == 1 then
  local target, paused = getTargetQueueList(KEYS[3], KEYS[1], KEYS[2])
  if rcall("ZREM", KEYS[4], jobId) > 0 then
    addJobWithPriority(KEYS[1], KEYS[4], priority, paused, jobId, KEYS[5])
  else
    local numRemovedElements = rcall("LREM", target, -1, jobId)
    if numRemovedElements > 0 then
      -- Standard or priority add
      if priority == 0 then
        -- LIFO or FIFO
        local pushCmd = ARGV[4] == '1' and 'RPUSH' or 'LPUSH';
        rcall(pushCmd, target, jobId)
      else
        addJobWithPriority(KEYS[1], KEYS[4], priority, paused, jobId, KEYS[5])
      end
    end
  end
  rcall("HSET", jobKey, "priority", priority)
  return 0
else
  return -1
end
`;Jg.changePriority={name:"changePriority",content:ble,keys:5}});var mN=E(Qg=>{"use strict";Object.defineProperty(Qg,"__esModule",{value:!0});Qg.cleanJobsInSet=void 0;var Sle=`--[[
  Remove jobs from the specific set.
  Input:
    KEYS[1]  set key,
    KEYS[2]  events stream key
    ARGV[1]  jobKey prefix
    ARGV[2]  timestamp
    ARGV[3]  limit the number of jobs to be removed. 0 is unlimited
    ARGV[4]  set name, can be any of 'wait', 'active', 'paused', 'delayed', 'completed', or 'failed'
]]
local rcall = redis.call
local rangeStart = 0
local rangeEnd = -1
local limit = tonumber(ARGV[3])
-- If we're only deleting _n_ items, avoid retrieving all items
-- for faster performance
--
-- Start from the tail of the list, since that's where oldest elements
-- are generally added for FIFO lists
if limit > 0 then
  rangeStart = -1 - limit + 1
  rangeEnd = -1
end
-- Includes
--[[
  Function to clean job list.
  Returns jobIds and deleted count number.
]]
-- Includes
--[[
  Function to get the latest saved timestamp.
]]
local function getTimestamp(jobKey, attributes)
  if #attributes == 1 then
    return rcall("HGET", jobKey, attributes[1])
  end
  local jobTs
  for _, ts in ipairs(rcall("HMGET", jobKey, unpack(attributes))) do
    if (ts) then
      jobTs = ts
      break
    end
  end
  return jobTs
end
--[[
  Function to remove job.
]]
-- Includes
--[[
  Check if this job has a parent. If so we will just remove it from
  the parent child list, but if it is the last child we should move the parent to "wait/paused"
  which requires code from "moveToFinished"
]]
--[[
  Functions to destructure job key.
  Just a bit of warning, these functions may be a bit slow and affect performance significantly.
]]
local getJobIdFromKey = function (jobKey)
  return string.match(jobKey, ".*:(.*)")
end
local getJobKeyPrefix = function (jobKey, jobId)
  return string.sub(jobKey, 0, #jobKey - #jobId)
end
--[[
  Function to check for the meta.paused key to decide if we are paused or not
  (since an empty list and !EXISTS are not really the same).
]]
local function getTargetQueueList(queueMetaKey, waitKey, pausedKey)
  if rcall("HEXISTS", queueMetaKey, "paused") ~= 1 then
    return waitKey, false
  else
    return pausedKey, true
  end
end
local function moveParentToWait(parentPrefix, parentId, emitEvent)
  local parentTarget = getTargetQueueList(parentPrefix .. "meta", parentPrefix .. "wait", parentPrefix .. "paused")
  rcall("RPUSH", parentTarget, parentId)
  if emitEvent then
    local parentEventStream = parentPrefix .. "events"
    rcall("XADD", parentEventStream, "*", "event", "waiting", "jobId", parentId, "prev", "waiting-children")
  end
end
local function removeParentDependencyKey(jobKey, hard, parentKey, baseKey)
  if parentKey then
    local parentDependenciesKey = parentKey .. ":dependencies"
    local result = rcall("SREM", parentDependenciesKey, jobKey)
    if result > 0 then
      local pendingDependencies = rcall("SCARD", parentDependenciesKey)
      if pendingDependencies == 0 then
        local parentId = getJobIdFromKey(parentKey)
        local parentPrefix = getJobKeyPrefix(parentKey, parentId)
        local numRemovedElements = rcall("ZREM", parentPrefix .. "waiting-children", parentId)
        if numRemovedElements == 1 then
          if hard then
            if parentPrefix == baseKey then
              removeParentDependencyKey(parentKey, hard, nil, baseKey)
              rcall("DEL", parentKey, parentKey .. ':logs',
                parentKey .. ':dependencies', parentKey .. ':processed')
            else
              moveParentToWait(parentPrefix, parentId)
            end
          else
            moveParentToWait(parentPrefix, parentId, true)
          end
        end
      end
    end
  else
    local missedParentKey = rcall("HGET", jobKey, "parentKey")
    if( (type(missedParentKey) == "string") and missedParentKey ~= "" and (rcall("EXISTS", missedParentKey) == 1)) then
      local parentDependenciesKey = missedParentKey .. ":dependencies"
      local result = rcall("SREM", parentDependenciesKey, jobKey)
      if result > 0 then
        local pendingDependencies = rcall("SCARD", parentDependenciesKey)
        if pendingDependencies == 0 then
          local parentId = getJobIdFromKey(missedParentKey)
          local parentPrefix = getJobKeyPrefix(missedParentKey, parentId)
          local numRemovedElements = rcall("ZREM", parentPrefix .. "waiting-children", parentId)
          if numRemovedElements == 1 then
            if hard then
              if parentPrefix == baseKey then
                removeParentDependencyKey(missedParentKey, hard, nil, baseKey)
                rcall("DEL", missedParentKey, missedParentKey .. ':logs',
                  missedParentKey .. ':dependencies', missedParentKey .. ':processed')
              else
                moveParentToWait(parentPrefix, parentId)
              end
            else
              moveParentToWait(parentPrefix, parentId, true)
            end
          end
        end
      end
    end
  end
end
local function removeJob(jobId, hard, baseKey)
  local jobKey = baseKey .. jobId
  removeParentDependencyKey(jobKey, hard, nil, baseKey)
  rcall("DEL", jobKey, jobKey .. ':logs',
    jobKey .. ':dependencies', jobKey .. ':processed')
end
local function cleanList(listKey, jobKeyPrefix, rangeStart, rangeEnd,
  timestamp, isWaiting)
  local jobs = rcall("LRANGE", listKey, rangeStart, rangeEnd)
  local deleted = {}
  local deletedCount = 0
  local jobTS
  local deletionMarker = ''
  local jobIdsLen = #jobs
  for i, job in ipairs(jobs) do
    if limit > 0 and deletedCount >= limit then
      break
    end
    local jobKey = jobKeyPrefix .. job
    if (isWaiting or rcall("EXISTS", jobKey .. ":lock") == 0) then
      -- Find the right timestamp of the job to compare to maxTimestamp:
      -- * finishedOn says when the job was completed, but it isn't set unless the job has actually completed
      -- * processedOn represents when the job was last attempted, but it doesn't get populated until
      --   the job is first tried
      -- * timestamp is the original job submission time
      -- Fetch all three of these (in that order) and use the first one that is set so that we'll leave jobs
      -- that have been active within the grace period:
      jobTS = getTimestamp(jobKey, {"finishedOn", "processedOn", "timestamp"})
      if (not jobTS or jobTS <= timestamp) then
        -- replace the entry with a deletion marker; the actual deletion will
        -- occur at the end of the script
        rcall("LSET", listKey, rangeEnd - jobIdsLen + i, deletionMarker)
        removeJob(job, true, jobKeyPrefix)
        deletedCount = deletedCount + 1
        table.insert(deleted, job)
      end
    end
  end
  rcall("LREM", listKey, 0, deletionMarker)
  return {deleted, deletedCount}
end
--[[
  Function to clean job set.
  Returns jobIds and deleted count number.
]]
-- Includes
--[[
  Function to loop in batches.
  Just a bit of warning, some commands as ZREM
  could receive a maximum of 7000 parameters per call.
]]
local function batches(n, batchSize)
  local i = 0
  return function()
    local from = i * batchSize + 1
    i = i + 1
    if (from <= n) then
      local to = math.min(from + batchSize - 1, n)
      return from, to
    end
  end
end
-- We use ZRANGEBYSCORE to make the case where we're deleting a limited number
-- of items in a sorted set only run a single iteration. If we simply used
-- ZRANGE, we may take a long time traversing through jobs that are within the
-- grace period.
local function getJobsInZset(zsetKey, rangeEnd, limit)
  if limit > 0 then
    return rcall("ZRANGEBYSCORE", zsetKey, 0, rangeEnd, "LIMIT", 0, limit)
  else
    return rcall("ZRANGEBYSCORE", zsetKey, 0, rangeEnd)
  end
end
local function cleanSet(setKey, jobKeyPrefix, rangeEnd, timestamp, limit, attributes, isFinished)
  local jobs = getJobsInZset(setKey, rangeEnd, limit)
  local deleted = {}
  local deletedCount = 0
  local jobTS
  for i, job in ipairs(jobs) do
    if limit > 0 and deletedCount >= limit then
      break
    end
    local jobKey = jobKeyPrefix .. job
    if isFinished then
      removeJob(job, true, jobKeyPrefix)
      deletedCount = deletedCount + 1
      table.insert(deleted, job)
    else
      -- * finishedOn says when the job was completed, but it isn't set unless the job has actually completed
      jobTS = getTimestamp(jobKey, attributes)
      if (not jobTS or jobTS <= timestamp) then
        removeJob(job, true, jobKeyPrefix)
        deletedCount = deletedCount + 1
        table.insert(deleted, job)
      end
    end
  end
  if(#deleted > 0) then
    for from, to in batches(#deleted, 7000) do
      rcall("ZREM", setKey, unpack(deleted, from, to))
    end
  end
  return {deleted, deletedCount}
end
local result
if ARGV[4] == "active" then
  result = cleanList(KEYS[1], ARGV[1], rangeStart, rangeEnd, ARGV[2], false)
elseif ARGV[4] == "delayed" then
  rangeEnd = "+inf"
  result = cleanSet(KEYS[1], ARGV[1], rangeEnd, ARGV[2], limit,
                    {"processedOn", "timestamp"}, false)
elseif ARGV[4] == "prioritized" then
  rangeEnd = "+inf"
  result = cleanSet(KEYS[1], ARGV[1], rangeEnd, ARGV[2], limit,
                    {"timestamp"}, false)
elseif ARGV[4] == "wait" or ARGV[4] == "paused" then
  result = cleanList(KEYS[1], ARGV[1], rangeStart, rangeEnd, ARGV[2], true)
else
  rangeEnd = ARGV[2]
  result = cleanSet(KEYS[1], ARGV[1], rangeEnd, ARGV[2], limit,
                    {"finishedOn"}, true)
end
rcall("XADD", KEYS[2], "*", "event", "cleaned", "count", result[2])
return result[1]
`;Qg.cleanJobsInSet={name:"cleanJobsInSet",content:Sle,keys:2}});var gN=E(Zg=>{"use strict";Object.defineProperty(Zg,"__esModule",{value:!0});Zg.drain=void 0;var _le=`--[[
  Drains the queue, removes all jobs that are waiting
  or delayed, but not active, completed or failed
  Input:
    KEYS[1] 'wait',
    KEYS[2] 'paused'
    KEYS[3] 'delayed'
    KEYS[4] 'prioritized'
    ARGV[1]  queue key prefix
]]
local rcall = redis.call
local queueBaseKey = ARGV[1]
--[[
  Functions to remove jobs.
]]
-- Includes
--[[
  Functions to remove jobs.
]]
-- Includes
--[[
  Function to remove job.
]]
-- Includes
--[[
  Check if this job has a parent. If so we will just remove it from
  the parent child list, but if it is the last child we should move the parent to "wait/paused"
  which requires code from "moveToFinished"
]]
--[[
  Functions to destructure job key.
  Just a bit of warning, these functions may be a bit slow and affect performance significantly.
]]
local getJobIdFromKey = function (jobKey)
  return string.match(jobKey, ".*:(.*)")
end
local getJobKeyPrefix = function (jobKey, jobId)
  return string.sub(jobKey, 0, #jobKey - #jobId)
end
--[[
  Function to check for the meta.paused key to decide if we are paused or not
  (since an empty list and !EXISTS are not really the same).
]]
local function getTargetQueueList(queueMetaKey, waitKey, pausedKey)
  if rcall("HEXISTS", queueMetaKey, "paused") ~= 1 then
    return waitKey, false
  else
    return pausedKey, true
  end
end
local function moveParentToWait(parentPrefix, parentId, emitEvent)
  local parentTarget = getTargetQueueList(parentPrefix .. "meta", parentPrefix .. "wait", parentPrefix .. "paused")
  rcall("RPUSH", parentTarget, parentId)
  if emitEvent then
    local parentEventStream = parentPrefix .. "events"
    rcall("XADD", parentEventStream, "*", "event", "waiting", "jobId", parentId, "prev", "waiting-children")
  end
end
local function removeParentDependencyKey(jobKey, hard, parentKey, baseKey)
  if parentKey then
    local parentDependenciesKey = parentKey .. ":dependencies"
    local result = rcall("SREM", parentDependenciesKey, jobKey)
    if result > 0 then
      local pendingDependencies = rcall("SCARD", parentDependenciesKey)
      if pendingDependencies == 0 then
        local parentId = getJobIdFromKey(parentKey)
        local parentPrefix = getJobKeyPrefix(parentKey, parentId)
        local numRemovedElements = rcall("ZREM", parentPrefix .. "waiting-children", parentId)
        if numRemovedElements == 1 then
          if hard then
            if parentPrefix == baseKey then
              removeParentDependencyKey(parentKey, hard, nil, baseKey)
              rcall("DEL", parentKey, parentKey .. ':logs',
                parentKey .. ':dependencies', parentKey .. ':processed')
            else
              moveParentToWait(parentPrefix, parentId)
            end
          else
            moveParentToWait(parentPrefix, parentId, true)
          end
        end
      end
    end
  else
    local missedParentKey = rcall("HGET", jobKey, "parentKey")
    if( (type(missedParentKey) == "string") and missedParentKey ~= "" and (rcall("EXISTS", missedParentKey) == 1)) then
      local parentDependenciesKey = missedParentKey .. ":dependencies"
      local result = rcall("SREM", parentDependenciesKey, jobKey)
      if result > 0 then
        local pendingDependencies = rcall("SCARD", parentDependenciesKey)
        if pendingDependencies == 0 then
          local parentId = getJobIdFromKey(missedParentKey)
          local parentPrefix = getJobKeyPrefix(missedParentKey, parentId)
          local numRemovedElements = rcall("ZREM", parentPrefix .. "waiting-children", parentId)
          if numRemovedElements == 1 then
            if hard then
              if parentPrefix == baseKey then
                removeParentDependencyKey(missedParentKey, hard, nil, baseKey)
                rcall("DEL", missedParentKey, missedParentKey .. ':logs',
                  missedParentKey .. ':dependencies', missedParentKey .. ':processed')
              else
                moveParentToWait(parentPrefix, parentId)
              end
            else
              moveParentToWait(parentPrefix, parentId, true)
            end
          end
        end
      end
    end
  end
end
local function removeJob(jobId, hard, baseKey)
  local jobKey = baseKey .. jobId
  removeParentDependencyKey(jobKey, hard, nil, baseKey)
  rcall("DEL", jobKey, jobKey .. ':logs',
    jobKey .. ':dependencies', jobKey .. ':processed')
end
local function removeJobs(keys, hard, baseKey, max)
  for i, key in ipairs(keys) do
    removeJob(key, hard, baseKey)
  end
  return max - #keys
end
local function getListItems(keyName, max)
  return rcall('LRANGE', keyName, 0, max - 1)
end
local function removeListJobs(keyName, hard, baseKey, max)
  local jobs = getListItems(keyName, max)
  local count = removeJobs(jobs, hard, baseKey, max)
  rcall("LTRIM", keyName, #jobs, -1)
  return count
end
-- Includes
--[[
  Function to loop in batches.
  Just a bit of warning, some commands as ZREM
  could receive a maximum of 7000 parameters per call.
]]
local function batches(n, batchSize)
  local i = 0
  return function()
    local from = i * batchSize + 1
    i = i + 1
    if (from <= n) then
      local to = math.min(from + batchSize - 1, n)
      return from, to
    end
  end
end
--[[
  Function to get ZSet items.
]]
local function getZSetItems(keyName, max)
  return rcall('ZRANGE', keyName, 0, max - 1)
end
local function removeZSetJobs(keyName, hard, baseKey, max)
  local jobs = getZSetItems(keyName, max)
  local count = removeJobs(jobs, hard, baseKey, max)
  if(#jobs > 0) then
    for from, to in batches(#jobs, 7000) do
      rcall("ZREM", keyName, unpack(jobs, from, to))
    end
  end
  return count
end
removeListJobs(KEYS[1], true, queueBaseKey, 0) --wait
removeListJobs(KEYS[2], true, queueBaseKey, 0) --paused
if KEYS[3] ~= "" then
  removeZSetJobs(KEYS[3], true, queueBaseKey, 0) --delayed
end
removeZSetJobs(KEYS[4], true, queueBaseKey, 0) --prioritized
`;Zg.drain={name:"drain",content:_le,keys:4}});var yN=E(Xg=>{"use strict";Object.defineProperty(Xg,"__esModule",{value:!0});Xg.extendLock=void 0;var xle=`--[[
  Extend lock and removes the job from the stalled set.
  Input:
    KEYS[1] 'lock',
    KEYS[2] 'stalled'
    ARGV[1]  token
    ARGV[2]  lock duration in milliseconds
    ARGV[3]  jobid
  Output:
    "1" if lock extented succesfully.
]]
local rcall = redis.call
if rcall("GET", KEYS[1]) == ARGV[1] then
  --   if rcall("SET", KEYS[1], ARGV[1], "PX", ARGV[2], "XX") then
  if rcall("SET", KEYS[1], ARGV[1], "PX", ARGV[2]) then
    rcall("SREM", KEYS[2], ARGV[3])
    return 1
  end
end
return 0
`;Xg.extendLock={name:"extendLock",content:xle,keys:2}});var vN=E(ey=>{"use strict";Object.defineProperty(ey,"__esModule",{value:!0});ey.getCounts=void 0;var Ele=`--[[
  Get counts per provided states
    Input:
      KEYS[1]    'prefix'
      ARGV[1...] types
]]
local rcall = redis.call;
local prefix = KEYS[1]
local results = {}
for i = 1, #ARGV do
  local stateKey = prefix .. ARGV[i]
  if ARGV[i] == "wait" or ARGV[i] == "paused" then
    local marker = rcall("LINDEX", stateKey, -1)
    if marker and string.sub(marker, 1, 2) == "0:" then
      local count = rcall("LLEN", stateKey)
      if count > 1 then
        rcall("RPOP", stateKey)
        results[#results+1] = count-1
      else
        results[#results+1] = 0
      end
    else
      results[#results+1] = rcall("LLEN", stateKey)
    end
  elseif ARGV[i] == "active" then
    results[#results+1] = rcall("LLEN", stateKey)
  else
    results[#results+1] = rcall("ZCARD", stateKey)
  end
end
return results
`;ey.getCounts={name:"getCounts",content:Ele,keys:1}});var wN=E(ty=>{"use strict";Object.defineProperty(ty,"__esModule",{value:!0});ty.getRanges=void 0;var Ole=`--[[
  Get job ids per provided states
    Input:
      KEYS[1]    'prefix'
      ARGV[1]    start
      ARGV[2]    end
      ARGV[3]    asc
      ARGV[4...] types
]]
local rcall = redis.call
local prefix = KEYS[1]
local rangeStart = tonumber(ARGV[1])
local rangeEnd = tonumber(ARGV[2])
local asc = ARGV[3]
local results = {}
local function getRangeInList(listKey, asc, rangeStart, rangeEnd, results)
  if asc == "1" then
    local modifiedRangeStart
    local modifiedRangeEnd
    if rangeStart == -1 then
      modifiedRangeStart = 0
    else
      modifiedRangeStart = -(rangeStart + 1)
    end
    if rangeEnd == -1 then
      modifiedRangeEnd = 0
    else
      modifiedRangeEnd = -(rangeEnd + 1)
    end
    results[#results+1] = rcall("LRANGE", listKey,
      modifiedRangeEnd,
      modifiedRangeStart)
  else
    results[#results+1] = rcall("LRANGE", listKey, rangeStart, rangeEnd)
  end
end
for i = 4, #ARGV do
  local stateKey = prefix .. ARGV[i]
  if ARGV[i] == "wait" or ARGV[i] == "paused" then
    local marker = rcall("LINDEX", stateKey, -1)
    if marker and string.sub(marker, 1, 2) == "0:" then
      local count = rcall("LLEN", stateKey)
      if count > 1 then
        rcall("RPOP", stateKey)
        getRangeInList(stateKey, asc, rangeStart, rangeEnd, results)
      else
        results[#results+1] = {}
      end
    else
      getRangeInList(stateKey, asc, rangeStart, rangeEnd, results)
    end
  elseif ARGV[i] == "active" then
    getRangeInList(stateKey, asc, rangeStart, rangeEnd, results)
  else
    if asc == "1" then
      results[#results+1] = rcall("ZRANGE", stateKey, rangeStart, rangeEnd)
    else
      results[#results+1] = rcall("ZREVRANGE", stateKey, rangeStart, rangeEnd)
    end
  end
end
return results
`;ty.getRanges={name:"getRanges",content:Ole,keys:1}});var bN=E(ry=>{"use strict";Object.defineProperty(ry,"__esModule",{value:!0});ry.getState=void 0;var Ile=`--[[
  Get a job state
  Input: 
    KEYS[1] 'completed' key,
    KEYS[2] 'failed' key
    KEYS[3] 'delayed' key
    KEYS[4] 'active' key
    KEYS[5] 'wait' key
    KEYS[6] 'paused' key
    KEYS[7] 'waiting-children' key
    KEYS[8] 'prioritized' key
    ARGV[1] job id
  Output:
    'completed'
    'failed'
    'delayed'
    'active'
    'prioritized'
    'waiting'
    'waiting-children'
    'unknown'
]]
local rcall = redis.call
if rcall("ZSCORE", KEYS[1], ARGV[1]) ~= false then
  return "completed"
end
if rcall("ZSCORE", KEYS[2], ARGV[1]) ~= false then
  return "failed"
end
if rcall("ZSCORE", KEYS[3], ARGV[1]) ~= false then
  return "delayed"
end
if rcall("ZSCORE", KEYS[8], ARGV[1]) ~= false then
  return "prioritized"
end
-- Includes
--[[
  Functions to check if a item belongs to a list.
]]
local function checkItemInList(list, item)
  for _, v in pairs(list) do
    if v == item then
      return 1
    end
  end
  return nil
end
local active_items = rcall("LRANGE", KEYS[4] , 0, -1)
if checkItemInList(active_items, ARGV[1]) ~= nil then
  return "active"
end
local wait_items = rcall("LRANGE", KEYS[5] , 0, -1)
if checkItemInList(wait_items, ARGV[1]) ~= nil then
  return "waiting"
end
local paused_items = rcall("LRANGE", KEYS[6] , 0, -1)
if checkItemInList(paused_items, ARGV[1]) ~= nil then
  return "waiting"
end
if rcall("ZSCORE", KEYS[7], ARGV[1]) ~= false then
  return "waiting-children"
end
return "unknown"
`;ry.getState={name:"getState",content:Ile,keys:8}});var SN=E(ny=>{"use strict";Object.defineProperty(ny,"__esModule",{value:!0});ny.getStateV2=void 0;var Cle=`--[[
  Get a job state
  Input: 
    KEYS[1] 'completed' key,
    KEYS[2] 'failed' key
    KEYS[3] 'delayed' key
    KEYS[4] 'active' key
    KEYS[5] 'wait' key
    KEYS[6] 'paused' key
    KEYS[7] 'waiting-children' key
    KEYS[8] 'prioritized' key
    ARGV[1] job id
  Output:
    'completed'
    'failed'
    'delayed'
    'active'
    'waiting'
    'waiting-children'
    'unknown'
]]
local rcall = redis.call
if rcall("ZSCORE", KEYS[1], ARGV[1]) ~= false then
  return "completed"
end
if rcall("ZSCORE", KEYS[2], ARGV[1]) ~= false then
  return "failed"
end
if rcall("ZSCORE", KEYS[3], ARGV[1]) ~= false then
  return "delayed"
end
if rcall("ZSCORE", KEYS[8], ARGV[1]) ~= false then
  return "prioritized"
end
if rcall("LPOS", KEYS[4] , ARGV[1]) ~= false then
  return "active"
end
if rcall("LPOS", KEYS[5] , ARGV[1]) ~= false then
  return "waiting"
end
if rcall("LPOS", KEYS[6] , ARGV[1]) ~= false then
  return "waiting"
end
if rcall("ZSCORE", KEYS[7] , ARGV[1]) ~= false then
  return "waiting-children"
end
return "unknown"
`;ny.getStateV2={name:"getStateV2",content:Cle,keys:8}});var _N=E(iy=>{"use strict";Object.defineProperty(iy,"__esModule",{value:!0});iy.isFinished=void 0;var Tle=`--[[
  Checks if a job is finished (.i.e. is in the completed or failed set)
  Input: 
    KEYS[1] completed key
    KEYS[2] failed key
    KEYS[3] job key
    ARGV[1] job id
    ARGV[2] return value?
  Output:
    0 - Not finished.
    1 - Completed.
    2 - Failed.
   -1 - Missing job. 
]]
local rcall = redis.call
if rcall("EXISTS", KEYS[3]) ~= 1 then
  if ARGV[2] == "1" then
    return {-1,"Missing key for job " .. KEYS[3] .. ". isFinished"}
  end  
  return -1
end
if rcall("ZSCORE", KEYS[1], ARGV[1]) ~= false then
  if ARGV[2] == "1" then
    local returnValue = rcall("HGET", KEYS[3], "returnvalue")
    return {1,returnValue}
  end
  return 1
end
if rcall("ZSCORE", KEYS[2], ARGV[1]) ~= false then
  if ARGV[2] == "1" then
    local failedReason = rcall("HGET", KEYS[3], "failedReason")
    return {2,failedReason}
  end
  return 2
end
if ARGV[2] == "1" then
  return {0}
end
return 0
`;iy.isFinished={name:"isFinished",content:Tle,keys:3}});var xN=E(sy=>{"use strict";Object.defineProperty(sy,"__esModule",{value:!0});sy.isJobInList=void 0;var Ale=`--[[
  Checks if job is in a given list.
  Input:
    KEYS[1]
    ARGV[1]
  Output:
    1 if element found in the list.
]]
-- Includes
--[[
  Functions to check if a item belongs to a list.
]]
local function checkItemInList(list, item)
  for _, v in pairs(list) do
    if v == item then
      return 1
    end
  end
  return nil
end
local items = redis.call("LRANGE", KEYS[1] , 0, -1)
return checkItemInList(items, ARGV[1])
`;sy.isJobInList={name:"isJobInList",content:Ale,keys:1}});var EN=E(oy=>{"use strict";Object.defineProperty(oy,"__esModule",{value:!0});oy.moveJobFromActiveToWait=void 0;var Mle=`--[[
  Function to move job from active state to wait.
  Input:
    KEYS[1] active key
    KEYS[2] wait key
    KEYS[3] stalled key
    KEYS[4] job lock key
    KEYS[5] paused key
    KEYS[6] meta key
    KEYS[7] limiter key
    KEYS[8] prioritized key
    KEYS[9] event key
    ARGV[1] job id
    ARGV[2] lock token
    ARGV[3] job id key
]]
local rcall = redis.call
-- Includes
--[[
  Function to push back job considering priority in front of same prioritized jobs.
]]
local function pushBackJobWithPriority(prioritizedKey, priority, jobId)
  -- in order to put it at front of same prioritized jobs
  -- we consider prioritized counter as 0
  local score = priority * 0x100000000
  rcall("ZADD", prioritizedKey, score, jobId)
end
--[[
  Function to check for the meta.paused key to decide if we are paused or not
  (since an empty list and !EXISTS are not really the same).
]]
local function getTargetQueueList(queueMetaKey, waitKey, pausedKey)
  if rcall("HEXISTS", queueMetaKey, "paused") ~= 1 then
    return waitKey, false
  else
    return pausedKey, true
  end
end
local jobId = ARGV[1]
local token = ARGV[2]
local lockKey = KEYS[4]
local lockToken = rcall("GET", lockKey)
local pttl = rcall("PTTL", KEYS[7])
if lockToken == token and pttl > 0 then
  local removed = rcall("LREM", KEYS[1], 1, jobId)
  if (removed > 0) then
    local target = getTargetQueueList(KEYS[6], KEYS[2], KEYS[5])
    rcall("SREM", KEYS[3], jobId)
    local priority = tonumber(rcall("HGET", ARGV[3], "priority")) or 0
    if priority > 0 then
      pushBackJobWithPriority(KEYS[8], priority, jobId)
    else
      rcall("RPUSH", target, jobId)
    end
    rcall("DEL", lockKey)
    -- Emit waiting event
    rcall("XADD", KEYS[9], "*", "event", "waiting", "jobId", jobId)
  end
end
return pttl
`;oy.moveJobFromActiveToWait={name:"moveJobFromActiveToWait",content:Mle,keys:9}});var ON=E(ay=>{"use strict";Object.defineProperty(ay,"__esModule",{value:!0});ay.moveJobsToWait=void 0;var kle=`--[[
  Move completed, failed or delayed jobs to wait.
  Note: Does not support jobs with priorities.
  Input:
    KEYS[1] base key
    KEYS[2] events stream
    KEYS[3] state key (failed, completed, delayed)
    KEYS[4] 'wait'
    KEYS[5] 'paused'
    KEYS[6] 'meta'
    ARGV[1] count
    ARGV[2] timestamp
    ARGV[3] prev state
  Output:
    1  means the operation is not completed
    0  means the operation is completed
]]
local maxCount = tonumber(ARGV[1])
local timestamp = tonumber(ARGV[2])
local rcall = redis.call;
-- Includes
--[[
  Function to loop in batches.
  Just a bit of warning, some commands as ZREM
  could receive a maximum of 7000 parameters per call.
]]
local function batches(n, batchSize)
  local i = 0
  return function()
    local from = i * batchSize + 1
    i = i + 1
    if (from <= n) then
      local to = math.min(from + batchSize - 1, n)
      return from, to
    end
  end
end
--[[
  Function to check for the meta.paused key to decide if we are paused or not
  (since an empty list and !EXISTS are not really the same).
]]
local function getTargetQueueList(queueMetaKey, waitKey, pausedKey)
  if rcall("HEXISTS", queueMetaKey, "paused") ~= 1 then
    return waitKey, false
  else
    return pausedKey, true
  end
end
local metaKey = KEYS[6]
local target = getTargetQueueList(metaKey, KEYS[4], KEYS[5])
local jobs = rcall('ZRANGEBYSCORE', KEYS[3], 0, timestamp, 'LIMIT', 0, maxCount)
if (#jobs > 0) then
    if ARGV[3] == "failed" then
        for i, key in ipairs(jobs) do
            local jobKey = KEYS[1] .. key
            rcall("HDEL", jobKey, "finishedOn", "processedOn", "failedReason")
        end
    elseif ARGV[3] == "completed" then
        for i, key in ipairs(jobs) do
            local jobKey = KEYS[1] .. key
            rcall("HDEL", jobKey, "finishedOn", "processedOn", "returnvalue")
        end
    end
    local maxEvents = rcall("HGET", metaKey, "opts.maxLenEvents") or 10000
    for i, key in ipairs(jobs) do
        -- Emit waiting event
        rcall("XADD", KEYS[2], "MAXLEN", "~", maxEvents, "*", "event",
              "waiting", "jobId", key, "prev", ARGV[3]);
    end
    for from, to in batches(#jobs, 7000) do
        rcall("ZREM", KEYS[3], unpack(jobs, from, to))
        rcall("LPUSH", target, unpack(jobs, from, to))
    end
end
maxCount = maxCount - #jobs
if (maxCount <= 0) then return 1 end
return 0
`;ay.moveJobsToWait={name:"moveJobsToWait",content:kle,keys:6}});var IN=E(ly=>{"use strict";Object.defineProperty(ly,"__esModule",{value:!0});ly.moveStalledJobsToWait=void 0;var Ple=`--[[
  Move stalled jobs to wait.
    Input:
      KEYS[1] 'stalled' (SET)
      KEYS[2] 'wait',   (LIST)
      KEYS[3] 'active', (LIST)
      KEYS[4] 'failed', (ZSET)
      KEYS[5] 'stalled-check', (KEY)
      KEYS[6] 'meta', (KEY)
      KEYS[7] 'paused', (LIST)
      KEYS[8] 'event stream' (STREAM)
      ARGV[1]  Max stalled job count
      ARGV[2]  queue.toKey('')
      ARGV[3]  timestamp
      ARGV[4]  max check time
    Events:
      'stalled' with stalled job id.
]] -- Includes
--[[
  Move stalled jobs to wait.
    Input:
      stalledKey 'stalled' (SET)
      waitKey 'wait',   (LIST)
      activeKey 'active', (LIST)
      failedKey 'failed', (ZSET)
      stalledCheckKey 'stalled-check', (KEY)
      metaKey 'meta', (KEY)
      pausedKey 'paused', (LIST)
      eventStreamKey 'event stream' (STREAM)
      maxStalledJobCount  Max stalled job count
      queueKeyPrefix  queue.toKey('')
      timestamp  timestamp
      maxCheckTime  max check time
    Events:
      'stalled' with stalled job id.
]]
local rcall = redis.call
-- Includes
--[[
  Function to loop in batches.
  Just a bit of warning, some commands as ZREM
  could receive a maximum of 7000 parameters per call.
]]
local function batches(n, batchSize)
  local i = 0
  return function()
    local from = i * batchSize + 1
    i = i + 1
    if (from <= n) then
      local to = math.min(from + batchSize - 1, n)
      return from, to
    end
  end
end
--[[
  Function to check for the meta.paused key to decide if we are paused or not
  (since an empty list and !EXISTS are not really the same).
]]
local function getTargetQueueList(queueMetaKey, waitKey, pausedKey)
  if rcall("HEXISTS", queueMetaKey, "paused") ~= 1 then
    return waitKey, false
  else
    return pausedKey, true
  end
end
--[[
  Function to remove job.
]]
-- Includes
--[[
  Check if this job has a parent. If so we will just remove it from
  the parent child list, but if it is the last child we should move the parent to "wait/paused"
  which requires code from "moveToFinished"
]]
--[[
  Functions to destructure job key.
  Just a bit of warning, these functions may be a bit slow and affect performance significantly.
]]
local getJobIdFromKey = function (jobKey)
  return string.match(jobKey, ".*:(.*)")
end
local getJobKeyPrefix = function (jobKey, jobId)
  return string.sub(jobKey, 0, #jobKey - #jobId)
end
local function moveParentToWait(parentPrefix, parentId, emitEvent)
  local parentTarget = getTargetQueueList(parentPrefix .. "meta", parentPrefix .. "wait", parentPrefix .. "paused")
  rcall("RPUSH", parentTarget, parentId)
  if emitEvent then
    local parentEventStream = parentPrefix .. "events"
    rcall("XADD", parentEventStream, "*", "event", "waiting", "jobId", parentId, "prev", "waiting-children")
  end
end
local function removeParentDependencyKey(jobKey, hard, parentKey, baseKey)
  if parentKey then
    local parentDependenciesKey = parentKey .. ":dependencies"
    local result = rcall("SREM", parentDependenciesKey, jobKey)
    if result > 0 then
      local pendingDependencies = rcall("SCARD", parentDependenciesKey)
      if pendingDependencies == 0 then
        local parentId = getJobIdFromKey(parentKey)
        local parentPrefix = getJobKeyPrefix(parentKey, parentId)
        local numRemovedElements = rcall("ZREM", parentPrefix .. "waiting-children", parentId)
        if numRemovedElements == 1 then
          if hard then
            if parentPrefix == baseKey then
              removeParentDependencyKey(parentKey, hard, nil, baseKey)
              rcall("DEL", parentKey, parentKey .. ':logs',
                parentKey .. ':dependencies', parentKey .. ':processed')
            else
              moveParentToWait(parentPrefix, parentId)
            end
          else
            moveParentToWait(parentPrefix, parentId, true)
          end
        end
      end
    end
  else
    local missedParentKey = rcall("HGET", jobKey, "parentKey")
    if( (type(missedParentKey) == "string") and missedParentKey ~= "" and (rcall("EXISTS", missedParentKey) == 1)) then
      local parentDependenciesKey = missedParentKey .. ":dependencies"
      local result = rcall("SREM", parentDependenciesKey, jobKey)
      if result > 0 then
        local pendingDependencies = rcall("SCARD", parentDependenciesKey)
        if pendingDependencies == 0 then
          local parentId = getJobIdFromKey(missedParentKey)
          local parentPrefix = getJobKeyPrefix(missedParentKey, parentId)
          local numRemovedElements = rcall("ZREM", parentPrefix .. "waiting-children", parentId)
          if numRemovedElements == 1 then
            if hard then
              if parentPrefix == baseKey then
                removeParentDependencyKey(missedParentKey, hard, nil, baseKey)
                rcall("DEL", missedParentKey, missedParentKey .. ':logs',
                  missedParentKey .. ':dependencies', missedParentKey .. ':processed')
              else
                moveParentToWait(parentPrefix, parentId)
              end
            else
              moveParentToWait(parentPrefix, parentId, true)
            end
          end
        end
      end
    end
  end
end
local function removeJob(jobId, hard, baseKey)
  local jobKey = baseKey .. jobId
  removeParentDependencyKey(jobKey, hard, nil, baseKey)
  rcall("DEL", jobKey, jobKey .. ':logs',
    jobKey .. ':dependencies', jobKey .. ':processed')
end
--[[
  Functions to remove jobs by max age.
]]
-- Includes
local function removeJobsByMaxAge(timestamp, maxAge, targetSet, prefix)
  local start = timestamp - maxAge * 1000
  local jobIds = rcall("ZREVRANGEBYSCORE", targetSet, start, "-inf")
  for i, jobId in ipairs(jobIds) do
    removeJob(jobId, false, prefix)
  end
  rcall("ZREMRANGEBYSCORE", targetSet, "-inf", start)
end
--[[
  Functions to remove jobs by max count.
]]
-- Includes
local function removeJobsByMaxCount(maxCount, targetSet, prefix)
  local start = maxCount
  local jobIds = rcall("ZREVRANGE", targetSet, start, -1)
  for i, jobId in ipairs(jobIds) do
    removeJob(jobId, false, prefix)
  end
  rcall("ZREMRANGEBYRANK", targetSet, 0, -(maxCount + 1))
end
--[[
  Function to trim events, default 10000.
]]
local function trimEvents(metaKey, eventStreamKey)
  local maxEvents = rcall("HGET", metaKey, "opts.maxLenEvents")
  if maxEvents ~= false then
    rcall("XTRIM", eventStreamKey, "MAXLEN", "~", maxEvents)
  else
    rcall("XTRIM", eventStreamKey, "MAXLEN", "~", 10000)
  end
end
-- Check if we need to check for stalled jobs now.
local function checkStalledJobs(stalledKey, waitKey, activeKey, failedKey,
                                stalledCheckKey, metaKey, pausedKey,
                                eventStreamKey, maxStalledJobCount,
                                queueKeyPrefix, timestamp, maxCheckTime)
    if rcall("EXISTS", stalledCheckKey) == 1 then return {{}, {}} end
    rcall("SET", stalledCheckKey, timestamp, "PX", maxCheckTime)
    -- Trim events before emiting them to avoid trimming events emitted in this script
    trimEvents(metaKey, eventStreamKey)
    -- Move all stalled jobs to wait
    local stalling = rcall('SMEMBERS', stalledKey)
    local stalled = {}
    local failed = {}
    if (#stalling > 0) then
        rcall('DEL', stalledKey)
        local MAX_STALLED_JOB_COUNT = tonumber(maxStalledJobCount)
        -- Remove from active list
        for i, jobId in ipairs(stalling) do
            if string.sub(jobId, 1, 2) == "0:" then
                -- If the jobId is a delay marker ID we just remove it.
                rcall("LREM", activeKey, 1, jobId)
            else
                local jobKey = queueKeyPrefix .. jobId
                -- Check that the lock is also missing, then we can handle this job as really stalled.
                if (rcall("EXISTS", jobKey .. ":lock") == 0) then
                    --  Remove from the active queue.
                    local removed = rcall("LREM", activeKey, 1, jobId)
                    if (removed > 0) then
                        -- If this job has been stalled too many times, such as if it crashes the worker, then fail it.
                        local stalledCount =
                            rcall("HINCRBY", jobKey, "stalledCounter", 1)
                        if (stalledCount > MAX_STALLED_JOB_COUNT) then
                            local rawOpts = rcall("HGET", jobKey, "opts")
                            local opts = cjson.decode(rawOpts)
                            local removeOnFailType = type(opts["removeOnFail"])
                            rcall("ZADD", failedKey, timestamp, jobId)
                            local failedReason =
                                "job stalled more than allowable limit"
                            rcall("HMSET", jobKey, "failedReason", failedReason,
                                  "finishedOn", timestamp)
                            rcall("XADD", eventStreamKey, "*", "event",
                                  "failed", "jobId", jobId, 'prev', 'active',
                                  'failedReason', failedReason)
                            if removeOnFailType == "number" then
                                removeJobsByMaxCount(opts["removeOnFail"],
                                                     failedKey, queueKeyPrefix)
                            elseif removeOnFailType == "boolean" then
                                if opts["removeOnFail"] then
                                    removeJob(jobId, false, queueKeyPrefix)
                                    rcall("ZREM", failedKey, jobId)
                                end
                            elseif removeOnFailType ~= "nil" then
                                local maxAge = opts["removeOnFail"]["age"]
                                local maxCount = opts["removeOnFail"]["count"]
                                if maxAge ~= nil then
                                    removeJobsByMaxAge(timestamp, maxAge,
                                                       failedKey, queueKeyPrefix)
                                end
                                if maxCount ~= nil and maxCount > 0 then
                                    removeJobsByMaxCount(maxCount, failedKey,
                                                         queueKeyPrefix)
                                end
                            end
                            table.insert(failed, jobId)
                        else
                            local target =
                                getTargetQueueList(metaKey, waitKey, pausedKey)
                            -- Move the job back to the wait queue, to immediately be picked up by a waiting worker.
                            rcall("RPUSH", target, jobId)
                            rcall("XADD", eventStreamKey, "*", "event",
                                  "waiting", "jobId", jobId, 'prev', 'active')
                            -- Emit the stalled event
                            rcall("XADD", eventStreamKey, "*", "event",
                                  "stalled", "jobId", jobId)
                            table.insert(stalled, jobId)
                        end
                    end
                end
            end
        end
    end
    -- Mark potentially stalled jobs
    local active = rcall('LRANGE', activeKey, 0, -1)
    if (#active > 0) then
        for from, to in batches(#active, 7000) do
            rcall('SADD', stalledKey, unpack(active, from, to))
        end
    end
    return {failed, stalled}
end
return checkStalledJobs(KEYS[1], KEYS[2], KEYS[3], KEYS[4], KEYS[5], KEYS[6],
                        KEYS[7], KEYS[8], ARGV[1], ARGV[2], ARGV[3], ARGV[4])
`;ly.moveStalledJobsToWait={name:"moveStalledJobsToWait",content:Ple,keys:8}});var CN=E(uy=>{"use strict";Object.defineProperty(uy,"__esModule",{value:!0});uy.moveToActive=void 0;var Rle=`--[[
  Move next job to be processed to active, lock it and fetch its data. The job
  may be delayed, in that case we need to move it to the delayed set instead.
  This operation guarantees that the worker owns the job during the lock
  expiration time. The worker is responsible of keeping the lock fresh
  so that no other worker picks this job again.
  Input:
    KEYS[1] wait key
    KEYS[2] active key
    KEYS[3] prioritized key
    KEYS[4] stream events key
    KEYS[5] stalled key
    -- Rate limiting
    KEYS[6] rate limiter key
    KEYS[7] delayed key
    -- Promote delayed jobs
    KEYS[8] paused key
    KEYS[9] meta key
    KEYS[10] pc priority counter
    -- Arguments
    ARGV[1] key prefix
    ARGV[2] timestamp
    ARGV[3] optional job ID
    ARGV[4] opts
    opts - token - lock token
    opts - lockDuration
    opts - limiter
]]
local rcall = redis.call
local waitKey = KEYS[1]
local activeKey = KEYS[2]
local rateLimiterKey = KEYS[6]
local delayedKey = KEYS[7]
local opts = cmsgpack.unpack(ARGV[4])
-- Includes
--[[
  Function to return the next delayed job timestamp.
]] 
local function getNextDelayedTimestamp(delayedKey)
  local result = rcall("ZRANGE", delayedKey, 0, 0, "WITHSCORES")
  if #result then
    local nextTimestamp = tonumber(result[2])
    if (nextTimestamp ~= nil) then 
      nextTimestamp = nextTimestamp / 0x1000
    end
    return nextTimestamp
  end
end
local function getRateLimitTTL(maxJobs, rateLimiterKey)
  if maxJobs and maxJobs <= tonumber(rcall("GET", rateLimiterKey) or 0) then
    local pttl = rcall("PTTL", rateLimiterKey)
    if pttl == 0 then
      rcall("DEL", rateLimiterKey)
    end
    if pttl > 0 then
      return pttl
    end
  end
  return 0
end
--[[
  Function to check for the meta.paused key to decide if we are paused or not
  (since an empty list and !EXISTS are not really the same).
]]
local function getTargetQueueList(queueMetaKey, waitKey, pausedKey)
  if rcall("HEXISTS", queueMetaKey, "paused") ~= 1 then
    return waitKey, false
  else
    return pausedKey, true
  end
end
--[[
  Function to move job from prioritized state to active.
]]
local function moveJobFromPriorityToActive(priorityKey, activeKey, priorityCounterKey)
  local prioritizedJob = rcall("ZPOPMIN", priorityKey)
  if #prioritizedJob > 0 then
    rcall("LPUSH", activeKey, prioritizedJob[1])
    return prioritizedJob[1]
  else
    rcall("DEL", priorityCounterKey)
  end
end
--[[
  Function to move job from wait state to active.
  Input:
    keys[1] wait key
    keys[2] active key
    keys[3] prioritized key
    keys[4] stream events key
    keys[5] stalled key
    -- Rate limiting
    keys[6] rate limiter key
    keys[7] delayed key
    keys[8] paused key
    keys[9] meta key
    keys[10] pc priority counter
    opts - token - lock token
    opts - lockDuration
    opts - limiter
]]
-- Includes
--[[
  Function to push back job considering priority in front of same prioritized jobs.
]]
local function pushBackJobWithPriority(prioritizedKey, priority, jobId)
  -- in order to put it at front of same prioritized jobs
  -- we consider prioritized counter as 0
  local score = priority * 0x100000000
  rcall("ZADD", prioritizedKey, score, jobId)
end
local function prepareJobForProcessing(keys, keyPrefix, targetKey, jobId, processedOn,
    maxJobs, expireTime, opts)
  local jobKey = keyPrefix .. jobId
  -- Check if we need to perform rate limiting.
  if maxJobs then
    local rateLimiterKey = keys[6];
    -- check if we exceeded rate limit, we need to remove the job and return expireTime
    if expireTime > 0 then
      -- remove from active queue and add back to the wait list
      rcall("LREM", keys[2], 1, jobId)
      local priority = tonumber(rcall("HGET", jobKey, "priority")) or 0
      if priority == 0 then
        rcall("RPUSH", targetKey, jobId)
      else
        pushBackJobWithPriority(keys[3], priority, jobId)
      end
      -- Return when we can process more jobs
      return {0, 0, expireTime, 0}
    end
    local jobCounter = tonumber(rcall("INCR", rateLimiterKey))
    if jobCounter == 1 then
      local limiterDuration = opts['limiter'] and opts['limiter']['duration']
      local integerDuration = math.floor(math.abs(limiterDuration))
      rcall("PEXPIRE", rateLimiterKey, integerDuration)
    end
  end
  local lockKey = jobKey .. ':lock'
  -- get a lock
  if opts['token'] ~= "0" then
    rcall("SET", lockKey, opts['token'], "PX", opts['lockDuration'])
  end
  rcall("XADD", keys[4], "*", "event", "active", "jobId", jobId, "prev", "waiting")
  rcall("HSET", jobKey, "processedOn", processedOn)
  rcall("HINCRBY", jobKey, "attemptsMade", 1)
  return {rcall("HGETALL", jobKey), jobId, 0, 0} -- get job data
end
--[[
  Updates the delay set, by moving delayed jobs that should
  be processed now to "wait".
     Events:
      'waiting'
]]
-- Includes
--[[
  Function to add job considering priority.
]]
-- Includes
--[[
  Function priority marker to wait if needed
  in order to wake up our workers and to respect priority
  order as much as possible
]]
local function addPriorityMarkerIfNeeded(waitKey)
  local waitLen = rcall("LLEN", waitKey)
  if waitLen == 0 then
    rcall("LPUSH", waitKey, "0:0")
  end
end
local function addJobWithPriority(waitKey, prioritizedKey, priority, paused, jobId, priorityCounterKey)
  local prioCounter = rcall("INCR", priorityCounterKey)
  local score = priority * 0x100000000 + bit.band(prioCounter, 0xffffffffffff)
  rcall("ZADD", prioritizedKey, score, jobId)
  if not paused then
    addPriorityMarkerIfNeeded(waitKey)
  end
end
-- Try to get as much as 1000 jobs at once
local function promoteDelayedJobs(delayedKey, waitKey, targetKey, prioritizedKey,
                                  eventStreamKey, prefix, timestamp, paused, priorityCounterKey)
    local jobs = rcall("ZRANGEBYSCORE", delayedKey, 0, (timestamp + 1) * 0x1000, "LIMIT", 0, 1000)
    if (#jobs > 0) then
        rcall("ZREM", delayedKey, unpack(jobs))
        for _, jobId in ipairs(jobs) do
            local jobKey = prefix .. jobId
            local priority =
                tonumber(rcall("HGET", jobKey, "priority")) or 0
            if priority == 0 then
                -- LIFO or FIFO
                rcall("LPUSH", targetKey, jobId)
            else
                addJobWithPriority(waitKey, prioritizedKey, priority, paused,
                  jobId, priorityCounterKey)
            end
            -- Emit waiting event
            rcall("XADD", eventStreamKey, "*", "event", "waiting", "jobId",
                  jobId, "prev", "delayed")
            rcall("HSET", jobKey, "delay", 0)
        end
    end
end
local target, paused = getTargetQueueList(KEYS[9], waitKey, KEYS[8])
-- Check if there are delayed jobs that we can move to wait.
promoteDelayedJobs(delayedKey, waitKey, target, KEYS[3], KEYS[4], ARGV[1],
                   ARGV[2], paused, KEYS[10])
local maxJobs = tonumber(opts['limiter'] and opts['limiter']['max'])
local expireTime = getRateLimitTTL(maxJobs, rateLimiterKey)
local jobId = nil
if ARGV[3] ~= "" then
    jobId = ARGV[3]
    -- clean stalled key
    rcall("SREM", KEYS[5], jobId)
end
if not jobId or (jobId and string.sub(jobId, 1, 2) == "0:") then
    -- If jobId is special ID 0:delay, then there is no job to process
    if jobId then rcall("LREM", activeKey, 1, jobId) end
    -- Check if we are rate limited first.
    if expireTime > 0 then return {0, 0, expireTime, 0} end
    -- paused queue
    if paused then return {0, 0, 0, 0} end
    -- no job ID, try non-blocking move from wait to active
    jobId = rcall("RPOPLPUSH", waitKey, activeKey)
    -- Since it is possible that between a call to BRPOPLPUSH and moveToActive
    -- another script puts a new maker in wait, we need to check again.
    if jobId and string.sub(jobId, 1, 2) == "0:" then
        rcall("LREM", activeKey, 1, jobId)
        jobId = rcall("RPOPLPUSH", waitKey, activeKey)
    end
end
if jobId then
    return prepareJobForProcessing(KEYS, ARGV[1], target, jobId, ARGV[2],
                                   maxJobs, expireTime, opts)
else
    jobId = moveJobFromPriorityToActive(KEYS[3], activeKey, KEYS[10])
    if jobId then
        return prepareJobForProcessing(KEYS, ARGV[1], target, jobId, ARGV[2],
                                       maxJobs, expireTime, opts)
    end
end
-- Return the timestamp for the next delayed job if any.
local nextTimestamp = getNextDelayedTimestamp(delayedKey)
if (nextTimestamp ~= nil) then return {0, 0, 0, nextTimestamp} end
return {0, 0, 0, 0}
`;uy.moveToActive={name:"moveToActive",content:Rle,keys:10}});var TN=E(cy=>{"use strict";Object.defineProperty(cy,"__esModule",{value:!0});cy.moveToDelayed=void 0;var Lle=`--[[
  Moves job from active to delayed set.
  Input:
    KEYS[1] wait key
    KEYS[2] active key
    KEYS[3] prioritized key
    KEYS[4] delayed key
    KEYS[5] job key
    KEYS[6] events stream
    KEYS[7] paused key
    KEYS[8] meta key
    ARGV[1] key prefix
    ARGV[2] timestamp
    ARGV[3] delayedTimestamp
    ARGV[4] the id of the job
    ARGV[5] queue token
    ARGV[6] delay value
  Output:
    0 - OK
   -1 - Missing job.
   -3 - Job not in active set.
  Events:
    - delayed key.
]]
local rcall = redis.call
-- Includes
--[[
  Add delay marker if needed.
]]
-- Includes
--[[
  Function to return the next delayed job timestamp.
]] 
local function getNextDelayedTimestamp(delayedKey)
  local result = rcall("ZRANGE", delayedKey, 0, 0, "WITHSCORES")
  if #result then
    local nextTimestamp = tonumber(result[2])
    if (nextTimestamp ~= nil) then 
      nextTimestamp = nextTimestamp / 0x1000
    end
    return nextTimestamp
  end
end
local function addDelayMarkerIfNeeded(targetKey, delayedKey)
  if rcall("LLEN", targetKey) == 0 then
    local nextTimestamp = getNextDelayedTimestamp(delayedKey)
    if nextTimestamp ~= nil then
      rcall("LPUSH", targetKey, "0:" .. nextTimestamp)
    end
  end
end
--[[
  Function to check for the meta.paused key to decide if we are paused or not
  (since an empty list and !EXISTS are not really the same).
]]
local function getTargetQueueList(queueMetaKey, waitKey, pausedKey)
  if rcall("HEXISTS", queueMetaKey, "paused") ~= 1 then
    return waitKey, false
  else
    return pausedKey, true
  end
end
--[[
  Updates the delay set, by moving delayed jobs that should
  be processed now to "wait".
     Events:
      'waiting'
]]
-- Includes
--[[
  Function to add job considering priority.
]]
-- Includes
--[[
  Function priority marker to wait if needed
  in order to wake up our workers and to respect priority
  order as much as possible
]]
local function addPriorityMarkerIfNeeded(waitKey)
  local waitLen = rcall("LLEN", waitKey)
  if waitLen == 0 then
    rcall("LPUSH", waitKey, "0:0")
  end
end
local function addJobWithPriority(waitKey, prioritizedKey, priority, paused, jobId, priorityCounterKey)
  local prioCounter = rcall("INCR", priorityCounterKey)
  local score = priority * 0x100000000 + bit.band(prioCounter, 0xffffffffffff)
  rcall("ZADD", prioritizedKey, score, jobId)
  if not paused then
    addPriorityMarkerIfNeeded(waitKey)
  end
end
-- Try to get as much as 1000 jobs at once
local function promoteDelayedJobs(delayedKey, waitKey, targetKey, prioritizedKey,
                                  eventStreamKey, prefix, timestamp, paused, priorityCounterKey)
    local jobs = rcall("ZRANGEBYSCORE", delayedKey, 0, (timestamp + 1) * 0x1000, "LIMIT", 0, 1000)
    if (#jobs > 0) then
        rcall("ZREM", delayedKey, unpack(jobs))
        for _, jobId in ipairs(jobs) do
            local jobKey = prefix .. jobId
            local priority =
                tonumber(rcall("HGET", jobKey, "priority")) or 0
            if priority == 0 then
                -- LIFO or FIFO
                rcall("LPUSH", targetKey, jobId)
            else
                addJobWithPriority(waitKey, prioritizedKey, priority, paused,
                  jobId, priorityCounterKey)
            end
            -- Emit waiting event
            rcall("XADD", eventStreamKey, "*", "event", "waiting", "jobId",
                  jobId, "prev", "delayed")
            rcall("HSET", jobKey, "delay", 0)
        end
    end
end
local jobKey = KEYS[5]
if rcall("EXISTS", jobKey) == 1 then
  local delayedKey = KEYS[4]
  if ARGV[5] ~= "0" then
    local lockKey = jobKey .. ':lock'
    if rcall("GET", lockKey) == ARGV[5] then
      rcall("DEL", lockKey)
    else
      return -2
    end
  end
  local jobId = ARGV[4]
  local score = tonumber(ARGV[3])
  local delayedTimestamp = (score / 0x1000)
  local numRemovedElements = rcall("LREM", KEYS[2], -1, jobId)
  if numRemovedElements < 1 then
    return -3
  end
  rcall("HSET", jobKey, "delay", ARGV[6])
  local maxEvents = rcall("HGET", KEYS[8], "opts.maxLenEvents") or 10000
  rcall("ZADD", delayedKey, score, jobId)
  rcall("XADD", KEYS[6], "MAXLEN", "~", maxEvents, "*", "event", "delayed",
    "jobId", jobId, "delay", delayedTimestamp)
  -- Check if we need to push a marker job to wake up sleeping workers.
  local target = getTargetQueueList(KEYS[8], KEYS[1], KEYS[7])
  addDelayMarkerIfNeeded(target, delayedKey)
  return 0
else
  return -1
end
`;cy.moveToDelayed={name:"moveToDelayed",content:Lle,keys:8}});var AN=E(fy=>{"use strict";Object.defineProperty(fy,"__esModule",{value:!0});fy.moveToFinished=void 0;var Dle=`--[[
  Move job from active to a finished status (completed o failed)
  A job can only be moved to completed if it was active.
  The job must be locked before it can be moved to a finished status,
  and the lock must be released in this script.
    Input:
      KEYS[1] wait key
      KEYS[2] active key
      KEYS[3] prioritized key
      KEYS[4] event stream key
      KEYS[5] stalled key
      -- Rate limiting
      KEYS[6] rate limiter key
      KEYS[7] delayed key
      KEYS[8] paused key
      KEYS[9] meta key
      KEYS[10] pc priority counter
      KEYS[11] completed/failed key
      KEYS[12] jobId key
      KEYS[13] metrics key
      ARGV[1]  jobId
      ARGV[2]  timestamp
      ARGV[3]  msg property returnvalue / failedReason
      ARGV[4]  return value / failed reason
      ARGV[5]  target (completed/failed)
      ARGV[6]  event data (? maybe just send jobid).
      ARGV[7]  fetch next?
      ARGV[8]  keys prefix
      ARGV[9]  opts
      opts - token - lock token
      opts - keepJobs
      opts - lockDuration - lock duration in milliseconds
      opts - attempts max attempts
      opts - attemptsMade
      opts - maxMetricsSize
      opts - fpof - fail parent on fail
      opts - rdof - remove dependency on fail
    Output:
      0 OK
      -1 Missing key.
      -2 Missing lock.
      -3 Job not in active set
      -4 Job has pending dependencies
      -6 Lock is not owned by this client
    Events:
      'completed/failed'
]]
local rcall = redis.call
--- Includes
--[[
  Functions to collect metrics based on a current and previous count of jobs.
  Granualarity is fixed at 1 minute.
]] 
--[[
  Function to loop in batches.
  Just a bit of warning, some commands as ZREM
  could receive a maximum of 7000 parameters per call.
]]
local function batches(n, batchSize)
  local i = 0
  return function()
    local from = i * batchSize + 1
    i = i + 1
    if (from <= n) then
      local to = math.min(from + batchSize - 1, n)
      return from, to
    end
  end
end
local function collectMetrics(metaKey, dataPointsList, maxDataPoints,
                                 timestamp)
    -- Increment current count
    local count = rcall("HINCRBY", metaKey, "count", 1) - 1
    -- Compute how many data points we need to add to the list, N.
    local prevTS = rcall("HGET", metaKey, "prevTS")
    if not prevTS then
        -- If prevTS is nil, set it to the current timestamp
        rcall("HSET", metaKey, "prevTS", timestamp, "prevCount", 0)
        return
    end
    local N = math.floor((timestamp - prevTS) / 60000)
    if N > 0 then
        local delta = count - rcall("HGET", metaKey, "prevCount")
        -- If N > 1, add N-1 zeros to the list
        if N > 1 then
            local points = {}
            points[1] = delta
            for i = 2, N do
                points[i] = 0
            end
            for from, to in batches(#points, 7000) do
                rcall("LPUSH", dataPointsList, unpack(points, from, to))
            end
        else
            -- LPUSH delta to the list
            rcall("LPUSH", dataPointsList, delta)
        end
        -- LTRIM to keep list to its max size
        rcall("LTRIM", dataPointsList, 0, maxDataPoints - 1)
        -- update prev count with current count
        rcall("HSET", metaKey, "prevCount", count, "prevTS", timestamp)
    end
end
--[[
  Function to return the next delayed job timestamp.
]] 
local function getNextDelayedTimestamp(delayedKey)
  local result = rcall("ZRANGE", delayedKey, 0, 0, "WITHSCORES")
  if #result then
    local nextTimestamp = tonumber(result[2])
    if (nextTimestamp ~= nil) then 
      nextTimestamp = nextTimestamp / 0x1000
    end
    return nextTimestamp
  end
end
--[[
  Function to move job from prioritized state to active.
]]
local function moveJobFromPriorityToActive(priorityKey, activeKey, priorityCounterKey)
  local prioritizedJob = rcall("ZPOPMIN", priorityKey)
  if #prioritizedJob > 0 then
    rcall("LPUSH", activeKey, prioritizedJob[1])
    return prioritizedJob[1]
  else
    rcall("DEL", priorityCounterKey)
  end
end
--[[
  Function to move job from wait state to active.
  Input:
    keys[1] wait key
    keys[2] active key
    keys[3] prioritized key
    keys[4] stream events key
    keys[5] stalled key
    -- Rate limiting
    keys[6] rate limiter key
    keys[7] delayed key
    keys[8] paused key
    keys[9] meta key
    keys[10] pc priority counter
    opts - token - lock token
    opts - lockDuration
    opts - limiter
]]
-- Includes
--[[
  Function to push back job considering priority in front of same prioritized jobs.
]]
local function pushBackJobWithPriority(prioritizedKey, priority, jobId)
  -- in order to put it at front of same prioritized jobs
  -- we consider prioritized counter as 0
  local score = priority * 0x100000000
  rcall("ZADD", prioritizedKey, score, jobId)
end
local function prepareJobForProcessing(keys, keyPrefix, targetKey, jobId, processedOn,
    maxJobs, expireTime, opts)
  local jobKey = keyPrefix .. jobId
  -- Check if we need to perform rate limiting.
  if maxJobs then
    local rateLimiterKey = keys[6];
    -- check if we exceeded rate limit, we need to remove the job and return expireTime
    if expireTime > 0 then
      -- remove from active queue and add back to the wait list
      rcall("LREM", keys[2], 1, jobId)
      local priority = tonumber(rcall("HGET", jobKey, "priority")) or 0
      if priority == 0 then
        rcall("RPUSH", targetKey, jobId)
      else
        pushBackJobWithPriority(keys[3], priority, jobId)
      end
      -- Return when we can process more jobs
      return {0, 0, expireTime, 0}
    end
    local jobCounter = tonumber(rcall("INCR", rateLimiterKey))
    if jobCounter == 1 then
      local limiterDuration = opts['limiter'] and opts['limiter']['duration']
      local integerDuration = math.floor(math.abs(limiterDuration))
      rcall("PEXPIRE", rateLimiterKey, integerDuration)
    end
  end
  local lockKey = jobKey .. ':lock'
  -- get a lock
  if opts['token'] ~= "0" then
    rcall("SET", lockKey, opts['token'], "PX", opts['lockDuration'])
  end
  rcall("XADD", keys[4], "*", "event", "active", "jobId", jobId, "prev", "waiting")
  rcall("HSET", jobKey, "processedOn", processedOn)
  rcall("HINCRBY", jobKey, "attemptsMade", 1)
  return {rcall("HGETALL", jobKey), jobId, 0, 0} -- get job data
end
--[[
  Function to recursively move from waitingChildren to failed.
]]
-- Includes
--[[
  Validate and move parent to active if needed.
]]
-- Includes
--[[
  Add delay marker if needed.
]]
-- Includes
local function addDelayMarkerIfNeeded(targetKey, delayedKey)
  if rcall("LLEN", targetKey) == 0 then
    local nextTimestamp = getNextDelayedTimestamp(delayedKey)
    if nextTimestamp ~= nil then
      rcall("LPUSH", targetKey, "0:" .. nextTimestamp)
    end
  end
end
--[[
  Function to add job considering priority.
]]
-- Includes
--[[
  Function priority marker to wait if needed
  in order to wake up our workers and to respect priority
  order as much as possible
]]
local function addPriorityMarkerIfNeeded(waitKey)
  local waitLen = rcall("LLEN", waitKey)
  if waitLen == 0 then
    rcall("LPUSH", waitKey, "0:0")
  end
end
local function addJobWithPriority(waitKey, prioritizedKey, priority, paused, jobId, priorityCounterKey)
  local prioCounter = rcall("INCR", priorityCounterKey)
  local score = priority * 0x100000000 + bit.band(prioCounter, 0xffffffffffff)
  rcall("ZADD", prioritizedKey, score, jobId)
  if not paused then
    addPriorityMarkerIfNeeded(waitKey)
  end
end
--[[
  Function to check for the meta.paused key to decide if we are paused or not
  (since an empty list and !EXISTS are not really the same).
]]
local function getTargetQueueList(queueMetaKey, waitKey, pausedKey)
  if rcall("HEXISTS", queueMetaKey, "paused") ~= 1 then
    return waitKey, false
  else
    return pausedKey, true
  end
end
local function moveParentToWaitIfNeeded(parentQueueKey, parentDependenciesKey, parentKey, parentId, timestamp)
  local isParentActive = rcall("ZSCORE", parentQueueKey .. ":waiting-children", parentId)
  if rcall("SCARD", parentDependenciesKey) == 0 and isParentActive then 
    rcall("ZREM", parentQueueKey .. ":waiting-children", parentId)
    local parentWaitKey = parentQueueKey .. ":wait"
    local parentTarget, paused = getTargetQueueList(parentQueueKey .. ":meta", parentWaitKey,
      parentQueueKey .. ":paused")
    local jobAttributes = rcall("HMGET", parentKey, "priority", "delay")
    local priority = tonumber(jobAttributes[1]) or 0
    local delay = tonumber(jobAttributes[2]) or 0
    if delay > 0 then
      local delayedTimestamp = tonumber(timestamp) + delay 
      local score = delayedTimestamp * 0x1000
      local parentDelayedKey = parentQueueKey .. ":delayed" 
      rcall("ZADD", parentDelayedKey, score, parentId)
      rcall("XADD", parentQueueKey .. ":events", "*", "event", "delayed", "jobId", parentId,
        "delay", delayedTimestamp)
      addDelayMarkerIfNeeded(parentTarget, parentDelayedKey)
    else
      if priority == 0 then
        rcall("RPUSH", parentTarget, parentId)
      else
        addJobWithPriority(parentWaitKey, parentQueueKey .. ":prioritized", priority, paused,
          parentId, parentQueueKey .. ":pc")
      end
      rcall("XADD", parentQueueKey .. ":events", "*", "event", "waiting", "jobId", parentId,
        "prev", "waiting-children")
    end
  end
end
local function moveParentFromWaitingChildrenToFailed( parentQueueKey, parentKey, parentId, jobIdKey, timestamp)
  if rcall("ZREM", parentQueueKey .. ":waiting-children", parentId) == 1 then
    rcall("ZADD", parentQueueKey .. ":failed", timestamp, parentId)
    local failedReason = "child " .. jobIdKey .. " failed"
    rcall("HMSET", parentKey, "failedReason", failedReason, "finishedOn", timestamp)
    rcall("XADD", parentQueueKey .. ":events", "*", "event", "failed", "jobId", parentId, "failedReason",
      failedReason, "prev", "waiting-children")
    local rawParentData = rcall("HGET", parentKey, "parent")
    if rawParentData ~= false then
      local parentData = cjson.decode(rawParentData)
      if parentData['fpof'] then
        moveParentFromWaitingChildrenToFailed(
          parentData['queueKey'],
          parentData['queueKey'] .. ':' .. parentData['id'],
          parentData['id'],
          parentKey,
          timestamp
        )
      elseif parentData['rdof'] then
        local grandParentKey = parentData['queueKey'] .. ':' .. parentData['id']
        local grandParentDependenciesSet = grandParentKey .. ":dependencies"
        if rcall("SREM", grandParentDependenciesSet, parentKey) == 1 then
          moveParentToWaitIfNeeded(parentData['queueKey'], grandParentDependenciesSet,
            grandParentKey, parentData['id'], timestamp)
        end
      end
    end
  end
end
--[[
  Updates the delay set, by moving delayed jobs that should
  be processed now to "wait".
     Events:
      'waiting'
]]
-- Includes
-- Try to get as much as 1000 jobs at once
local function promoteDelayedJobs(delayedKey, waitKey, targetKey, prioritizedKey,
                                  eventStreamKey, prefix, timestamp, paused, priorityCounterKey)
    local jobs = rcall("ZRANGEBYSCORE", delayedKey, 0, (timestamp + 1) * 0x1000, "LIMIT", 0, 1000)
    if (#jobs > 0) then
        rcall("ZREM", delayedKey, unpack(jobs))
        for _, jobId in ipairs(jobs) do
            local jobKey = prefix .. jobId
            local priority =
                tonumber(rcall("HGET", jobKey, "priority")) or 0
            if priority == 0 then
                -- LIFO or FIFO
                rcall("LPUSH", targetKey, jobId)
            else
                addJobWithPriority(waitKey, prioritizedKey, priority, paused,
                  jobId, priorityCounterKey)
            end
            -- Emit waiting event
            rcall("XADD", eventStreamKey, "*", "event", "waiting", "jobId",
                  jobId, "prev", "delayed")
            rcall("HSET", jobKey, "delay", 0)
        end
    end
end
--[[
  Functions to remove jobs by max age.
]]
-- Includes
--[[
  Function to remove job.
]]
-- Includes
--[[
  Check if this job has a parent. If so we will just remove it from
  the parent child list, but if it is the last child we should move the parent to "wait/paused"
  which requires code from "moveToFinished"
]]
--[[
  Functions to destructure job key.
  Just a bit of warning, these functions may be a bit slow and affect performance significantly.
]]
local getJobIdFromKey = function (jobKey)
  return string.match(jobKey, ".*:(.*)")
end
local getJobKeyPrefix = function (jobKey, jobId)
  return string.sub(jobKey, 0, #jobKey - #jobId)
end
local function moveParentToWait(parentPrefix, parentId, emitEvent)
  local parentTarget = getTargetQueueList(parentPrefix .. "meta", parentPrefix .. "wait", parentPrefix .. "paused")
  rcall("RPUSH", parentTarget, parentId)
  if emitEvent then
    local parentEventStream = parentPrefix .. "events"
    rcall("XADD", parentEventStream, "*", "event", "waiting", "jobId", parentId, "prev", "waiting-children")
  end
end
local function removeParentDependencyKey(jobKey, hard, parentKey, baseKey)
  if parentKey then
    local parentDependenciesKey = parentKey .. ":dependencies"
    local result = rcall("SREM", parentDependenciesKey, jobKey)
    if result > 0 then
      local pendingDependencies = rcall("SCARD", parentDependenciesKey)
      if pendingDependencies == 0 then
        local parentId = getJobIdFromKey(parentKey)
        local parentPrefix = getJobKeyPrefix(parentKey, parentId)
        local numRemovedElements = rcall("ZREM", parentPrefix .. "waiting-children", parentId)
        if numRemovedElements == 1 then
          if hard then
            if parentPrefix == baseKey then
              removeParentDependencyKey(parentKey, hard, nil, baseKey)
              rcall("DEL", parentKey, parentKey .. ':logs',
                parentKey .. ':dependencies', parentKey .. ':processed')
            else
              moveParentToWait(parentPrefix, parentId)
            end
          else
            moveParentToWait(parentPrefix, parentId, true)
          end
        end
      end
    end
  else
    local missedParentKey = rcall("HGET", jobKey, "parentKey")
    if( (type(missedParentKey) == "string") and missedParentKey ~= "" and (rcall("EXISTS", missedParentKey) == 1)) then
      local parentDependenciesKey = missedParentKey .. ":dependencies"
      local result = rcall("SREM", parentDependenciesKey, jobKey)
      if result > 0 then
        local pendingDependencies = rcall("SCARD", parentDependenciesKey)
        if pendingDependencies == 0 then
          local parentId = getJobIdFromKey(missedParentKey)
          local parentPrefix = getJobKeyPrefix(missedParentKey, parentId)
          local numRemovedElements = rcall("ZREM", parentPrefix .. "waiting-children", parentId)
          if numRemovedElements == 1 then
            if hard then
              if parentPrefix == baseKey then
                removeParentDependencyKey(missedParentKey, hard, nil, baseKey)
                rcall("DEL", missedParentKey, missedParentKey .. ':logs',
                  missedParentKey .. ':dependencies', missedParentKey .. ':processed')
              else
                moveParentToWait(parentPrefix, parentId)
              end
            else
              moveParentToWait(parentPrefix, parentId, true)
            end
          end
        end
      end
    end
  end
end
local function removeJob(jobId, hard, baseKey)
  local jobKey = baseKey .. jobId
  removeParentDependencyKey(jobKey, hard, nil, baseKey)
  rcall("DEL", jobKey, jobKey .. ':logs',
    jobKey .. ':dependencies', jobKey .. ':processed')
end
local function removeJobsByMaxAge(timestamp, maxAge, targetSet, prefix)
  local start = timestamp - maxAge * 1000
  local jobIds = rcall("ZREVRANGEBYSCORE", targetSet, start, "-inf")
  for i, jobId in ipairs(jobIds) do
    removeJob(jobId, false, prefix)
  end
  rcall("ZREMRANGEBYSCORE", targetSet, "-inf", start)
end
--[[
  Functions to remove jobs by max count.
]]
-- Includes
local function removeJobsByMaxCount(maxCount, targetSet, prefix)
  local start = maxCount
  local jobIds = rcall("ZREVRANGE", targetSet, start, -1)
  for i, jobId in ipairs(jobIds) do
    removeJob(jobId, false, prefix)
  end
  rcall("ZREMRANGEBYRANK", targetSet, 0, -(maxCount + 1))
end
--[[
  Function to trim events, default 10000.
]]
local function trimEvents(metaKey, eventStreamKey)
  local maxEvents = rcall("HGET", metaKey, "opts.maxLenEvents")
  if maxEvents ~= false then
    rcall("XTRIM", eventStreamKey, "MAXLEN", "~", maxEvents)
  else
    rcall("XTRIM", eventStreamKey, "MAXLEN", "~", 10000)
  end
end
--[[
  Validate and move or add dependencies to parent.
]]
-- Includes
local function updateParentDepsIfNeeded(parentKey, parentQueueKey, parentDependenciesKey,
  parentId, jobIdKey, returnvalue, timestamp )
  local processedSet = parentKey .. ":processed"
  rcall("HSET", processedSet, jobIdKey, returnvalue)
  moveParentToWaitIfNeeded(parentQueueKey, parentDependenciesKey, parentKey, parentId, timestamp)
end
local function getRateLimitTTL(maxJobs, rateLimiterKey)
  if maxJobs and maxJobs <= tonumber(rcall("GET", rateLimiterKey) or 0) then
    local pttl = rcall("PTTL", rateLimiterKey)
    if pttl == 0 then
      rcall("DEL", rateLimiterKey)
    end
    if pttl > 0 then
      return pttl
    end
  end
  return 0
end
local jobIdKey = KEYS[12]
if rcall("EXISTS", jobIdKey) == 1 then -- // Make sure job exists
    local opts = cmsgpack.unpack(ARGV[9])
    local token = opts['token']
    local attempts = opts['attempts']
    local attemptsMade = opts['attemptsMade']
    local maxMetricsSize = opts['maxMetricsSize']
    local maxCount = opts['keepJobs']['count']
    local maxAge = opts['keepJobs']['age']
    if token ~= "0" then
        local lockKey = jobIdKey .. ':lock'
        local lockToken = rcall("GET", lockKey)
        if lockToken == token then
            rcall("DEL", lockKey)
            rcall("SREM", KEYS[5], ARGV[1])
        else
            if lockToken then
                -- Lock exists but token does not match
                return -6
            else
                -- Lock is missing completely
                return -2
            end
        end
    end
    if rcall("SCARD", jobIdKey .. ":dependencies") ~= 0 then -- // Make sure it does not have pending dependencies
        return -4
    end
    local parentReferences = rcall("HMGET", jobIdKey, "parentKey", "parent")
    local parentKey = parentReferences[1] or ""
    local parentId = ""
    local parentQueueKey = ""
    if parentReferences[2] ~= false then
        local jsonDecodedParent = cjson.decode(parentReferences[2])
        parentId = jsonDecodedParent['id']
        parentQueueKey = jsonDecodedParent['queueKey']
    end
    local jobId = ARGV[1]
    local timestamp = ARGV[2]
    -- Remove from active list (if not active we shall return error)
    local numRemovedElements = rcall("LREM", KEYS[2], -1, jobId)
    if (numRemovedElements < 1) then return -3 end
    -- Trim events before emiting them to avoid trimming events emitted in this script
    trimEvents(KEYS[9], KEYS[4])
    -- If job has a parent we need to
    -- 1) remove this job id from parents dependencies
    -- 2) move the job Id to parent "processed" set
    -- 3) push the results into parent "results" list
    -- 4) if parent's dependencies is empty, then move parent to "wait/paused". Note it may be a different queue!.
    if parentId == "" and parentKey ~= "" then
        parentId = getJobIdFromKey(parentKey)
        parentQueueKey = getJobKeyPrefix(parentKey, ":" .. parentId)
    end
    if parentId ~= "" then
        if ARGV[5] == "completed" then
            local dependenciesSet = parentKey .. ":dependencies"
            if rcall("SREM", dependenciesSet, jobIdKey) == 1 then
                updateParentDepsIfNeeded(parentKey, parentQueueKey,
                                         dependenciesSet, parentId, jobIdKey,
                                         ARGV[4], timestamp)
            end
        else
            if opts['fpof'] then
                moveParentFromWaitingChildrenToFailed(parentQueueKey, parentKey,
                                            parentId, jobIdKey, timestamp)
            elseif opts['rdof'] then
                local dependenciesSet = parentKey .. ":dependencies"
                if rcall("SREM", dependenciesSet, jobIdKey) == 1 then
                    moveParentToWaitIfNeeded(parentQueueKey, dependenciesSet,
                        parentKey, parentId, timestamp)
                end
            end
        end
    end
    -- Remove job?
    if maxCount ~= 0 then
        local targetSet = KEYS[11]
        -- Add to complete/failed set
        rcall("ZADD", targetSet, timestamp, jobId)
        rcall("HMSET", jobIdKey, ARGV[3], ARGV[4], "finishedOn", timestamp)
        -- "returnvalue" / "failedReason" and "finishedOn"
        -- Remove old jobs?
        local prefix = ARGV[8]
        if maxAge ~= nil then
            removeJobsByMaxAge(timestamp, maxAge, targetSet, prefix)
        end
        if maxCount ~= nil and maxCount > 0 then
            removeJobsByMaxCount(maxCount, targetSet, prefix)
        end
    else
        rcall("DEL", jobIdKey, jobIdKey .. ':logs', jobIdKey .. ':processed')
        if parentKey ~= "" then
            removeParentDependencyKey(jobIdKey, false, parentKey)
        end
    end
    rcall("XADD", KEYS[4], "*", "event", ARGV[5], "jobId", jobId, ARGV[3],
          ARGV[4])
    if ARGV[5] == "failed" then
        if tonumber(attemptsMade) >= tonumber(attempts) then
            rcall("XADD", KEYS[4], "*", "event", "retries-exhausted", "jobId",
                  jobId, "attemptsMade", attemptsMade)
        end
    end
    -- Collect metrics
    if maxMetricsSize ~= "" then
        collectMetrics(KEYS[13], KEYS[13] .. ':data', maxMetricsSize, timestamp)
    end
    -- Try to get next job to avoid an extra roundtrip if the queue is not closing,
    -- and not rate limited.
    if (ARGV[7] == "1") then
        local target, paused = getTargetQueueList(KEYS[9], KEYS[1], KEYS[8])
        -- Check if there are delayed jobs that can be promoted
        promoteDelayedJobs(KEYS[7], KEYS[1], target, KEYS[3],
                           KEYS[4], ARGV[8], timestamp, paused, KEYS[10])
        local maxJobs = tonumber(opts['limiter'] and opts['limiter']['max'])
        -- Check if we are rate limited first.
        local expireTime = getRateLimitTTL(maxJobs, KEYS[6])
        if expireTime > 0 then return {0, 0, expireTime, 0} end
        -- paused queue
        if paused then return {0, 0, 0, 0} end
        jobId = rcall("RPOPLPUSH", KEYS[1], KEYS[2])
        if jobId then
            if string.sub(jobId, 1, 2) == "0:" then
                rcall("LREM", KEYS[2], 1, jobId)
                -- If jobId is special ID 0:delay (delay greater than 0), then there is no job to process
                -- but if ID is 0:0, then there is at least 1 prioritized job to process
                if jobId == "0:0" then
                    jobId = moveJobFromPriorityToActive(KEYS[3], KEYS[2], KEYS[10])
                    return prepareJobForProcessing(KEYS, ARGV[8], target, jobId, timestamp,
                        maxJobs, expireTime, opts)
                end
            else
                return prepareJobForProcessing(KEYS, ARGV[8], target, jobId, timestamp, maxJobs,
                    expireTime, opts)
            end
        else
            jobId = moveJobFromPriorityToActive(KEYS[3], KEYS[2], KEYS[10])
            if jobId then
                return prepareJobForProcessing(KEYS, ARGV[8], target, jobId, timestamp, maxJobs,
                    expireTime, opts)
            end
        end
        -- Return the timestamp for the next delayed job if any.
        local nextTimestamp = getNextDelayedTimestamp(KEYS[7])
        if nextTimestamp ~= nil then
            -- The result is guaranteed to be positive, since the
            -- ZRANGEBYSCORE command would have return a job otherwise.
            return {0, 0, 0, nextTimestamp}
        end
    end
    local waitLen = rcall("LLEN", KEYS[1])
    if waitLen == 0 then
        local activeLen = rcall("LLEN", KEYS[2])
        if activeLen == 0 then
            local prioritizedLen = rcall("ZCARD", KEYS[3])
            if prioritizedLen == 0 then
                rcall("XADD", KEYS[4], "*", "event", "drained")
            end
        end
    end
    return 0
else
    return -1
end
`;fy.moveToFinished={name:"moveToFinished",content:Dle,keys:13}});var MN=E(dy=>{"use strict";Object.defineProperty(dy,"__esModule",{value:!0});dy.moveToWaitingChildren=void 0;var Nle=`--[[
  Moves job from active to waiting children set.
  Input:
    KEYS[1] lock key
    KEYS[2] active key
    KEYS[3] waitChildrenKey key
    KEYS[4] job key
    ARGV[1] token
    ARGV[2] child key
    ARGV[3] timestamp
    ARGV[4] the id of the job
  Output:
    0 - OK
    1 - There are not pending dependencies.
   -1 - Missing job.
   -2 - Missing lock
   -3 - Job not in active set
]]
local rcall = redis.call
local function moveToWaitingChildren (activeKey, waitingChildrenKey, jobId, timestamp, lockKey, token)
  if token ~= "0" then
    if rcall("GET", lockKey) == token then
      rcall("DEL", lockKey)
    else
      return -2
    end
  end
  local score = tonumber(timestamp)
  local numRemovedElements = rcall("LREM", activeKey, -1, jobId)
  if(numRemovedElements < 1) then
    return -3
  end
  rcall("ZADD", waitingChildrenKey, score, jobId)
  return 0
end
if rcall("EXISTS", KEYS[4]) == 1 then
  if ARGV[2] ~= "" then
    if rcall("SISMEMBER", KEYS[4] .. ":dependencies", ARGV[2]) ~= 0 then
      return moveToWaitingChildren(KEYS[2], KEYS[3], ARGV[4], ARGV[3], KEYS[1], ARGV[1])
    end
    return 1
  else
    if rcall("SCARD", KEYS[4] .. ":dependencies") ~= 0 then 
      return moveToWaitingChildren(KEYS[2], KEYS[3], ARGV[4], ARGV[3], KEYS[1], ARGV[1])
    end
    return 1
  end
end
return -1
`;dy.moveToWaitingChildren={name:"moveToWaitingChildren",content:Nle,keys:4}});var kN=E(hy=>{"use strict";Object.defineProperty(hy,"__esModule",{value:!0});hy.obliterate=void 0;var jle=`--[[
  Completely obliterates a queue and all of its contents
  Input:
    KEYS[1] meta
    KEYS[2] base
    ARGV[1] count
    ARGV[2] force
]]
-- This command completely destroys a queue including all of its jobs, current or past 
-- leaving no trace of its existence. Since this script needs to iterate to find all the job
-- keys, consider that this call may be slow for very large queues.
-- The queue needs to be "paused" or it will return an error
-- If the queue has currently active jobs then the script by default will return error,
-- however this behaviour can be overrided using the 'force' option.
local maxCount = tonumber(ARGV[1])
local baseKey = KEYS[2]
local rcall = redis.call
-- Includes
--[[
  Functions to remove jobs.
]]
-- Includes
--[[
  Function to remove job.
]]
-- Includes
--[[
  Check if this job has a parent. If so we will just remove it from
  the parent child list, but if it is the last child we should move the parent to "wait/paused"
  which requires code from "moveToFinished"
]]
--[[
  Functions to destructure job key.
  Just a bit of warning, these functions may be a bit slow and affect performance significantly.
]]
local getJobIdFromKey = function (jobKey)
  return string.match(jobKey, ".*:(.*)")
end
local getJobKeyPrefix = function (jobKey, jobId)
  return string.sub(jobKey, 0, #jobKey - #jobId)
end
--[[
  Function to check for the meta.paused key to decide if we are paused or not
  (since an empty list and !EXISTS are not really the same).
]]
local function getTargetQueueList(queueMetaKey, waitKey, pausedKey)
  if rcall("HEXISTS", queueMetaKey, "paused") ~= 1 then
    return waitKey, false
  else
    return pausedKey, true
  end
end
local function moveParentToWait(parentPrefix, parentId, emitEvent)
  local parentTarget = getTargetQueueList(parentPrefix .. "meta", parentPrefix .. "wait", parentPrefix .. "paused")
  rcall("RPUSH", parentTarget, parentId)
  if emitEvent then
    local parentEventStream = parentPrefix .. "events"
    rcall("XADD", parentEventStream, "*", "event", "waiting", "jobId", parentId, "prev", "waiting-children")
  end
end
local function removeParentDependencyKey(jobKey, hard, parentKey, baseKey)
  if parentKey then
    local parentDependenciesKey = parentKey .. ":dependencies"
    local result = rcall("SREM", parentDependenciesKey, jobKey)
    if result > 0 then
      local pendingDependencies = rcall("SCARD", parentDependenciesKey)
      if pendingDependencies == 0 then
        local parentId = getJobIdFromKey(parentKey)
        local parentPrefix = getJobKeyPrefix(parentKey, parentId)
        local numRemovedElements = rcall("ZREM", parentPrefix .. "waiting-children", parentId)
        if numRemovedElements == 1 then
          if hard then
            if parentPrefix == baseKey then
              removeParentDependencyKey(parentKey, hard, nil, baseKey)
              rcall("DEL", parentKey, parentKey .. ':logs',
                parentKey .. ':dependencies', parentKey .. ':processed')
            else
              moveParentToWait(parentPrefix, parentId)
            end
          else
            moveParentToWait(parentPrefix, parentId, true)
          end
        end
      end
    end
  else
    local missedParentKey = rcall("HGET", jobKey, "parentKey")
    if( (type(missedParentKey) == "string") and missedParentKey ~= "" and (rcall("EXISTS", missedParentKey) == 1)) then
      local parentDependenciesKey = missedParentKey .. ":dependencies"
      local result = rcall("SREM", parentDependenciesKey, jobKey)
      if result > 0 then
        local pendingDependencies = rcall("SCARD", parentDependenciesKey)
        if pendingDependencies == 0 then
          local parentId = getJobIdFromKey(missedParentKey)
          local parentPrefix = getJobKeyPrefix(missedParentKey, parentId)
          local numRemovedElements = rcall("ZREM", parentPrefix .. "waiting-children", parentId)
          if numRemovedElements == 1 then
            if hard then
              if parentPrefix == baseKey then
                removeParentDependencyKey(missedParentKey, hard, nil, baseKey)
                rcall("DEL", missedParentKey, missedParentKey .. ':logs',
                  missedParentKey .. ':dependencies', missedParentKey .. ':processed')
              else
                moveParentToWait(parentPrefix, parentId)
              end
            else
              moveParentToWait(parentPrefix, parentId, true)
            end
          end
        end
      end
    end
  end
end
local function removeJob(jobId, hard, baseKey)
  local jobKey = baseKey .. jobId
  removeParentDependencyKey(jobKey, hard, nil, baseKey)
  rcall("DEL", jobKey, jobKey .. ':logs',
    jobKey .. ':dependencies', jobKey .. ':processed')
end
local function removeJobs(keys, hard, baseKey, max)
  for i, key in ipairs(keys) do
    removeJob(key, hard, baseKey)
  end
  return max - #keys
end
--[[
  Functions to remove jobs.
]]
-- Includes
local function getListItems(keyName, max)
  return rcall('LRANGE', keyName, 0, max - 1)
end
local function removeListJobs(keyName, hard, baseKey, max)
  local jobs = getListItems(keyName, max)
  local count = removeJobs(jobs, hard, baseKey, max)
  rcall("LTRIM", keyName, #jobs, -1)
  return count
end
-- Includes
--[[
  Function to loop in batches.
  Just a bit of warning, some commands as ZREM
  could receive a maximum of 7000 parameters per call.
]]
local function batches(n, batchSize)
  local i = 0
  return function()
    local from = i * batchSize + 1
    i = i + 1
    if (from <= n) then
      local to = math.min(from + batchSize - 1, n)
      return from, to
    end
  end
end
--[[
  Function to get ZSet items.
]]
local function getZSetItems(keyName, max)
  return rcall('ZRANGE', keyName, 0, max - 1)
end
local function removeZSetJobs(keyName, hard, baseKey, max)
  local jobs = getZSetItems(keyName, max)
  local count = removeJobs(jobs, hard, baseKey, max)
  if(#jobs > 0) then
    for from, to in batches(#jobs, 7000) do
      rcall("ZREM", keyName, unpack(jobs, from, to))
    end
  end
  return count
end
local function removeLockKeys(keys)
  for i, key in ipairs(keys) do
    rcall("DEL", baseKey .. key .. ':lock')
  end
end
-- 1) Check if paused, if not return with error.
if rcall("HEXISTS", KEYS[1], "paused") ~= 1 then
  return -1 -- Error, NotPaused
end
-- 2) Check if there are active jobs, if there are and not "force" return error.
local activeKey = baseKey .. 'active'
local activeJobs = getListItems(activeKey, maxCount)
if (#activeJobs > 0) then
  if(ARGV[2] == "") then 
    return -2 -- Error, ExistActiveJobs
  end
end
removeLockKeys(activeJobs)
maxCount = removeJobs(activeJobs, true, baseKey, maxCount)
rcall("LTRIM", activeKey, #activeJobs, -1)
if(maxCount <= 0) then
  return 1
end
local delayedKey = baseKey .. 'delayed'
maxCount = removeZSetJobs(delayedKey, true, baseKey, maxCount)
if(maxCount <= 0) then
  return 1
end
local completedKey = baseKey .. 'completed'
maxCount = removeZSetJobs(completedKey, true, baseKey, maxCount)
if(maxCount <= 0) then
  return 1
end
local waitKey = baseKey .. 'paused'
maxCount = removeListJobs(waitKey, true, baseKey, maxCount)
if(maxCount <= 0) then
  return 1
end
local prioritizedKey = baseKey .. 'prioritized'
maxCount = removeZSetJobs(prioritizedKey, true, baseKey, maxCount)
if(maxCount <= 0) then
  return 1
end
local failedKey = baseKey .. 'failed'
maxCount = removeZSetJobs(failedKey, true, baseKey, maxCount)
if(maxCount <= 0) then
  return 1
end
if(maxCount > 0) then
  rcall("DEL",
    baseKey .. 'events',
    baseKey .. 'delay', 
    baseKey .. 'stalled-check',
    baseKey .. 'stalled',
    baseKey .. 'id',
    baseKey .. 'pc',
    baseKey .. 'meta',
    baseKey .. 'repeat',
    baseKey .. 'metrics:completed',
    baseKey .. 'metrics:completed:data',
    baseKey .. 'metrics:failed',
    baseKey .. 'metrics:failed:data')
  return 0
else
  return 1
end
`;hy.obliterate={name:"obliterate",content:jle,keys:2}});var PN=E(py=>{"use strict";Object.defineProperty(py,"__esModule",{value:!0});py.pause=void 0;var Kle=`--[[
  Pauses or resumes a queue globably.
  Input:
    KEYS[1] 'wait' or 'paused''
    KEYS[2] 'paused' or 'wait'
    KEYS[3] 'meta'
    KEYS[4] 'prioritized'
    KEYS[5] events stream key
    ARGV[1] 'paused' or 'resumed'
  Event:
    publish paused or resumed event.
]]
local rcall = redis.call
-- Includes
--[[
  Function priority marker to wait if needed
  in order to wake up our workers and to respect priority
  order as much as possible
]]
local function addPriorityMarkerIfNeeded(waitKey)
  local waitLen = rcall("LLEN", waitKey)
  if waitLen == 0 then
    rcall("LPUSH", waitKey, "0:0")
  end
end
if rcall("EXISTS", KEYS[1]) == 1 then
  rcall("RENAME", KEYS[1], KEYS[2])
end
if ARGV[1] == "paused" then
  rcall("HSET", KEYS[3], "paused", 1)
else
  rcall("HDEL", KEYS[3], "paused")
  local priorityCount = rcall("ZCARD", KEYS[4])
  if priorityCount > 0 then
    addPriorityMarkerIfNeeded(KEYS[2])
  end
end
rcall("XADD", KEYS[5], "*", "event", ARGV[1]);
`;py.pause={name:"pause",content:Kle,keys:5}});var RN=E(my=>{"use strict";Object.defineProperty(my,"__esModule",{value:!0});my.promote=void 0;var qle=`--[[
  Promotes a job that is currently "delayed" to the "waiting" state
    Input:
      KEYS[1] 'delayed'
      KEYS[2] 'wait'
      KEYS[3] 'paused'
      KEYS[4] 'meta'
      KEYS[5] 'prioritized'
      KEYS[6] 'pc' priority counter
      KEYS[7] 'event stream'
      ARGV[1]  queue.toKey('')
      ARGV[2]  jobId
    Output:
       0 - OK
      -3 - Job not in delayed zset.
    Events:
      'waiting'
]]
local rcall = redis.call
local jobId = ARGV[2]
-- Includes
--[[
  Function to add job considering priority.
]]
-- Includes
--[[
  Function priority marker to wait if needed
  in order to wake up our workers and to respect priority
  order as much as possible
]]
local function addPriorityMarkerIfNeeded(waitKey)
  local waitLen = rcall("LLEN", waitKey)
  if waitLen == 0 then
    rcall("LPUSH", waitKey, "0:0")
  end
end
local function addJobWithPriority(waitKey, prioritizedKey, priority, paused, jobId, priorityCounterKey)
  local prioCounter = rcall("INCR", priorityCounterKey)
  local score = priority * 0x100000000 + bit.band(prioCounter, 0xffffffffffff)
  rcall("ZADD", prioritizedKey, score, jobId)
  if not paused then
    addPriorityMarkerIfNeeded(waitKey)
  end
end
--[[
  Function to check for the meta.paused key to decide if we are paused or not
  (since an empty list and !EXISTS are not really the same).
]]
local function getTargetQueueList(queueMetaKey, waitKey, pausedKey)
  if rcall("HEXISTS", queueMetaKey, "paused") ~= 1 then
    return waitKey, false
  else
    return pausedKey, true
  end
end
if rcall("ZREM", KEYS[1], jobId) == 1 then
  local jobKey = ARGV[1] .. jobId
  local priority = tonumber(rcall("HGET", jobKey, "priority")) or 0
  local target, paused = getTargetQueueList(KEYS[4], KEYS[2], KEYS[3])
  -- Remove delayed "marker" from the wait list if there is any.
  -- Since we are adding a job we do not need the marker anymore.
  local marker = rcall("LINDEX", target, 0)
  if marker and string.sub(marker, 1, 2) == "0:" then
    rcall("LPOP", target)
  end
  if priority == 0 then
    -- LIFO or FIFO
    rcall("LPUSH", target, jobId)
  else
    addJobWithPriority(KEYS[2], KEYS[5], priority, paused, jobId, KEYS[6])
  end
  -- Emit waiting event (wait..ing@token)
  rcall("XADD", KEYS[7], "*", "event", "waiting", "jobId", jobId, "prev", "delayed");
  rcall("HSET", jobKey, "delay", 0)
  return 0
else
  return -3
end`;my.promote={name:"promote",content:qle,keys:7}});var LN=E(gy=>{"use strict";Object.defineProperty(gy,"__esModule",{value:!0});gy.releaseLock=void 0;var Fle=`--[[
  Release lock
    Input:
      KEYS[1] 'lock',
      ARGV[1]  token
      ARGV[2]  lock duration in milliseconds
    Output:
      "OK" if lock extented succesfully.
]]
local rcall = redis.call
if rcall("GET", KEYS[1]) == ARGV[1] then
  return rcall("DEL", KEYS[1])
else
  return 0
end
`;gy.releaseLock={name:"releaseLock",content:Fle,keys:1}});var DN=E(yy=>{"use strict";Object.defineProperty(yy,"__esModule",{value:!0});yy.removeJob=void 0;var Vle=`--[[
    Remove a job from all the queues it may be in as well as all its data.
    In order to be able to remove a job, it cannot be active.
    Input:
      KEYS[1] queue prefix
      ARGV[1] jobId
      ARGV[2] remove children
    Events:
      'removed'
]]
local rcall = redis.call
-- Includes
--[[
  Functions to destructure job key.
  Just a bit of warning, these functions may be a bit slow and affect performance significantly.
]]
local getJobIdFromKey = function (jobKey)
  return string.match(jobKey, ".*:(.*)")
end
local getJobKeyPrefix = function (jobKey, jobId)
  return string.sub(jobKey, 0, #jobKey - #jobId)
end
--[[
  Function to recursively check if there are no locks
  on the jobs to be removed.
  returns:
    boolean
]]
local function isLocked( prefix, jobId, removeChildren)
  local jobKey = prefix .. jobId;
  -- Check if this job is locked
  local lockKey = jobKey .. ':lock'
  local lock = rcall("GET", lockKey)
  if not lock then
    if removeChildren == "1" then
      local dependencies = rcall("SMEMBERS", jobKey .. ":dependencies")
      if (#dependencies > 0) then
        for i, childJobKey in ipairs(dependencies) do
          -- We need to get the jobId for this job.
          local childJobId = getJobIdFromKey(childJobKey)
          local childJobPrefix = getJobKeyPrefix(childJobKey, childJobId)
          local result = isLocked( childJobPrefix, childJobId, removeChildren )
          if result then
            return true
          end
        end
      end
    end
    return false
  end
  return true
end
--[[
  Function to remove from any state.
  returns:
    prev state
]]
local function removeJobFromAnyState( prefix, jobId)
  -- We start with the ZSCORE checks, since they have O(1) complexity
  if rcall("ZSCORE", prefix .. "completed", jobId) then
    rcall("ZREM", prefix .. "completed", jobId)
    return "completed"
  elseif rcall("ZSCORE", prefix .. "waiting-children", jobId) then
    rcall("ZREM", prefix .. "waiting-children", jobId)
    return "waiting-children"
  elseif rcall("ZSCORE", prefix .. "delayed", jobId) then
    rcall("ZREM", prefix .. "delayed", jobId)
    return "delayed"
  elseif rcall("ZSCORE", prefix .. "failed", jobId) then
    rcall("ZREM", prefix .. "failed", jobId)
    return "failed"
  elseif rcall("ZSCORE", prefix .. "prioritized", jobId) then
    rcall("ZREM", prefix .. "prioritized", jobId)
    return "prioritized"
  -- We remove only 1 element from the list, since we assume they are not added multiple times
  elseif rcall("LREM", prefix .. "wait", 1, jobId) == 1 then
    return "wait"
  elseif rcall("LREM", prefix .. "paused", 1, jobId) == 1 then
    return "paused"
  elseif rcall("LREM", prefix .. "active", 1, jobId) == 1 then
    return "active"
  end
  return "unknown"
end
--[[
  Check if this job has a parent. If so we will just remove it from
  the parent child list, but if it is the last child we should move the parent to "wait/paused"
  which requires code from "moveToFinished"
]]
--[[
  Function to check for the meta.paused key to decide if we are paused or not
  (since an empty list and !EXISTS are not really the same).
]]
local function getTargetQueueList(queueMetaKey, waitKey, pausedKey)
  if rcall("HEXISTS", queueMetaKey, "paused") ~= 1 then
    return waitKey, false
  else
    return pausedKey, true
  end
end
local function moveParentToWait(parentPrefix, parentId, emitEvent)
  local parentTarget = getTargetQueueList(parentPrefix .. "meta", parentPrefix .. "wait", parentPrefix .. "paused")
  rcall("RPUSH", parentTarget, parentId)
  if emitEvent then
    local parentEventStream = parentPrefix .. "events"
    rcall("XADD", parentEventStream, "*", "event", "waiting", "jobId", parentId, "prev", "waiting-children")
  end
end
local function removeParentDependencyKey(jobKey, hard, parentKey, baseKey)
  if parentKey then
    local parentDependenciesKey = parentKey .. ":dependencies"
    local result = rcall("SREM", parentDependenciesKey, jobKey)
    if result > 0 then
      local pendingDependencies = rcall("SCARD", parentDependenciesKey)
      if pendingDependencies == 0 then
        local parentId = getJobIdFromKey(parentKey)
        local parentPrefix = getJobKeyPrefix(parentKey, parentId)
        local numRemovedElements = rcall("ZREM", parentPrefix .. "waiting-children", parentId)
        if numRemovedElements == 1 then
          if hard then
            if parentPrefix == baseKey then
              removeParentDependencyKey(parentKey, hard, nil, baseKey)
              rcall("DEL", parentKey, parentKey .. ':logs',
                parentKey .. ':dependencies', parentKey .. ':processed')
            else
              moveParentToWait(parentPrefix, parentId)
            end
          else
            moveParentToWait(parentPrefix, parentId, true)
          end
        end
      end
    end
  else
    local missedParentKey = rcall("HGET", jobKey, "parentKey")
    if( (type(missedParentKey) == "string") and missedParentKey ~= "" and (rcall("EXISTS", missedParentKey) == 1)) then
      local parentDependenciesKey = missedParentKey .. ":dependencies"
      local result = rcall("SREM", parentDependenciesKey, jobKey)
      if result > 0 then
        local pendingDependencies = rcall("SCARD", parentDependenciesKey)
        if pendingDependencies == 0 then
          local parentId = getJobIdFromKey(missedParentKey)
          local parentPrefix = getJobKeyPrefix(missedParentKey, parentId)
          local numRemovedElements = rcall("ZREM", parentPrefix .. "waiting-children", parentId)
          if numRemovedElements == 1 then
            if hard then
              if parentPrefix == baseKey then
                removeParentDependencyKey(missedParentKey, hard, nil, baseKey)
                rcall("DEL", missedParentKey, missedParentKey .. ':logs',
                  missedParentKey .. ':dependencies', missedParentKey .. ':processed')
              else
                moveParentToWait(parentPrefix, parentId)
              end
            else
              moveParentToWait(parentPrefix, parentId, true)
            end
          end
        end
      end
    end
  end
end
local function removeJob( prefix, jobId, parentKey, removeChildren)
    local jobKey = prefix .. jobId;
    removeParentDependencyKey(jobKey, false, parentKey)
    if removeChildren == "1" then
        -- Check if this job has children
        -- If so, we are going to try to remove the children recursively in deep first way because
        -- if some job is locked we must exit with and error.
        --local countProcessed = rcall("HLEN", jobKey .. ":processed")
        local processed = rcall("HGETALL", jobKey .. ":processed")
        if (#processed > 0) then
            for i = 1, #processed, 2 do
                local childJobId = getJobIdFromKey(processed[i])
                local childJobPrefix = getJobKeyPrefix(processed[i], childJobId)
                removeJob( childJobPrefix, childJobId, jobKey, removeChildren )
            end
        end
        local dependencies = rcall("SMEMBERS", jobKey .. ":dependencies")
        if (#dependencies > 0) then
            for i, childJobKey in ipairs(dependencies) do
                -- We need to get the jobId for this job.
                local childJobId = getJobIdFromKey(childJobKey)
                local childJobPrefix = getJobKeyPrefix(childJobKey, childJobId)
                removeJob( childJobPrefix, childJobId, jobKey, removeChildren )
            end
        end
    end
    local prev = removeJobFromAnyState(prefix, jobId)
    if rcall("DEL", jobKey, jobKey .. ":logs", jobKey .. ":dependencies", jobKey .. ":processed") > 0 then
        local maxEvents = rcall("HGET", prefix .. "meta", "opts.maxLenEvents") or 10000
        rcall("XADD", prefix .. "events", "MAXLEN", "~", maxEvents, "*", "event", "removed",
            "jobId", jobId, "prev", prev)
    end
end
local prefix = KEYS[1]
if not isLocked(prefix, ARGV[1], ARGV[2]) then
    removeJob(prefix, ARGV[1], nil, ARGV[2])
    return 1
end
return 0
`;yy.removeJob={name:"removeJob",content:Vle,keys:1}});var NN=E(vy=>{"use strict";Object.defineProperty(vy,"__esModule",{value:!0});vy.removeRepeatable=void 0;var Ble=`--[[
  Removes a repeatable job
  Input:
    KEYS[1] repeat jobs key
    KEYS[2] delayed jobs key
    ARGV[1] repeat job id
    ARGV[2] repeat job key
    ARGV[3] queue key
  Output:
    0 - OK
    1 - Missing repeat job
  Events:
    'removed'
]]
local rcall = redis.call
local millis = rcall("ZSCORE", KEYS[1], ARGV[2])
if(millis) then
  -- Delete next programmed job.
  local repeatJobId = ARGV[1] .. millis
  if(rcall("ZREM", KEYS[2], repeatJobId) == 1) then
    rcall("DEL", ARGV[3] .. repeatJobId)
    rcall("XADD", ARGV[3] .. "events", "*", "event", "removed", "jobId", repeatJobId, "prev", "delayed");
  end
end
if(rcall("ZREM", KEYS[1], ARGV[2]) == 1) then
  return 0
end
return 1
`;vy.removeRepeatable={name:"removeRepeatable",content:Ble,keys:2}});var jN=E(wy=>{"use strict";Object.defineProperty(wy,"__esModule",{value:!0});wy.reprocessJob=void 0;var Ule=`--[[
  Attempts to reprocess a job
  Input:
    KEYS[1] job key
    KEYS[2] events stream
    KEYS[3] job state
    KEYS[4] wait key
    KEYS[5] meta
    KEYS[6] paused key
    ARGV[1] job.id
    ARGV[2] (job.opts.lifo ? 'R' : 'L') + 'PUSH'
    ARGV[3] propVal - failedReason/returnvalue
    ARGV[4] prev state - failed/completed
  Output:
     1 means the operation was a success
    -1 means the job does not exist
    -3 means the job was not found in the expected set.
]]
local rcall = redis.call;
-- Includes
--[[
  Function to check for the meta.paused key to decide if we are paused or not
  (since an empty list and !EXISTS are not really the same).
]]
local function getTargetQueueList(queueMetaKey, waitKey, pausedKey)
  if rcall("HEXISTS", queueMetaKey, "paused") ~= 1 then
    return waitKey, false
  else
    return pausedKey, true
  end
end
if (rcall("EXISTS", KEYS[1]) == 1) then
  local jobId = ARGV[1]
  if (rcall("ZREM", KEYS[3], jobId) == 1) then
    rcall("HDEL", KEYS[1], "finishedOn", "processedOn", ARGV[3])
    local target = getTargetQueueList(KEYS[5], KEYS[4], KEYS[6])
    rcall(ARGV[2], target, jobId)
    -- Emit waiting event
    rcall("XADD", KEYS[2], "*", "event", "waiting", "jobId", jobId, "prev", ARGV[4]);
    return 1
  else
    return -3
  end
else
  return -1
end
`;wy.reprocessJob={name:"reprocessJob",content:Ule,keys:6}});var KN=E(by=>{"use strict";Object.defineProperty(by,"__esModule",{value:!0});by.retryJob=void 0;var Gle=`--[[
  Retries a failed job by moving it back to the wait queue.
    Input:
      KEYS[1] 'active',
      KEYS[2] 'wait'
      KEYS[3] 'paused'
      KEYS[4] job key
      KEYS[5] 'meta'
      KEYS[6] events stream
      KEYS[7] delayed key
      KEYS[8] prioritized key
      KEYS[9] 'pc' priority counter
      ARGV[1]  key prefix
      ARGV[2]  timestamp
      ARGV[3]  pushCmd
      ARGV[4]  jobId
      ARGV[5]  token
    Events:
      'waiting'
    Output:
     0  - OK
     -1 - Missing key
     -2 - Missing lock
]]
local rcall = redis.call
-- Includes
--[[
  Function to add job considering priority.
]]
-- Includes
--[[
  Function priority marker to wait if needed
  in order to wake up our workers and to respect priority
  order as much as possible
]]
local function addPriorityMarkerIfNeeded(waitKey)
  local waitLen = rcall("LLEN", waitKey)
  if waitLen == 0 then
    rcall("LPUSH", waitKey, "0:0")
  end
end
local function addJobWithPriority(waitKey, prioritizedKey, priority, paused, jobId, priorityCounterKey)
  local prioCounter = rcall("INCR", priorityCounterKey)
  local score = priority * 0x100000000 + bit.band(prioCounter, 0xffffffffffff)
  rcall("ZADD", prioritizedKey, score, jobId)
  if not paused then
    addPriorityMarkerIfNeeded(waitKey)
  end
end
--[[
  Function to check for the meta.paused key to decide if we are paused or not
  (since an empty list and !EXISTS are not really the same).
]]
local function getTargetQueueList(queueMetaKey, waitKey, pausedKey)
  if rcall("HEXISTS", queueMetaKey, "paused") ~= 1 then
    return waitKey, false
  else
    return pausedKey, true
  end
end
--[[
  Updates the delay set, by moving delayed jobs that should
  be processed now to "wait".
     Events:
      'waiting'
]]
-- Includes
-- Try to get as much as 1000 jobs at once
local function promoteDelayedJobs(delayedKey, waitKey, targetKey, prioritizedKey,
                                  eventStreamKey, prefix, timestamp, paused, priorityCounterKey)
    local jobs = rcall("ZRANGEBYSCORE", delayedKey, 0, (timestamp + 1) * 0x1000, "LIMIT", 0, 1000)
    if (#jobs > 0) then
        rcall("ZREM", delayedKey, unpack(jobs))
        for _, jobId in ipairs(jobs) do
            local jobKey = prefix .. jobId
            local priority =
                tonumber(rcall("HGET", jobKey, "priority")) or 0
            if priority == 0 then
                -- LIFO or FIFO
                rcall("LPUSH", targetKey, jobId)
            else
                addJobWithPriority(waitKey, prioritizedKey, priority, paused,
                  jobId, priorityCounterKey)
            end
            -- Emit waiting event
            rcall("XADD", eventStreamKey, "*", "event", "waiting", "jobId",
                  jobId, "prev", "delayed")
            rcall("HSET", jobKey, "delay", 0)
        end
    end
end
local target, paused = getTargetQueueList(KEYS[5], KEYS[2], KEYS[3])
-- Check if there are delayed jobs that we can move to wait.
-- test example: when there are delayed jobs between retries
promoteDelayedJobs(KEYS[7], KEYS[2], target, KEYS[8], KEYS[6], ARGV[1], ARGV[2], paused, KEYS[9])
if rcall("EXISTS", KEYS[4]) == 1 then
  if ARGV[5] ~= "0" then
    local lockKey = KEYS[4] .. ':lock'
    if rcall("GET", lockKey) == ARGV[5] then
      rcall("DEL", lockKey)
    else
      return -2
    end
  end
  rcall("LREM", KEYS[1], 0, ARGV[4])
  local priority = tonumber(rcall("HGET", KEYS[4], "priority")) or 0
  -- Standard or priority add
  if priority == 0 then
    rcall(ARGV[3], target, ARGV[4])
  else
    addJobWithPriority(KEYS[2], KEYS[8], priority, paused, ARGV[4], KEYS[9])
  end
  local maxEvents = rcall("HGET", KEYS[5], "opts.maxLenEvents") or 10000
  -- Emit waiting event
  rcall("XADD", KEYS[6], "MAXLEN", "~", maxEvents, "*", "event", "waiting",
    "jobId", ARGV[4], "prev", "failed")
  return 0
else
  return -1
end
`;by.retryJob={name:"retryJob",content:Gle,keys:9}});var qN=E(Sy=>{"use strict";Object.defineProperty(Sy,"__esModule",{value:!0});Sy.saveStacktrace=void 0;var $le=`--[[
  Save stacktrace and failedReason.
  Input:
    KEYS[1] job key
    ARGV[1]  stacktrace
    ARGV[2]  failedReason
  Output:
     0 - OK
    -1 - Missing key
]]
local rcall = redis.call
if rcall("EXISTS", KEYS[1]) == 1 then
  rcall("HMSET", KEYS[1], "stacktrace", ARGV[1], "failedReason", ARGV[2])
  return 0
else
  return -1
end
`;Sy.saveStacktrace={name:"saveStacktrace",content:$le,keys:1}});var FN=E(_y=>{"use strict";Object.defineProperty(_y,"__esModule",{value:!0});_y.updateData=void 0;var Wle=`--[[
  Update job data
  Input:
    KEYS[1] Job id key
    ARGV[1] data
  Output:
    0 - OK
   -1 - Missing job.
]]
local rcall = redis.call
if rcall("EXISTS",KEYS[1]) == 1 then -- // Make sure job exists
  rcall("HSET", KEYS[1], "data", ARGV[1])
  return 0
else
  return -1
end
`;_y.updateData={name:"updateData",content:Wle,keys:1}});var VN=E(xy=>{"use strict";Object.defineProperty(xy,"__esModule",{value:!0});xy.updateProgress=void 0;var zle=`--[[
  Update job progress
  Input:
    KEYS[1] Job id key
    KEYS[2] event stream key
    ARGV[1] id
    ARGV[2] progress
  Output:
     0 - OK
    -1 - Missing job.
  Event:
    progress(jobId, progress)
]]
local rcall = redis.call
if rcall("EXISTS",KEYS[1]) == 1 then -- // Make sure job exists
  rcall("HSET", KEYS[1], "progress", ARGV[2])
  rcall("XADD", KEYS[2], "*", "event", "progress", "jobId", ARGV[1], "data", ARGV[2]);
  return 0
else
  return -1
end
`;xy.updateProgress={name:"updateProgress",content:zle,keys:2}});var BN=E(xt=>{"use strict";Object.defineProperty(xt,"__esModule",{value:!0});var At=(Js(),vi(Ys));At.__exportStar(dN(),xt);At.__exportStar(hN(),xt);At.__exportStar(pN(),xt);At.__exportStar(mN(),xt);At.__exportStar(gN(),xt);At.__exportStar(yN(),xt);At.__exportStar(vN(),xt);At.__exportStar(wN(),xt);At.__exportStar(bN(),xt);At.__exportStar(SN(),xt);At.__exportStar(_N(),xt);At.__exportStar(xN(),xt);At.__exportStar(EN(),xt);At.__exportStar(ON(),xt);At.__exportStar(IN(),xt);At.__exportStar(CN(),xt);At.__exportStar(TN(),xt);At.__exportStar(AN(),xt);At.__exportStar(MN(),xt);At.__exportStar(kN(),xt);At.__exportStar(PN(),xt);At.__exportStar(RN(),xt);At.__exportStar(LN(),xt);At.__exportStar(DN(),xt);At.__exportStar(NN(),xt);At.__exportStar(jN(),xt);At.__exportStar(KN(),xt);At.__exportStar(qN(),xt);At.__exportStar(FN(),xt);At.__exportStar(VN(),xt)});var Bh=E(Ey=>{"use strict";Object.defineProperty(Ey,"__esModule",{value:!0});Ey.RedisConnection=void 0;var Hle=require("events"),Yle=eg(),UN=ln(),uf=Yi(),Jle=BN(),Qle=["BullMQ: WARNING! Your redis options maxRetriesPerRequest must be null","and will be overridden by BullMQ."].join(" "),Zle=["BullMQ: DEPRECATION WARNING! Your redis options maxRetriesPerRequest must be null.","On the next versions having this settings will throw an exception"].join(" "),Vh=class r extends Hle.EventEmitter{constructor(e,t=!1,n=!0,i=!1){if(super(),this.shared=t,this.blocking=n,this.capabilities={canDoubleTimeout:!1},!(0,uf.isRedisInstance)(e))this.checkBlockingOptions(Qle,e),this.opts=Object.assign({port:6379,host:"127.0.0.1",retryStrategy:function(s){return Math.max(Math.min(Math.exp(s),2e4),1e3)}},e),this.blocking&&(this.opts.maxRetriesPerRequest=null);else{if(this._client=e,this._client.options.keyPrefix)throw new Error("BullMQ: ioredis does not support ioredis prefixes, use the prefix option instead.");(0,uf.isRedisCluster)(this._client)?this.opts=this._client.options.redisOptions:this.opts=this._client.options,this.checkBlockingOptions(Zle,this.opts)}this.skipVersionCheck=i||!!(this.opts&&this.opts.skipVersionCheck),this.handleClientError=s=>{this.emit("error",s)},this.handleClientClose=()=>{this.emit("close")},this.handleClientReady=()=>{this.emit("ready")},this.initializing=this.init(),this.initializing.catch(s=>this.emit("error",s))}checkBlockingOptions(e,t){this.blocking&&t&&t.maxRetriesPerRequest&&console.error(e)}static async waitUntilReady(e){if(e.status!=="ready"){if(e.status==="wait")return e.connect();if(e.status==="end")throw new Error(UN.CONNECTION_CLOSED_ERROR_MSG);return new Promise((t,n)=>{let i,s=u=>{i=u},o=()=>{e.removeListener("end",a),e.removeListener("error",s),t()},a=()=>{e.removeListener("ready",o),e.removeListener("error",s),n(i||new Error(UN.CONNECTION_CLOSED_ERROR_MSG))};e.once("ready",o),e.on("end",a),e.once("error",s)})}}get client(){return this.initializing}loadCommands(e){let t=e||Jle;for(let n in t)this._client[t[n].name]||this._client.defineCommand(t[n].name,{numberOfKeys:t[n].keys,lua:t[n].content})}async init(){if(this._client||(this._client=new Yle.default(this.opts)),this._client.on("error",this.handleClientError),this._client.on("close",this.handleClientClose),this._client.on("ready",this.handleClientReady),await r.waitUntilReady(this._client),this.loadCommands(),this.version=await this.getRedisVersion(),this.skipVersionCheck!==!0&&!this.closing){if((0,uf.isRedisVersionLowerThan)(this.version,r.minimumVersion))throw new Error(`Redis version needs to be greater or equal than ${r.minimumVersion} Current: ${this.version}`);(0,uf.isRedisVersionLowerThan)(this.version,r.recommendedMinimumVersion)&&console.warn(`It is highly recommended to use a minimum Redis version of ${r.recommendedMinimumVersion}
           Current: ${this.version}`)}return this.capabilities={canDoubleTimeout:!(0,uf.isRedisVersionLowerThan)(this.version,"6.0.0")},this._client}async disconnect(e=!0){let t=await this.client;if(t.status!=="end"){let n,i;if(!e)return t.disconnect();let s=new Promise((o,a)=>{t.once("end",o),t.once("error",a),n=o,i=a});t.disconnect();try{await s}finally{t.removeListener("end",n),t.removeListener("error",i)}}}async reconnect(){return(await this.client).connect()}async close(){if(!this.closing){this.closing=!0;try{await this.initializing,this.shared||await this._client.quit()}catch(e){if((0,uf.isNotConnectionError)(e))throw e}finally{this._client.off("error",this.handleClientError),this._client.off("close",this.handleClientClose),this._client.off("ready",this.handleClientReady)}}}async getRedisVersion(){let e=await this._client.info(),t="redis_version:",n="maxmemory_policy:",i=e.split(`\r
`),s;for(let o=0;o<i.length;o++){if(i[o].indexOf(n)===0){let a=i[o].substr(n.length);a!=="noeviction"&&console.warn(`IMPORTANT! Eviction policy is ${a}. It should be "noeviction"`)}i[o].indexOf(t)===0&&(s=i[o].substr(t.length))}return s}get redisVersion(){return this.version}};Ey.RedisConnection=Vh;Vh.minimumVersion="5.0.0";Vh.recommendedMinimumVersion="6.2.0"});var GN=E(Iy=>{"use strict";Object.defineProperty(Iy,"__esModule",{value:!0});Iy.FlowProducer=void 0;var Xle=require("events"),eue=_g(),tue=(Cg(),vi(Ig)),Bx=Yi(),rue=cu(),Oy=zg(),nue=Bh(),Ux=class extends Xle.EventEmitter{constructor(e={},t=nue.RedisConnection){super(),this.opts=e,this.opts=Object.assign({prefix:"bull"},e),this.connection=new t(e.connection),this.connection.on("error",n=>this.emit("error",n)),this.connection.on("close",this.emit.bind(this,"ioredis:close")),this.queueKeys=new Oy.QueueKeys(e.prefix)}emit(e,...t){return super.emit(e,...t)}off(e,t){return super.off(e,t),this}on(e,t){return super.on(e,t),this}once(e,t){return super.once(e,t),this}async add(e,t){var n;if(this.closing)return;let s=(await this.connection.client).multi(),o=(n=e?.opts)===null||n===void 0?void 0:n.parent,a=(0,Bx.getParentKey)(o),u=a?`${a}:dependencies`:void 0,c=this.addNode({multi:s,node:e,queuesOpts:t?.queuesOptions,parent:{parentOpts:o,parentDependenciesKey:u}});return await s.exec(),c}async getFlow(e){if(this.closing)return;let t=await this.connection.client,n=Object.assign({depth:10,maxChildren:20},e);return this.getNode(t,n)}get client(){return this.connection.client}get Job(){return rue.Job}async addBulk(e){if(this.closing)return;let n=(await this.connection.client).multi(),i=this.addNodes(n,e);return await n.exec(),i}addNode({multi:e,node:t,parent:n,queuesOpts:i}){var s;let o=t.prefix||this.opts.prefix,a=this.queueFromNode(t,new Oy.QueueKeys(o),o),u=i&&i[t.queueName],c=(0,eue.get)(u,"defaultJobOptions"),d=((s=t.opts)===null||s===void 0?void 0:s.jobId)||(0,tue.v4)(),h=new this.Job(a,t.name,t.data,Object.assign(Object.assign(Object.assign({},c||{}),t.opts),{parent:n?.parentOpts}),d),p=(0,Bx.getParentKey)(n?.parentOpts);if(t.children&&t.children.length>0){let m=d,y=new Oy.QueueKeys(t.prefix||this.opts.prefix),_=y.toKey(t.queueName,"waiting-children");h.addJob(e,{parentDependenciesKey:n?.parentDependenciesKey,waitChildrenKey:_,parentKey:p});let O=`${y.toKey(t.queueName,m)}:dependencies`,x=this.addChildren({multi:e,nodes:t.children,parent:{parentOpts:{id:m,queue:y.getQueueQualifiedName(t.queueName)},parentDependenciesKey:O},queuesOpts:i});return{job:h,children:x}}else return h.addJob(e,{parentDependenciesKey:n?.parentDependenciesKey,parentKey:p}),{job:h}}addNodes(e,t){return t.map(n=>{var i;let s=(i=n?.opts)===null||i===void 0?void 0:i.parent,o=(0,Bx.getParentKey)(s),a=o?`${o}:dependencies`:void 0;return this.addNode({multi:e,node:n,parent:{parentOpts:s,parentDependenciesKey:a}})})}async getNode(e,t){let n=this.queueFromNode(t,new Oy.QueueKeys(t.prefix),t.prefix),i=await this.Job.fromId(n,t.id);if(i){let{processed:s={},unprocessed:o=[]}=await i.getDependencies({processed:{count:t.maxChildren},unprocessed:{count:t.maxChildren}}),a=Object.keys(s),u=a.length+o.length,c=t.depth-1;if(u>0&&c){let d=await this.getChildren(e,[...a,...o],c,t.maxChildren);return{job:i,children:d}}else return{job:i}}}addChildren({multi:e,nodes:t,parent:n,queuesOpts:i}){return t.map(s=>this.addNode({multi:e,node:s,parent:n,queuesOpts:i}))}getChildren(e,t,n,i){let s=o=>{let[a,u,c]=o.split(":");return this.getNode(e,{id:c,queueName:u,prefix:a,depth:n,maxChildren:i})};return Promise.all([...t.map(s)])}queueFromNode(e,t,n){return{client:this.connection.client,name:e.queueName,keys:t.getKeys(e.queueName),toKey:i=>t.toKey(e.queueName,i),opts:{prefix:n},qualifiedName:t.getQueueQualifiedName(e.queueName),closing:this.closing,waitUntilReady:async()=>this.connection.client,removeListener:this.removeListener.bind(this),emit:this.emit.bind(this),on:this.on.bind(this),redisVersion:this.connection.redisVersion}}close(){return this.closing||(this.closing=this.connection.close()),this.closing}disconnect(){return this.connection.disconnect()}};Iy.FlowProducer=Ux});var cf=E(Cy=>{"use strict";Object.defineProperty(Cy,"__esModule",{value:!0});Cy.QueueBase=void 0;var iue=require("events"),Gx=Yi(),sue=Bh(),oue=cu(),aue=zg(),lue=Gg(),$x=class extends iue.EventEmitter{constructor(e,t={},n=sue.RedisConnection){if(super(),this.name=e,this.opts=t,this.closed=!1,this.opts=Object.assign({prefix:"bull"},t),!e)throw new Error("Queue name must be provided");t.connection||console.warn(["BullMQ: DEPRECATION WARNING! Optional instantiation of Queue, Worker and QueueEvents","without providing explicitly a connection or connection options is deprecated. This behaviour will","be removed in the next major release"].join(" ")),this.connection=new n(t.connection,t.sharedConnection,t.blockingConnection,t.skipVersionCheck),this.connection.on("error",s=>this.emit("error",s)),this.connection.on("close",()=>{this.closing||this.emit("ioredis:close")});let i=new aue.QueueKeys(t.prefix);this.qualifiedName=i.getQueueQualifiedName(e),this.keys=i.getKeys(e),this.toKey=s=>i.toKey(e,s),this.scripts=new lue.Scripts(this)}get client(){return this.connection.client}get redisVersion(){return this.connection.redisVersion}get Job(){return oue.Job}emit(e,...t){try{return super.emit(e,...t)}catch(n){try{return super.emit("error",n)}catch(i){return console.error(i),!1}}}waitUntilReady(){return this.client}base64Name(){return Buffer.from(this.name).toString("base64")}clientName(e=""){let t=this.base64Name();return`${this.opts.prefix}:${t}${e}`}async close(){this.closing||(this.closing=this.connection.close()),await this.closing,this.closed=!0}disconnect(){return this.connection.disconnect()}async checkConnectionError(e,t=Gx.DELAY_TIME_5){try{return await e()}catch(n){if((0,Gx.isNotConnectionError)(n)&&this.emit("error",n),!this.closing&&t)await(0,Gx.delay)(t);else return}}};Cy.QueueBase=$x});var WN=E(Ay=>{"use strict";Object.defineProperty(Ay,"__esModule",{value:!0});Ay.QueueEvents=void 0;var $N=(Js(),vi(Ys)),Ty=Yi(),uue=cf(),Wx=class extends uue.QueueBase{constructor(e,t={},n){var{connection:i,autorun:s=!0}=t,o=$N.__rest(t,["connection","autorun"]);super(e,Object.assign(Object.assign({},o),{connection:(0,Ty.isRedisInstance)(i)?i.duplicate():i,blockingConnection:!0}),n),this.running=!1,this.opts=Object.assign({blockingTimeout:1e4},this.opts),s&&this.run().catch(a=>this.emit("error",a))}emit(e,...t){return super.emit(e,...t)}off(e,t){return super.off(e,t),this}on(e,t){return super.on(e,t),this}once(e,t){return super.once(e,t),this}async run(){if(this.running)throw new Error("Queue Events is already running.");try{this.running=!0;let e=await this.client;try{await e.client("SETNAME",this.clientName(Ty.QUEUE_EVENT_SUFFIX))}catch(t){if(!Ty.clientCommandMessageReg.test(t.message))throw t}await this.consumeEvents(e)}catch(e){throw this.running=!1,e}}async consumeEvents(e){let t=this.opts,n=this.keys.events,i=t.lastEventId||"$";for(;!this.closing;){let s=await this.checkConnectionError(()=>e.xread("BLOCK",t.blockingTimeout,"STREAMS",n,i));if(s){let a=s[0][1];for(let u=0;u<a.length;u++){i=a[u][0];let c=(0,Ty.array2obj)(a[u][1]);switch(c.event){case"progress":c.data=JSON.parse(c.data);break;case"completed":c.returnvalue=JSON.parse(c.returnvalue);break}let{event:d}=c,h=$N.__rest(c,["event"]);d==="drained"?this.emit(d,i):(this.emit(d,h,i),this.emit(`${d}:${h.jobId}`,h,i))}}}}close(){return this.closing||(this.closing=this.disconnect()),this.closing}};Ay.QueueEvents=Wx});var Yx=E(My=>{"use strict";Object.defineProperty(My,"__esModule",{value:!0});My.QueueGetters=void 0;var cue=cf(),fue=cu(),zx=Yi(),Hx=class extends cue.QueueBase{getJob(e){return this.Job.fromId(this,e)}commandByType(e,t,n){return e.map(i=>{i=i==="waiting"?"wait":i;let s=this.toKey(i);switch(i){case"completed":case"failed":case"delayed":case"prioritized":case"repeat":case"waiting-children":return n(s,t?"zcard":"zrange");case"active":case"wait":case"paused":return n(s,t?"llen":"lrange")}})}get Job(){return fue.Job}sanitizeJobTypes(e){let t=typeof e=="string"?[e]:e;if(Array.isArray(t)&&t.length>0){let n=[...t];return n.indexOf("waiting")!==-1&&n.push("paused"),[...new Set(n)]}return["active","completed","delayed","failed","paused","prioritized","waiting","waiting-children"]}async count(){return await this.getJobCountByTypes("waiting","paused","delayed","prioritized","waiting-children")}async getRateLimitTtl(){return(await this.client).pttl(this.keys.limiter)}async getJobCountByTypes(...e){let t=await this.getJobCounts(...e);return Object.values(t).reduce((n,i)=>n+i,0)}async getJobCounts(...e){let t=this.sanitizeJobTypes(e),n=await this.scripts.getCounts(t),i={};return n.forEach((s,o)=>{i[t[o]]=s||0}),i}getJobState(e){return this.scripts.getState(e)}getCompletedCount(){return this.getJobCountByTypes("completed")}getFailedCount(){return this.getJobCountByTypes("failed")}getDelayedCount(){return this.getJobCountByTypes("delayed")}getActiveCount(){return this.getJobCountByTypes("active")}getPrioritizedCount(){return this.getJobCountByTypes("prioritized")}getWaitingCount(){return this.getJobCountByTypes("waiting")}getWaitingChildrenCount(){return this.getJobCountByTypes("waiting-children")}getWaiting(e=0,t=-1){return this.getJobs(["waiting"],e,t,!0)}getWaitingChildren(e=0,t=-1){return this.getJobs(["waiting-children"],e,t,!0)}getActive(e=0,t=-1){return this.getJobs(["active"],e,t,!0)}getDelayed(e=0,t=-1){return this.getJobs(["delayed"],e,t,!0)}getPrioritized(e=0,t=-1){return this.getJobs(["prioritized"],e,t,!0)}getCompleted(e=0,t=-1){return this.getJobs(["completed"],e,t,!1)}getFailed(e=0,t=-1){return this.getJobs(["failed"],e,t,!1)}async getRanges(e,t=0,n=1,i=!1){let s=[];this.commandByType(e,!1,(u,c)=>{switch(c){case"lrange":s.push("lrange");break;case"zrange":s.push("zrange");break}});let o=await this.scripts.getRanges(e,t,n,i),a=[];return o.forEach((u,c)=>{let d=u||[];i&&s[c]==="lrange"?a=a.concat(d.reverse()):a=a.concat(d)}),[...new Set(a)]}async getJobs(e,t=0,n=-1,i=!1){let s=this.sanitizeJobTypes(e),o=await this.getRanges(s,t,n,i);return Promise.all(o.map(a=>this.Job.fromId(this,a)))}async getJobLogs(e,t=0,n=-1,i=!0){let o=(await this.client).multi(),a=this.toKey(e+":logs");i?o.lrange(a,t,n):o.lrange(a,-(n+1),-(t+1)),o.llen(a);let u=await o.exec();return i||u[0][1].reverse(),{logs:u[0][1],count:u[1][1]}}async baseGetClients(e){let n=await(await this.client).client("LIST");try{return this.parseClientList(n,e)}catch(i){if(!zx.clientCommandMessageReg.test(i.message))throw i;return[]}}getWorkers(){return this.baseGetClients(zx.WORKER_SUFFIX)}async getQueueEvents(){return this.baseGetClients(zx.QUEUE_EVENT_SUFFIX)}async getMetrics(e,t=0,n=-1){let i=await this.client,s=this.toKey(`metrics:${e}`),o=`${s}:data`,a=i.multi();a.hmget(s,"count","prevTS","prevCount"),a.lrange(o,t,n),a.llen(o);let[u,c,d]=await a.exec(),[h,[p,m,y]]=u,[_,O]=c,[x,A]=d;if(h||_)throw h||_||x;return{meta:{count:parseInt(p||"0",10),prevTS:parseInt(m||"0",10),prevCount:parseInt(y||"0",10)},data:O,count:A}}parseClientList(e,t=""){let n=e.split(`
`),i=[];return n.forEach(s=>{let o={};s.split(" ").forEach(function(c){let d=c.indexOf("="),h=c.substring(0,d),p=c.substring(d+1);o[h]=p});let u=o.name;u&&u===`${this.clientName()}${t?`${t}`:""}`&&(o.name=this.name,i.push(o))}),i}};My.QueueGetters=Hx});var gK=E(Ti=>{"use strict";Object.defineProperty(Ti,"__esModule",{value:!0});var qo=class extends Error{},nE=class extends qo{constructor(e){super(`Invalid DateTime: ${e.toMessage()}`)}},iE=class extends qo{constructor(e){super(`Invalid Interval: ${e.toMessage()}`)}},sE=class extends qo{constructor(e){super(`Invalid Duration: ${e.toMessage()}`)}},hu=class extends qo{},Ky=class extends qo{constructor(e){super(`Invalid unit ${e}`)}},ri=class extends qo{},Xs=class extends qo{constructor(){super("Zone is an abstract class")}},me="numeric",Ms="short",Ii="long",qy={year:me,month:me,day:me},vj={year:me,month:Ms,day:me},due={year:me,month:Ms,day:me,weekday:Ms},wj={year:me,month:Ii,day:me},bj={year:me,month:Ii,day:me,weekday:Ii},Sj={hour:me,minute:me},_j={hour:me,minute:me,second:me},xj={hour:me,minute:me,second:me,timeZoneName:Ms},Ej={hour:me,minute:me,second:me,timeZoneName:Ii},Oj={hour:me,minute:me,hourCycle:"h23"},Ij={hour:me,minute:me,second:me,hourCycle:"h23"},Cj={hour:me,minute:me,second:me,hourCycle:"h23",timeZoneName:Ms},Tj={hour:me,minute:me,second:me,hourCycle:"h23",timeZoneName:Ii},Aj={year:me,month:me,day:me,hour:me,minute:me},Mj={year:me,month:me,day:me,hour:me,minute:me,second:me},kj={year:me,month:Ms,day:me,hour:me,minute:me},Pj={year:me,month:Ms,day:me,hour:me,minute:me,second:me},hue={year:me,month:Ms,day:me,weekday:Ms,hour:me,minute:me},Rj={year:me,month:Ii,day:me,hour:me,minute:me,timeZoneName:Ms},Lj={year:me,month:Ii,day:me,hour:me,minute:me,second:me,timeZoneName:Ms},Dj={year:me,month:Ii,day:me,weekday:Ii,hour:me,minute:me,timeZoneName:Ii},Nj={year:me,month:Ii,day:me,weekday:Ii,hour:me,minute:me,second:me,timeZoneName:Ii},Ka=class{get type(){throw new Xs}get name(){throw new Xs}get ianaName(){return this.name}get isUniversal(){throw new Xs}offsetName(e,t){throw new Xs}formatOffset(e,t){throw new Xs}offset(e){throw new Xs}equals(e){throw new Xs}get isValid(){throw new Xs}},Jx=null,Yh=class r extends Ka{static get instance(){return Jx===null&&(Jx=new r),Jx}get type(){return"system"}get name(){return new Intl.DateTimeFormat().resolvedOptions().timeZone}get isUniversal(){return!1}offsetName(e,{format:t,locale:n}){return Kj(e,t,n)}formatOffset(e,t){return Hh(this.offset(e),t)}offset(e){return-new Date(e).getTimezoneOffset()}equals(e){return e.type==="system"}get isValid(){return!0}},Ny={};function pue(r){return Ny[r]||(Ny[r]=new Intl.DateTimeFormat("en-US",{hour12:!1,timeZone:r,year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",era:"short"})),Ny[r]}var mue={year:0,month:1,day:2,era:3,hour:4,minute:5,second:6};function gue(r,e){let t=r.format(e).replace(/\u200E/g,""),n=/(\d+)\/(\d+)\/(\d+) (AD|BC),? (\d+):(\d+):(\d+)/.exec(t),[,i,s,o,a,u,c,d]=n;return[o,i,s,a,u,c,d]}function yue(r,e){let t=r.formatToParts(e),n=[];for(let i=0;i<t.length;i++){let{type:s,value:o}=t[i],a=mue[s];s==="era"?n[a]=o:yt(a)||(n[a]=parseInt(o,10))}return n}var ky={},Fo=class r extends Ka{static create(e){return ky[e]||(ky[e]=new r(e)),ky[e]}static resetCache(){ky={},Ny={}}static isValidSpecifier(e){return this.isValidZone(e)}static isValidZone(e){if(!e)return!1;try{return new Intl.DateTimeFormat("en-US",{timeZone:e}).format(),!0}catch{return!1}}constructor(e){super(),this.zoneName=e,this.valid=r.isValidZone(e)}get type(){return"iana"}get name(){return this.zoneName}get isUniversal(){return!1}offsetName(e,{format:t,locale:n}){return Kj(e,t,n,this.name)}formatOffset(e,t){return Hh(this.offset(e),t)}offset(e){let t=new Date(e);if(isNaN(t))return NaN;let n=pue(this.name),[i,s,o,a,u,c,d]=n.formatToParts?yue(n,t):gue(n,t);a==="BC"&&(i=-Math.abs(i)+1);let p=yE({year:i,month:s,day:o,hour:u===24?0:u,minute:c,second:d,millisecond:0}),m=+t,y=m%1e3;return m-=y>=0?y:1e3+y,(p-m)/(60*1e3)}equals(e){return e.type==="iana"&&e.name===this.name}get isValid(){return this.valid}},zN={};function vue(r,e={}){let t=JSON.stringify([r,e]),n=zN[t];return n||(n=new Intl.ListFormat(r,e),zN[t]=n),n}var oE={};function aE(r,e={}){let t=JSON.stringify([r,e]),n=oE[t];return n||(n=new Intl.DateTimeFormat(r,e),oE[t]=n),n}var lE={};function wue(r,e={}){let t=JSON.stringify([r,e]),n=lE[t];return n||(n=new Intl.NumberFormat(r,e),lE[t]=n),n}var uE={};function bue(r,e={}){let{base:t,...n}=e,i=JSON.stringify([r,n]),s=uE[i];return s||(s=new Intl.RelativeTimeFormat(r,e),uE[i]=s),s}var Wh=null;function Sue(){return Wh||(Wh=new Intl.DateTimeFormat().resolvedOptions().locale,Wh)}function _ue(r){let e=r.indexOf("-x-");e!==-1&&(r=r.substring(0,e));let t=r.indexOf("-u-");if(t===-1)return[r];{let n,i;try{n=aE(r).resolvedOptions(),i=r}catch{let u=r.substring(0,t);n=aE(u).resolvedOptions(),i=u}let{numberingSystem:s,calendar:o}=n;return[i,s,o]}}function xue(r,e,t){return(t||e)&&(r.includes("-u-")||(r+="-u"),t&&(r+=`-ca-${t}`),e&&(r+=`-nu-${e}`)),r}function Eue(r){let e=[];for(let t=1;t<=12;t++){let n=Vr.utc(2016,t,1);e.push(r(n))}return e}function Oue(r){let e=[];for(let t=1;t<=7;t++){let n=Vr.utc(2016,11,13+t);e.push(r(n))}return e}function Py(r,e,t,n,i){let s=r.listingMode(t);return s==="error"?null:s==="en"?n(e):i(e)}function Iue(r){return r.numberingSystem&&r.numberingSystem!=="latn"?!1:r.numberingSystem==="latn"||!r.locale||r.locale.startsWith("en")||new Intl.DateTimeFormat(r.intl).resolvedOptions().numberingSystem==="latn"}var cE=class{constructor(e,t,n){this.padTo=n.padTo||0,this.floor=n.floor||!1;let{padTo:i,floor:s,...o}=n;if(!t||Object.keys(o).length>0){let a={useGrouping:!1,...n};n.padTo>0&&(a.minimumIntegerDigits=n.padTo),this.inf=wue(e,a)}}format(e){if(this.inf){let t=this.floor?Math.floor(e):e;return this.inf.format(t)}else{let t=this.floor?Math.floor(e):gE(e,3);return $r(t,this.padTo)}}},fE=class{constructor(e,t,n){this.opts=n,this.originalZone=void 0;let i;if(this.opts.timeZone)this.dt=e;else if(e.zone.type==="fixed"){let o=-1*(e.offset/60),a=o>=0?`Etc/GMT+${o}`:`Etc/GMT${o}`;e.offset!==0&&Fo.create(a).valid?(i=a,this.dt=e):(i="UTC",this.dt=e.offset===0?e:e.setZone("UTC").plus({minutes:e.offset}),this.originalZone=e.zone)}else e.zone.type==="system"?this.dt=e:e.zone.type==="iana"?(this.dt=e,i=e.zone.name):(i="UTC",this.dt=e.setZone("UTC").plus({minutes:e.offset}),this.originalZone=e.zone);let s={...this.opts};s.timeZone=s.timeZone||i,this.dtf=aE(t,s)}format(){return this.originalZone?this.formatToParts().map(({value:e})=>e).join(""):this.dtf.format(this.dt.toJSDate())}formatToParts(){let e=this.dtf.formatToParts(this.dt.toJSDate());return this.originalZone?e.map(t=>{if(t.type==="timeZoneName"){let n=this.originalZone.offsetName(this.dt.ts,{locale:this.dt.locale,format:this.opts.timeZoneName});return{...t,value:n}}else return t}):e}resolvedOptions(){return this.dtf.resolvedOptions()}},dE=class{constructor(e,t,n){this.opts={style:"long",...n},!t&&jj()&&(this.rtf=bue(e,n))}format(e,t){return this.rtf?this.rtf.format(e,t):Bue(t,e,this.opts.numeric,this.opts.style!=="long")}formatToParts(e,t){return this.rtf?this.rtf.formatToParts(e,t):[]}},Rr=class r{static fromOpts(e){return r.create(e.locale,e.numberingSystem,e.outputCalendar,e.defaultToEN)}static create(e,t,n,i=!1){let s=e||hr.defaultLocale,o=s||(i?"en-US":Sue()),a=t||hr.defaultNumberingSystem,u=n||hr.defaultOutputCalendar;return new r(o,a,u,s)}static resetCache(){Wh=null,oE={},lE={},uE={}}static fromObject({locale:e,numberingSystem:t,outputCalendar:n}={}){return r.create(e,t,n)}constructor(e,t,n,i){let[s,o,a]=_ue(e);this.locale=s,this.numberingSystem=t||o||null,this.outputCalendar=n||a||null,this.intl=xue(this.locale,this.numberingSystem,this.outputCalendar),this.weekdaysCache={format:{},standalone:{}},this.monthsCache={format:{},standalone:{}},this.meridiemCache=null,this.eraCache={},this.specifiedLocale=i,this.fastNumbersCached=null}get fastNumbers(){return this.fastNumbersCached==null&&(this.fastNumbersCached=Iue(this)),this.fastNumbersCached}listingMode(){let e=this.isEnglish(),t=(this.numberingSystem===null||this.numberingSystem==="latn")&&(this.outputCalendar===null||this.outputCalendar==="gregory");return e&&t?"en":"intl"}clone(e){return!e||Object.getOwnPropertyNames(e).length===0?this:r.create(e.locale||this.specifiedLocale,e.numberingSystem||this.numberingSystem,e.outputCalendar||this.outputCalendar,e.defaultToEN||!1)}redefaultToEN(e={}){return this.clone({...e,defaultToEN:!0})}redefaultToSystem(e={}){return this.clone({...e,defaultToEN:!1})}months(e,t=!1,n=!0){return Py(this,e,n,Vj,()=>{let i=t?{month:e,day:"numeric"}:{month:e},s=t?"format":"standalone";return this.monthsCache[s][e]||(this.monthsCache[s][e]=Eue(o=>this.extract(o,i,"month"))),this.monthsCache[s][e]})}weekdays(e,t=!1,n=!0){return Py(this,e,n,Gj,()=>{let i=t?{weekday:e,year:"numeric",month:"long",day:"numeric"}:{weekday:e},s=t?"format":"standalone";return this.weekdaysCache[s][e]||(this.weekdaysCache[s][e]=Oue(o=>this.extract(o,i,"weekday"))),this.weekdaysCache[s][e]})}meridiems(e=!0){return Py(this,void 0,e,()=>$j,()=>{if(!this.meridiemCache){let t={hour:"numeric",hourCycle:"h12"};this.meridiemCache=[Vr.utc(2016,11,13,9),Vr.utc(2016,11,13,19)].map(n=>this.extract(n,t,"dayperiod"))}return this.meridiemCache})}eras(e,t=!0){return Py(this,e,t,Wj,()=>{let n={era:e};return this.eraCache[e]||(this.eraCache[e]=[Vr.utc(-40,1,1),Vr.utc(2017,1,1)].map(i=>this.extract(i,n,"era"))),this.eraCache[e]})}extract(e,t,n){let i=this.dtFormatter(e,t),s=i.formatToParts(),o=s.find(a=>a.type.toLowerCase()===n);return o?o.value:null}numberFormatter(e={}){return new cE(this.intl,e.forceSimple||this.fastNumbers,e)}dtFormatter(e,t={}){return new fE(e,this.intl,t)}relFormatter(e={}){return new dE(this.intl,this.isEnglish(),e)}listFormatter(e={}){return vue(this.intl,e)}isEnglish(){return this.locale==="en"||this.locale.toLowerCase()==="en-us"||new Intl.DateTimeFormat(this.intl).resolvedOptions().locale.startsWith("en-us")}equals(e){return this.locale===e.locale&&this.numberingSystem===e.numberingSystem&&this.outputCalendar===e.outputCalendar}},Qx=null,Ci=class r extends Ka{static get utcInstance(){return Qx===null&&(Qx=new r(0)),Qx}static instance(e){return e===0?r.utcInstance:new r(e)}static parseSpecifier(e){if(e){let t=e.match(/^utc(?:([+-]\d{1,2})(?::(\d{2}))?)?$/i);if(t)return new r($y(t[1],t[2]))}return null}constructor(e){super(),this.fixed=e}get type(){return"fixed"}get name(){return this.fixed===0?"UTC":`UTC${Hh(this.fixed,"narrow")}`}get ianaName(){return this.fixed===0?"Etc/UTC":`Etc/GMT${Hh(-this.fixed,"narrow")}`}offsetName(){return this.name}formatOffset(e,t){return Hh(this.fixed,t)}get isUniversal(){return!0}offset(){return this.fixed}equals(e){return e.type==="fixed"&&e.fixed===this.fixed}get isValid(){return!0}},Fy=class extends Ka{constructor(e){super(),this.zoneName=e}get type(){return"invalid"}get name(){return this.zoneName}get isUniversal(){return!1}offsetName(){return null}formatOffset(){return""}offset(){return NaN}equals(){return!1}get isValid(){return!1}};function ja(r,e){if(yt(r)||r===null)return e;if(r instanceof Ka)return r;if(Cue(r)){let t=r.toLowerCase();return t==="default"?e:t==="local"||t==="system"?Yh.instance:t==="utc"||t==="gmt"?Ci.utcInstance:Ci.parseSpecifier(t)||Fo.create(r)}else return mu(r)?Ci.instance(r):typeof r=="object"&&r.offset&&typeof r.offset=="number"?r:new Fy(r)}var HN=()=>Date.now(),YN="system",JN=null,QN=null,ZN=null,XN=60,ej,hr=class{static get now(){return HN}static set now(e){HN=e}static set defaultZone(e){YN=e}static get defaultZone(){return ja(YN,Yh.instance)}static get defaultLocale(){return JN}static set defaultLocale(e){JN=e}static get defaultNumberingSystem(){return QN}static set defaultNumberingSystem(e){QN=e}static get defaultOutputCalendar(){return ZN}static set defaultOutputCalendar(e){ZN=e}static get twoDigitCutoffYear(){return XN}static set twoDigitCutoffYear(e){XN=e%100}static get throwOnInvalid(){return ej}static set throwOnInvalid(e){ej=e}static resetCaches(){Rr.resetCache(),Fo.resetCache()}};function yt(r){return typeof r>"u"}function mu(r){return typeof r=="number"}function Gy(r){return typeof r=="number"&&r%1===0}function Cue(r){return typeof r=="string"}function Tue(r){return Object.prototype.toString.call(r)==="[object Date]"}function jj(){try{return typeof Intl<"u"&&!!Intl.RelativeTimeFormat}catch{return!1}}function Aue(r){return Array.isArray(r)?r:[r]}function tj(r,e,t){if(r.length!==0)return r.reduce((n,i)=>{let s=[e(i),i];return n&&t(n[0],s[0])===n[0]?n:s},null)[1]}function Mue(r,e){return e.reduce((t,n)=>(t[n]=r[n],t),{})}function pf(r,e){return Object.prototype.hasOwnProperty.call(r,e)}function Ko(r,e,t){return Gy(r)&&r>=e&&r<=t}function kue(r,e){return r-e*Math.floor(r/e)}function $r(r,e=2){let t=r<0,n;return t?n="-"+(""+-r).padStart(e,"0"):n=(""+r).padStart(e,"0"),n}function Na(r){if(!(yt(r)||r===null||r===""))return parseInt(r,10)}function fu(r){if(!(yt(r)||r===null||r===""))return parseFloat(r)}function mE(r){if(!(yt(r)||r===null||r==="")){let e=parseFloat("0."+r)*1e3;return Math.floor(e)}}function gE(r,e,t=!1){let n=10**e;return(t?Math.trunc:Math.round)(r*n)/n}function Jh(r){return r%4===0&&(r%100!==0||r%400===0)}function zh(r){return Jh(r)?366:365}function Vy(r,e){let t=kue(e-1,12)+1,n=r+(e-t)/12;return t===2?Jh(n)?29:28:[31,null,31,30,31,30,31,31,30,31,30,31][t-1]}function yE(r){let e=Date.UTC(r.year,r.month-1,r.day,r.hour,r.minute,r.second,r.millisecond);return r.year<100&&r.year>=0&&(e=new Date(e),e.setUTCFullYear(r.year,r.month-1,r.day)),+e}function By(r){let e=(r+Math.floor(r/4)-Math.floor(r/100)+Math.floor(r/400))%7,t=r-1,n=(t+Math.floor(t/4)-Math.floor(t/100)+Math.floor(t/400))%7;return e===4||n===3?53:52}function hE(r){return r>99?r:r>hr.twoDigitCutoffYear?1900+r:2e3+r}function Kj(r,e,t,n=null){let i=new Date(r),s={hourCycle:"h23",year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"};n&&(s.timeZone=n);let o={timeZoneName:e,...s},a=new Intl.DateTimeFormat(t,o).formatToParts(i).find(u=>u.type.toLowerCase()==="timezonename");return a?a.value:null}function $y(r,e){let t=parseInt(r,10);Number.isNaN(t)&&(t=0);let n=parseInt(e,10)||0,i=t<0||Object.is(t,-0)?-n:n;return t*60+i}function qj(r){let e=Number(r);if(typeof r=="boolean"||r===""||Number.isNaN(e))throw new ri(`Invalid unit value ${r}`);return e}function Uy(r,e){let t={};for(let n in r)if(pf(r,n)){let i=r[n];if(i==null)continue;t[e(n)]=qj(i)}return t}function Hh(r,e){let t=Math.trunc(Math.abs(r/60)),n=Math.trunc(Math.abs(r%60)),i=r>=0?"+":"-";switch(e){case"short":return`${i}${$r(t,2)}:${$r(n,2)}`;case"narrow":return`${i}${t}${n>0?`:${n}`:""}`;case"techie":return`${i}${$r(t,2)}${$r(n,2)}`;default:throw new RangeError(`Value format ${e} is out of range for property format`)}}function Wy(r){return Mue(r,["hour","minute","second","millisecond"])}var Pue=["January","February","March","April","May","June","July","August","September","October","November","December"],Fj=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],Rue=["J","F","M","A","M","J","J","A","S","O","N","D"];function Vj(r){switch(r){case"narrow":return[...Rue];case"short":return[...Fj];case"long":return[...Pue];case"numeric":return["1","2","3","4","5","6","7","8","9","10","11","12"];case"2-digit":return["01","02","03","04","05","06","07","08","09","10","11","12"];default:return null}}var Bj=["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],Uj=["Mon","Tue","Wed","Thu","Fri","Sat","Sun"],Lue=["M","T","W","T","F","S","S"];function Gj(r){switch(r){case"narrow":return[...Lue];case"short":return[...Uj];case"long":return[...Bj];case"numeric":return["1","2","3","4","5","6","7"];default:return null}}var $j=["AM","PM"],Due=["Before Christ","Anno Domini"],Nue=["BC","AD"],jue=["B","A"];function Wj(r){switch(r){case"narrow":return[...jue];case"short":return[...Nue];case"long":return[...Due];default:return null}}function Kue(r){return $j[r.hour<12?0:1]}function que(r,e){return Gj(e)[r.weekday-1]}function Fue(r,e){return Vj(e)[r.month-1]}function Vue(r,e){return Wj(e)[r.year<0?0:1]}function Bue(r,e,t="always",n=!1){let i={years:["year","yr."],quarters:["quarter","qtr."],months:["month","mo."],weeks:["week","wk."],days:["day","day","days"],hours:["hour","hr."],minutes:["minute","min."],seconds:["second","sec."]},s=["hours","minutes","seconds"].indexOf(r)===-1;if(t==="auto"&&s){let h=r==="days";switch(e){case 1:return h?"tomorrow":`next ${i[r][0]}`;case-1:return h?"yesterday":`last ${i[r][0]}`;case 0:return h?"today":`this ${i[r][0]}`}}let o=Object.is(e,-0)||e<0,a=Math.abs(e),u=a===1,c=i[r],d=n?u?c[1]:c[2]||c[1]:u?i[r][0]:r;return o?`${a} ${d} ago`:`in ${a} ${d}`}function rj(r,e){let t="";for(let n of r)n.literal?t+=n.val:t+=e(n.val);return t}var Uue={D:qy,DD:vj,DDD:wj,DDDD:bj,t:Sj,tt:_j,ttt:xj,tttt:Ej,T:Oj,TT:Ij,TTT:Cj,TTTT:Tj,f:Aj,ff:kj,fff:Rj,ffff:Dj,F:Mj,FF:Pj,FFF:Lj,FFFF:Nj},Ei=class r{static create(e,t={}){return new r(e,t)}static parseFormat(e){let t=null,n="",i=!1,s=[];for(let o=0;o<e.length;o++){let a=e.charAt(o);a==="'"?(n.length>0&&s.push({literal:i||/^\s+$/.test(n),val:n}),t=null,n="",i=!i):i||a===t?n+=a:(n.length>0&&s.push({literal:/^\s+$/.test(n),val:n}),n=a,t=a)}return n.length>0&&s.push({literal:i||/^\s+$/.test(n),val:n}),s}static macroTokenToFormatOpts(e){return Uue[e]}constructor(e,t){this.opts=t,this.loc=e,this.systemLoc=null}formatWithSystemDefault(e,t){return this.systemLoc===null&&(this.systemLoc=this.loc.redefaultToSystem()),this.systemLoc.dtFormatter(e,{...this.opts,...t}).format()}formatDateTime(e,t={}){return this.loc.dtFormatter(e,{...this.opts,...t}).format()}formatDateTimeParts(e,t={}){return this.loc.dtFormatter(e,{...this.opts,...t}).formatToParts()}formatInterval(e,t={}){return this.loc.dtFormatter(e.start,{...this.opts,...t}).dtf.formatRange(e.start.toJSDate(),e.end.toJSDate())}resolvedOptions(e,t={}){return this.loc.dtFormatter(e,{...this.opts,...t}).resolvedOptions()}num(e,t=0){if(this.opts.forceSimple)return $r(e,t);let n={...this.opts};return t>0&&(n.padTo=t),this.loc.numberFormatter(n).format(e)}formatDateTimeFromString(e,t){let n=this.loc.listingMode()==="en",i=this.loc.outputCalendar&&this.loc.outputCalendar!=="gregory",s=(m,y)=>this.loc.extract(e,m,y),o=m=>e.isOffsetFixed&&e.offset===0&&m.allowZ?"Z":e.isValid?e.zone.formatOffset(e.ts,m.format):"",a=()=>n?Kue(e):s({hour:"numeric",hourCycle:"h12"},"dayperiod"),u=(m,y)=>n?Fue(e,m):s(y?{month:m}:{month:m,day:"numeric"},"month"),c=(m,y)=>n?que(e,m):s(y?{weekday:m}:{weekday:m,month:"long",day:"numeric"},"weekday"),d=m=>{let y=r.macroTokenToFormatOpts(m);return y?this.formatWithSystemDefault(e,y):m},h=m=>n?Vue(e,m):s({era:m},"era"),p=m=>{switch(m){case"S":return this.num(e.millisecond);case"u":case"SSS":return this.num(e.millisecond,3);case"s":return this.num(e.second);case"ss":return this.num(e.second,2);case"uu":return this.num(Math.floor(e.millisecond/10),2);case"uuu":return this.num(Math.floor(e.millisecond/100));case"m":return this.num(e.minute);case"mm":return this.num(e.minute,2);case"h":return this.num(e.hour%12===0?12:e.hour%12);case"hh":return this.num(e.hour%12===0?12:e.hour%12,2);case"H":return this.num(e.hour);case"HH":return this.num(e.hour,2);case"Z":return o({format:"narrow",allowZ:this.opts.allowZ});case"ZZ":return o({format:"short",allowZ:this.opts.allowZ});case"ZZZ":return o({format:"techie",allowZ:this.opts.allowZ});case"ZZZZ":return e.zone.offsetName(e.ts,{format:"short",locale:this.loc.locale});case"ZZZZZ":return e.zone.offsetName(e.ts,{format:"long",locale:this.loc.locale});case"z":return e.zoneName;case"a":return a();case"d":return i?s({day:"numeric"},"day"):this.num(e.day);case"dd":return i?s({day:"2-digit"},"day"):this.num(e.day,2);case"c":return this.num(e.weekday);case"ccc":return c("short",!0);case"cccc":return c("long",!0);case"ccccc":return c("narrow",!0);case"E":return this.num(e.weekday);case"EEE":return c("short",!1);case"EEEE":return c("long",!1);case"EEEEE":return c("narrow",!1);case"L":return i?s({month:"numeric",day:"numeric"},"month"):this.num(e.month);case"LL":return i?s({month:"2-digit",day:"numeric"},"month"):this.num(e.month,2);case"LLL":return u("short",!0);case"LLLL":return u("long",!0);case"LLLLL":return u("narrow",!0);case"M":return i?s({month:"numeric"},"month"):this.num(e.month);case"MM":return i?s({month:"2-digit"},"month"):this.num(e.month,2);case"MMM":return u("short",!1);case"MMMM":return u("long",!1);case"MMMMM":return u("narrow",!1);case"y":return i?s({year:"numeric"},"year"):this.num(e.year);case"yy":return i?s({year:"2-digit"},"year"):this.num(e.year.toString().slice(-2),2);case"yyyy":return i?s({year:"numeric"},"year"):this.num(e.year,4);case"yyyyyy":return i?s({year:"numeric"},"year"):this.num(e.year,6);case"G":return h("short");case"GG":return h("long");case"GGGGG":return h("narrow");case"kk":return this.num(e.weekYear.toString().slice(-2),2);case"kkkk":return this.num(e.weekYear,4);case"W":return this.num(e.weekNumber);case"WW":return this.num(e.weekNumber,2);case"o":return this.num(e.ordinal);case"ooo":return this.num(e.ordinal,3);case"q":return this.num(e.quarter);case"qq":return this.num(e.quarter,2);case"X":return this.num(Math.floor(e.ts/1e3));case"x":return this.num(e.ts);default:return d(m)}};return rj(r.parseFormat(t),p)}formatDurationFromString(e,t){let n=u=>{switch(u[0]){case"S":return"millisecond";case"s":return"second";case"m":return"minute";case"h":return"hour";case"d":return"day";case"w":return"week";case"M":return"month";case"y":return"year";default:return null}},i=u=>c=>{let d=n(c);return d?this.num(u.get(d),c.length):c},s=r.parseFormat(t),o=s.reduce((u,{literal:c,val:d})=>c?u:u.concat(d),[]),a=e.shiftTo(...o.map(n).filter(u=>u));return rj(s,i(a))}},Oi=class{constructor(e,t){this.reason=e,this.explanation=t}toMessage(){return this.explanation?`${this.reason}: ${this.explanation}`:this.reason}},zj=/[A-Za-z_+-]{1,256}(?::?\/[A-Za-z0-9_+-]{1,256}(?:\/[A-Za-z0-9_+-]{1,256})?)?/;function mf(...r){let e=r.reduce((t,n)=>t+n.source,"");return RegExp(`^${e}$`)}function gf(...r){return e=>r.reduce(([t,n,i],s)=>{let[o,a,u]=s(e,i);return[{...t,...o},a||n,u]},[{},null,1]).slice(0,2)}function yf(r,...e){if(r==null)return[null,null];for(let[t,n]of e){let i=t.exec(r);if(i)return n(i)}return[null,null]}function Hj(...r){return(e,t)=>{let n={},i;for(i=0;i<r.length;i++)n[r[i]]=Na(e[t+i]);return[n,null,t+i]}}var Yj=/(?:(Z)|([+-]\d\d)(?::?(\d\d))?)/,Gue=`(?:${Yj.source}?(?:\\[(${zj.source})\\])?)?`,vE=/(\d\d)(?::?(\d\d)(?::?(\d\d)(?:[.,](\d{1,30}))?)?)?/,Jj=RegExp(`${vE.source}${Gue}`),wE=RegExp(`(?:T${Jj.source})?`),$ue=/([+-]\d{6}|\d{4})(?:-?(\d\d)(?:-?(\d\d))?)?/,Wue=/(\d{4})-?W(\d\d)(?:-?(\d))?/,zue=/(\d{4})-?(\d{3})/,Hue=Hj("weekYear","weekNumber","weekDay"),Yue=Hj("year","ordinal"),Jue=/(\d{4})-(\d\d)-(\d\d)/,Qj=RegExp(`${vE.source} ?(?:${Yj.source}|(${zj.source}))?`),Que=RegExp(`(?: ${Qj.source})?`);function hf(r,e,t){let n=r[e];return yt(n)?t:Na(n)}function Zue(r,e){return[{year:hf(r,e),month:hf(r,e+1,1),day:hf(r,e+2,1)},null,e+3]}function vf(r,e){return[{hours:hf(r,e,0),minutes:hf(r,e+1,0),seconds:hf(r,e+2,0),milliseconds:mE(r[e+3])},null,e+4]}function Qh(r,e){let t=!r[e]&&!r[e+1],n=$y(r[e+1],r[e+2]),i=t?null:Ci.instance(n);return[{},i,e+3]}function Zh(r,e){let t=r[e]?Fo.create(r[e]):null;return[{},t,e+1]}var Xue=RegExp(`^T?${vE.source}$`),ece=/^-?P(?:(?:(-?\d{1,20}(?:\.\d{1,20})?)Y)?(?:(-?\d{1,20}(?:\.\d{1,20})?)M)?(?:(-?\d{1,20}(?:\.\d{1,20})?)W)?(?:(-?\d{1,20}(?:\.\d{1,20})?)D)?(?:T(?:(-?\d{1,20}(?:\.\d{1,20})?)H)?(?:(-?\d{1,20}(?:\.\d{1,20})?)M)?(?:(-?\d{1,20})(?:[.,](-?\d{1,20}))?S)?)?)$/;function tce(r){let[e,t,n,i,s,o,a,u,c]=r,d=e[0]==="-",h=u&&u[0]==="-",p=(m,y=!1)=>m!==void 0&&(y||m&&d)?-m:m;return[{years:p(fu(t)),months:p(fu(n)),weeks:p(fu(i)),days:p(fu(s)),hours:p(fu(o)),minutes:p(fu(a)),seconds:p(fu(u),u==="-0"),milliseconds:p(mE(c),h)}]}var rce={GMT:0,EDT:-4*60,EST:-5*60,CDT:-5*60,CST:-6*60,MDT:-6*60,MST:-7*60,PDT:-7*60,PST:-8*60};function bE(r,e,t,n,i,s,o){let a={year:e.length===2?hE(Na(e)):Na(e),month:Fj.indexOf(t)+1,day:Na(n),hour:Na(i),minute:Na(s)};return o&&(a.second=Na(o)),r&&(a.weekday=r.length>3?Bj.indexOf(r)+1:Uj.indexOf(r)+1),a}var nce=/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|(?:([+-]\d\d)(\d\d)))$/;function ice(r){let[,e,t,n,i,s,o,a,u,c,d,h]=r,p=bE(e,i,n,t,s,o,a),m;return u?m=rce[u]:c?m=0:m=$y(d,h),[p,new Ci(m)]}function sce(r){return r.replace(/\([^()]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").trim()}var oce=/^(Mon|Tue|Wed|Thu|Fri|Sat|Sun), (\d\d) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) (\d{4}) (\d\d):(\d\d):(\d\d) GMT$/,ace=/^(Monday|Tuesday|Wednesday|Thursday|Friday|Saturday|Sunday), (\d\d)-(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)-(\d\d) (\d\d):(\d\d):(\d\d) GMT$/,lce=/^(Mon|Tue|Wed|Thu|Fri|Sat|Sun) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) ( \d|\d\d) (\d\d):(\d\d):(\d\d) (\d{4})$/;function nj(r){let[,e,t,n,i,s,o,a]=r;return[bE(e,i,n,t,s,o,a),Ci.utcInstance]}function uce(r){let[,e,t,n,i,s,o,a]=r;return[bE(e,a,t,n,i,s,o),Ci.utcInstance]}var cce=mf($ue,wE),fce=mf(Wue,wE),dce=mf(zue,wE),hce=mf(Jj),Zj=gf(Zue,vf,Qh,Zh),pce=gf(Hue,vf,Qh,Zh),mce=gf(Yue,vf,Qh,Zh),gce=gf(vf,Qh,Zh);function yce(r){return yf(r,[cce,Zj],[fce,pce],[dce,mce],[hce,gce])}function vce(r){return yf(sce(r),[nce,ice])}function wce(r){return yf(r,[oce,nj],[ace,nj],[lce,uce])}function bce(r){return yf(r,[ece,tce])}var Sce=gf(vf);function _ce(r){return yf(r,[Xue,Sce])}var xce=mf(Jue,Que),Ece=mf(Qj),Oce=gf(vf,Qh,Zh);function Ice(r){return yf(r,[xce,Zj],[Ece,Oce])}var Cce="Invalid Duration",Xj={weeks:{days:7,hours:7*24,minutes:7*24*60,seconds:7*24*60*60,milliseconds:7*24*60*60*1e3},days:{hours:24,minutes:24*60,seconds:24*60*60,milliseconds:24*60*60*1e3},hours:{minutes:60,seconds:60*60,milliseconds:60*60*1e3},minutes:{seconds:60,milliseconds:60*1e3},seconds:{milliseconds:1e3}},Tce={years:{quarters:4,months:12,weeks:52,days:365,hours:365*24,minutes:365*24*60,seconds:365*24*60*60,milliseconds:365*24*60*60*1e3},quarters:{months:3,weeks:13,days:91,hours:91*24,minutes:91*24*60,seconds:91*24*60*60,milliseconds:91*24*60*60*1e3},months:{weeks:4,days:30,hours:30*24,minutes:30*24*60,seconds:30*24*60*60,milliseconds:30*24*60*60*1e3},...Xj},Xi=146097/400,ff=146097/4800,Ace={years:{quarters:4,months:12,weeks:Xi/7,days:Xi,hours:Xi*24,minutes:Xi*24*60,seconds:Xi*24*60*60,milliseconds:Xi*24*60*60*1e3},quarters:{months:3,weeks:Xi/28,days:Xi/4,hours:Xi*24/4,minutes:Xi*24*60/4,seconds:Xi*24*60*60/4,milliseconds:Xi*24*60*60*1e3/4},months:{weeks:ff/7,days:ff,hours:ff*24,minutes:ff*24*60,seconds:ff*24*60*60,milliseconds:ff*24*60*60*1e3},...Xj},du=["years","quarters","months","weeks","days","hours","minutes","seconds","milliseconds"],Mce=du.slice(0).reverse();function Da(r,e,t=!1){let n={values:t?e.values:{...r.values,...e.values||{}},loc:r.loc.clone(e.loc),conversionAccuracy:e.conversionAccuracy||r.conversionAccuracy,matrix:e.matrix||r.matrix};return new Xr(n)}function kce(r){return r<0?Math.floor(r):Math.ceil(r)}function eK(r,e,t,n,i){let s=r[i][t],o=e[t]/s,a=Math.sign(o)===Math.sign(n[i]),u=!a&&n[i]!==0&&Math.abs(o)<=1?kce(o):Math.trunc(o);n[i]+=u,e[t]-=u*s}function Pce(r,e){Mce.reduce((t,n)=>yt(e[n])?t:(t&&eK(r,e,t,e,n),n),null)}function Rce(r){let e={};for(let[t,n]of Object.entries(r))n!==0&&(e[t]=n);return e}var Xr=class r{constructor(e){let t=e.conversionAccuracy==="longterm"||!1,n=t?Ace:Tce;e.matrix&&(n=e.matrix),this.values=e.values,this.loc=e.loc||Rr.create(),this.conversionAccuracy=t?"longterm":"casual",this.invalid=e.invalid||null,this.matrix=n,this.isLuxonDuration=!0}static fromMillis(e,t){return r.fromObject({milliseconds:e},t)}static fromObject(e,t={}){if(e==null||typeof e!="object")throw new ri(`Duration.fromObject: argument expected to be an object, got ${e===null?"null":typeof e}`);return new r({values:Uy(e,r.normalizeUnit),loc:Rr.fromObject(t),conversionAccuracy:t.conversionAccuracy,matrix:t.matrix})}static fromDurationLike(e){if(mu(e))return r.fromMillis(e);if(r.isDuration(e))return e;if(typeof e=="object")return r.fromObject(e);throw new ri(`Unknown duration argument ${e} of type ${typeof e}`)}static fromISO(e,t){let[n]=bce(e);return n?r.fromObject(n,t):r.invalid("unparsable",`the input "${e}" can't be parsed as ISO 8601`)}static fromISOTime(e,t){let[n]=_ce(e);return n?r.fromObject(n,t):r.invalid("unparsable",`the input "${e}" can't be parsed as ISO 8601`)}static invalid(e,t=null){if(!e)throw new ri("need to specify a reason the Duration is invalid");let n=e instanceof Oi?e:new Oi(e,t);if(hr.throwOnInvalid)throw new sE(n);return new r({invalid:n})}static normalizeUnit(e){let t={year:"years",years:"years",quarter:"quarters",quarters:"quarters",month:"months",months:"months",week:"weeks",weeks:"weeks",day:"days",days:"days",hour:"hours",hours:"hours",minute:"minutes",minutes:"minutes",second:"seconds",seconds:"seconds",millisecond:"milliseconds",milliseconds:"milliseconds"}[e&&e.toLowerCase()];if(!t)throw new Ky(e);return t}static isDuration(e){return e&&e.isLuxonDuration||!1}get locale(){return this.isValid?this.loc.locale:null}get numberingSystem(){return this.isValid?this.loc.numberingSystem:null}toFormat(e,t={}){let n={...t,floor:t.round!==!1&&t.floor!==!1};return this.isValid?Ei.create(this.loc,n).formatDurationFromString(this,e):Cce}toHuman(e={}){let t=du.map(n=>{let i=this.values[n];return yt(i)?null:this.loc.numberFormatter({style:"unit",unitDisplay:"long",...e,unit:n.slice(0,-1)}).format(i)}).filter(n=>n);return this.loc.listFormatter({type:"conjunction",style:e.listStyle||"narrow",...e}).format(t)}toObject(){return this.isValid?{...this.values}:{}}toISO(){if(!this.isValid)return null;let e="P";return this.years!==0&&(e+=this.years+"Y"),(this.months!==0||this.quarters!==0)&&(e+=this.months+this.quarters*3+"M"),this.weeks!==0&&(e+=this.weeks+"W"),this.days!==0&&(e+=this.days+"D"),(this.hours!==0||this.minutes!==0||this.seconds!==0||this.milliseconds!==0)&&(e+="T"),this.hours!==0&&(e+=this.hours+"H"),this.minutes!==0&&(e+=this.minutes+"M"),(this.seconds!==0||this.milliseconds!==0)&&(e+=gE(this.seconds+this.milliseconds/1e3,3)+"S"),e==="P"&&(e+="T0S"),e}toISOTime(e={}){if(!this.isValid)return null;let t=this.toMillis();if(t<0||t>=864e5)return null;e={suppressMilliseconds:!1,suppressSeconds:!1,includePrefix:!1,format:"extended",...e};let n=this.shiftTo("hours","minutes","seconds","milliseconds"),i=e.format==="basic"?"hhmm":"hh:mm";(!e.suppressSeconds||n.seconds!==0||n.milliseconds!==0)&&(i+=e.format==="basic"?"ss":":ss",(!e.suppressMilliseconds||n.milliseconds!==0)&&(i+=".SSS"));let s=n.toFormat(i);return e.includePrefix&&(s="T"+s),s}toJSON(){return this.toISO()}toString(){return this.toISO()}toMillis(){return this.as("milliseconds")}valueOf(){return this.toMillis()}plus(e){if(!this.isValid)return this;let t=r.fromDurationLike(e),n={};for(let i of du)(pf(t.values,i)||pf(this.values,i))&&(n[i]=t.get(i)+this.get(i));return Da(this,{values:n},!0)}minus(e){if(!this.isValid)return this;let t=r.fromDurationLike(e);return this.plus(t.negate())}mapUnits(e){if(!this.isValid)return this;let t={};for(let n of Object.keys(this.values))t[n]=qj(e(this.values[n],n));return Da(this,{values:t},!0)}get(e){return this[r.normalizeUnit(e)]}set(e){if(!this.isValid)return this;let t={...this.values,...Uy(e,r.normalizeUnit)};return Da(this,{values:t})}reconfigure({locale:e,numberingSystem:t,conversionAccuracy:n,matrix:i}={}){let o={loc:this.loc.clone({locale:e,numberingSystem:t}),matrix:i,conversionAccuracy:n};return Da(this,o)}as(e){return this.isValid?this.shiftTo(e).get(e):NaN}normalize(){if(!this.isValid)return this;let e=this.toObject();return Pce(this.matrix,e),Da(this,{values:e},!0)}rescale(){if(!this.isValid)return this;let e=Rce(this.normalize().shiftToAll().toObject());return Da(this,{values:e},!0)}shiftTo(...e){if(!this.isValid)return this;if(e.length===0)return this;e=e.map(o=>r.normalizeUnit(o));let t={},n={},i=this.toObject(),s;for(let o of du)if(e.indexOf(o)>=0){s=o;let a=0;for(let c in n)a+=this.matrix[c][o]*n[c],n[c]=0;mu(i[o])&&(a+=i[o]);let u=Math.trunc(a);t[o]=u,n[o]=(a*1e3-u*1e3)/1e3;for(let c in i)du.indexOf(c)>du.indexOf(o)&&eK(this.matrix,i,c,t,o)}else mu(i[o])&&(n[o]=i[o]);for(let o in n)n[o]!==0&&(t[s]+=o===s?n[o]:n[o]/this.matrix[s][o]);return Da(this,{values:t},!0).normalize()}shiftToAll(){return this.isValid?this.shiftTo("years","months","weeks","days","hours","minutes","seconds","milliseconds"):this}negate(){if(!this.isValid)return this;let e={};for(let t of Object.keys(this.values))e[t]=this.values[t]===0?0:-this.values[t];return Da(this,{values:e},!0)}get years(){return this.isValid?this.values.years||0:NaN}get quarters(){return this.isValid?this.values.quarters||0:NaN}get months(){return this.isValid?this.values.months||0:NaN}get weeks(){return this.isValid?this.values.weeks||0:NaN}get days(){return this.isValid?this.values.days||0:NaN}get hours(){return this.isValid?this.values.hours||0:NaN}get minutes(){return this.isValid?this.values.minutes||0:NaN}get seconds(){return this.isValid?this.values.seconds||0:NaN}get milliseconds(){return this.isValid?this.values.milliseconds||0:NaN}get isValid(){return this.invalid===null}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}equals(e){if(!this.isValid||!e.isValid||!this.loc.equals(e.loc))return!1;function t(n,i){return n===void 0||n===0?i===void 0||i===0:n===i}for(let n of du)if(!t(this.values[n],e.values[n]))return!1;return!0}},df="Invalid Interval";function Lce(r,e){return!r||!r.isValid?gu.invalid("missing or invalid start"):!e||!e.isValid?gu.invalid("missing or invalid end"):e<r?gu.invalid("end before start",`The end of an interval must be after its start, but you had start=${r.toISO()} and end=${e.toISO()}`):null}var gu=class r{constructor(e){this.s=e.start,this.e=e.end,this.invalid=e.invalid||null,this.isLuxonInterval=!0}static invalid(e,t=null){if(!e)throw new ri("need to specify a reason the Interval is invalid");let n=e instanceof Oi?e:new Oi(e,t);if(hr.throwOnInvalid)throw new iE(n);return new r({invalid:n})}static fromDateTimes(e,t){let n=$h(e),i=$h(t),s=Lce(n,i);return s??new r({start:n,end:i})}static after(e,t){let n=Xr.fromDurationLike(t),i=$h(e);return r.fromDateTimes(i,i.plus(n))}static before(e,t){let n=Xr.fromDurationLike(t),i=$h(e);return r.fromDateTimes(i.minus(n),i)}static fromISO(e,t){let[n,i]=(e||"").split("/",2);if(n&&i){let s,o;try{s=Vr.fromISO(n,t),o=s.isValid}catch{o=!1}let a,u;try{a=Vr.fromISO(i,t),u=a.isValid}catch{u=!1}if(o&&u)return r.fromDateTimes(s,a);if(o){let c=Xr.fromISO(i,t);if(c.isValid)return r.after(s,c)}else if(u){let c=Xr.fromISO(n,t);if(c.isValid)return r.before(a,c)}}return r.invalid("unparsable",`the input "${e}" can't be parsed as ISO 8601`)}static isInterval(e){return e&&e.isLuxonInterval||!1}get start(){return this.isValid?this.s:null}get end(){return this.isValid?this.e:null}get isValid(){return this.invalidReason===null}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}length(e="milliseconds"){return this.isValid?this.toDuration(e).get(e):NaN}count(e="milliseconds"){if(!this.isValid)return NaN;let t=this.start.startOf(e),n=this.end.startOf(e);return Math.floor(n.diff(t,e).get(e))+(n.valueOf()!==this.end.valueOf())}hasSame(e){return this.isValid?this.isEmpty()||this.e.minus(1).hasSame(this.s,e):!1}isEmpty(){return this.s.valueOf()===this.e.valueOf()}isAfter(e){return this.isValid?this.s>e:!1}isBefore(e){return this.isValid?this.e<=e:!1}contains(e){return this.isValid?this.s<=e&&this.e>e:!1}set({start:e,end:t}={}){return this.isValid?r.fromDateTimes(e||this.s,t||this.e):this}splitAt(...e){if(!this.isValid)return[];let t=e.map($h).filter(o=>this.contains(o)).sort(),n=[],{s:i}=this,s=0;for(;i<this.e;){let o=t[s]||this.e,a=+o>+this.e?this.e:o;n.push(r.fromDateTimes(i,a)),i=a,s+=1}return n}splitBy(e){let t=Xr.fromDurationLike(e);if(!this.isValid||!t.isValid||t.as("milliseconds")===0)return[];let{s:n}=this,i=1,s,o=[];for(;n<this.e;){let a=this.start.plus(t.mapUnits(u=>u*i));s=+a>+this.e?this.e:a,o.push(r.fromDateTimes(n,s)),n=s,i+=1}return o}divideEqually(e){return this.isValid?this.splitBy(this.length()/e).slice(0,e):[]}overlaps(e){return this.e>e.s&&this.s<e.e}abutsStart(e){return this.isValid?+this.e==+e.s:!1}abutsEnd(e){return this.isValid?+e.e==+this.s:!1}engulfs(e){return this.isValid?this.s<=e.s&&this.e>=e.e:!1}equals(e){return!this.isValid||!e.isValid?!1:this.s.equals(e.s)&&this.e.equals(e.e)}intersection(e){if(!this.isValid)return this;let t=this.s>e.s?this.s:e.s,n=this.e<e.e?this.e:e.e;return t>=n?null:r.fromDateTimes(t,n)}union(e){if(!this.isValid)return this;let t=this.s<e.s?this.s:e.s,n=this.e>e.e?this.e:e.e;return r.fromDateTimes(t,n)}static merge(e){let[t,n]=e.sort((i,s)=>i.s-s.s).reduce(([i,s],o)=>s?s.overlaps(o)||s.abutsStart(o)?[i,s.union(o)]:[i.concat([s]),o]:[i,o],[[],null]);return n&&t.push(n),t}static xor(e){let t=null,n=0,i=[],s=e.map(u=>[{time:u.s,type:"s"},{time:u.e,type:"e"}]),o=Array.prototype.concat(...s),a=o.sort((u,c)=>u.time-c.time);for(let u of a)n+=u.type==="s"?1:-1,n===1?t=u.time:(t&&+t!=+u.time&&i.push(r.fromDateTimes(t,u.time)),t=null);return r.merge(i)}difference(...e){return r.xor([this].concat(e)).map(t=>this.intersection(t)).filter(t=>t&&!t.isEmpty())}toString(){return this.isValid?`[${this.s.toISO()} \u2013 ${this.e.toISO()})`:df}toLocaleString(e=qy,t={}){return this.isValid?Ei.create(this.s.loc.clone(t),e).formatInterval(this):df}toISO(e){return this.isValid?`${this.s.toISO(e)}/${this.e.toISO(e)}`:df}toISODate(){return this.isValid?`${this.s.toISODate()}/${this.e.toISODate()}`:df}toISOTime(e){return this.isValid?`${this.s.toISOTime(e)}/${this.e.toISOTime(e)}`:df}toFormat(e,{separator:t=" \u2013 "}={}){return this.isValid?`${this.s.toFormat(e)}${t}${this.e.toFormat(e)}`:df}toDuration(e,t){return this.isValid?this.e.diff(this.s,e,t):Xr.invalid(this.invalidReason)}mapEndpoints(e){return r.fromDateTimes(e(this.s),e(this.e))}},pu=class{static hasDST(e=hr.defaultZone){let t=Vr.now().setZone(e).set({month:12});return!e.isUniversal&&t.offset!==t.set({month:6}).offset}static isValidIANAZone(e){return Fo.isValidZone(e)}static normalizeZone(e){return ja(e,hr.defaultZone)}static months(e="long",{locale:t=null,numberingSystem:n=null,locObj:i=null,outputCalendar:s="gregory"}={}){return(i||Rr.create(t,n,s)).months(e)}static monthsFormat(e="long",{locale:t=null,numberingSystem:n=null,locObj:i=null,outputCalendar:s="gregory"}={}){return(i||Rr.create(t,n,s)).months(e,!0)}static weekdays(e="long",{locale:t=null,numberingSystem:n=null,locObj:i=null}={}){return(i||Rr.create(t,n,null)).weekdays(e)}static weekdaysFormat(e="long",{locale:t=null,numberingSystem:n=null,locObj:i=null}={}){return(i||Rr.create(t,n,null)).weekdays(e,!0)}static meridiems({locale:e=null}={}){return Rr.create(e).meridiems()}static eras(e="short",{locale:t=null}={}){return Rr.create(t,null,"gregory").eras(e)}static features(){return{relative:jj()}}};function ij(r,e){let t=i=>i.toUTC(0,{keepLocalTime:!0}).startOf("day").valueOf(),n=t(e)-t(r);return Math.floor(Xr.fromMillis(n).as("days"))}function Dce(r,e,t){let n=[["years",(u,c)=>c.year-u.year],["quarters",(u,c)=>c.quarter-u.quarter+(c.year-u.year)*4],["months",(u,c)=>c.month-u.month+(c.year-u.year)*12],["weeks",(u,c)=>{let d=ij(u,c);return(d-d%7)/7}],["days",ij]],i={},s=r,o,a;for(let[u,c]of n)t.indexOf(u)>=0&&(o=u,i[u]=c(r,e),a=s.plus(i),a>e?(i[u]--,r=s.plus(i)):r=a);return[r,i,a,o]}function Nce(r,e,t,n){let[i,s,o,a]=Dce(r,e,t),u=e-i,c=t.filter(h=>["hours","minutes","seconds","milliseconds"].indexOf(h)>=0);c.length===0&&(o<e&&(o=i.plus({[a]:1})),o!==i&&(s[a]=(s[a]||0)+u/(o-i)));let d=Xr.fromObject(s,n);return c.length>0?Xr.fromMillis(u,n).shiftTo(...c).plus(d):d}var SE={arab:"[\u0660-\u0669]",arabext:"[\u06F0-\u06F9]",bali:"[\u1B50-\u1B59]",beng:"[\u09E6-\u09EF]",deva:"[\u0966-\u096F]",fullwide:"[\uFF10-\uFF19]",gujr:"[\u0AE6-\u0AEF]",hanidec:"[\u3007|\u4E00|\u4E8C|\u4E09|\u56DB|\u4E94|\u516D|\u4E03|\u516B|\u4E5D]",khmr:"[\u17E0-\u17E9]",knda:"[\u0CE6-\u0CEF]",laoo:"[\u0ED0-\u0ED9]",limb:"[\u1946-\u194F]",mlym:"[\u0D66-\u0D6F]",mong:"[\u1810-\u1819]",mymr:"[\u1040-\u1049]",orya:"[\u0B66-\u0B6F]",tamldec:"[\u0BE6-\u0BEF]",telu:"[\u0C66-\u0C6F]",thai:"[\u0E50-\u0E59]",tibt:"[\u0F20-\u0F29]",latn:"\\d"},sj={arab:[1632,1641],arabext:[1776,1785],bali:[6992,7001],beng:[2534,2543],deva:[2406,2415],fullwide:[65296,65303],gujr:[2790,2799],khmr:[6112,6121],knda:[3302,3311],laoo:[3792,3801],limb:[6470,6479],mlym:[3430,3439],mong:[6160,6169],mymr:[4160,4169],orya:[2918,2927],tamldec:[3046,3055],telu:[3174,3183],thai:[3664,3673],tibt:[3872,3881]},jce=SE.hanidec.replace(/[\[|\]]/g,"").split("");function Kce(r){let e=parseInt(r,10);if(isNaN(e)){e="";for(let t=0;t<r.length;t++){let n=r.charCodeAt(t);if(r[t].search(SE.hanidec)!==-1)e+=jce.indexOf(r[t]);else for(let i in sj){let[s,o]=sj[i];n>=s&&n<=o&&(e+=n-s)}}return parseInt(e,10)}else return e}function Ts({numberingSystem:r},e=""){return new RegExp(`${SE[r||"latn"]}${e}`)}var qce="missing Intl.DateTimeFormat.formatToParts support";function It(r,e=t=>t){return{regex:r,deser:([t])=>e(Kce(t))}}var Fce=String.fromCharCode(160),tK=`[ ${Fce}]`,rK=new RegExp(tK,"g");function Vce(r){return r.replace(/\./g,"\\.?").replace(rK,tK)}function oj(r){return r.replace(/\./g,"").replace(rK," ").toLowerCase()}function As(r,e){return r===null?null:{regex:RegExp(r.map(Vce).join("|")),deser:([t])=>r.findIndex(n=>oj(t)===oj(n))+e}}function aj(r,e){return{regex:r,deser:([,t,n])=>$y(t,n),groups:e}}function Ry(r){return{regex:r,deser:([e])=>e}}function Bce(r){return r.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}function Uce(r,e){let t=Ts(e),n=Ts(e,"{2}"),i=Ts(e,"{3}"),s=Ts(e,"{4}"),o=Ts(e,"{6}"),a=Ts(e,"{1,2}"),u=Ts(e,"{1,3}"),c=Ts(e,"{1,6}"),d=Ts(e,"{1,9}"),h=Ts(e,"{2,4}"),p=Ts(e,"{4,6}"),m=O=>({regex:RegExp(Bce(O.val)),deser:([x])=>x,literal:!0}),_=(O=>{if(r.literal)return m(O);switch(O.val){case"G":return As(e.eras("short",!1),0);case"GG":return As(e.eras("long",!1),0);case"y":return It(c);case"yy":return It(h,hE);case"yyyy":return It(s);case"yyyyy":return It(p);case"yyyyyy":return It(o);case"M":return It(a);case"MM":return It(n);case"MMM":return As(e.months("short",!0,!1),1);case"MMMM":return As(e.months("long",!0,!1),1);case"L":return It(a);case"LL":return It(n);case"LLL":return As(e.months("short",!1,!1),1);case"LLLL":return As(e.months("long",!1,!1),1);case"d":return It(a);case"dd":return It(n);case"o":return It(u);case"ooo":return It(i);case"HH":return It(n);case"H":return It(a);case"hh":return It(n);case"h":return It(a);case"mm":return It(n);case"m":return It(a);case"q":return It(a);case"qq":return It(n);case"s":return It(a);case"ss":return It(n);case"S":return It(u);case"SSS":return It(i);case"u":return Ry(d);case"uu":return Ry(a);case"uuu":return It(t);case"a":return As(e.meridiems(),0);case"kkkk":return It(s);case"kk":return It(h,hE);case"W":return It(a);case"WW":return It(n);case"E":case"c":return It(t);case"EEE":return As(e.weekdays("short",!1,!1),1);case"EEEE":return As(e.weekdays("long",!1,!1),1);case"ccc":return As(e.weekdays("short",!0,!1),1);case"cccc":return As(e.weekdays("long",!0,!1),1);case"Z":case"ZZ":return aj(new RegExp(`([+-]${a.source})(?::(${n.source}))?`),2);case"ZZZ":return aj(new RegExp(`([+-]${a.source})(${n.source})?`),2);case"z":return Ry(/[a-z_+-/]{1,256}?/i);case" ":return Ry(/[^\S\n\r]/);default:return m(O)}})(r)||{invalidReason:qce};return _.token=r,_}var Gce={year:{"2-digit":"yy",numeric:"yyyyy"},month:{numeric:"M","2-digit":"MM",short:"MMM",long:"MMMM"},day:{numeric:"d","2-digit":"dd"},weekday:{short:"EEE",long:"EEEE"},dayperiod:"a",dayPeriod:"a",hour:{numeric:"h","2-digit":"hh"},minute:{numeric:"m","2-digit":"mm"},second:{numeric:"s","2-digit":"ss"},timeZoneName:{long:"ZZZZZ",short:"ZZZ"}};function $ce(r,e){let{type:t,value:n}=r;if(t==="literal"){let o=/^\s+$/.test(n);return{literal:!o,val:o?" ":n}}let i=e[t],s=Gce[t];if(typeof s=="object"&&(s=s[i]),s)return{literal:!1,val:s}}function Wce(r){return[`^${r.map(t=>t.regex).reduce((t,n)=>`${t}(${n.source})`,"")}$`,r]}function zce(r,e,t){let n=r.match(e);if(n){let i={},s=1;for(let o in t)if(pf(t,o)){let a=t[o],u=a.groups?a.groups+1:1;!a.literal&&a.token&&(i[a.token.val[0]]=a.deser(n.slice(s,s+u))),s+=u}return[n,i]}else return[n,{}]}function Hce(r){let e=s=>{switch(s){case"S":return"millisecond";case"s":return"second";case"m":return"minute";case"h":case"H":return"hour";case"d":return"day";case"o":return"ordinal";case"L":case"M":return"month";case"y":return"year";case"E":case"c":return"weekday";case"W":return"weekNumber";case"k":return"weekYear";case"q":return"quarter";default:return null}},t=null,n;return yt(r.z)||(t=Fo.create(r.z)),yt(r.Z)||(t||(t=new Ci(r.Z)),n=r.Z),yt(r.q)||(r.M=(r.q-1)*3+1),yt(r.h)||(r.h<12&&r.a===1?r.h+=12:r.h===12&&r.a===0&&(r.h=0)),r.G===0&&r.y&&(r.y=-r.y),yt(r.u)||(r.S=mE(r.u)),[Object.keys(r).reduce((s,o)=>{let a=e(o);return a&&(s[a]=r[o]),s},{}),t,n]}var Zx=null;function Yce(){return Zx||(Zx=Vr.fromMillis(1555555555555)),Zx}function Jce(r,e){if(r.literal)return r;let t=Ei.macroTokenToFormatOpts(r.val),n=sK(t,e);return n==null||n.includes(void 0)?r:n}function nK(r,e){return Array.prototype.concat(...r.map(t=>Jce(t,e)))}function iK(r,e,t){let n=nK(Ei.parseFormat(t),r),i=n.map(o=>Uce(o,r)),s=i.find(o=>o.invalidReason);if(s)return{input:e,tokens:n,invalidReason:s.invalidReason};{let[o,a]=Wce(i),u=RegExp(o,"i"),[c,d]=zce(e,u,a),[h,p,m]=d?Hce(d):[null,null,void 0];if(pf(d,"a")&&pf(d,"H"))throw new hu("Can't include meridiem when specifying 24-hour format");return{input:e,tokens:n,regex:u,rawMatches:c,matches:d,result:h,zone:p,specificOffset:m}}}function Qce(r,e,t){let{result:n,zone:i,specificOffset:s,invalidReason:o}=iK(r,e,t);return[n,i,s,o]}function sK(r,e){return r?Ei.create(e,r).formatDateTimeParts(Yce()).map(i=>$ce(i,r)):null}var oK=[0,31,59,90,120,151,181,212,243,273,304,334],aK=[0,31,60,91,121,152,182,213,244,274,305,335];function es(r,e){return new Oi("unit out of range",`you specified ${e} (of type ${typeof e}) as a ${r}, which is invalid`)}function lK(r,e,t){let n=new Date(Date.UTC(r,e-1,t));r<100&&r>=0&&n.setUTCFullYear(n.getUTCFullYear()-1900);let i=n.getUTCDay();return i===0?7:i}function uK(r,e,t){return t+(Jh(r)?aK:oK)[e-1]}function cK(r,e){let t=Jh(r)?aK:oK,n=t.findIndex(s=>s<e),i=e-t[n];return{month:n+1,day:i}}function pE(r){let{year:e,month:t,day:n}=r,i=uK(e,t,n),s=lK(e,t,n),o=Math.floor((i-s+10)/7),a;return o<1?(a=e-1,o=By(a)):o>By(e)?(a=e+1,o=1):a=e,{weekYear:a,weekNumber:o,weekday:s,...Wy(r)}}function lj(r){let{weekYear:e,weekNumber:t,weekday:n}=r,i=lK(e,1,4),s=zh(e),o=t*7+n-i-3,a;o<1?(a=e-1,o+=zh(a)):o>s?(a=e+1,o-=zh(e)):a=e;let{month:u,day:c}=cK(a,o);return{year:a,month:u,day:c,...Wy(r)}}function Xx(r){let{year:e,month:t,day:n}=r,i=uK(e,t,n);return{year:e,ordinal:i,...Wy(r)}}function uj(r){let{year:e,ordinal:t}=r,{month:n,day:i}=cK(e,t);return{year:e,month:n,day:i,...Wy(r)}}function Zce(r){let e=Gy(r.weekYear),t=Ko(r.weekNumber,1,By(r.weekYear)),n=Ko(r.weekday,1,7);return e?t?n?!1:es("weekday",r.weekday):es("week",r.week):es("weekYear",r.weekYear)}function Xce(r){let e=Gy(r.year),t=Ko(r.ordinal,1,zh(r.year));return e?t?!1:es("ordinal",r.ordinal):es("year",r.year)}function fK(r){let e=Gy(r.year),t=Ko(r.month,1,12),n=Ko(r.day,1,Vy(r.year,r.month));return e?t?n?!1:es("day",r.day):es("month",r.month):es("year",r.year)}function dK(r){let{hour:e,minute:t,second:n,millisecond:i}=r,s=Ko(e,0,23)||e===24&&t===0&&n===0&&i===0,o=Ko(t,0,59),a=Ko(n,0,59),u=Ko(i,0,999);return s?o?a?u?!1:es("millisecond",i):es("second",n):es("minute",t):es("hour",e)}var eE="Invalid DateTime",cj=864e13;function Ly(r){return new Oi("unsupported zone",`the zone "${r.name}" is not supported`)}function tE(r){return r.weekData===null&&(r.weekData=pE(r.c)),r.weekData}function Uh(r,e){let t={ts:r.ts,zone:r.zone,c:r.c,o:r.o,loc:r.loc,invalid:r.invalid};return new Vr({...t,...e,old:t})}function hK(r,e,t){let n=r-e*60*1e3,i=t.offset(n);if(e===i)return[n,e];n-=(i-e)*60*1e3;let s=t.offset(n);return i===s?[n,i]:[r-Math.min(i,s)*60*1e3,Math.max(i,s)]}function fj(r,e){r+=e*60*1e3;let t=new Date(r);return{year:t.getUTCFullYear(),month:t.getUTCMonth()+1,day:t.getUTCDate(),hour:t.getUTCHours(),minute:t.getUTCMinutes(),second:t.getUTCSeconds(),millisecond:t.getUTCMilliseconds()}}function jy(r,e,t){return hK(yE(r),e,t)}function dj(r,e){let t=r.o,n=r.c.year+Math.trunc(e.years),i=r.c.month+Math.trunc(e.months)+Math.trunc(e.quarters)*3,s={...r.c,year:n,month:i,day:Math.min(r.c.day,Vy(n,i))+Math.trunc(e.days)+Math.trunc(e.weeks)*7},o=Xr.fromObject({years:e.years-Math.trunc(e.years),quarters:e.quarters-Math.trunc(e.quarters),months:e.months-Math.trunc(e.months),weeks:e.weeks-Math.trunc(e.weeks),days:e.days-Math.trunc(e.days),hours:e.hours,minutes:e.minutes,seconds:e.seconds,milliseconds:e.milliseconds}).as("milliseconds"),a=yE(s),[u,c]=hK(a,t,r.zone);return o!==0&&(u+=o,c=r.zone.offset(u)),{ts:u,o:c}}function Gh(r,e,t,n,i,s){let{setZone:o,zone:a}=t;if(r&&Object.keys(r).length!==0||e){let u=e||a,c=Vr.fromObject(r,{...t,zone:u,specificOffset:s});return o?c:c.setZone(a)}else return Vr.invalid(new Oi("unparsable",`the input "${i}" can't be parsed as ${n}`))}function Dy(r,e,t=!0){return r.isValid?Ei.create(Rr.create("en-US"),{allowZ:t,forceSimple:!0}).formatDateTimeFromString(r,e):null}function rE(r,e){let t=r.c.year>9999||r.c.year<0,n="";return t&&r.c.year>=0&&(n+="+"),n+=$r(r.c.year,t?6:4),e?(n+="-",n+=$r(r.c.month),n+="-",n+=$r(r.c.day)):(n+=$r(r.c.month),n+=$r(r.c.day)),n}function hj(r,e,t,n,i,s){let o=$r(r.c.hour);return e?(o+=":",o+=$r(r.c.minute),(r.c.second!==0||!t)&&(o+=":")):o+=$r(r.c.minute),(r.c.second!==0||!t)&&(o+=$r(r.c.second),(r.c.millisecond!==0||!n)&&(o+=".",o+=$r(r.c.millisecond,3))),i&&(r.isOffsetFixed&&r.offset===0&&!s?o+="Z":r.o<0?(o+="-",o+=$r(Math.trunc(-r.o/60)),o+=":",o+=$r(Math.trunc(-r.o%60))):(o+="+",o+=$r(Math.trunc(r.o/60)),o+=":",o+=$r(Math.trunc(r.o%60)))),s&&(o+="["+r.zone.ianaName+"]"),o}var pK={month:1,day:1,hour:0,minute:0,second:0,millisecond:0},efe={weekNumber:1,weekday:1,hour:0,minute:0,second:0,millisecond:0},tfe={ordinal:1,hour:0,minute:0,second:0,millisecond:0},mK=["year","month","day","hour","minute","second","millisecond"],rfe=["weekYear","weekNumber","weekday","hour","minute","second","millisecond"],nfe=["year","ordinal","hour","minute","second","millisecond"];function pj(r){let e={year:"year",years:"year",month:"month",months:"month",day:"day",days:"day",hour:"hour",hours:"hour",minute:"minute",minutes:"minute",quarter:"quarter",quarters:"quarter",second:"second",seconds:"second",millisecond:"millisecond",milliseconds:"millisecond",weekday:"weekday",weekdays:"weekday",weeknumber:"weekNumber",weeksnumber:"weekNumber",weeknumbers:"weekNumber",weekyear:"weekYear",weekyears:"weekYear",ordinal:"ordinal"}[r.toLowerCase()];if(!e)throw new Ky(r);return e}function mj(r,e){let t=ja(e.zone,hr.defaultZone),n=Rr.fromObject(e),i=hr.now(),s,o;if(yt(r.year))s=i;else{for(let c of mK)yt(r[c])&&(r[c]=pK[c]);let a=fK(r)||dK(r);if(a)return Vr.invalid(a);let u=t.offset(i);[s,o]=jy(r,u,t)}return new Vr({ts:s,zone:t,loc:n,o})}function gj(r,e,t){let n=yt(t.round)?!0:t.round,i=(o,a)=>(o=gE(o,n||t.calendary?0:2,!0),e.loc.clone(t).relFormatter(t).format(o,a)),s=o=>t.calendary?e.hasSame(r,o)?0:e.startOf(o).diff(r.startOf(o),o).get(o):e.diff(r,o).get(o);if(t.unit)return i(s(t.unit),t.unit);for(let o of t.units){let a=s(o);if(Math.abs(a)>=1)return i(a,o)}return i(r>e?-0:0,t.units[t.units.length-1])}function yj(r){let e={},t;return r.length>0&&typeof r[r.length-1]=="object"?(e=r[r.length-1],t=Array.from(r).slice(0,r.length-1)):t=Array.from(r),[e,t]}var Vr=class r{constructor(e){let t=e.zone||hr.defaultZone,n=e.invalid||(Number.isNaN(e.ts)?new Oi("invalid input"):null)||(t.isValid?null:Ly(t));this.ts=yt(e.ts)?hr.now():e.ts;let i=null,s=null;if(!n)if(e.old&&e.old.ts===this.ts&&e.old.zone.equals(t))[i,s]=[e.old.c,e.old.o];else{let a=t.offset(this.ts);i=fj(this.ts,a),n=Number.isNaN(i.year)?new Oi("invalid input"):null,i=n?null:i,s=n?null:a}this._zone=t,this.loc=e.loc||Rr.create(),this.invalid=n,this.weekData=null,this.c=i,this.o=s,this.isLuxonDateTime=!0}static now(){return new r({})}static local(){let[e,t]=yj(arguments),[n,i,s,o,a,u,c]=t;return mj({year:n,month:i,day:s,hour:o,minute:a,second:u,millisecond:c},e)}static utc(){let[e,t]=yj(arguments),[n,i,s,o,a,u,c]=t;return e.zone=Ci.utcInstance,mj({year:n,month:i,day:s,hour:o,minute:a,second:u,millisecond:c},e)}static fromJSDate(e,t={}){let n=Tue(e)?e.valueOf():NaN;if(Number.isNaN(n))return r.invalid("invalid input");let i=ja(t.zone,hr.defaultZone);return i.isValid?new r({ts:n,zone:i,loc:Rr.fromObject(t)}):r.invalid(Ly(i))}static fromMillis(e,t={}){if(mu(e))return e<-cj||e>cj?r.invalid("Timestamp out of range"):new r({ts:e,zone:ja(t.zone,hr.defaultZone),loc:Rr.fromObject(t)});throw new ri(`fromMillis requires a numerical input, but received a ${typeof e} with value ${e}`)}static fromSeconds(e,t={}){if(mu(e))return new r({ts:e*1e3,zone:ja(t.zone,hr.defaultZone),loc:Rr.fromObject(t)});throw new ri("fromSeconds requires a numerical input")}static fromObject(e,t={}){e=e||{};let n=ja(t.zone,hr.defaultZone);if(!n.isValid)return r.invalid(Ly(n));let i=hr.now(),s=yt(t.specificOffset)?n.offset(i):t.specificOffset,o=Uy(e,pj),a=!yt(o.ordinal),u=!yt(o.year),c=!yt(o.month)||!yt(o.day),d=u||c,h=o.weekYear||o.weekNumber,p=Rr.fromObject(t);if((d||a)&&h)throw new hu("Can't mix weekYear/weekNumber units with year/month/day or ordinals");if(c&&a)throw new hu("Can't mix ordinal dates with month/day");let m=h||o.weekday&&!d,y,_,O=fj(i,s);m?(y=rfe,_=efe,O=pE(O)):a?(y=nfe,_=tfe,O=Xx(O)):(y=mK,_=pK);let x=!1;for(let G of y){let H=o[G];yt(H)?x?o[G]=_[G]:o[G]=O[G]:x=!0}let A=m?Zce(o):a?Xce(o):fK(o),P=A||dK(o);if(P)return r.invalid(P);let q=m?lj(o):a?uj(o):o,[F,z]=jy(q,s,n),B=new r({ts:F,zone:n,o:z,loc:p});return o.weekday&&d&&e.weekday!==B.weekday?r.invalid("mismatched weekday",`you can't specify both a weekday of ${o.weekday} and a date of ${B.toISO()}`):B}static fromISO(e,t={}){let[n,i]=yce(e);return Gh(n,i,t,"ISO 8601",e)}static fromRFC2822(e,t={}){let[n,i]=vce(e);return Gh(n,i,t,"RFC 2822",e)}static fromHTTP(e,t={}){let[n,i]=wce(e);return Gh(n,i,t,"HTTP",t)}static fromFormat(e,t,n={}){if(yt(e)||yt(t))throw new ri("fromFormat requires an input string and a format");let{locale:i=null,numberingSystem:s=null}=n,o=Rr.fromOpts({locale:i,numberingSystem:s,defaultToEN:!0}),[a,u,c,d]=Qce(o,e,t);return d?r.invalid(d):Gh(a,u,n,`format ${t}`,e,c)}static fromString(e,t,n={}){return r.fromFormat(e,t,n)}static fromSQL(e,t={}){let[n,i]=Ice(e);return Gh(n,i,t,"SQL",e)}static invalid(e,t=null){if(!e)throw new ri("need to specify a reason the DateTime is invalid");let n=e instanceof Oi?e:new Oi(e,t);if(hr.throwOnInvalid)throw new nE(n);return new r({invalid:n})}static isDateTime(e){return e&&e.isLuxonDateTime||!1}static parseFormatForOpts(e,t={}){let n=sK(e,Rr.fromObject(t));return n?n.map(i=>i?i.val:null).join(""):null}static expandFormat(e,t={}){return nK(Ei.parseFormat(e),Rr.fromObject(t)).map(i=>i.val).join("")}get(e){return this[e]}get isValid(){return this.invalid===null}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}get locale(){return this.isValid?this.loc.locale:null}get numberingSystem(){return this.isValid?this.loc.numberingSystem:null}get outputCalendar(){return this.isValid?this.loc.outputCalendar:null}get zone(){return this._zone}get zoneName(){return this.isValid?this.zone.name:null}get year(){return this.isValid?this.c.year:NaN}get quarter(){return this.isValid?Math.ceil(this.c.month/3):NaN}get month(){return this.isValid?this.c.month:NaN}get day(){return this.isValid?this.c.day:NaN}get hour(){return this.isValid?this.c.hour:NaN}get minute(){return this.isValid?this.c.minute:NaN}get second(){return this.isValid?this.c.second:NaN}get millisecond(){return this.isValid?this.c.millisecond:NaN}get weekYear(){return this.isValid?tE(this).weekYear:NaN}get weekNumber(){return this.isValid?tE(this).weekNumber:NaN}get weekday(){return this.isValid?tE(this).weekday:NaN}get ordinal(){return this.isValid?Xx(this.c).ordinal:NaN}get monthShort(){return this.isValid?pu.months("short",{locObj:this.loc})[this.month-1]:null}get monthLong(){return this.isValid?pu.months("long",{locObj:this.loc})[this.month-1]:null}get weekdayShort(){return this.isValid?pu.weekdays("short",{locObj:this.loc})[this.weekday-1]:null}get weekdayLong(){return this.isValid?pu.weekdays("long",{locObj:this.loc})[this.weekday-1]:null}get offset(){return this.isValid?+this.o:NaN}get offsetNameShort(){return this.isValid?this.zone.offsetName(this.ts,{format:"short",locale:this.locale}):null}get offsetNameLong(){return this.isValid?this.zone.offsetName(this.ts,{format:"long",locale:this.locale}):null}get isOffsetFixed(){return this.isValid?this.zone.isUniversal:null}get isInDST(){return this.isOffsetFixed?!1:this.offset>this.set({month:1,day:1}).offset||this.offset>this.set({month:5}).offset}get isInLeapYear(){return Jh(this.year)}get daysInMonth(){return Vy(this.year,this.month)}get daysInYear(){return this.isValid?zh(this.year):NaN}get weeksInWeekYear(){return this.isValid?By(this.weekYear):NaN}resolvedLocaleOptions(e={}){let{locale:t,numberingSystem:n,calendar:i}=Ei.create(this.loc.clone(e),e).resolvedOptions(this);return{locale:t,numberingSystem:n,outputCalendar:i}}toUTC(e=0,t={}){return this.setZone(Ci.instance(e),t)}toLocal(){return this.setZone(hr.defaultZone)}setZone(e,{keepLocalTime:t=!1,keepCalendarTime:n=!1}={}){if(e=ja(e,hr.defaultZone),e.equals(this.zone))return this;if(e.isValid){let i=this.ts;if(t||n){let s=e.offset(this.ts),o=this.toObject();[i]=jy(o,s,e)}return Uh(this,{ts:i,zone:e})}else return r.invalid(Ly(e))}reconfigure({locale:e,numberingSystem:t,outputCalendar:n}={}){let i=this.loc.clone({locale:e,numberingSystem:t,outputCalendar:n});return Uh(this,{loc:i})}setLocale(e){return this.reconfigure({locale:e})}set(e){if(!this.isValid)return this;let t=Uy(e,pj),n=!yt(t.weekYear)||!yt(t.weekNumber)||!yt(t.weekday),i=!yt(t.ordinal),s=!yt(t.year),o=!yt(t.month)||!yt(t.day),a=s||o,u=t.weekYear||t.weekNumber;if((a||i)&&u)throw new hu("Can't mix weekYear/weekNumber units with year/month/day or ordinals");if(o&&i)throw new hu("Can't mix ordinal dates with month/day");let c;n?c=lj({...pE(this.c),...t}):yt(t.ordinal)?(c={...this.toObject(),...t},yt(t.day)&&(c.day=Math.min(Vy(c.year,c.month),c.day))):c=uj({...Xx(this.c),...t});let[d,h]=jy(c,this.o,this.zone);return Uh(this,{ts:d,o:h})}plus(e){if(!this.isValid)return this;let t=Xr.fromDurationLike(e);return Uh(this,dj(this,t))}minus(e){if(!this.isValid)return this;let t=Xr.fromDurationLike(e).negate();return Uh(this,dj(this,t))}startOf(e){if(!this.isValid)return this;let t={},n=Xr.normalizeUnit(e);switch(n){case"years":t.month=1;case"quarters":case"months":t.day=1;case"weeks":case"days":t.hour=0;case"hours":t.minute=0;case"minutes":t.second=0;case"seconds":t.millisecond=0;break}if(n==="weeks"&&(t.weekday=1),n==="quarters"){let i=Math.ceil(this.month/3);t.month=(i-1)*3+1}return this.set(t)}endOf(e){return this.isValid?this.plus({[e]:1}).startOf(e).minus(1):this}toFormat(e,t={}){return this.isValid?Ei.create(this.loc.redefaultToEN(t)).formatDateTimeFromString(this,e):eE}toLocaleString(e=qy,t={}){return this.isValid?Ei.create(this.loc.clone(t),e).formatDateTime(this):eE}toLocaleParts(e={}){return this.isValid?Ei.create(this.loc.clone(e),e).formatDateTimeParts(this):[]}toISO({format:e="extended",suppressSeconds:t=!1,suppressMilliseconds:n=!1,includeOffset:i=!0,extendedZone:s=!1}={}){if(!this.isValid)return null;let o=e==="extended",a=rE(this,o);return a+="T",a+=hj(this,o,t,n,i,s),a}toISODate({format:e="extended"}={}){return this.isValid?rE(this,e==="extended"):null}toISOWeekDate(){return Dy(this,"kkkk-'W'WW-c")}toISOTime({suppressMilliseconds:e=!1,suppressSeconds:t=!1,includeOffset:n=!0,includePrefix:i=!1,extendedZone:s=!1,format:o="extended"}={}){return this.isValid?(i?"T":"")+hj(this,o==="extended",t,e,n,s):null}toRFC2822(){return Dy(this,"EEE, dd LLL yyyy HH:mm:ss ZZZ",!1)}toHTTP(){return Dy(this.toUTC(),"EEE, dd LLL yyyy HH:mm:ss 'GMT'")}toSQLDate(){return this.isValid?rE(this,!0):null}toSQLTime({includeOffset:e=!0,includeZone:t=!1,includeOffsetSpace:n=!0}={}){let i="HH:mm:ss.SSS";return(t||e)&&(n&&(i+=" "),t?i+="z":e&&(i+="ZZ")),Dy(this,i,!0)}toSQL(e={}){return this.isValid?`${this.toSQLDate()} ${this.toSQLTime(e)}`:null}toString(){return this.isValid?this.toISO():eE}valueOf(){return this.toMillis()}toMillis(){return this.isValid?this.ts:NaN}toSeconds(){return this.isValid?this.ts/1e3:NaN}toUnixInteger(){return this.isValid?Math.floor(this.ts/1e3):NaN}toJSON(){return this.toISO()}toBSON(){return this.toJSDate()}toObject(e={}){if(!this.isValid)return{};let t={...this.c};return e.includeConfig&&(t.outputCalendar=this.outputCalendar,t.numberingSystem=this.loc.numberingSystem,t.locale=this.loc.locale),t}toJSDate(){return new Date(this.isValid?this.ts:NaN)}diff(e,t="milliseconds",n={}){if(!this.isValid||!e.isValid)return Xr.invalid("created by diffing an invalid DateTime");let i={locale:this.locale,numberingSystem:this.numberingSystem,...n},s=Aue(t).map(Xr.normalizeUnit),o=e.valueOf()>this.valueOf(),a=o?this:e,u=o?e:this,c=Nce(a,u,s,i);return o?c.negate():c}diffNow(e="milliseconds",t={}){return this.diff(r.now(),e,t)}until(e){return this.isValid?gu.fromDateTimes(this,e):this}hasSame(e,t){if(!this.isValid)return!1;let n=e.valueOf(),i=this.setZone(e.zone,{keepLocalTime:!0});return i.startOf(t)<=n&&n<=i.endOf(t)}equals(e){return this.isValid&&e.isValid&&this.valueOf()===e.valueOf()&&this.zone.equals(e.zone)&&this.loc.equals(e.loc)}toRelative(e={}){if(!this.isValid)return null;let t=e.base||r.fromObject({},{zone:this.zone}),n=e.padding?this<t?-e.padding:e.padding:0,i=["years","months","days","hours","minutes","seconds"],s=e.unit;return Array.isArray(e.unit)&&(i=e.unit,s=void 0),gj(t,this.plus(n),{...e,numeric:"always",units:i,unit:s})}toRelativeCalendar(e={}){return this.isValid?gj(e.base||r.fromObject({},{zone:this.zone}),this,{...e,numeric:"auto",units:["years","months","days"],calendary:!0}):null}static min(...e){if(!e.every(r.isDateTime))throw new ri("min requires all arguments be DateTimes");return tj(e,t=>t.valueOf(),Math.min)}static max(...e){if(!e.every(r.isDateTime))throw new ri("max requires all arguments be DateTimes");return tj(e,t=>t.valueOf(),Math.max)}static fromFormatExplain(e,t,n={}){let{locale:i=null,numberingSystem:s=null}=n,o=Rr.fromOpts({locale:i,numberingSystem:s,defaultToEN:!0});return iK(o,e,t)}static fromStringExplain(e,t,n={}){return r.fromFormatExplain(e,t,n)}static get DATE_SHORT(){return qy}static get DATE_MED(){return vj}static get DATE_MED_WITH_WEEKDAY(){return due}static get DATE_FULL(){return wj}static get DATE_HUGE(){return bj}static get TIME_SIMPLE(){return Sj}static get TIME_WITH_SECONDS(){return _j}static get TIME_WITH_SHORT_OFFSET(){return xj}static get TIME_WITH_LONG_OFFSET(){return Ej}static get TIME_24_SIMPLE(){return Oj}static get TIME_24_WITH_SECONDS(){return Ij}static get TIME_24_WITH_SHORT_OFFSET(){return Cj}static get TIME_24_WITH_LONG_OFFSET(){return Tj}static get DATETIME_SHORT(){return Aj}static get DATETIME_SHORT_WITH_SECONDS(){return Mj}static get DATETIME_MED(){return kj}static get DATETIME_MED_WITH_SECONDS(){return Pj}static get DATETIME_MED_WITH_WEEKDAY(){return hue}static get DATETIME_FULL(){return Rj}static get DATETIME_FULL_WITH_SECONDS(){return Lj}static get DATETIME_HUGE(){return Dj}static get DATETIME_HUGE_WITH_SECONDS(){return Nj}};function $h(r){if(Vr.isDateTime(r))return r;if(r&&r.valueOf&&mu(r.valueOf()))return Vr.fromJSDate(r);if(r&&typeof r=="object")return Vr.fromObject(r);throw new ri(`Unknown datetime argument: ${r}, of type ${typeof r}`)}var ife="3.3.0";Ti.DateTime=Vr;Ti.Duration=Xr;Ti.FixedOffsetZone=Ci;Ti.IANAZone=Fo;Ti.Info=pu;Ti.Interval=gu;Ti.InvalidZone=Fy;Ti.Settings=hr;Ti.SystemZone=Yh;Ti.VERSION=ife;Ti.Zone=Ka});var vK=E((ake,yK)=>{"use strict";var yu=gK();Ue.prototype.addYear=function(){this._date=this._date.plus({years:1})};Ue.prototype.addMonth=function(){this._date=this._date.plus({months:1}).startOf("month")};Ue.prototype.addDay=function(){this._date=this._date.plus({days:1}).startOf("day")};Ue.prototype.addHour=function(){var r=this._date;this._date=this._date.plus({hours:1}).startOf("hour"),this._date<=r&&(this._date=this._date.plus({hours:1}))};Ue.prototype.addMinute=function(){var r=this._date;this._date=this._date.plus({minutes:1}).startOf("minute"),this._date<r&&(this._date=this._date.plus({hours:1}))};Ue.prototype.addSecond=function(){var r=this._date;this._date=this._date.plus({seconds:1}).startOf("second"),this._date<r&&(this._date=this._date.plus({hours:1}))};Ue.prototype.subtractYear=function(){this._date=this._date.minus({years:1})};Ue.prototype.subtractMonth=function(){this._date=this._date.minus({months:1}).endOf("month").startOf("second")};Ue.prototype.subtractDay=function(){this._date=this._date.minus({days:1}).endOf("day").startOf("second")};Ue.prototype.subtractHour=function(){var r=this._date;this._date=this._date.minus({hours:1}).endOf("hour").startOf("second"),this._date>=r&&(this._date=this._date.minus({hours:1}))};Ue.prototype.subtractMinute=function(){var r=this._date;this._date=this._date.minus({minutes:1}).endOf("minute").startOf("second"),this._date>r&&(this._date=this._date.minus({hours:1}))};Ue.prototype.subtractSecond=function(){var r=this._date;this._date=this._date.minus({seconds:1}).startOf("second"),this._date>r&&(this._date=this._date.minus({hours:1}))};Ue.prototype.getDate=function(){return this._date.day};Ue.prototype.getFullYear=function(){return this._date.year};Ue.prototype.getDay=function(){var r=this._date.weekday;return r==7?0:r};Ue.prototype.getMonth=function(){return this._date.month-1};Ue.prototype.getHours=function(){return this._date.hour};Ue.prototype.getMinutes=function(){return this._date.minute};Ue.prototype.getSeconds=function(){return this._date.second};Ue.prototype.getMilliseconds=function(){return this._date.millisecond};Ue.prototype.getTime=function(){return this._date.valueOf()};Ue.prototype.getUTCDate=function(){return this._getUTC().day};Ue.prototype.getUTCFullYear=function(){return this._getUTC().year};Ue.prototype.getUTCDay=function(){var r=this._getUTC().weekday;return r==7?0:r};Ue.prototype.getUTCMonth=function(){return this._getUTC().month-1};Ue.prototype.getUTCHours=function(){return this._getUTC().hour};Ue.prototype.getUTCMinutes=function(){return this._getUTC().minute};Ue.prototype.getUTCSeconds=function(){return this._getUTC().second};Ue.prototype.toISOString=function(){return this._date.toUTC().toISO()};Ue.prototype.toJSON=function(){return this._date.toJSON()};Ue.prototype.setDate=function(r){this._date=this._date.set({day:r})};Ue.prototype.setFullYear=function(r){this._date=this._date.set({year:r})};Ue.prototype.setDay=function(r){this._date=this._date.set({weekday:r})};Ue.prototype.setMonth=function(r){this._date=this._date.set({month:r+1})};Ue.prototype.setHours=function(r){this._date=this._date.set({hour:r})};Ue.prototype.setMinutes=function(r){this._date=this._date.set({minute:r})};Ue.prototype.setSeconds=function(r){this._date=this._date.set({second:r})};Ue.prototype.setMilliseconds=function(r){this._date=this._date.set({millisecond:r})};Ue.prototype._getUTC=function(){return this._date.toUTC()};Ue.prototype.toString=function(){return this.toDate().toString()};Ue.prototype.toDate=function(){return this._date.toJSDate()};Ue.prototype.isLastDayOfMonth=function(){var r=this._date.plus({days:1}).startOf("day");return this._date.month!==r.month};Ue.prototype.isLastWeekdayOfMonth=function(){var r=this._date.plus({days:7}).startOf("day");return this._date.month!==r.month};function Ue(r,e){var t={zone:e};if(r?r instanceof Ue?this._date=r._date:r instanceof Date?this._date=yu.DateTime.fromJSDate(r,t):typeof r=="number"?this._date=yu.DateTime.fromMillis(r,t):typeof r=="string"&&(this._date=yu.DateTime.fromISO(r,t),this._date.isValid||(this._date=yu.DateTime.fromRFC2822(r,t)),this._date.isValid||(this._date=yu.DateTime.fromSQL(r,t)),this._date.isValid||(this._date=yu.DateTime.fromFormat(r,"EEE, d MMM yyyy HH:mm:ss",t))):this._date=yu.DateTime.local(),!this._date||!this._date.isValid)throw new Error("CronDate: unhandled timestamp: "+JSON.stringify(r));e&&e!==this._date.zoneName&&(this._date=this._date.setZone(e))}yK.exports=Ue});var SK=E((lke,bK)=>{"use strict";function vu(r){return{start:r,count:1}}function wK(r,e){r.end=e,r.step=e-r.start,r.count=2}function _E(r,e,t){e&&(e.count===2?(r.push(vu(e.start)),r.push(vu(e.end))):r.push(e)),t&&r.push(t)}function sfe(r){for(var e=[],t=void 0,n=0;n<r.length;n++){var i=r[n];typeof i!="number"?(_E(e,t,vu(i)),t=void 0):t?t.count===1?wK(t,i):t.step===i-t.end?(t.count++,t.end=i):t.count===2?(e.push(vu(t.start)),t=vu(t.end),wK(t,i)):(_E(e,t),t=vu(i)):t=vu(i)}return _E(e,t),e}bK.exports=sfe});var xK=E((uke,_K)=>{"use strict";var ofe=SK();function afe(r,e,t){var n=ofe(r);if(n.length===1){var i=n[0],s=i.step;if(s===1&&i.start===e&&i.end===t)return"*";if(s!==1&&i.start===e&&i.end===t-s+1)return"*/"+s}for(var o=[],a=0,u=n.length;a<u;++a){var c=n[a];if(c.count===1){o.push(c.start);continue}var s=c.step;if(c.step===1){o.push(c.start+"-"+c.end);continue}var d=c.start==0?c.count-1:c.count;c.step*d>c.end?o=o.concat(Array.from({length:c.end-c.start+1}).map(function(p,m){var y=c.start+m;return(y-c.start)%c.step===0?y:null}).filter(function(p){return p!=null})):c.end===t-c.step+1?o.push(c.start+"/"+c.step):o.push(c.start+"-"+c.end+"/"+c.step)}return o.join(",")}_K.exports=afe});var IK=E((cke,OK)=>{"use strict";var wu=vK(),lfe=xK(),EK=1e4;function ge(r,e){this._options=e,this._utc=e.utc||!1,this._tz=this._utc?"UTC":e.tz,this._currentDate=new wu(e.currentDate,this._tz),this._startDate=e.startDate?new wu(e.startDate,this._tz):null,this._endDate=e.endDate?new wu(e.endDate,this._tz):null,this._isIterator=e.iterator||!1,this._hasIterated=!1,this._nthDayOfWeek=e.nthDayOfWeek||0,this.fields=ge._freezeFields(r)}ge.map=["second","minute","hour","dayOfMonth","month","dayOfWeek"];ge.predefined={"@yearly":"0 0 1 1 *","@monthly":"0 0 1 * *","@weekly":"0 0 * * 0","@daily":"0 0 * * *","@hourly":"0 * * * *"};ge.constraints=[{min:0,max:59,chars:[]},{min:0,max:59,chars:[]},{min:0,max:23,chars:[]},{min:1,max:31,chars:["L"]},{min:1,max:12,chars:[]},{min:0,max:7,chars:["L"]}];ge.daysInMonth=[31,29,31,30,31,30,31,31,30,31,30,31];ge.aliases={month:{jan:1,feb:2,mar:3,apr:4,may:5,jun:6,jul:7,aug:8,sep:9,oct:10,nov:11,dec:12},dayOfWeek:{sun:0,mon:1,tue:2,wed:3,thu:4,fri:5,sat:6}};ge.parseDefaults=["0","*","*","*","*","*"];ge.standardValidCharacters=/^[,*\d/-]+$/;ge.dayOfWeekValidCharacters=/^[?,*\dL#/-]+$/;ge.dayOfMonthValidCharacters=/^[?,*\dL/-]+$/;ge.validCharacters={second:ge.standardValidCharacters,minute:ge.standardValidCharacters,hour:ge.standardValidCharacters,dayOfMonth:ge.dayOfMonthValidCharacters,month:ge.standardValidCharacters,dayOfWeek:ge.dayOfWeekValidCharacters};ge._isValidConstraintChar=function(e,t){return typeof t!="string"?!1:e.chars.some(function(n){return t.indexOf(n)>-1})};ge._parseField=function(e,t,n){switch(e){case"month":case"dayOfWeek":var i=ge.aliases[e];t=t.replace(/[a-z]{3}/gi,function(u){if(u=u.toLowerCase(),typeof i[u]<"u")return i[u];throw new Error('Validation error, cannot resolve alias "'+u+'"')});break}if(!ge.validCharacters[e].test(t))throw new Error("Invalid characters, got value: "+t);t.indexOf("*")!==-1?t=t.replace(/\*/g,n.min+"-"+n.max):t.indexOf("?")!==-1&&(t=t.replace(/\?/g,n.min+"-"+n.max));function s(u){var c=[];function d(y){if(y instanceof Array)for(var _=0,O=y.length;_<O;_++){var x=y[_];if(ge._isValidConstraintChar(n,x)){c.push(x);continue}if(typeof x!="number"||Number.isNaN(x)||x<n.min||x>n.max)throw new Error("Constraint error, got value "+x+" expected range "+n.min+"-"+n.max);c.push(x)}else{if(ge._isValidConstraintChar(n,y)){c.push(y);return}var A=+y;if(Number.isNaN(A)||A<n.min||A>n.max)throw new Error("Constraint error, got value "+y+" expected range "+n.min+"-"+n.max);e==="dayOfWeek"&&(A=A%7),c.push(A)}}var h=u.split(",");if(!h.every(function(y){return y.length>0}))throw new Error("Invalid list value format");if(h.length>1)for(var p=0,m=h.length;p<m;p++)d(o(h[p]));else d(o(u));return c.sort(ge._sortCompareFn),c}function o(u){var c=1,d=u.split("/");if(d.length>2)throw new Error("Invalid repeat: "+u);return d.length>1?(d[0]==+d[0]&&(d=[d[0]+"-"+n.max,d[1]]),a(d[0],d[d.length-1])):a(u,c)}function a(u,c){var d=[],h=u.split("-");if(h.length>1){if(h.length<2)return+u;if(!h[0].length){if(!h[1].length)throw new Error("Invalid range: "+u);return+u}var p=+h[0],m=+h[1];if(Number.isNaN(p)||Number.isNaN(m)||p<n.min||m>n.max)throw new Error("Constraint error, got range "+p+"-"+m+" expected range "+n.min+"-"+n.max);if(p>m)throw new Error("Invalid range: "+u);var y=+c;if(Number.isNaN(y)||y<=0)throw new Error("Constraint error, cannot repeat at every "+y+" time.");e==="dayOfWeek"&&m%7===0&&d.push(0);for(var _=p,O=m;_<=O;_++){var x=d.indexOf(_)!==-1;!x&&y>0&&y%c===0?(y=1,d.push(_)):y++}return d}return Number.isNaN(+u)?u:+u}return s(t)};ge._sortCompareFn=function(r,e){var t=typeof r=="number",n=typeof e=="number";return t&&n?r-e:!t&&n?1:t&&!n?-1:r.localeCompare(e)};ge._handleMaxDaysInMonth=function(r){if(r.month.length===1){var e=ge.daysInMonth[r.month[0]-1];if(r.dayOfMonth[0]>e)throw new Error("Invalid explicit day of month definition");return r.dayOfMonth.filter(function(t){return t==="L"?!0:t<=e}).sort(ge._sortCompareFn)}};ge._freezeFields=function(r){for(var e=0,t=ge.map.length;e<t;++e){var n=ge.map[e],i=r[n];r[n]=Object.freeze(i)}return Object.freeze(r)};ge.prototype._applyTimezoneShift=function(r,e,t){if(t==="Month"||t==="Day"){var n=r.getTime();r[e+t]();var i=r.getTime();n===i&&(r.getMinutes()===0&&r.getSeconds()===0?r.addHour():r.getMinutes()===59&&r.getSeconds()===59&&r.subtractHour())}else{var s=r.getHours();r[e+t]();var o=r.getHours(),a=o-s;a===2?this.fields.hour.length!==24&&(this._dstStart=o):a===0&&r.getMinutes()===0&&r.getSeconds()===0&&this.fields.hour.length!==24&&(this._dstEnd=o)}};ge.prototype._findSchedule=function(e){function t(x,A){for(var P=0,q=A.length;P<q;P++)if(A[P]>=x)return A[P]===x;return A[0]===x}function n(x,A){if(A<6){if(x.getDate()<8&&A===1)return!0;var P=x.getDate()%7?1:0,q=x.getDate()-x.getDate()%7,F=Math.floor(q/7)+P;return F===A}return!1}function i(x){return x.length>0&&x.some(function(A){return typeof A=="string"&&A.indexOf("L")>=0})}e=e||!1;var s=e?"subtract":"add",o=new wu(this._currentDate,this._tz),a=this._startDate,u=this._endDate,c=o.getTime(),d=0;function h(x){return x.some(function(A){if(!i([A]))return!1;var P=Number.parseInt(A[0])%7;if(Number.isNaN(P))throw new Error("Invalid last weekday of the month expression: "+A);return o.getDay()===P&&o.isLastWeekdayOfMonth()})}for(;d<EK;){if(d++,e){if(a&&o.getTime()-a.getTime()<0)throw new Error("Out of the timespan range")}else if(u&&u.getTime()-o.getTime()<0)throw new Error("Out of the timespan range");var p=t(o.getDate(),this.fields.dayOfMonth);i(this.fields.dayOfMonth)&&(p=p||o.isLastDayOfMonth());var m=t(o.getDay(),this.fields.dayOfWeek);i(this.fields.dayOfWeek)&&(m=m||h(this.fields.dayOfWeek));var y=this.fields.dayOfMonth.length>=ge.daysInMonth[o.getMonth()],_=this.fields.dayOfWeek.length===ge.constraints[5].max-ge.constraints[5].min+1,O=o.getHours();if(!p&&(!m||_)){this._applyTimezoneShift(o,s,"Day");continue}if(!y&&_&&!p){this._applyTimezoneShift(o,s,"Day");continue}if(y&&!_&&!m){this._applyTimezoneShift(o,s,"Day");continue}if(this._nthDayOfWeek>0&&!n(o,this._nthDayOfWeek)){this._applyTimezoneShift(o,s,"Day");continue}if(!t(o.getMonth()+1,this.fields.month)){this._applyTimezoneShift(o,s,"Month");continue}if(t(O,this.fields.hour)){if(this._dstEnd===O&&!e){this._dstEnd=null,this._applyTimezoneShift(o,"add","Hour");continue}}else if(this._dstStart!==O){this._dstStart=null,this._applyTimezoneShift(o,s,"Hour");continue}else if(!t(O-1,this.fields.hour)){o[s+"Hour"]();continue}if(!t(o.getMinutes(),this.fields.minute)){this._applyTimezoneShift(o,s,"Minute");continue}if(!t(o.getSeconds(),this.fields.second)){this._applyTimezoneShift(o,s,"Second");continue}if(c===o.getTime()){s==="add"||o.getMilliseconds()===0?this._applyTimezoneShift(o,s,"Second"):o.setMilliseconds(0);continue}break}if(d>=EK)throw new Error("Invalid expression, loop limit exceeded");return this._currentDate=new wu(o,this._tz),this._hasIterated=!0,o};ge.prototype.next=function(){var e=this._findSchedule();return this._isIterator?{value:e,done:!this.hasNext()}:e};ge.prototype.prev=function(){var e=this._findSchedule(!0);return this._isIterator?{value:e,done:!this.hasPrev()}:e};ge.prototype.hasNext=function(){var r=this._currentDate,e=this._hasIterated;try{return this._findSchedule(),!0}catch{return!1}finally{this._currentDate=r,this._hasIterated=e}};ge.prototype.hasPrev=function(){var r=this._currentDate,e=this._hasIterated;try{return this._findSchedule(!0),!0}catch{return!1}finally{this._currentDate=r,this._hasIterated=e}};ge.prototype.iterate=function(e,t){var n=[];if(e>=0)for(var i=0,s=e;i<s;i++)try{var o=this.next();n.push(o),t&&t(o,i)}catch{break}else for(var i=0,s=e;i>s;i--)try{var o=this.prev();n.push(o),t&&t(o,i)}catch{break}return n};ge.prototype.reset=function(e){this._currentDate=new wu(e||this._options.currentDate)};ge.prototype.stringify=function(e){for(var t=[],n=e?0:1,i=ge.map.length;n<i;++n){var s=ge.map[n],o=this.fields[s],a=ge.constraints[n];s==="dayOfMonth"&&this.fields.month.length===1?a={min:1,max:ge.daysInMonth[this.fields.month[0]-1]}:s==="dayOfWeek"&&(a={min:0,max:6},o=o[o.length-1]===7?o.slice(0,-1):o),t.push(lfe(o,a.min,a.max))}return t.join(" ")};ge.parse=function(e,t){var n=this;typeof t=="function"&&(t={});function i(s,o){o||(o={}),typeof o.currentDate>"u"&&(o.currentDate=new wu(void 0,n._tz)),ge.predefined[s]&&(s=ge.predefined[s]);var a=[],u=(s+"").trim().split(/\s+/);if(u.length>6)throw new Error("Invalid cron expression");for(var c=ge.map.length-u.length,d=0,h=ge.map.length;d<h;++d){var p=ge.map[d],m=u[u.length>h?d:d-c];if(d<c||!m)a.push(ge._parseField(p,ge.parseDefaults[d],ge.constraints[d]));else{var y=p==="dayOfWeek"?A(m):m;a.push(ge._parseField(p,y,ge.constraints[d]))}}for(var _={},d=0,h=ge.map.length;d<h;d++){var O=ge.map[d];_[O]=a[d]}var x=ge._handleMaxDaysInMonth(_);return _.dayOfMonth=x||_.dayOfMonth,new ge(_,o);function A(P){var q=P.split("#");if(q.length>1){var F=+q[q.length-1];if(/,/.test(P))throw new Error("Constraint error, invalid dayOfWeek `#` and `,` special characters are incompatible");if(/\//.test(P))throw new Error("Constraint error, invalid dayOfWeek `#` and `/` special characters are incompatible");if(/-/.test(P))throw new Error("Constraint error, invalid dayOfWeek `#` and `-` special characters are incompatible");if(q.length>2||Number.isNaN(F)||F<1||F>5)throw new Error("Constraint error, invalid dayOfWeek occurrence number (#)");return o.nthDayOfWeek=F,q[0]}return P}}return i(e,t)};ge.fieldsToExpression=function(e,t){function n(p,m,y){if(!m)throw new Error("Validation error, Field "+p+" is missing");if(m.length===0)throw new Error("Validation error, Field "+p+" contains no values");for(var _=0,O=m.length;_<O;_++){var x=m[_];if(!ge._isValidConstraintChar(y,x)&&(typeof x!="number"||Number.isNaN(x)||x<y.min||x>y.max))throw new Error("Constraint error, got value "+x+" expected range "+y.min+"-"+y.max)}}for(var i={},s=0,o=ge.map.length;s<o;++s){var a=ge.map[s],u=e[a];n(a,u,ge.constraints[s]);for(var c=[],d=-1;++d<u.length;)c[d]=u[d];if(u=c.sort(ge._sortCompareFn).filter(function(p,m,y){return!m||p!==y[m-1]}),u.length!==c.length)throw new Error("Validation error, Field "+a+" contains duplicate values");i[a]=u}var h=ge._handleMaxDaysInMonth(i);return i.dayOfMonth=h||i.dayOfMonth,new ge(i,t||{})};OK.exports=ge});var TK=E((fke,CK)=>{"use strict";var zy=IK();function qa(){}qa._parseEntry=function(e){var t=e.split(" ");if(t.length===6)return{interval:zy.parse(e)};if(t.length>6)return{interval:zy.parse(t.slice(0,6).join(" ")),command:t.slice(6,t.length)};throw new Error("Invalid entry: "+e)};qa.parseExpression=function(e,t){return zy.parse(e,t)};qa.fieldsToExpression=function(e,t){return zy.fieldsToExpression(e,t)};qa.parseString=function(e){for(var t=e.split(`
`),n={variables:{},expressions:[],errors:{}},i=0,s=t.length;i<s;i++){var o=t[i],a=null,u=o.trim();if(u.length>0){if(u.match(/^#/))continue;if(a=u.match(/^(.*)=(.*)$/))n.variables[a[1]]=a[2];else{var c=null;try{c=qa._parseEntry("0 "+u),n.expressions.push(c.interval)}catch(d){n.errors[u]=d}}}}return n};qa.parseFile=function(e,t){require("fs").readFile(e,function(n,i){if(n){t(n);return}return t(null,qa.parseString(i.toString()))})};CK.exports=qa});var Hy=E(bu=>{"use strict";Object.defineProperty(bu,"__esModule",{value:!0});bu.getNextMillis=bu.Repeat=void 0;var ufe=(Js(),vi(Ys)),cfe=TK(),ffe=require("crypto"),dfe=cf(),xE=class extends dfe.QueueBase{constructor(e,t,n){super(e,t,n),this.repeatStrategy=t.settings&&t.settings.repeatStrategy||bu.getNextMillis,this.repeatKeyHashAlgorithm=t.settings&&t.settings.repeatKeyHashAlgorithm||"md5"}async addNextRepeatableJob(e,t,n,i){var s;let o=Object.assign({},n.repeat);(s=o.pattern)!==null&&s!==void 0||(o.pattern=o.cron),delete o.cron;let a=n.prevMillis||0,u=o.count?o.count+1:1;if(typeof o.limit<"u"&&u>o.limit)return;let c=Date.now();if(typeof o.endDate!==void 0&&c>new Date(o.endDate).getTime())return;c=a<c?c:a;let d=await this.repeatStrategy(c,o,e),h=o.pattern,p=!!((o.every||h)&&o.immediately),m=p?c-d:void 0;if(d){!a&&n.jobId&&(o.jobId=n.jobId);let y=AK(e,o),_=!0;i||(_=!!await(await this.client).zscore(this.keys.repeat,y));let{immediately:O}=o,x=ufe.__rest(o,["immediately"]);if(_)return this.createNextJob(e,d,y,Object.assign(Object.assign({},n),{repeat:Object.assign({offset:m},x)}),t,u,p)}}async createNextJob(e,t,n,i,s,o,a){let u=await this.client,c=this.getRepeatJobId(e,t,this.hash(n),i.repeat.jobId),d=Date.now(),h=t+(i.repeat.offset?i.repeat.offset:0)-d,p=Object.assign(Object.assign({},i),{jobId:c,delay:h<0||a?0:h,timestamp:d,prevMillis:t,repeatJobKey:n});return p.repeat=Object.assign(Object.assign({},i.repeat),{count:o}),await u.zadd(this.keys.repeat,t.toString(),n),this.Job.create(this,e,s,p)}async removeRepeatable(e,t,n){let i=AK(e,Object.assign(Object.assign({},t),{jobId:n})),s=this.getRepeatJobId(e,"",this.hash(i),n||t.jobId);return this.scripts.removeRepeatable(s,i)}async removeRepeatableByKey(e){let t=this.keyToData(e),n=this.getRepeatJobId(t.name,"",this.hash(e),t.id);return this.scripts.removeRepeatable(n,e)}keyToData(e,t){let n=e.split(":"),i=n.slice(4).join(":")||null;return{key:e,name:n[0],id:n[1]||null,endDate:parseInt(n[2])||null,tz:n[3]||null,pattern:i,next:t}}async getRepeatableJobs(e=0,t=-1,n=!1){let i=await this.client,s=this.keys.repeat,o=n?await i.zrange(s,e,t,"WITHSCORES"):await i.zrevrange(s,e,t,"WITHSCORES"),a=[];for(let u=0;u<o.length;u+=2)a.push(this.keyToData(o[u],parseInt(o[u+1])));return a}async getRepeatableCount(){return(await this.client).zcard(this.toKey("repeat"))}hash(e){return(0,ffe.createHash)(this.repeatKeyHashAlgorithm).update(e).digest("hex")}getRepeatJobId(e,t,n,i){return`repeat:${this.hash(`${e}${i||""}${n}`)}:${t}`}};bu.Repeat=xE;function AK(r,e){let t=e.endDate?new Date(e.endDate).getTime():"",n=e.tz||"",i=e.pattern,s=i||String(e.every)||"",o=e.jobId?e.jobId:"";return`${r}:${o}:${t}:${n}:${s}`}var hfe=(r,e)=>{let t=e.pattern;if(t&&e.every)throw new Error("Both .pattern and .every options are defined for this repeatable job");if(e.every)return Math.floor(r/e.every)*e.every+(e.immediately?0:e.every);let n=e.startDate&&new Date(e.startDate)>new Date(r)?new Date(e.startDate):new Date(r),i=(0,cfe.parseExpression)(t,Object.assign(Object.assign({},e),{currentDate:n}));try{return i.next().getTime()}catch{}};bu.getNextMillis=hfe});var kK=E(Yy=>{"use strict";Object.defineProperty(Yy,"__esModule",{value:!0});Yy.Queue=void 0;var MK=_g(),pfe=(Cg(),vi(Ig)),mfe=Yi(),gfe=cu(),yfe=Yx(),vfe=Hy(),EE=class extends yfe.QueueGetters{constructor(e,t,n){var i;super(e,Object.assign({sharedConnection:(0,mfe.isRedisInstance)(t?.connection),blockingConnection:!1},t),n),this.token=(0,pfe.v4)(),this.jobsOpts=(i=(0,MK.get)(t,"defaultJobOptions"))!==null&&i!==void 0?i:{},this.waitUntilReady().then(s=>{this.closing||s.hset(this.keys.meta,"opts.maxLenEvents",(0,MK.get)(t,"streams.events.maxLen",1e4))}).catch(s=>{})}emit(e,...t){return super.emit(e,...t)}off(e,t){return super.off(e,t),this}on(e,t){return super.on(e,t),this}once(e,t){return super.once(e,t),this}get defaultJobOptions(){return Object.assign({},this.jobsOpts)}get repeat(){return new Promise(async e=>{this._repeat||(this._repeat=new vfe.Repeat(this.name,Object.assign(Object.assign({},this.opts),{connection:await this.client})),this._repeat.on("error",t=>this.emit.bind(this,t))),e(this._repeat)})}async add(e,t,n){if(n&&n.repeat)return(await this.repeat).addNextRepeatableJob(e,t,Object.assign(Object.assign({},this.jobsOpts),n),!0);{let i=n?.jobId;if(i=="0"||i?.startsWith("0:"))throw new Error("JobId cannot be '0' or start with 0:");let s=await this.Job.create(this,e,t,Object.assign(Object.assign(Object.assign({},this.jobsOpts),n),{jobId:i}));return this.emit("waiting",s),s}}addBulk(e){return this.Job.createBulk(this,e.map(t=>{var n;return{name:t.name,data:t.data,opts:Object.assign(Object.assign(Object.assign({},this.jobsOpts),t.opts),{jobId:(n=t.opts)===null||n===void 0?void 0:n.jobId})}}))}async pause(){await this.scripts.pause(!0),this.emit("paused")}async close(){return this.closing||this._repeat&&await this._repeat.close(),super.close()}async resume(){await this.scripts.pause(!1),this.emit("resumed")}async isPaused(){return await(await this.client).hexists(this.keys.meta,"paused")===1}async getRepeatableJobs(e,t,n){return(await this.repeat).getRepeatableJobs(e,t,n)}async removeRepeatable(e,t,n){return!await(await this.repeat).removeRepeatable(e,t,n)}async removeRepeatableByKey(e){return!await(await this.repeat).removeRepeatableByKey(e)}remove(e,{removeChildren:t=!0}={}){return this.scripts.remove(e,t)}async updateJobProgress(e,t){return this.scripts.updateProgress(e,t)}async addJobLog(e,t,n){return gfe.Job.addJobLog(this,e,t,n)}drain(e=!1){return this.scripts.drain(e)}async clean(e,t,n="completed"){let i=t||1/0,s=Math.min(1e4,i),o=Date.now()-e,a=0,u=[];for(;a<i;){let c=await this.scripts.cleanJobsInSet(n,o,s);if(this.emit("cleaned",c,n),a+=c.length,u.push(...c),c.length<s)break}return u}async obliterate(e){await this.pause();let t=0;do t=await this.scripts.obliterate(Object.assign({force:!1,count:1e3},e));while(t)}async retryJobs(e={}){let t=0;do t=await this.scripts.retryJobs(e.state,e.count,e.timestamp);while(t)}async promoteJobs(e={}){let t=0;do t=await this.scripts.promoteJobs(e.count);while(t)}async trimEvents(e){return(await this.client).xtrim(this.keys.events,"MAXLEN","~",e)}async removeDeprecatedPriorityKey(){return(await this.client).del(this.toKey("priority"))}};Yy.Queue=EE});var IE=E(OE=>{"use strict";Object.defineProperty(OE,"__esModule",{value:!0});var Fa=Qc(),wfe=(r,e)=>async function(n,i){let s=await e.retain(r),o,a;await s.send({cmd:Fa.ChildCommand.Start,job:n.asJSONSandbox(),token:i});let u=new Promise((c,d)=>{o=async h=>{var p,m;switch(h.cmd){case Fa.ParentCommand.Completed:c(h.value);break;case Fa.ParentCommand.Failed:case Fa.ParentCommand.Error:{let y=new Error;Object.assign(y,h.value),d(y);break}case Fa.ParentCommand.Progress:await n.updateProgress(h.value);break;case Fa.ParentCommand.Log:await n.log(h.value);break;case Fa.ParentCommand.MoveToDelayed:await n.moveToDelayed((p=h.value)===null||p===void 0?void 0:p.timestamp,(m=h.value)===null||m===void 0?void 0:m.token);break;case Fa.ParentCommand.Update:await n.updateData(h.value);break}},a=(h,p)=>{d(new Error("Unexpected exit code: "+h+" signal: "+p))},s.on("message",o),s.on("exit",a)});try{return await u,u}finally{s.off("message",o),s.off("exit",a),s.exitCode!==null||/SIG.*/.test(`${s.signalCode}`)?e.remove(s):e.release(s)}};OE.default=wfe});var TE=E(Jy=>{"use strict";Object.defineProperty(Jy,"__esModule",{value:!0});Jy.WaitingChildrenError=void 0;var CE=class extends Error{constructor(e){super(e),this.name=this.constructor.name,Object.setPrototypeOf(this,new.target.prototype)}};Jy.WaitingChildrenError=CE});var RK=E((gke,PK)=>{var{EventEmitter:bfe}=require("events"),Qy=class{constructor(){this.eventEmitter=new bfe,this.onabort=null,this.aborted=!1,this.reason=void 0}toString(){return"[object AbortSignal]"}get[Symbol.toStringTag](){return"AbortSignal"}removeEventListener(e,t){this.eventEmitter.removeListener(e,t)}addEventListener(e,t){this.eventEmitter.on(e,t)}dispatchEvent(e){let t={type:e,target:this},n=`on${e}`;typeof this[n]=="function"&&this[n](t),this.eventEmitter.emit(e,t)}throwIfAborted(){if(this.aborted)throw this.reason}static abort(e){let t=new Xh;return t.abort(),t.signal}static timeout(e){let t=new Xh;return setTimeout(()=>t.abort(new Error("TimeoutError")),e),t.signal}},Xh=class{constructor(){this.signal=new Qy}abort(e){this.signal.aborted||(this.signal.aborted=!0,e?this.signal.reason=e:this.signal.reason=new Error("AbortError"),this.signal.dispatchEvent("abort"))}toString(){return"[object AbortController]"}get[Symbol.toStringTag](){return"AbortController"}};PK.exports={AbortController:Xh,AbortSignal:Qy}});var DK=E(Zy=>{"use strict";Object.defineProperty(Zy,"__esModule",{value:!0});Zy.Worker=void 0;var AE=require("fs"),ME=require("path"),Sfe=(Cg(),vi(Ig)),_fe=RK(),Su=Yi(),xfe=cf(),Efe=Hy(),Ofe=j_(),Ife=cu(),Cfe=Bh(),Tfe=IE(),Afe=P_(),Mfe=ux(),kfe=TE(),Pfe=10,LK="bullmq:rateLimitExceeded",kE=class extends xfe.QueueBase{static RateLimitError(){return new Error(LK)}constructor(e,t,n={},i){if(super(e,Object.assign(Object.assign({},n),{sharedConnection:(0,Su.isRedisInstance)(n.connection),blockingConnection:!0}),i),this.abortDelayController=null,this.blockUntil=0,this.drained=!1,this.extendLocksTimer=null,this.limitUntil=0,this.waiting=null,this.running=!1,this.opts=Object.assign({drainDelay:5,concurrency:1,lockDuration:3e4,maxStalledCount:1,stalledInterval:3e4,autorun:!0,runRetryDelay:15e3},this.opts),this.opts.stalledInterval<=0)throw new Error("stalledInterval must be greater than 0");if(this.concurrency=this.opts.concurrency,this.opts.lockRenewTime=this.opts.lockRenewTime||this.opts.lockDuration/2,this.id=(0,Sfe.v4)(),t){if(typeof t=="function")this.processFn=t;else{let a=t+([".js",".ts",".flow",".cjs"].includes(ME.extname(t))?"":".js");if(!AE.existsSync(a))throw new Error(`File ${a} does not exist`);let u=this.opts.useWorkerThreads?"main-worker.js":"main.js",c=ME.join(__dirname,`${u}`);try{AE.statSync(c)}catch{c=ME.join(process.cwd(),`dist/cjs/classes/${u}`),AE.statSync(c)}this.childPool=new Ofe.ChildPool({mainFile:c,useWorkerThreads:this.opts.useWorkerThreads}),this.processFn=(0,Tfe.default)(t,this.childPool).bind(this)}this.opts.autorun&&this.run().catch(o=>this.emit("error",o))}let s=this.clientName(Su.WORKER_SUFFIX);this.blockingConnection=new Cfe.RedisConnection((0,Su.isRedisInstance)(n.connection)?n.connection.duplicate({connectionName:s}):Object.assign(Object.assign({},n.connection),{connectionName:s}),!1,!0,n.skipVersionCheck),this.blockingConnection.on("error",o=>this.emit("error",o)),this.blockingConnection.on("ready",()=>setTimeout(()=>this.emit("ready"),0))}emit(e,...t){return super.emit(e,...t)}off(e,t){return super.off(e,t),this}on(e,t){return super.on(e,t),this}once(e,t){return super.once(e,t),this}callProcessJob(e,t){return this.processFn(e,t)}createJob(e,t){return this.Job.fromJSON(this,e,t)}async waitUntilReady(){return await super.waitUntilReady(),this.blockingConnection.client}set concurrency(e){if(typeof e!="number"||e<1||!isFinite(e))throw new Error("concurrency must be a finite number greater than 0");this.opts.concurrency=e}get repeat(){return new Promise(async e=>{if(!this._repeat){let t=await this.client;this._repeat=new Efe.Repeat(this.name,Object.assign(Object.assign({},this.opts),{connection:t})),this._repeat.on("error",n=>this.emit.bind(this,n))}e(this._repeat)})}async run(){if(!this.processFn)throw new Error("No process function is defined.");if(this.running)throw new Error("Worker is already running.");try{if(this.running=!0,this.closing)return;await this.startStalledCheckTimer();let e=new Set;this.startLockExtenderTimer(e);let t=this.asyncFifoQueue=new Afe.AsyncFifoQueue,n=0;for(;!this.closing;){for(;!this.waiting&&t.numTotal()<this.opts.concurrency&&(!this.limitUntil||t.numTotal()==0);){let s=`${this.id}:${n++}`;t.add(this.retryIfFailed(()=>this.getNextJob(s),this.opts.runRetryDelay))}let i=await t.fetch();if(i){let s=i.token;t.add(this.retryIfFailed(()=>this.processJob(i,s,()=>t.numTotal()<=this.opts.concurrency,e),this.opts.runRetryDelay))}}return this.running=!1,t.waitAll()}catch(e){throw this.running=!1,e}}async getNextJob(e,{block:t=!0}={}){var n;if(this.paused)if(t)await this.paused;else return;if(!this.closing)if(this.drained&&t&&!this.limitUntil&&!this.waiting)try{this.waiting=this.waitForJob();try{let i=await this.waiting;return this.moveToActive(e,i)}finally{this.waiting=null}}catch(i){if(!(this.paused||this.closing)&&(0,Su.isNotConnectionError)(i))throw i}else return this.limitUntil&&((n=this.abortDelayController)===null||n===void 0||n.abort(),this.abortDelayController=new _fe.AbortController,await this.delay(this.limitUntil,this.abortDelayController)),this.moveToActive(e)}async rateLimit(e){await this.client.then(t=>t.set(this.keys.limiter,Number.MAX_SAFE_INTEGER,"PX",e))}async moveToActive(e,t){t&&t.startsWith("0:")&&(this.blockUntil=parseInt(t.split(":")[1])||0);let[n,i,s,o]=await this.scripts.moveToActive(e,t);return this.nextJobFromJobData(n,i,s,o,e)}async waitForJob(){if(!this.paused)try{let e=this.opts;if(!this.closing){let t=await this.blockingConnection.client,n=Math.max(this.blockUntil?(this.blockUntil-Date.now())/1e3:e.drainDelay,.01);return n=this.blockingConnection.capabilities.canDoubleTimeout?n:Math.ceil(n),n=Math.min(n,Pfe),await t.brpoplpush(this.keys.wait,this.keys.active,n)}}catch(e){(0,Su.isNotConnectionError)(e)&&this.emit("error",e),this.closing||await this.delay()}finally{this.waiting=null}}async delay(e,t){await(0,Su.delay)(e||Su.DELAY_TIME_1,t)}async nextJobFromJobData(e,t,n,i,s){if(e||this.drained||(this.emit("drained"),this.drained=!0,this.blockUntil=0),this.limitUntil=Math.max(n,0)||0,i&&(this.blockUntil=Math.max(i,0)||0),e){this.drained=!1;let o=this.createJob(e,t);return o.token=s,o.opts.repeat&&await(await this.repeat).addNextRepeatableJob(o.name,o.data,o.opts),o}}async processJob(e,t,n=()=>!0,i){if(!e||this.closing||this.paused)return;let s=async u=>{if(!this.connection.closing){let c=await e.moveToCompleted(u,t,n()&&!(this.closing||this.paused));this.emit("completed",e,u,"active");let[d,h,p,m]=c||[];return this.nextJobFromJobData(d,h,p,m,t)}},o=async u=>{if(!this.connection.closing)try{if(u.message==LK){this.limitUntil=await this.moveLimitedBackToWait(e,t);return}if(u instanceof Mfe.DelayedError||u.message=="DelayedError"||u instanceof kfe.WaitingChildrenError||u.name=="WaitingChildrenError")return;await e.moveToFailed(u,t),this.emit("failed",e,u,"active")}catch(c){this.emit("error",c)}};this.emit("active",e,"waiting");let a={job:e,ts:Date.now()};try{i.add(a);let u=await this.callProcessJob(e,t);return await s(u)}catch(u){return o(u)}finally{i.delete(a)}}async pause(e){this.paused||(this.paused=new Promise(t=>{this.resumeWorker=function(){t(),this.paused=null,this.resumeWorker=null}}),await(!e&&this.whenCurrentJobsFinished()),this.emit("paused"))}resume(){this.resumeWorker&&(this.resumeWorker(),this.emit("resumed"))}isPaused(){return!!this.paused}isRunning(){return this.running}close(e=!1){return this.closing?this.closing:(this.closing=(async()=>{var t;this.emit("closing","closing queue"),(t=this.abortDelayController)===null||t===void 0||t.abort();let n=await this.blockingConnection.client;this.resume(),await Promise.resolve().finally(()=>e||this.whenCurrentJobsFinished(!1)).finally(()=>{var i;let s=(i=this.childPool)===null||i===void 0?void 0:i.clean();if(e){s?.catch(o=>{console.error(o)});return}return s}).finally(()=>clearTimeout(this.extendLocksTimer)).finally(()=>clearTimeout(this.stalledCheckTimer)).finally(()=>n.disconnect()).finally(()=>this.connection.close()).finally(()=>this.emit("closed")),this.closed=!0})(),this.closing)}async startStalledCheckTimer(){if(!this.opts.skipStalledCheck&&(clearTimeout(this.stalledCheckTimer),!this.closing))try{await this.checkConnectionError(()=>this.moveStalledJobsToWait()),this.stalledCheckTimer=setTimeout(async()=>{await this.startStalledCheckTimer()},this.opts.stalledInterval)}catch(e){this.emit("error",e)}}startLockExtenderTimer(e){this.opts.skipLockRenewal||(clearTimeout(this.extendLocksTimer),this.closed||(this.extendLocksTimer=setTimeout(async()=>{let t=Date.now(),n=[];for(let i of e){let{job:s,ts:o}=i;if(!o){i.ts=t;continue}o+this.opts.lockRenewTime/2<t&&(i.ts=t,n.push(s))}try{n.length&&await this.extendLocks(n)}catch(i){this.emit("error",i)}this.startLockExtenderTimer(e)},this.opts.lockRenewTime/2)))}async whenCurrentJobsFinished(e=!0){this.waiting?await this.blockingConnection.disconnect(e):e=!1,this.asyncFifoQueue&&await this.asyncFifoQueue.waitAll(),e&&await this.blockingConnection.reconnect()}async retryIfFailed(e,t){do try{return await e()}catch(i){if(this.emit("error",i),t)await this.delay(t);else return}while(1)}async extendLocks(e){try{let t=(await this.client).multi();for(let i of e)await this.scripts.extendLock(i.id,i.token,this.opts.lockDuration,t);let n=await t.exec();for(let[i,s]of n)i&&this.emit("error",new Error(`could not renew lock for job ${s}`))}catch(t){this.emit("error",t)}}async moveStalledJobsToWait(){let[t,n]=await this.scripts.moveStalledJobsToWait();n.forEach(s=>this.emit("stalled",s,"active"));let i=[];for(let s=0;s<t.length;s++)i.push(Ife.Job.fromId(this,t[s])),(s+1)%50===0&&(this.notifyFailedJobs(await Promise.all(i)),i.length=0);this.notifyFailedJobs(await Promise.all(i))}notifyFailedJobs(e){e.forEach(t=>this.emit("failed",t,new Error("job stalled more than allowable limit"),"active"))}moveLimitedBackToWait(e,t){return this.scripts.moveJobFromActiveToWait(e.id,t)}};Zy.Worker=kE});var NK=E(Br=>{"use strict";Object.defineProperty(Br,"__esModule",{value:!0});var en=(Js(),vi(Ys));en.__exportStar(P_(),Br);en.__exportStar(R_(),Br);en.__exportStar(j_(),Br);en.__exportStar(VD(),Br);en.__exportStar(ux(),Br);en.__exportStar(GN(),Br);en.__exportStar(cu(),Br);en.__exportStar(cf(),Br);en.__exportStar(WN(),Br);en.__exportStar(Yx(),Br);en.__exportStar(zg(),Br);en.__exportStar(kK(),Br);en.__exportStar(Bh(),Br);en.__exportStar(Hy(),Br);en.__exportStar(IE(),Br);en.__exportStar(Gg(),Br);en.__exportStar(Kx(),Br);en.__exportStar(TE(),Br);en.__exportStar(DK(),Br)});var jK=E(PE=>{var _u=require("path"),Ba=process.platform==="win32",Va=require("fs"),Rfe=process.env.NODE_DEBUG&&/fs/.test(process.env.NODE_DEBUG);function Lfe(){var r;if(Rfe){var e=new Error;r=t}else r=n;return r;function t(i){i&&(e.message=i.message,i=e,n(i))}function n(i){if(i){if(process.throwDeprecation)throw i;if(!process.noDeprecation){var s="fs: missing callback "+(i.stack||i.message);process.traceDeprecation?console.trace(s):console.error(s)}}}}function Dfe(r){return typeof r=="function"?r:Lfe()}var wke=_u.normalize;Ba?Vo=/(.*?)(?:[\/\\]+|$)/g:Vo=/(.*?)(?:[\/]+|$)/g;var Vo;Ba?ep=/^(?:[a-zA-Z]:|[\\\/]{2}[^\\\/]+[\\\/][^\\\/]+)?[\\\/]*/:ep=/^[\/]*/;var ep;PE.realpathSync=function(e,t){if(e=_u.resolve(e),t&&Object.prototype.hasOwnProperty.call(t,e))return t[e];var n=e,i={},s={},o,a,u,c;d();function d(){var O=ep.exec(e);o=O[0].length,a=O[0],u=O[0],c="",Ba&&!s[u]&&(Va.lstatSync(u),s[u]=!0)}for(;o<e.length;){Vo.lastIndex=o;var h=Vo.exec(e);if(c=a,a+=h[0],u=c+h[1],o=Vo.lastIndex,!(s[u]||t&&t[u]===u)){var p;if(t&&Object.prototype.hasOwnProperty.call(t,u))p=t[u];else{var m=Va.lstatSync(u);if(!m.isSymbolicLink()){s[u]=!0,t&&(t[u]=u);continue}var y=null;if(!Ba){var _=m.dev.toString(32)+":"+m.ino.toString(32);i.hasOwnProperty(_)&&(y=i[_])}y===null&&(Va.statSync(u),y=Va.readlinkSync(u)),p=_u.resolve(c,y),t&&(t[u]=p),Ba||(i[_]=y)}e=_u.resolve(p,e.slice(o)),d()}}return t&&(t[n]=e),e};PE.realpath=function(e,t,n){if(typeof n!="function"&&(n=Dfe(t),t=null),e=_u.resolve(e),t&&Object.prototype.hasOwnProperty.call(t,e))return process.nextTick(n.bind(null,null,t[e]));var i=e,s={},o={},a,u,c,d;h();function h(){var O=ep.exec(e);a=O[0].length,u=O[0],c=O[0],d="",Ba&&!o[c]?Va.lstat(c,function(x){if(x)return n(x);o[c]=!0,p()}):process.nextTick(p)}function p(){if(a>=e.length)return t&&(t[i]=e),n(null,e);Vo.lastIndex=a;var O=Vo.exec(e);return d=u,u+=O[0],c=d+O[1],a=Vo.lastIndex,o[c]||t&&t[c]===c?process.nextTick(p):t&&Object.prototype.hasOwnProperty.call(t,c)?_(t[c]):Va.lstat(c,m)}function m(O,x){if(O)return n(O);if(!x.isSymbolicLink())return o[c]=!0,t&&(t[c]=c),process.nextTick(p);if(!Ba){var A=x.dev.toString(32)+":"+x.ino.toString(32);if(s.hasOwnProperty(A))return y(null,s[A],c)}Va.stat(c,function(P){if(P)return n(P);Va.readlink(c,function(q,F){Ba||(s[A]=F),y(q,F)})})}function y(O,x,A){if(O)return n(O);var P=_u.resolve(d,x);t&&(t[A]=P),_(P)}function _(O){e=_u.resolve(O,e.slice(a)),h()}}});var NE=E((Ske,VK)=>{VK.exports=Ua;Ua.realpath=Ua;Ua.sync=DE;Ua.realpathSync=DE;Ua.monkeypatch=jfe;Ua.unmonkeypatch=Kfe;var wf=require("fs"),RE=wf.realpath,LE=wf.realpathSync,Nfe=process.version,KK=/^v[0-5]\./.test(Nfe),qK=jK();function FK(r){return r&&r.syscall==="realpath"&&(r.code==="ELOOP"||r.code==="ENOMEM"||r.code==="ENAMETOOLONG")}function Ua(r,e,t){if(KK)return RE(r,e,t);typeof e=="function"&&(t=e,e=null),RE(r,e,function(n,i){FK(n)?qK.realpath(r,e,t):t(n,i)})}function DE(r,e){if(KK)return LE(r,e);try{return LE(r,e)}catch(t){if(FK(t))return qK.realpathSync(r,e);throw t}}function jfe(){wf.realpath=Ua,wf.realpathSync=DE}function Kfe(){wf.realpath=RE,wf.realpathSync=LE}});var UK=E((_ke,BK)=>{var qfe=typeof process=="object"&&process&&process.platform==="win32";BK.exports=qfe?{sep:"\\"}:{sep:"/"}});var HK=E((xke,zK)=>{"use strict";zK.exports=$K;function $K(r,e,t){r instanceof RegExp&&(r=GK(r,t)),e instanceof RegExp&&(e=GK(e,t));var n=WK(r,e,t);return n&&{start:n[0],end:n[1],pre:t.slice(0,n[0]),body:t.slice(n[0]+r.length,n[1]),post:t.slice(n[1]+e.length)}}function GK(r,e){var t=e.match(r);return t?t[0]:null}$K.range=WK;function WK(r,e,t){var n,i,s,o,a,u=t.indexOf(r),c=t.indexOf(e,u+1),d=u;if(u>=0&&c>0){if(r===e)return[u,c];for(n=[],s=t.length;d>=0&&!a;)d==u?(n.push(d),u=t.indexOf(r,d+1)):n.length==1?a=[n.pop(),c]:(i=n.pop(),i<s&&(s=i,o=c),c=t.indexOf(e,d+1)),d=u<c&&u>=0?u:c;n.length&&(a=[s,o])}return a}});var rq=E((Eke,tq)=>{var YK=HK();tq.exports=Bfe;var JK="\0SLASH"+Math.random()+"\0",QK="\0OPEN"+Math.random()+"\0",KE="\0CLOSE"+Math.random()+"\0",ZK="\0COMMA"+Math.random()+"\0",XK="\0PERIOD"+Math.random()+"\0";function jE(r){return parseInt(r,10)==r?parseInt(r,10):r.charCodeAt(0)}function Ffe(r){return r.split("\\\\").join(JK).split("\\{").join(QK).split("\\}").join(KE).split("\\,").join(ZK).split("\\.").join(XK)}function Vfe(r){return r.split(JK).join("\\").split(QK).join("{").split(KE).join("}").split(ZK).join(",").split(XK).join(".")}function eq(r){if(!r)return[""];var e=[],t=YK("{","}",r);if(!t)return r.split(",");var n=t.pre,i=t.body,s=t.post,o=n.split(",");o[o.length-1]+="{"+i+"}";var a=eq(s);return s.length&&(o[o.length-1]+=a.shift(),o.push.apply(o,a)),e.push.apply(e,o),e}function Bfe(r){return r?(r.substr(0,2)==="{}"&&(r="\\{\\}"+r.substr(2)),tp(Ffe(r),!0).map(Vfe)):[]}function Ufe(r){return"{"+r+"}"}function Gfe(r){return/^-?0\d/.test(r)}function $fe(r,e){return r<=e}function Wfe(r,e){return r>=e}function tp(r,e){var t=[],n=YK("{","}",r);if(!n)return[r];var i=n.pre,s=n.post.length?tp(n.post,!1):[""];if(/\$$/.test(n.pre))for(var o=0;o<s.length;o++){var a=i+"{"+n.body+"}"+s[o];t.push(a)}else{var u=/^-?\d+\.\.-?\d+(?:\.\.-?\d+)?$/.test(n.body),c=/^[a-zA-Z]\.\.[a-zA-Z](?:\.\.-?\d+)?$/.test(n.body),d=u||c,h=n.body.indexOf(",")>=0;if(!d&&!h)return n.post.match(/,.*\}/)?(r=n.pre+"{"+n.body+KE+n.post,tp(r)):[r];var p;if(d)p=n.body.split(/\.\./);else if(p=eq(n.body),p.length===1&&(p=tp(p[0],!1).map(Ufe),p.length===1))return s.map(function(N){return n.pre+p[0]+N});var m;if(d){var y=jE(p[0]),_=jE(p[1]),O=Math.max(p[0].length,p[1].length),x=p.length==3?Math.abs(jE(p[2])):1,A=$fe,P=_<y;P&&(x*=-1,A=Wfe);var q=p.some(Gfe);m=[];for(var F=y;A(F,_);F+=x){var z;if(c)z=String.fromCharCode(F),z==="\\"&&(z="");else if(z=String(F),q){var B=O-z.length;if(B>0){var G=new Array(B+1).join("0");F<0?z="-"+G+z.slice(1):z=G+z}}m.push(z)}}else{m=[];for(var H=0;H<p.length;H++)m.push.apply(m,tp(p[H],!1))}for(var H=0;H<m.length;H++)for(var o=0;o<s.length;o++){var a=i+m[H]+s[o];(!e||d||a)&&t.push(a)}}return t}});var ev=E((Ike,UE)=>{var Ai=UE.exports=(r,e,t={})=>(Xy(e),!t.nocomment&&e.charAt(0)==="#"?!1:new bf(e,t).match(r));UE.exports=Ai;var VE=UK();Ai.sep=VE.sep;var ks=Symbol("globstar **");Ai.GLOBSTAR=ks;var zfe=rq(),nq={"!":{open:"(?:(?!(?:",close:"))[^/]*?)"},"?":{open:"(?:",close:")?"},"+":{open:"(?:",close:")+"},"*":{open:"(?:",close:")*"},"@":{open:"(?:",close:")"}},BE="[^/]",qE=BE+"*?",Hfe="(?:(?!(?:\\/|^)(?:\\.{1,2})($|\\/)).)*?",Yfe="(?:(?!(?:\\/|^)\\.).)*?",oq=r=>r.split("").reduce((e,t)=>(e[t]=!0,e),{}),iq=oq("().*{}+?[]^$\\!"),Jfe=oq("[.("),sq=/\/+/;Ai.filter=(r,e={})=>(t,n,i)=>Ai(t,r,e);var Ga=(r,e={})=>{let t={};return Object.keys(r).forEach(n=>t[n]=r[n]),Object.keys(e).forEach(n=>t[n]=e[n]),t};Ai.defaults=r=>{if(!r||typeof r!="object"||!Object.keys(r).length)return Ai;let e=Ai,t=(n,i,s)=>e(n,i,Ga(r,s));return t.Minimatch=class extends e.Minimatch{constructor(i,s){super(i,Ga(r,s))}},t.Minimatch.defaults=n=>e.defaults(Ga(r,n)).Minimatch,t.filter=(n,i)=>e.filter(n,Ga(r,i)),t.defaults=n=>e.defaults(Ga(r,n)),t.makeRe=(n,i)=>e.makeRe(n,Ga(r,i)),t.braceExpand=(n,i)=>e.braceExpand(n,Ga(r,i)),t.match=(n,i,s)=>e.match(n,i,Ga(r,s)),t};Ai.braceExpand=(r,e)=>aq(r,e);var aq=(r,e={})=>(Xy(r),e.nobrace||!/\{(?:(?!\{).)*\}/.test(r)?[r]:zfe(r)),Qfe=1024*64,Xy=r=>{if(typeof r!="string")throw new TypeError("invalid pattern");if(r.length>Qfe)throw new TypeError("pattern is too long")},FE=Symbol("subparse");Ai.makeRe=(r,e)=>new bf(r,e||{}).makeRe();Ai.match=(r,e,t={})=>{let n=new bf(e,t);return r=r.filter(i=>n.match(i)),n.options.nonull&&!r.length&&r.push(e),r};var Zfe=r=>r.replace(/\\(.)/g,"$1"),Xfe=r=>r.replace(/\\([^-\]])/g,"$1"),ede=r=>r.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&"),tde=r=>r.replace(/[[\]\\]/g,"\\$&"),bf=class{constructor(e,t){Xy(e),t||(t={}),this.options=t,this.set=[],this.pattern=e,this.windowsPathsNoEscape=!!t.windowsPathsNoEscape||t.allowWindowsEscape===!1,this.windowsPathsNoEscape&&(this.pattern=this.pattern.replace(/\\/g,"/")),this.regexp=null,this.negate=!1,this.comment=!1,this.empty=!1,this.partial=!!t.partial,this.make()}debug(){}make(){let e=this.pattern,t=this.options;if(!t.nocomment&&e.charAt(0)==="#"){this.comment=!0;return}if(!e){this.empty=!0;return}this.parseNegate();let n=this.globSet=this.braceExpand();t.debug&&(this.debug=(...i)=>console.error(...i)),this.debug(this.pattern,n),n=this.globParts=n.map(i=>i.split(sq)),this.debug(this.pattern,n),n=n.map((i,s,o)=>i.map(this.parse,this)),this.debug(this.pattern,n),n=n.filter(i=>i.indexOf(!1)===-1),this.debug(this.pattern,n),this.set=n}parseNegate(){if(this.options.nonegate)return;let e=this.pattern,t=!1,n=0;for(let i=0;i<e.length&&e.charAt(i)==="!";i++)t=!t,n++;n&&(this.pattern=e.slice(n)),this.negate=t}matchOne(e,t,n){var i=this.options;this.debug("matchOne",{this:this,file:e,pattern:t}),this.debug("matchOne",e.length,t.length);for(var s=0,o=0,a=e.length,u=t.length;s<a&&o<u;s++,o++){this.debug("matchOne loop");var c=t[o],d=e[s];if(this.debug(t,c,d),c===!1)return!1;if(c===ks){this.debug("GLOBSTAR",[t,c,d]);var h=s,p=o+1;if(p===u){for(this.debug("** at the end");s<a;s++)if(e[s]==="."||e[s]===".."||!i.dot&&e[s].charAt(0)===".")return!1;return!0}for(;h<a;){var m=e[h];if(this.debug(`
globstar while`,e,h,t,p,m),this.matchOne(e.slice(h),t.slice(p),n))return this.debug("globstar found match!",h,a,m),!0;if(m==="."||m===".."||!i.dot&&m.charAt(0)==="."){this.debug("dot detected!",e,h,t,p);break}this.debug("globstar swallow a segment, and continue"),h++}return!!(n&&(this.debug(`
>>> no match, partial?`,e,h,t,p),h===a))}var y;if(typeof c=="string"?(y=d===c,this.debug("string match",c,d,y)):(y=d.match(c),this.debug("pattern match",c,d,y)),!y)return!1}if(s===a&&o===u)return!0;if(s===a)return n;if(o===u)return s===a-1&&e[s]==="";throw new Error("wtf?")}braceExpand(){return aq(this.pattern,this.options)}parse(e,t){Xy(e);let n=this.options;if(e==="**")if(n.noglobstar)e="*";else return ks;if(e==="")return"";let i="",s=!1,o=!1,a=[],u=[],c,d=!1,h=-1,p=-1,m,y,_,O=e.charAt(0)===".",x=n.dot||O,A=()=>O?"":x?"(?!(?:^|\\/)\\.{1,2}(?:$|\\/))":"(?!\\.)",P=B=>B.charAt(0)==="."?"":n.dot?"(?!(?:^|\\/)\\.{1,2}(?:$|\\/))":"(?!\\.)",q=()=>{if(c){switch(c){case"*":i+=qE,s=!0;break;case"?":i+=BE,s=!0;break;default:i+="\\"+c;break}this.debug("clearStateChar %j %j",c,i),c=!1}};for(let B=0,G;B<e.length&&(G=e.charAt(B));B++){if(this.debug("%s	%s %s %j",e,B,i,G),o){if(G==="/")return!1;iq[G]&&(i+="\\"),i+=G,o=!1;continue}switch(G){case"/":return!1;case"\\":if(d&&e.charAt(B+1)==="-"){i+=G;continue}q(),o=!0;continue;case"?":case"*":case"+":case"@":case"!":if(this.debug("%s	%s %s %j <-- stateChar",e,B,i,G),d){this.debug("  in class"),G==="!"&&B===p+1&&(G="^"),i+=G;continue}this.debug("call clearStateChar %j",c),q(),c=G,n.noext&&q();continue;case"(":{if(d){i+="(";continue}if(!c){i+="\\(";continue}let H={type:c,start:B-1,reStart:i.length,open:nq[c].open,close:nq[c].close};this.debug(this.pattern,"	",H),a.push(H),i+=H.open,H.start===0&&H.type!=="!"&&(O=!0,i+=P(e.slice(B+1))),this.debug("plType %j %j",c,i),c=!1;continue}case")":{let H=a[a.length-1];if(d||!H){i+="\\)";continue}a.pop(),q(),s=!0,y=H,i+=y.close,y.type==="!"&&u.push(Object.assign(y,{reEnd:i.length}));continue}case"|":{let H=a[a.length-1];if(d||!H){i+="\\|";continue}q(),i+="|",H.start===0&&H.type!=="!"&&(O=!0,i+=P(e.slice(B+1)));continue}case"[":if(q(),d){i+="\\"+G;continue}d=!0,p=B,h=i.length,i+=G;continue;case"]":if(B===p+1||!d){i+="\\"+G;continue}m=e.substring(p+1,B);try{RegExp("["+tde(Xfe(m))+"]"),i+=G}catch{i=i.substring(0,h)+"(?:$.)"}s=!0,d=!1;continue;default:q(),iq[G]&&!(G==="^"&&d)&&(i+="\\"),i+=G;break}}for(d&&(m=e.slice(p+1),_=this.parse(m,FE),i=i.substring(0,h)+"\\["+_[0],s=s||_[1]),y=a.pop();y;y=a.pop()){let B;B=i.slice(y.reStart+y.open.length),this.debug("setting tail",i,y),B=B.replace(/((?:\\{2}){0,64})(\\?)\|/g,(H,N,v)=>(v||(v="\\"),N+N+v+"|")),this.debug(`tail=%j
   %s`,B,B,y,i);let G=y.type==="*"?qE:y.type==="?"?BE:"\\"+y.type;s=!0,i=i.slice(0,y.reStart)+G+"\\("+B}q(),o&&(i+="\\\\");let F=Jfe[i.charAt(0)];for(let B=u.length-1;B>-1;B--){let G=u[B],H=i.slice(0,G.reStart),N=i.slice(G.reStart,G.reEnd-8),v=i.slice(G.reEnd),w=i.slice(G.reEnd-8,G.reEnd)+v,I=H.split(")").length,T=H.split("(").length-I,k=v;for(let K=0;K<T;K++)k=k.replace(/\)[+*?]?/,"");v=k;let M=v===""&&t!==FE?"(?:$|\\/)":"";i=H+N+v+M+w}if(i!==""&&s&&(i="(?=.)"+i),F&&(i=A()+i),t===FE)return[i,s];if(n.nocase&&!s&&(s=e.toUpperCase()!==e.toLowerCase()),!s)return Zfe(e);let z=n.nocase?"i":"";try{return Object.assign(new RegExp("^"+i+"$",z),{_glob:e,_src:i})}catch{return new RegExp("$.")}}makeRe(){if(this.regexp||this.regexp===!1)return this.regexp;let e=this.set;if(!e.length)return this.regexp=!1,this.regexp;let t=this.options,n=t.noglobstar?qE:t.dot?Hfe:Yfe,i=t.nocase?"i":"",s=e.map(o=>(o=o.map(a=>typeof a=="string"?ede(a):a===ks?ks:a._src).reduce((a,u)=>(a[a.length-1]===ks&&u===ks||a.push(u),a),[]),o.forEach((a,u)=>{a!==ks||o[u-1]===ks||(u===0?o.length>1?o[u+1]="(?:\\/|"+n+"\\/)?"+o[u+1]:o[u]=n:u===o.length-1?o[u-1]+="(?:\\/|"+n+")?":(o[u-1]+="(?:\\/|\\/"+n+"\\/)"+o[u+1],o[u+1]=ks))}),o.filter(a=>a!==ks).join("/"))).join("|");s="^(?:"+s+")$",this.negate&&(s="^(?!"+s+").*$");try{this.regexp=new RegExp(s,i)}catch{this.regexp=!1}return this.regexp}match(e,t=this.partial){if(this.debug("match",e,this.pattern),this.comment)return!1;if(this.empty)return e==="";if(e==="/"&&t)return!0;let n=this.options;VE.sep!=="/"&&(e=e.split(VE.sep).join("/")),e=e.split(sq),this.debug(this.pattern,"split",e);let i=this.set;this.debug(this.pattern,"set",i);let s;for(let o=e.length-1;o>=0&&(s=e[o],!s);o--);for(let o=0;o<i.length;o++){let a=i[o],u=e;if(n.matchBase&&a.length===1&&(u=[s]),this.matchOne(u,a,t))return n.flipNegate?!0:!this.negate}return n.flipNegate?!1:this.negate}static defaults(e){return Ai.defaults(e).Minimatch}};Ai.Minimatch=bf});var lq=E((Cke,GE)=>{typeof Object.create=="function"?GE.exports=function(e,t){t&&(e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}))}:GE.exports=function(e,t){if(t){e.super_=t;var n=function(){};n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e}}});var ni=E((Tke,WE)=>{try{if($E=require("util"),typeof $E.inherits!="function")throw"";WE.exports=$E.inherits}catch{WE.exports=lq()}var $E});var HE=E($a=>{$a.setopts=ade;$a.ownProp=uq;$a.makeAbs=rp;$a.finish=lde;$a.mark=ude;$a.isIgnored=fq;$a.childrenIgnored=cde;function uq(r,e){return Object.prototype.hasOwnProperty.call(r,e)}var rde=require("fs"),xu=require("path"),nde=ev(),cq=require("path").isAbsolute,zE=nde.Minimatch;function ide(r,e){return r.localeCompare(e,"en")}function sde(r,e){r.ignore=e.ignore||[],Array.isArray(r.ignore)||(r.ignore=[r.ignore]),r.ignore.length&&(r.ignore=r.ignore.map(ode))}function ode(r){var e=null;if(r.slice(-3)==="/**"){var t=r.replace(/(\/\*\*)+$/,"");e=new zE(t,{dot:!0})}return{matcher:new zE(r,{dot:!0}),gmatcher:e}}function ade(r,e,t){if(t||(t={}),t.matchBase&&e.indexOf("/")===-1){if(t.noglobstar)throw new Error("base matching requires globstar");e="**/"+e}r.windowsPathsNoEscape=!!t.windowsPathsNoEscape||t.allowWindowsEscape===!1,r.windowsPathsNoEscape&&(e=e.replace(/\\/g,"/")),r.silent=!!t.silent,r.pattern=e,r.strict=t.strict!==!1,r.realpath=!!t.realpath,r.realpathCache=t.realpathCache||Object.create(null),r.follow=!!t.follow,r.dot=!!t.dot,r.mark=!!t.mark,r.nodir=!!t.nodir,r.nodir&&(r.mark=!0),r.sync=!!t.sync,r.nounique=!!t.nounique,r.nonull=!!t.nonull,r.nosort=!!t.nosort,r.nocase=!!t.nocase,r.stat=!!t.stat,r.noprocess=!!t.noprocess,r.absolute=!!t.absolute,r.fs=t.fs||rde,r.maxLength=t.maxLength||1/0,r.cache=t.cache||Object.create(null),r.statCache=t.statCache||Object.create(null),r.symlinks=t.symlinks||Object.create(null),sde(r,t),r.changedCwd=!1;var n=process.cwd();uq(t,"cwd")?(r.cwd=xu.resolve(t.cwd),r.changedCwd=r.cwd!==n):r.cwd=xu.resolve(n),r.root=t.root||xu.resolve(r.cwd,"/"),r.root=xu.resolve(r.root),r.cwdAbs=cq(r.cwd)?r.cwd:rp(r,r.cwd),r.nomount=!!t.nomount,process.platform==="win32"&&(r.root=r.root.replace(/\\/g,"/"),r.cwd=r.cwd.replace(/\\/g,"/"),r.cwdAbs=r.cwdAbs.replace(/\\/g,"/")),t.nonegate=!0,t.nocomment=!0,r.minimatch=new zE(e,t),r.options=r.minimatch.options}function lde(r){for(var e=r.nounique,t=e?[]:Object.create(null),n=0,i=r.matches.length;n<i;n++){var s=r.matches[n];if(!s||Object.keys(s).length===0){if(r.nonull){var o=r.minimatch.globSet[n];e?t.push(o):t[o]=!0}}else{var a=Object.keys(s);e?t.push.apply(t,a):a.forEach(function(u){t[u]=!0})}}if(e||(t=Object.keys(t)),r.nosort||(t=t.sort(ide)),r.mark){for(var n=0;n<t.length;n++)t[n]=r._mark(t[n]);r.nodir&&(t=t.filter(function(u){var c=!/\/$/.test(u),d=r.cache[u]||r.cache[rp(r,u)];return c&&d&&(c=d!=="DIR"&&!Array.isArray(d)),c}))}r.ignore.length&&(t=t.filter(function(u){return!fq(r,u)})),r.found=t}function ude(r,e){var t=rp(r,e),n=r.cache[t],i=e;if(n){var s=n==="DIR"||Array.isArray(n),o=e.slice(-1)==="/";if(s&&!o?i+="/":!s&&o&&(i=i.slice(0,-1)),i!==e){var a=rp(r,i);r.statCache[a]=r.statCache[t],r.cache[a]=r.cache[t]}}return i}function rp(r,e){var t=e;return e.charAt(0)==="/"?t=xu.join(r.root,e):cq(e)||e===""?t=e:r.changedCwd?t=xu.resolve(r.cwd,e):t=xu.resolve(e),process.platform==="win32"&&(t=t.replace(/\\/g,"/")),t}function fq(r,e){return r.ignore.length?r.ignore.some(function(t){return t.matcher.match(e)||!!(t.gmatcher&&t.gmatcher.match(e))}):!1}function cde(r,e){return r.ignore.length?r.ignore.some(function(t){return!!(t.gmatcher&&t.gmatcher.match(e))}):!1}});var gq=E((Rke,mq)=>{mq.exports=pq;pq.GlobSync=tn;var fde=NE(),dq=ev(),Mke=dq.Minimatch,kke=QE().Glob,Pke=require("util"),YE=require("path"),hq=require("assert"),tv=require("path").isAbsolute,Eu=HE(),dde=Eu.setopts,JE=Eu.ownProp,hde=Eu.childrenIgnored,pde=Eu.isIgnored;function pq(r,e){if(typeof e=="function"||arguments.length===3)throw new TypeError(`callback provided to sync glob
See: https://github.com/isaacs/node-glob/issues/167`);return new tn(r,e).found}function tn(r,e){if(!r)throw new Error("must provide pattern");if(typeof e=="function"||arguments.length===3)throw new TypeError(`callback provided to sync glob
See: https://github.com/isaacs/node-glob/issues/167`);if(!(this instanceof tn))return new tn(r,e);if(dde(this,r,e),this.noprocess)return this;var t=this.minimatch.set.length;this.matches=new Array(t);for(var n=0;n<t;n++)this._process(this.minimatch.set[n],n,!1);this._finish()}tn.prototype._finish=function(){if(hq.ok(this instanceof tn),this.realpath){var r=this;this.matches.forEach(function(e,t){var n=r.matches[t]=Object.create(null);for(var i in e)try{i=r._makeAbs(i);var s=fde.realpathSync(i,r.realpathCache);n[s]=!0}catch(o){if(o.syscall==="stat")n[r._makeAbs(i)]=!0;else throw o}})}Eu.finish(this)};tn.prototype._process=function(r,e,t){hq.ok(this instanceof tn);for(var n=0;typeof r[n]=="string";)n++;var i;switch(n){case r.length:this._processSimple(r.join("/"),e);return;case 0:i=null;break;default:i=r.slice(0,n).join("/");break}var s=r.slice(n),o;i===null?o=".":((tv(i)||tv(r.map(function(c){return typeof c=="string"?c:"[*]"}).join("/")))&&(!i||!tv(i))&&(i="/"+i),o=i);var a=this._makeAbs(o);if(!hde(this,o)){var u=s[0]===dq.GLOBSTAR;u?this._processGlobStar(i,o,a,s,e,t):this._processReaddir(i,o,a,s,e,t)}};tn.prototype._processReaddir=function(r,e,t,n,i,s){var o=this._readdir(t,s);if(o){for(var a=n[0],u=!!this.minimatch.negate,c=a._glob,d=this.dot||c.charAt(0)===".",h=[],p=0;p<o.length;p++){var m=o[p];if(m.charAt(0)!=="."||d){var y;u&&!r?y=!m.match(a):y=m.match(a),y&&h.push(m)}}var _=h.length;if(_!==0){if(n.length===1&&!this.mark&&!this.stat){this.matches[i]||(this.matches[i]=Object.create(null));for(var p=0;p<_;p++){var m=h[p];r&&(r.slice(-1)!=="/"?m=r+"/"+m:m=r+m),m.charAt(0)==="/"&&!this.nomount&&(m=YE.join(this.root,m)),this._emitMatch(i,m)}return}n.shift();for(var p=0;p<_;p++){var m=h[p],O;r?O=[r,m]:O=[m],this._process(O.concat(n),i,s)}}}};tn.prototype._emitMatch=function(r,e){if(!pde(this,e)){var t=this._makeAbs(e);if(this.mark&&(e=this._mark(e)),this.absolute&&(e=t),!this.matches[r][e]){if(this.nodir){var n=this.cache[t];if(n==="DIR"||Array.isArray(n))return}this.matches[r][e]=!0,this.stat&&this._stat(e)}}};tn.prototype._readdirInGlobStar=function(r){if(this.follow)return this._readdir(r,!1);var e,t,n;try{t=this.fs.lstatSync(r)}catch(s){if(s.code==="ENOENT")return null}var i=t&&t.isSymbolicLink();return this.symlinks[r]=i,!i&&t&&!t.isDirectory()?this.cache[r]="FILE":e=this._readdir(r,!1),e};tn.prototype._readdir=function(r,e){var t;if(e&&!JE(this.symlinks,r))return this._readdirInGlobStar(r);if(JE(this.cache,r)){var n=this.cache[r];if(!n||n==="FILE")return null;if(Array.isArray(n))return n}try{return this._readdirEntries(r,this.fs.readdirSync(r))}catch(i){return this._readdirError(r,i),null}};tn.prototype._readdirEntries=function(r,e){if(!this.mark&&!this.stat)for(var t=0;t<e.length;t++){var n=e[t];r==="/"?n=r+n:n=r+"/"+n,this.cache[n]=!0}return this.cache[r]=e,e};tn.prototype._readdirError=function(r,e){switch(e.code){case"ENOTSUP":case"ENOTDIR":var t=this._makeAbs(r);if(this.cache[t]="FILE",t===this.cwdAbs){var n=new Error(e.code+" invalid cwd "+this.cwd);throw n.path=this.cwd,n.code=e.code,n}break;case"ENOENT":case"ELOOP":case"ENAMETOOLONG":case"UNKNOWN":this.cache[this._makeAbs(r)]=!1;break;default:if(this.cache[this._makeAbs(r)]=!1,this.strict)throw e;this.silent||console.error("glob error",e);break}};tn.prototype._processGlobStar=function(r,e,t,n,i,s){var o=this._readdir(t,s);if(o){var a=n.slice(1),u=r?[r]:[],c=u.concat(a);this._process(c,i,!1);var d=o.length,h=this.symlinks[t];if(!(h&&s))for(var p=0;p<d;p++){var m=o[p];if(!(m.charAt(0)==="."&&!this.dot)){var y=u.concat(o[p],a);this._process(y,i,!0);var _=u.concat(o[p],n);this._process(_,i,!0)}}}};tn.prototype._processSimple=function(r,e){var t=this._stat(r);if(this.matches[e]||(this.matches[e]=Object.create(null)),!!t){if(r&&tv(r)&&!this.nomount){var n=/[\/\\]$/.test(r);r.charAt(0)==="/"?r=YE.join(this.root,r):(r=YE.resolve(this.root,r),n&&(r+="/"))}process.platform==="win32"&&(r=r.replace(/\\/g,"/")),this._emitMatch(e,r)}};tn.prototype._stat=function(r){var e=this._makeAbs(r),t=r.slice(-1)==="/";if(r.length>this.maxLength)return!1;if(!this.stat&&JE(this.cache,e)){var o=this.cache[e];if(Array.isArray(o)&&(o="DIR"),!t||o==="DIR")return o;if(t&&o==="FILE")return!1}var n,i=this.statCache[e];if(!i){var s;try{s=this.fs.lstatSync(e)}catch(a){if(a&&(a.code==="ENOENT"||a.code==="ENOTDIR"))return this.statCache[e]=!1,!1}if(s&&s.isSymbolicLink())try{i=this.fs.statSync(e)}catch{i=s}else i=s}this.statCache[e]=i;var o=!0;return i&&(o=i.isDirectory()?"DIR":"FILE"),this.cache[e]=this.cache[e]||o,t&&o==="FILE"?!1:o};tn.prototype._mark=function(r){return Eu.mark(this,r)};tn.prototype._makeAbs=function(r){return Eu.makeAbs(this,r)}});var ZE=E((Lke,vq)=>{vq.exports=yq;function yq(r,e){if(r&&e)return yq(r)(e);if(typeof r!="function")throw new TypeError("need wrapper function");return Object.keys(r).forEach(function(n){t[n]=r[n]}),t;function t(){for(var n=new Array(arguments.length),i=0;i<n.length;i++)n[i]=arguments[i];var s=r.apply(this,n),o=n[n.length-1];return typeof s=="function"&&s!==o&&Object.keys(o).forEach(function(a){s[a]=o[a]}),s}}});var e2=E((Dke,XE)=>{var wq=ZE();XE.exports=wq(rv);XE.exports.strict=wq(bq);rv.proto=rv(function(){Object.defineProperty(Function.prototype,"once",{value:function(){return rv(this)},configurable:!0}),Object.defineProperty(Function.prototype,"onceStrict",{value:function(){return bq(this)},configurable:!0})});function rv(r){var e=function(){return e.called?e.value:(e.called=!0,e.value=r.apply(this,arguments))};return e.called=!1,e}function bq(r){var e=function(){if(e.called)throw new Error(e.onceError);return e.called=!0,e.value=r.apply(this,arguments)},t=r.name||"Function wrapped with `once`";return e.onceError=t+" shouldn't be called more than once",e.called=!1,e}});var _q=E((Nke,Sq)=>{var mde=ZE(),np=Object.create(null),gde=e2();Sq.exports=mde(yde);function yde(r,e){return np[r]?(np[r].push(e),null):(np[r]=[e],vde(r))}function vde(r){return gde(function e(){var t=np[r],n=t.length,i=wde(arguments);try{for(var s=0;s<n;s++)t[s].apply(null,i)}finally{t.length>n?(t.splice(0,n),process.nextTick(function(){e.apply(null,i)})):delete np[r]}})}function wde(r){for(var e=r.length,t=[],n=0;n<e;n++)t[n]=r[n];return t}});var QE=E((qke,Eq)=>{Eq.exports=Ou;var bde=NE(),xq=ev(),jke=xq.Minimatch,Sde=ni(),_de=require("events").EventEmitter,t2=require("path"),r2=require("assert"),ip=require("path").isAbsolute,i2=gq(),Iu=HE(),xde=Iu.setopts,n2=Iu.ownProp,s2=_q(),Kke=require("util"),Ede=Iu.childrenIgnored,Ode=Iu.isIgnored,Ide=e2();function Ou(r,e,t){if(typeof e=="function"&&(t=e,e={}),e||(e={}),e.sync){if(t)throw new TypeError("callback provided to sync glob");return i2(r,e)}return new Mt(r,e,t)}Ou.sync=i2;var Cde=Ou.GlobSync=i2.GlobSync;Ou.glob=Ou;function Tde(r,e){if(e===null||typeof e!="object")return r;for(var t=Object.keys(e),n=t.length;n--;)r[t[n]]=e[t[n]];return r}Ou.hasMagic=function(r,e){var t=Tde({},e);t.noprocess=!0;var n=new Mt(r,t),i=n.minimatch.set;if(!r)return!1;if(i.length>1)return!0;for(var s=0;s<i[0].length;s++)if(typeof i[0][s]!="string")return!0;return!1};Ou.Glob=Mt;Sde(Mt,_de);function Mt(r,e,t){if(typeof e=="function"&&(t=e,e=null),e&&e.sync){if(t)throw new TypeError("callback provided to sync glob");return new Cde(r,e)}if(!(this instanceof Mt))return new Mt(r,e,t);xde(this,r,e),this._didRealPath=!1;var n=this.minimatch.set.length;this.matches=new Array(n),typeof t=="function"&&(t=Ide(t),this.on("error",t),this.on("end",function(u){t(null,u)}));var i=this;if(this._processing=0,this._emitQueue=[],this._processQueue=[],this.paused=!1,this.noprocess)return this;if(n===0)return a();for(var s=!0,o=0;o<n;o++)this._process(this.minimatch.set[o],o,!1,a);s=!1;function a(){--i._processing,i._processing<=0&&(s?process.nextTick(function(){i._finish()}):i._finish())}}Mt.prototype._finish=function(){if(r2(this instanceof Mt),!this.aborted){if(this.realpath&&!this._didRealpath)return this._realpath();Iu.finish(this),this.emit("end",this.found)}};Mt.prototype._realpath=function(){if(this._didRealpath)return;this._didRealpath=!0;var r=this.matches.length;if(r===0)return this._finish();for(var e=this,t=0;t<this.matches.length;t++)this._realpathSet(t,n);function n(){--r===0&&e._finish()}};Mt.prototype._realpathSet=function(r,e){var t=this.matches[r];if(!t)return e();var n=Object.keys(t),i=this,s=n.length;if(s===0)return e();var o=this.matches[r]=Object.create(null);n.forEach(function(a,u){a=i._makeAbs(a),bde.realpath(a,i.realpathCache,function(c,d){c?c.syscall==="stat"?o[a]=!0:i.emit("error",c):o[d]=!0,--s===0&&(i.matches[r]=o,e())})})};Mt.prototype._mark=function(r){return Iu.mark(this,r)};Mt.prototype._makeAbs=function(r){return Iu.makeAbs(this,r)};Mt.prototype.abort=function(){this.aborted=!0,this.emit("abort")};Mt.prototype.pause=function(){this.paused||(this.paused=!0,this.emit("pause"))};Mt.prototype.resume=function(){if(this.paused){if(this.emit("resume"),this.paused=!1,this._emitQueue.length){var r=this._emitQueue.slice(0);this._emitQueue.length=0;for(var e=0;e<r.length;e++){var t=r[e];this._emitMatch(t[0],t[1])}}if(this._processQueue.length){var n=this._processQueue.slice(0);this._processQueue.length=0;for(var e=0;e<n.length;e++){var i=n[e];this._processing--,this._process(i[0],i[1],i[2],i[3])}}}};Mt.prototype._process=function(r,e,t,n){if(r2(this instanceof Mt),r2(typeof n=="function"),!this.aborted){if(this._processing++,this.paused){this._processQueue.push([r,e,t,n]);return}for(var i=0;typeof r[i]=="string";)i++;var s;switch(i){case r.length:this._processSimple(r.join("/"),e,n);return;case 0:s=null;break;default:s=r.slice(0,i).join("/");break}var o=r.slice(i),a;s===null?a=".":((ip(s)||ip(r.map(function(d){return typeof d=="string"?d:"[*]"}).join("/")))&&(!s||!ip(s))&&(s="/"+s),a=s);var u=this._makeAbs(a);if(Ede(this,a))return n();var c=o[0]===xq.GLOBSTAR;c?this._processGlobStar(s,a,u,o,e,t,n):this._processReaddir(s,a,u,o,e,t,n)}};Mt.prototype._processReaddir=function(r,e,t,n,i,s,o){var a=this;this._readdir(t,s,function(u,c){return a._processReaddir2(r,e,t,n,i,s,c,o)})};Mt.prototype._processReaddir2=function(r,e,t,n,i,s,o,a){if(!o)return a();for(var u=n[0],c=!!this.minimatch.negate,d=u._glob,h=this.dot||d.charAt(0)===".",p=[],m=0;m<o.length;m++){var y=o[m];if(y.charAt(0)!=="."||h){var _;c&&!r?_=!y.match(u):_=y.match(u),_&&p.push(y)}}var O=p.length;if(O===0)return a();if(n.length===1&&!this.mark&&!this.stat){this.matches[i]||(this.matches[i]=Object.create(null));for(var m=0;m<O;m++){var y=p[m];r&&(r!=="/"?y=r+"/"+y:y=r+y),y.charAt(0)==="/"&&!this.nomount&&(y=t2.join(this.root,y)),this._emitMatch(i,y)}return a()}n.shift();for(var m=0;m<O;m++){var y=p[m],x;r&&(r!=="/"?y=r+"/"+y:y=r+y),this._process([y].concat(n),i,s,a)}a()};Mt.prototype._emitMatch=function(r,e){if(!this.aborted&&!Ode(this,e)){if(this.paused){this._emitQueue.push([r,e]);return}var t=ip(e)?e:this._makeAbs(e);if(this.mark&&(e=this._mark(e)),this.absolute&&(e=t),!this.matches[r][e]){if(this.nodir){var n=this.cache[t];if(n==="DIR"||Array.isArray(n))return}this.matches[r][e]=!0;var i=this.statCache[t];i&&this.emit("stat",e,i),this.emit("match",e)}}};Mt.prototype._readdirInGlobStar=function(r,e){if(this.aborted)return;if(this.follow)return this._readdir(r,!1,e);var t="lstat\0"+r,n=this,i=s2(t,s);i&&n.fs.lstat(r,i);function s(o,a){if(o&&o.code==="ENOENT")return e();var u=a&&a.isSymbolicLink();n.symlinks[r]=u,!u&&a&&!a.isDirectory()?(n.cache[r]="FILE",e()):n._readdir(r,!1,e)}};Mt.prototype._readdir=function(r,e,t){if(!this.aborted&&(t=s2("readdir\0"+r+"\0"+e,t),!!t)){if(e&&!n2(this.symlinks,r))return this._readdirInGlobStar(r,t);if(n2(this.cache,r)){var n=this.cache[r];if(!n||n==="FILE")return t();if(Array.isArray(n))return t(null,n)}var i=this;i.fs.readdir(r,Ade(this,r,t))}};function Ade(r,e,t){return function(n,i){n?r._readdirError(e,n,t):r._readdirEntries(e,i,t)}}Mt.prototype._readdirEntries=function(r,e,t){if(!this.aborted){if(!this.mark&&!this.stat)for(var n=0;n<e.length;n++){var i=e[n];r==="/"?i=r+i:i=r+"/"+i,this.cache[i]=!0}return this.cache[r]=e,t(null,e)}};Mt.prototype._readdirError=function(r,e,t){if(!this.aborted){switch(e.code){case"ENOTSUP":case"ENOTDIR":var n=this._makeAbs(r);if(this.cache[n]="FILE",n===this.cwdAbs){var i=new Error(e.code+" invalid cwd "+this.cwd);i.path=this.cwd,i.code=e.code,this.emit("error",i),this.abort()}break;case"ENOENT":case"ELOOP":case"ENAMETOOLONG":case"UNKNOWN":this.cache[this._makeAbs(r)]=!1;break;default:this.cache[this._makeAbs(r)]=!1,this.strict&&(this.emit("error",e),this.abort()),this.silent||console.error("glob error",e);break}return t()}};Mt.prototype._processGlobStar=function(r,e,t,n,i,s,o){var a=this;this._readdir(t,s,function(u,c){a._processGlobStar2(r,e,t,n,i,s,c,o)})};Mt.prototype._processGlobStar2=function(r,e,t,n,i,s,o,a){if(!o)return a();var u=n.slice(1),c=r?[r]:[],d=c.concat(u);this._process(d,i,!1,a);var h=this.symlinks[t],p=o.length;if(h&&s)return a();for(var m=0;m<p;m++){var y=o[m];if(!(y.charAt(0)==="."&&!this.dot)){var _=c.concat(o[m],u);this._process(_,i,!0,a);var O=c.concat(o[m],n);this._process(O,i,!0,a)}}a()};Mt.prototype._processSimple=function(r,e,t){var n=this;this._stat(r,function(i,s){n._processSimple2(r,e,i,s,t)})};Mt.prototype._processSimple2=function(r,e,t,n,i){if(this.matches[e]||(this.matches[e]=Object.create(null)),!n)return i();if(r&&ip(r)&&!this.nomount){var s=/[\/\\]$/.test(r);r.charAt(0)==="/"?r=t2.join(this.root,r):(r=t2.resolve(this.root,r),s&&(r+="/"))}process.platform==="win32"&&(r=r.replace(/\\/g,"/")),this._emitMatch(e,r),i()};Mt.prototype._stat=function(r,e){var t=this._makeAbs(r),n=r.slice(-1)==="/";if(r.length>this.maxLength)return e();if(!this.stat&&n2(this.cache,t)){var i=this.cache[t];if(Array.isArray(i)&&(i="DIR"),!n||i==="DIR")return e(null,i);if(n&&i==="FILE")return e()}var s,o=this.statCache[t];if(o!==void 0){if(o===!1)return e(null,o);var a=o.isDirectory()?"DIR":"FILE";return n&&a==="FILE"?e():e(null,a,o)}var u=this,c=s2("stat\0"+t,d);c&&u.fs.lstat(t,c);function d(h,p){if(p&&p.isSymbolicLink())return u.fs.stat(t,function(m,y){m?u._stat2(r,t,null,p,e):u._stat2(r,t,m,y,e)});u._stat2(r,t,h,p,e)}};Mt.prototype._stat2=function(r,e,t,n,i){if(t&&(t.code==="ENOENT"||t.code==="ENOTDIR"))return this.statCache[e]=!1,i();var s=r.slice(-1)==="/";if(this.statCache[e]=n,e.slice(-1)==="/"&&n&&!n.isDirectory())return i(null,!1,n);var o=!0;return n&&(o=n.isDirectory()?"DIR":"FILE"),this.cache[e]=this.cache[e]||o,s&&o==="FILE"?i():i(null,o,n)}});var l2=E((Sf,Rq)=>{"use strict";Object.defineProperty(Sf,"__esModule",{value:!0});Sf.ScriptLoader=Sf.ScriptLoaderError=void 0;var Mde=require("crypto"),Mq=QE(),dn=require("path"),nv=require("fs"),kq=require("util"),Oq=(0,kq.promisify)(nv.readFile),kde=(0,kq.promisify)(nv.readdir),Pq={dot:!0,silent:!1},Pde=/^[-]{2,3}[ \t]*@include[ \t]+(["'])(.+?)\1[; \t\n]*$/m,Rde=/^\s*[\r\n]/gm,Cu=class extends Error{constructor(e,t,n=[],i,s=0){super(e),this.name=this.constructor.name,Error.captureStackTrace(this,this.constructor),this.includes=n,this.line=i??0,this.position=s}};Sf.ScriptLoaderError=Cu;var Iq=r=>r&&["~","<"].includes(r[0]),Lde=r=>(0,Mq.hasMagic)(r,Pq),a2=class{constructor(){this.pathMapper=new Map,this.clientScripts=new WeakMap,this.commandCache=new Map,this.rootPath=Nde(),this.pathMapper.set("~",this.rootPath),this.pathMapper.set("rootDir",this.rootPath),this.pathMapper.set("base",__dirname)}addPathMapping(e,t){let n;if(Iq(t))n=this.resolvePath(t);else{let s=jde(),o=dn.dirname(s);n=dn.normalize(dn.resolve(o,t))}let i=n.length-1;n[i]===dn.sep&&(n=n.substr(0,i)),this.pathMapper.set(e,n)}resolvePath(e,t=[]){let n=e[0];if(n==="~")e=dn.join(this.rootPath,e.substr(2));else if(n==="<"){let i=e.indexOf(">");if(i>0){let s=e.substring(1,i),o=this.pathMapper.get(s);if(!o)throw new Cu(`No path mapping found for "${s}"`,e,t);e=dn.join(o,e.substring(i+1))}}return dn.normalize(e)}async resolveDependencies(e,t,n=!1,i=[]){if(t=t??new Map,i.includes(e.path))throw new Cu(`circular reference: "${e.path}"`,e.path,i);i.push(e.path);function s(c,d){let h=c.indexOf(d),p=c.slice(0,h).split(`
`);return{line:p.length,column:p[p.length-1].length+d.indexOf("@include")+1}}function o(c,d){let h=s(e.content,d);throw new Cu(c,e.path,i,h.line,h.column)}let a,u=e.content;for(;(a=Pde.exec(u))!==null;){let[c,,d]=a,h=Iq(d)?this.resolvePath(Cq(d),i):dn.resolve(dn.dirname(e.path),Cq(d)),p;Lde(h)?p=(await Dde(h)).map(O=>dn.resolve(O)):p=[h],p=p.filter(_=>dn.extname(_)===".lua"),p.length===0&&o(`include not found: "${d}"`,c);let m=[];for(let _=0;_<p.length;_++){let O=p[_];e.includes.find(q=>q.path===O)&&o(`file "${d}" already included in "${e.path}"`,c);let A=t.get(O),P;if(A)P=A.token;else{let{name:q,numberOfKeys:F}=o2(O),z="";try{z=(await Oq(O,{flag:"r"})).toString()}catch(B){if(B.code==="ENOENT")o(`include not found: "${d}"`,c);else throw B}P=Tq(O),A={name:q,numberOfKeys:F,path:O,content:z,token:P,includes:[]},t.set(O,A)}m.push(P),e.includes.push(A),await this.resolveDependencies(A,t,!0,i)}let y=m.join(`
`);u=u.replace(c,y)}e.content=u,n?t.set(e.path,e):t.set(e.name,e),i.pop()}async parseScript(e,t,n){let{name:i,numberOfKeys:s}=o2(e),o=n?.get(i);if(o?.content===t)return o;let a={path:e,token:Tq(e),content:t,name:i,numberOfKeys:s,includes:[]};return await this.resolveDependencies(a,n),a}interpolate(e,t){t=t||new Set;let n=e.content;return e.includes.forEach(i=>{let s=t.has(i.path),o=this.interpolate(i,t),a=s?"":o;a&&(n=n.replace(i.token,a)),n=Aq(n,i.token,""),t.add(i.path)}),n}async loadCommand(e,t){e=dn.resolve(e);let{name:n}=o2(e),i=t?.get(n);if(!i){let u=(await Oq(e)).toString();i=await this.parseScript(e,u,t)}let s=qde(this.interpolate(i)),{name:o,numberOfKeys:a}=i;return{name:o,options:{numberOfKeys:a,lua:s}}}async loadScripts(e,t){e=dn.normalize(e||__dirname);let n=this.commandCache.get(e);if(n)return n;let s=(await kde(e)).filter(o=>dn.extname(o)===".lua");if(s.length===0)throw new Cu("No .lua files found!",e,[]);n=[],t=t??new Map;for(let o=0;o<s.length;o++){let a=dn.join(e,s[o]),u=await this.loadCommand(a,t);n.push(u)}return this.commandCache.set(e,n),n}async load(e,t,n){let i=this.clientScripts.get(e);i||(i=new Set,this.clientScripts.set(e,i)),i.has(t)||(i.add(t),(await this.loadScripts(t,n??new Map)).forEach(o=>{e[o.name]||e.defineCommand(o.name,o.options)}))}clearCache(){this.commandCache.clear()}};Sf.ScriptLoader=a2;function Cq(r,e="lua"){let t=dn.extname(r);return t&&t!=="."?r:(e&&e[0]!=="."&&(e=`.${e}`),`${r}${e}`)}function o2(r){let e=dn.basename(r,".lua"),[t,n]=e.split("-"),i=n?parseInt(n,10):void 0;return{name:t,numberOfKeys:i}}async function Dde(r){return new Promise((e,t)=>{(0,Mq.glob)(r,Pq,(n,i)=>n?t(n):e(i))})}function Nde(){for(let r of Rq.paths||[])try{let e=dn.dirname(r);return nv.accessSync(r,nv.constants.F_OK),e}catch{}return""}function jde(){var r,e,t;let n=Error.prepareStackTrace,i="";try{Error.prepareStackTrace=(a,u)=>u;let s=new Error().stack,o=(r=s.shift())===null||r===void 0?void 0:r.getFileName();for(;s.length&&(i=(t=(e=s.shift())===null||e===void 0?void 0:e.getFileName())!==null&&t!==void 0?t:"",o===i););}catch{}finally{Error.prepareStackTrace=n}return i}function Kde(r){return(0,Mde.createHash)("sha1").update(r).digest("hex")}function Tq(r){return`@@${Kde(r)}`}function Aq(r,e,t){return r.replace(new RegExp(e,"g"),t)}function qde(r){return r.replace(Rde,"")}});var Dq=E(Wa=>{"use strict";Object.defineProperty(Wa,"__esModule",{value:!0});Wa.scriptLoader=Wa.ScriptLoader=Wa.ScriptLoaderError=void 0;var Lq=l2();Object.defineProperty(Wa,"ScriptLoader",{enumerable:!0,get:function(){return Lq.ScriptLoader}});var Fde=l2();Object.defineProperty(Wa,"ScriptLoaderError",{enumerable:!0,get:function(){return Fde.ScriptLoaderError}});var Vde=new Lq.ScriptLoader;Wa.scriptLoader=Vde});var jq=E(Nq=>{"use strict";Object.defineProperty(Nq,"__esModule",{value:!0})});var qq=E(Kq=>{"use strict";Object.defineProperty(Kq,"__esModule",{value:!0})});var Vq=E(Fq=>{"use strict";Object.defineProperty(Fq,"__esModule",{value:!0})});var Uq=E(Bq=>{"use strict";Object.defineProperty(Bq,"__esModule",{value:!0})});var $q=E(Gq=>{"use strict";Object.defineProperty(Gq,"__esModule",{value:!0})});var zq=E(Wq=>{"use strict";Object.defineProperty(Wq,"__esModule",{value:!0})});var Yq=E(Hq=>{"use strict";Object.defineProperty(Hq,"__esModule",{value:!0})});var Qq=E(Jq=>{"use strict";Object.defineProperty(Jq,"__esModule",{value:!0})});var Xq=E(Zq=>{"use strict";Object.defineProperty(Zq,"__esModule",{value:!0})});var t4=E(e4=>{"use strict";Object.defineProperty(e4,"__esModule",{value:!0})});var n4=E(r4=>{"use strict";Object.defineProperty(r4,"__esModule",{value:!0})});var s4=E(i4=>{"use strict";Object.defineProperty(i4,"__esModule",{value:!0})});var a4=E(o4=>{"use strict";Object.defineProperty(o4,"__esModule",{value:!0})});var u4=E(l4=>{"use strict";Object.defineProperty(l4,"__esModule",{value:!0})});var c4=E(sp=>{"use strict";Object.defineProperty(sp,"__esModule",{value:!0});sp.ClientType=void 0;var Bde;(function(r){r.blocking="blocking",r.normal="normal"})(Bde=sp.ClientType||(sp.ClientType={}))});var d4=E(f4=>{"use strict";Object.defineProperty(f4,"__esModule",{value:!0})});var p4=E(h4=>{"use strict";Object.defineProperty(h4,"__esModule",{value:!0})});var g4=E(m4=>{"use strict";Object.defineProperty(m4,"__esModule",{value:!0})});var v4=E(y4=>{"use strict";Object.defineProperty(y4,"__esModule",{value:!0})});var b4=E(w4=>{"use strict";Object.defineProperty(w4,"__esModule",{value:!0})});var _4=E(S4=>{"use strict";Object.defineProperty(S4,"__esModule",{value:!0})});var E4=E(x4=>{"use strict";Object.defineProperty(x4,"__esModule",{value:!0})});var O4=E(or=>{"use strict";Object.defineProperty(or,"__esModule",{value:!0});var Lr=(Js(),vi(Ys));Lr.__exportStar(jq(),or);Lr.__exportStar(qq(),or);Lr.__exportStar(Vq(),or);Lr.__exportStar(Uq(),or);Lr.__exportStar($q(),or);Lr.__exportStar(zq(),or);Lr.__exportStar(Yq(),or);Lr.__exportStar(Qq(),or);Lr.__exportStar(Xq(),or);Lr.__exportStar(t4(),or);Lr.__exportStar(n4(),or);Lr.__exportStar(s4(),or);Lr.__exportStar(a4(),or);Lr.__exportStar(u4(),or);Lr.__exportStar(c4(),or);Lr.__exportStar(d4(),or);Lr.__exportStar(p4(),or);Lr.__exportStar(g4(),or);Lr.__exportStar(v4(),or);Lr.__exportStar(b4(),or);Lr.__exportStar(_4(),or);Lr.__exportStar(E4(),or)});var C4=E(I4=>{"use strict";Object.defineProperty(I4,"__esModule",{value:!0})});var A4=E(T4=>{"use strict";Object.defineProperty(T4,"__esModule",{value:!0})});var k4=E(M4=>{"use strict";Object.defineProperty(M4,"__esModule",{value:!0})});var R4=E(P4=>{"use strict";Object.defineProperty(P4,"__esModule",{value:!0})});var D4=E(L4=>{"use strict";Object.defineProperty(L4,"__esModule",{value:!0})});var j4=E(N4=>{"use strict";Object.defineProperty(N4,"__esModule",{value:!0})});var q4=E(K4=>{"use strict";Object.defineProperty(K4,"__esModule",{value:!0})});var F4=E(Bo=>{"use strict";Object.defineProperty(Bo,"__esModule",{value:!0});var Tu=(Js(),vi(Ys));Tu.__exportStar(C4(),Bo);Tu.__exportStar(A4(),Bo);Tu.__exportStar(k4(),Bo);Tu.__exportStar(R4(),Bo);Tu.__exportStar(D4(),Bo);Tu.__exportStar(j4(),Bo);Tu.__exportStar(q4(),Bo)});var u2=E(za=>{"use strict";Object.defineProperty(za,"__esModule",{value:!0});var _f=(Js(),vi(Ys));_f.__exportStar(NK(),za);_f.__exportStar(Dq(),za);_f.__exportStar(Qc(),za);_f.__exportStar(O4(),za);_f.__exportStar(F4(),za);_f.__exportStar(Yi(),za)});var si=E((qPe,r5)=>{"use strict";var g2=class r extends Error{constructor(e){super(`Format functions must be synchronous taking a two arguments: (info, opts)
Found: ${e.toString().split(`
`)[0]}
`),Error.captureStackTrace(this,r)}};r5.exports=r=>{if(r.length>2)throw new g2(r);function e(n={}){this.options=n}e.prototype.transform=r;function t(n){return new e(n)}return t.Format=e,t}});var o5=E((FPe,s5)=>{var i5={};s5.exports=i5;var n5={reset:[0,0],bold:[1,22],dim:[2,22],italic:[3,23],underline:[4,24],inverse:[7,27],hidden:[8,28],strikethrough:[9,29],black:[30,39],red:[31,39],green:[32,39],yellow:[33,39],blue:[34,39],magenta:[35,39],cyan:[36,39],white:[37,39],gray:[90,39],grey:[90,39],brightRed:[91,39],brightGreen:[92,39],brightYellow:[93,39],brightBlue:[94,39],brightMagenta:[95,39],brightCyan:[96,39],brightWhite:[97,39],bgBlack:[40,49],bgRed:[41,49],bgGreen:[42,49],bgYellow:[43,49],bgBlue:[44,49],bgMagenta:[45,49],bgCyan:[46,49],bgWhite:[47,49],bgGray:[100,49],bgGrey:[100,49],bgBrightRed:[101,49],bgBrightGreen:[102,49],bgBrightYellow:[103,49],bgBrightBlue:[104,49],bgBrightMagenta:[105,49],bgBrightCyan:[106,49],bgBrightWhite:[107,49],blackBG:[40,49],redBG:[41,49],greenBG:[42,49],yellowBG:[43,49],blueBG:[44,49],magentaBG:[45,49],cyanBG:[46,49],whiteBG:[47,49]};Object.keys(n5).forEach(function(r){var e=n5[r],t=i5[r]=[];t.open="\x1B["+e[0]+"m",t.close="\x1B["+e[1]+"m"})});var l5=E((VPe,a5)=>{"use strict";a5.exports=function(r,e){e=e||process.argv;var t=e.indexOf("--"),n=/^-{1,2}/.test(r)?"":"--",i=e.indexOf(n+r);return i!==-1&&(t===-1?!0:i<t)}});var c5=E((BPe,u5)=>{"use strict";var zhe=require("os"),Ls=l5(),Gn=process.env,kf=void 0;Ls("no-color")||Ls("no-colors")||Ls("color=false")?kf=!1:(Ls("color")||Ls("colors")||Ls("color=true")||Ls("color=always"))&&(kf=!0);"FORCE_COLOR"in Gn&&(kf=Gn.FORCE_COLOR.length===0||parseInt(Gn.FORCE_COLOR,10)!==0);function Hhe(r){return r===0?!1:{level:r,hasBasic:!0,has256:r>=2,has16m:r>=3}}function Yhe(r){if(kf===!1)return 0;if(Ls("color=16m")||Ls("color=full")||Ls("color=truecolor"))return 3;if(Ls("color=256"))return 2;if(r&&!r.isTTY&&kf!==!0)return 0;var e=kf?1:0;if(process.platform==="win32"){var t=zhe.release().split(".");return Number(process.versions.node.split(".")[0])>=8&&Number(t[0])>=10&&Number(t[2])>=10586?Number(t[2])>=14931?3:2:1}if("CI"in Gn)return["TRAVIS","CIRCLECI","APPVEYOR","GITLAB_CI"].some(function(i){return i in Gn})||Gn.CI_NAME==="codeship"?1:e;if("TEAMCITY_VERSION"in Gn)return/^(9\.(0*[1-9]\d*)\.|\d{2,}\.)/.test(Gn.TEAMCITY_VERSION)?1:0;if("TERM_PROGRAM"in Gn){var n=parseInt((Gn.TERM_PROGRAM_VERSION||"").split(".")[0],10);switch(Gn.TERM_PROGRAM){case"iTerm.app":return n>=3?3:2;case"Hyper":return 3;case"Apple_Terminal":return 2}}return/-256(color)?$/i.test(Gn.TERM)?2:/^screen|^xterm|^vt100|^rxvt|color|ansi|cygwin|linux/i.test(Gn.TERM)||"COLORTERM"in Gn?1:(Gn.TERM==="dumb",e)}function y2(r){var e=Yhe(r);return Hhe(e)}u5.exports={supportsColor:y2,stdout:y2(process.stdout),stderr:y2(process.stderr)}});var d5=E((UPe,f5)=>{f5.exports=function(e,t){var n="";e=e||"Run the trap, drop the bass",e=e.split("");var i={a:["@","\u0104","\u023A","\u0245","\u0394","\u039B","\u0414"],b:["\xDF","\u0181","\u0243","\u026E","\u03B2","\u0E3F"],c:["\xA9","\u023B","\u03FE"],d:["\xD0","\u018A","\u0500","\u0501","\u0502","\u0503"],e:["\xCB","\u0115","\u018E","\u0258","\u03A3","\u03BE","\u04BC","\u0A6C"],f:["\u04FA"],g:["\u0262"],h:["\u0126","\u0195","\u04A2","\u04BA","\u04C7","\u050A"],i:["\u0F0F"],j:["\u0134"],k:["\u0138","\u04A0","\u04C3","\u051E"],l:["\u0139"],m:["\u028D","\u04CD","\u04CE","\u0520","\u0521","\u0D69"],n:["\xD1","\u014B","\u019D","\u0376","\u03A0","\u048A"],o:["\xD8","\xF5","\xF8","\u01FE","\u0298","\u047A","\u05DD","\u06DD","\u0E4F"],p:["\u01F7","\u048E"],q:["\u09CD"],r:["\xAE","\u01A6","\u0210","\u024C","\u0280","\u042F"],s:["\xA7","\u03DE","\u03DF","\u03E8"],t:["\u0141","\u0166","\u0373"],u:["\u01B1","\u054D"],v:["\u05D8"],w:["\u0428","\u0460","\u047C","\u0D70"],x:["\u04B2","\u04FE","\u04FC","\u04FD"],y:["\xA5","\u04B0","\u04CB"],z:["\u01B5","\u0240"]};return e.forEach(function(s){s=s.toLowerCase();var o=i[s]||[" "],a=Math.floor(Math.random()*o.length);typeof i[s]<"u"?n+=i[s][a]:n+=s}),n}});var p5=E((GPe,h5)=>{h5.exports=function(e,t){e=e||"   he is here   ";var n={up:["\u030D","\u030E","\u0304","\u0305","\u033F","\u0311","\u0306","\u0310","\u0352","\u0357","\u0351","\u0307","\u0308","\u030A","\u0342","\u0313","\u0308","\u034A","\u034B","\u034C","\u0303","\u0302","\u030C","\u0350","\u0300","\u0301","\u030B","\u030F","\u0312","\u0313","\u0314","\u033D","\u0309","\u0363","\u0364","\u0365","\u0366","\u0367","\u0368","\u0369","\u036A","\u036B","\u036C","\u036D","\u036E","\u036F","\u033E","\u035B","\u0346","\u031A"],down:["\u0316","\u0317","\u0318","\u0319","\u031C","\u031D","\u031E","\u031F","\u0320","\u0324","\u0325","\u0326","\u0329","\u032A","\u032B","\u032C","\u032D","\u032E","\u032F","\u0330","\u0331","\u0332","\u0333","\u0339","\u033A","\u033B","\u033C","\u0345","\u0347","\u0348","\u0349","\u034D","\u034E","\u0353","\u0354","\u0355","\u0356","\u0359","\u035A","\u0323"],mid:["\u0315","\u031B","\u0300","\u0301","\u0358","\u0321","\u0322","\u0327","\u0328","\u0334","\u0335","\u0336","\u035C","\u035D","\u035E","\u035F","\u0360","\u0362","\u0338","\u0337","\u0361"," \u0489"]},i=[].concat(n.up,n.down,n.mid);function s(u){var c=Math.floor(Math.random()*u);return c}function o(u){var c=!1;return i.filter(function(d){c=d===u}),c}function a(u,c){var d="",h,p;c=c||{},c.up=typeof c.up<"u"?c.up:!0,c.mid=typeof c.mid<"u"?c.mid:!0,c.down=typeof c.down<"u"?c.down:!0,c.size=typeof c.size<"u"?c.size:"maxi",u=u.split("");for(p in u)if(!o(p)){switch(d=d+u[p],h={up:0,down:0,mid:0},c.size){case"mini":h.up=s(8),h.mid=s(2),h.down=s(8);break;case"maxi":h.up=s(16)+3,h.mid=s(4)+1,h.down=s(64)+3;break;default:h.up=s(8)+1,h.mid=s(6)/2,h.down=s(8)+1;break}var m=["up","mid","down"];for(var y in m)for(var _=m[y],O=0;O<=h[_];O++)c[_]&&(d=d+n[_][s(n[_].length)])}return d}return a(e,t)}});var g5=E(($Pe,m5)=>{m5.exports=function(r){return function(e,t,n){if(e===" ")return e;switch(t%3){case 0:return r.red(e);case 1:return r.white(e);case 2:return r.blue(e)}}}});var v5=E((WPe,y5)=>{y5.exports=function(r){return function(e,t,n){return t%2===0?e:r.inverse(e)}}});var b5=E((zPe,w5)=>{w5.exports=function(r){var e=["red","yellow","green","blue","magenta"];return function(t,n,i){return t===" "?t:r[e[n++%e.length]](t)}}});var _5=E((HPe,S5)=>{S5.exports=function(r){var e=["underline","inverse","grey","yellow","red","green","blue","white","cyan","magenta","brightYellow","brightRed","brightGreen","brightBlue","brightWhite","brightCyan","brightMagenta"];return function(t,n,i){return t===" "?t:r[e[Math.round(Math.random()*(e.length-2))]](t)}}});var T5=E((JPe,C5)=>{var at={};C5.exports=at;at.themes={};var Jhe=require("util"),Bu=at.styles=o5(),E5=Object.defineProperties,Qhe=new RegExp(/[\r\n]+/g);at.supportsColor=c5().supportsColor;typeof at.enabled>"u"&&(at.enabled=at.supportsColor()!==!1);at.enable=function(){at.enabled=!0};at.disable=function(){at.enabled=!1};at.stripColors=at.strip=function(r){return(""+r).replace(/\x1B\[\d+m/g,"")};var YPe=at.stylize=function(e,t){if(!at.enabled)return e+"";var n=Bu[t];return!n&&t in at?at[t](e):n.open+e+n.close},Zhe=/[|\\{}()[\]^$+*?.]/g,Xhe=function(r){if(typeof r!="string")throw new TypeError("Expected a string");return r.replace(Zhe,"\\$&")};function O5(r){var e=function t(){return tpe.apply(t,arguments)};return e._styles=r,e.__proto__=epe,e}var I5=function(){var r={};return Bu.grey=Bu.gray,Object.keys(Bu).forEach(function(e){Bu[e].closeRe=new RegExp(Xhe(Bu[e].close),"g"),r[e]={get:function(){return O5(this._styles.concat(e))}}}),r}(),epe=E5(function(){},I5);function tpe(){var r=Array.prototype.slice.call(arguments),e=r.map(function(o){return o!=null&&o.constructor===String?o:Jhe.inspect(o)}).join(" ");if(!at.enabled||!e)return e;for(var t=e.indexOf(`
`)!=-1,n=this._styles,i=n.length;i--;){var s=Bu[n[i]];e=s.open+e.replace(s.closeRe,s.open)+s.close,t&&(e=e.replace(Qhe,function(o){return s.close+o+s.open}))}return e}at.setTheme=function(r){if(typeof r=="string"){console.log("colors.setTheme now only accepts an object, not a string.  If you are trying to set a theme from a file, it is now your (the caller's) responsibility to require the file.  The old syntax looked like colors.setTheme(__dirname + '/../themes/generic-logging.js'); The new syntax looks like colors.setTheme(require(__dirname + '/../themes/generic-logging.js'));");return}for(var e in r)(function(t){at[t]=function(n){if(typeof r[t]=="object"){var i=n;for(var s in r[t])i=at[r[t][s]](i);return i}return at[r[t]](n)}})(e)};function rpe(){var r={};return Object.keys(I5).forEach(function(e){r[e]={get:function(){return O5([e])}}}),r}var npe=function(e,t){var n=t.split("");return n=n.map(e),n.join("")};at.trap=d5();at.zalgo=p5();at.maps={};at.maps.america=g5()(at);at.maps.zebra=v5()(at);at.maps.rainbow=b5()(at);at.maps.random=_5()(at);for(x5 in at.maps)(function(r){at[r]=function(e){return npe(at.maps[r],e)}})(x5);var x5;E5(at,rpe())});var v2=E((QPe,A5)=>{var ipe=T5();A5.exports=ipe});var M5=E(w2=>{"use strict";w2.levels={error:0,warn:1,help:2,data:3,info:4,debug:5,prompt:6,verbose:7,input:8,silly:9};w2.colors={error:"red",warn:"yellow",help:"cyan",data:"grey",info:"green",debug:"blue",prompt:"grey",verbose:"cyan",input:"grey",silly:"magenta"}});var k5=E(b2=>{"use strict";b2.levels={error:0,warn:1,info:2,http:3,verbose:4,debug:5,silly:6};b2.colors={error:"red",warn:"yellow",info:"green",http:"green",verbose:"cyan",debug:"blue",silly:"magenta"}});var P5=E(S2=>{"use strict";S2.levels={emerg:0,alert:1,crit:2,error:3,warning:4,notice:5,info:6,debug:7};S2.colors={emerg:"red",alert:"yellow",crit:"red",error:"red",warning:"red",notice:"yellow",info:"green",debug:"blue"}});var R5=E(mv=>{"use strict";Object.defineProperty(mv,"cli",{value:M5()});Object.defineProperty(mv,"npm",{value:k5()});Object.defineProperty(mv,"syslog",{value:P5()})});var Wr=E(up=>{"use strict";Object.defineProperty(up,"LEVEL",{value:Symbol.for("level")});Object.defineProperty(up,"MESSAGE",{value:Symbol.for("message")});Object.defineProperty(up,"SPLAT",{value:Symbol.for("splat")});Object.defineProperty(up,"configs",{value:R5()})});var vv=E((nRe,yv)=>{"use strict";var E2=v2(),{LEVEL:_2,MESSAGE:x2}=Wr();E2.enabled=!0;var L5=/\s+/,gv=class r{constructor(e={}){e.colors&&this.addColors(e.colors),this.options=e}static addColors(e){let t=Object.keys(e).reduce((n,i)=>(n[i]=L5.test(e[i])?e[i].split(L5):e[i],n),{});return r.allColors=Object.assign({},r.allColors||{},t),r.allColors}addColors(e){return r.addColors(e)}colorize(e,t,n){if(typeof n>"u"&&(n=t),!Array.isArray(r.allColors[e]))return E2[r.allColors[e]](n);for(let i=0,s=r.allColors[e].length;i<s;i++)n=E2[r.allColors[e][i]](n);return n}transform(e,t){return t.all&&typeof e[x2]=="string"&&(e[x2]=this.colorize(e[_2],e.level,e[x2])),(t.level||t.all||!t.message)&&(e.level=this.colorize(e[_2],e.level)),(t.all||t.message)&&(e.message=this.colorize(e[_2],e.level,e.message)),e}};yv.exports=r=>new gv(r);yv.exports.Colorizer=yv.exports.Format=gv});var N5=E((iRe,D5)=>{"use strict";var{Colorizer:spe}=vv();D5.exports=r=>(spe.addColors(r.colors||r),r)});var K5=E((sRe,j5)=>{"use strict";var ope=si();j5.exports=ope(r=>(r.message=`	${r.message}`,r))});var V5=E((oRe,F5)=>{"use strict";var ape=si(),{LEVEL:q5,MESSAGE:O2}=Wr();F5.exports=ape((r,{stack:e,cause:t})=>{if(r instanceof Error){let i=Object.assign({},r,{level:r.level,[q5]:r[q5]||r.level,message:r.message,[O2]:r[O2]||r.message});return e&&(i.stack=r.stack),t&&(i.cause=r.cause),i}if(!(r.message instanceof Error))return r;let n=r.message;return Object.assign(r,n),r.message=n.message,r[O2]=n.message,e&&(r.stack=n.stack),t&&(r.cause=n.cause),r})});var C2=E((aRe,bv)=>{"use strict";var{configs:lpe,LEVEL:B5,MESSAGE:I2}=Wr(),wv=class r{constructor(e={levels:lpe.npm.levels}){this.paddings=r.paddingForLevels(e.levels,e.filler),this.options=e}static getLongestLevel(e){let t=Object.keys(e).map(n=>n.length);return Math.max(...t)}static paddingForLevel(e,t,n){let i=n+1-e.length,s=Math.floor(i/t.length);return`${t}${t.repeat(s)}`.slice(0,i)}static paddingForLevels(e,t=" "){let n=r.getLongestLevel(e);return Object.keys(e).reduce((i,s)=>(i[s]=r.paddingForLevel(s,t,n),i),{})}transform(e,t){return e.message=`${this.paddings[e[B5]]}${e.message}`,e[I2]&&(e[I2]=`${this.paddings[e[B5]]}${e[I2]}`),e}};bv.exports=r=>new wv(r);bv.exports.Padder=bv.exports.Format=wv});var U5=E((lRe,T2)=>{"use strict";var{Colorizer:upe}=vv(),{Padder:cpe}=C2(),{configs:fpe,MESSAGE:dpe}=Wr(),Sv=class{constructor(e={}){e.levels||(e.levels=fpe.cli.levels),this.colorizer=new upe(e),this.padder=new cpe(e),this.options=e}transform(e,t){return this.colorizer.transform(this.padder.transform(e,t),t),e[dpe]=`${e.level}:${e.message}`,e}};T2.exports=r=>new Sv(r);T2.exports.Format=Sv});var $5=E((uRe,A2)=>{"use strict";var hpe=si();function G5(r){if(r.every(ppe))return e=>{let t=e;for(let n=0;n<r.length;n++)if(t=r[n].transform(t,r[n].options),!t)return!1;return t}}function ppe(r){if(typeof r.transform!="function")throw new Error(["No transform function found on format. Did you create a format instance?","const myFormat = format(formatFn);","const instance = myFormat();"].join(`
`));return!0}A2.exports=(...r)=>{let e=hpe(G5(r)),t=e();return t.Format=e.Format,t};A2.exports.cascade=G5});var cp=E((D2,Y5)=>{"use strict";var{hasOwnProperty:_v}=Object.prototype,Gu=L2();Gu.configure=L2;Gu.stringify=Gu;Gu.default=Gu;D2.stringify=Gu;D2.configure=L2;Y5.exports=Gu;var H5=/[\u0000-\u001f\u0022\u005c\ud800-\udfff]|[\ud800-\udbff](?![\udc00-\udfff])|(?:[^\ud800-\udbff]|^)[\udc00-\udfff]/,mpe=new RegExp(H5,"g"),R2=["\\u0000","\\u0001","\\u0002","\\u0003","\\u0004","\\u0005","\\u0006","\\u0007","\\b","\\t","\\n","\\u000b","\\f","\\r","\\u000e","\\u000f","\\u0010","\\u0011","\\u0012","\\u0013","\\u0014","\\u0015","\\u0016","\\u0017","\\u0018","\\u0019","\\u001a","\\u001b","\\u001c","\\u001d","\\u001e","\\u001f","","",'\\"',"","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","\\\\"];function gpe(r){if(r.length===2){let t=r.charCodeAt(1);return`${r[0]}\\u${t.toString(16)}`}let e=r.charCodeAt(0);return R2.length>e?R2[e]:`\\u${e.toString(16)}`}function Za(r){if(r.length<5e3&&!H5.test(r))return r;if(r.length>100)return r.replace(mpe,gpe);let e="",t=0;for(let n=0;n<r.length;n++){let i=r.charCodeAt(n);if(i===34||i===92||i<32)e+=`${r.slice(t,n)}${R2[i]}`,t=n+1;else if(i>=55296&&i<=57343){if(i<=56319&&n+1<r.length){let s=r.charCodeAt(n+1);if(s>=56320&&s<=57343){n++;continue}}e+=`${r.slice(t,n)}\\u${i.toString(16)}`,t=n+1}}return e+=r.slice(t),e}function M2(r){if(r.length>200)return r.sort();for(let e=1;e<r.length;e++){let t=r[e],n=e;for(;n!==0&&r[n-1]>t;)r[n]=r[n-1],n--;r[n]=t}return r}var ype=Object.getOwnPropertyDescriptor(Object.getPrototypeOf(Object.getPrototypeOf(new Int8Array)),Symbol.toStringTag).get;function k2(r){return ype.call(r)!==void 0&&r.length!==0}function P2(r,e,t){r.length<t&&(t=r.length);let n=e===","?"":" ",i=`"0":${n}${r[0]}`;for(let s=1;s<t;s++)i+=`${e}"${s}":${n}${r[s]}`;return i}function vpe(r){if(_v.call(r,"circularValue")){let e=r.circularValue;if(typeof e=="string")return`"${e}"`;if(e==null)return e;if(e===Error||e===TypeError)return{toString(){throw new TypeError("Converting circular structure to JSON")}};throw new TypeError('The "circularValue" argument must be of type string or the value null or undefined')}return'"[Circular]"'}function W5(r,e){let t;if(_v.call(r,e)&&(t=r[e],typeof t!="boolean"))throw new TypeError(`The "${e}" argument must be of type boolean`);return t===void 0?!0:t}function z5(r,e){let t;if(_v.call(r,e)){if(t=r[e],typeof t!="number")throw new TypeError(`The "${e}" argument must be of type number`);if(!Number.isInteger(t))throw new TypeError(`The "${e}" argument must be an integer`);if(t<1)throw new RangeError(`The "${e}" argument must be >= 1`)}return t===void 0?1/0:t}function Uu(r){return r===1?"1 item":`${r} items`}function wpe(r){let e=new Set;for(let t of r)(typeof t=="string"||typeof t=="number")&&e.add(String(t));return e}function bpe(r){if(_v.call(r,"strict")){let e=r.strict;if(typeof e!="boolean")throw new TypeError('The "strict" argument must be of type boolean');if(e)return t=>{let n=`Object can not safely be stringified. Received type ${typeof t}`;throw typeof t!="function"&&(n+=` (${t.toString()})`),new Error(n)}}}function L2(r){r={...r};let e=bpe(r);e&&(r.bigint===void 0&&(r.bigint=!1),"circularValue"in r||(r.circularValue=Error));let t=vpe(r),n=W5(r,"bigint"),i=W5(r,"deterministic"),s=z5(r,"maximumDepth"),o=z5(r,"maximumBreadth");function a(p,m,y,_,O,x){let A=m[p];switch(typeof A=="object"&&A!==null&&typeof A.toJSON=="function"&&(A=A.toJSON(p)),A=_.call(m,p,A),typeof A){case"string":return`"${Za(A)}"`;case"object":{if(A===null)return"null";if(y.indexOf(A)!==-1)return t;let P="",q=",",F=x;if(Array.isArray(A)){if(A.length===0)return"[]";if(s<y.length+1)return'"[Array]"';y.push(A),O!==""&&(x+=O,P+=`
${x}`,q=`,
${x}`);let v=Math.min(A.length,o),w=0;for(;w<v-1;w++){let T=a(w,A,y,_,O,x);P+=T!==void 0?T:"null",P+=q}let I=a(w,A,y,_,O,x);if(P+=I!==void 0?I:"null",A.length-1>o){let T=A.length-o-1;P+=`${q}"... ${Uu(T)} not stringified"`}return O!==""&&(P+=`
${F}`),y.pop(),`[${P}]`}let z=Object.keys(A),B=z.length;if(B===0)return"{}";if(s<y.length+1)return'"[Object]"';let G="",H="";O!==""&&(x+=O,q=`,
${x}`,G=" ");let N=Math.min(B,o);k2(A)&&(P+=P2(A,q,o),z=z.slice(A.length),N-=A.length,H=q),i&&(z=M2(z)),y.push(A);for(let v=0;v<N;v++){let w=z[v],I=a(w,A,y,_,O,x);I!==void 0&&(P+=`${H}"${Za(w)}":${G}${I}`,H=q)}if(B>o){let v=B-o;P+=`${H}"...":${G}"${Uu(v)} not stringified"`,H=q}return O!==""&&H.length>1&&(P=`
${x}${P}
${F}`),y.pop(),`{${P}}`}case"number":return isFinite(A)?String(A):e?e(A):"null";case"boolean":return A===!0?"true":"false";case"undefined":return;case"bigint":if(n)return String(A);default:return e?e(A):void 0}}function u(p,m,y,_,O,x){switch(typeof m=="object"&&m!==null&&typeof m.toJSON=="function"&&(m=m.toJSON(p)),typeof m){case"string":return`"${Za(m)}"`;case"object":{if(m===null)return"null";if(y.indexOf(m)!==-1)return t;let A=x,P="",q=",";if(Array.isArray(m)){if(m.length===0)return"[]";if(s<y.length+1)return'"[Array]"';y.push(m),O!==""&&(x+=O,P+=`
${x}`,q=`,
${x}`);let B=Math.min(m.length,o),G=0;for(;G<B-1;G++){let N=u(G,m[G],y,_,O,x);P+=N!==void 0?N:"null",P+=q}let H=u(G,m[G],y,_,O,x);if(P+=H!==void 0?H:"null",m.length-1>o){let N=m.length-o-1;P+=`${q}"... ${Uu(N)} not stringified"`}return O!==""&&(P+=`
${A}`),y.pop(),`[${P}]`}y.push(m);let F="";O!==""&&(x+=O,q=`,
${x}`,F=" ");let z="";for(let B of _){let G=u(B,m[B],y,_,O,x);G!==void 0&&(P+=`${z}"${Za(B)}":${F}${G}`,z=q)}return O!==""&&z.length>1&&(P=`
${x}${P}
${A}`),y.pop(),`{${P}}`}case"number":return isFinite(m)?String(m):e?e(m):"null";case"boolean":return m===!0?"true":"false";case"undefined":return;case"bigint":if(n)return String(m);default:return e?e(m):void 0}}function c(p,m,y,_,O){switch(typeof m){case"string":return`"${Za(m)}"`;case"object":{if(m===null)return"null";if(typeof m.toJSON=="function"){if(m=m.toJSON(p),typeof m!="object")return c(p,m,y,_,O);if(m===null)return"null"}if(y.indexOf(m)!==-1)return t;let x=O;if(Array.isArray(m)){if(m.length===0)return"[]";if(s<y.length+1)return'"[Array]"';y.push(m),O+=_;let G=`
${O}`,H=`,
${O}`,N=Math.min(m.length,o),v=0;for(;v<N-1;v++){let I=c(v,m[v],y,_,O);G+=I!==void 0?I:"null",G+=H}let w=c(v,m[v],y,_,O);if(G+=w!==void 0?w:"null",m.length-1>o){let I=m.length-o-1;G+=`${H}"... ${Uu(I)} not stringified"`}return G+=`
${x}`,y.pop(),`[${G}]`}let A=Object.keys(m),P=A.length;if(P===0)return"{}";if(s<y.length+1)return'"[Object]"';O+=_;let q=`,
${O}`,F="",z="",B=Math.min(P,o);k2(m)&&(F+=P2(m,q,o),A=A.slice(m.length),B-=m.length,z=q),i&&(A=M2(A)),y.push(m);for(let G=0;G<B;G++){let H=A[G],N=c(H,m[H],y,_,O);N!==void 0&&(F+=`${z}"${Za(H)}": ${N}`,z=q)}if(P>o){let G=P-o;F+=`${z}"...": "${Uu(G)} not stringified"`,z=q}return z!==""&&(F=`
${O}${F}
${x}`),y.pop(),`{${F}}`}case"number":return isFinite(m)?String(m):e?e(m):"null";case"boolean":return m===!0?"true":"false";case"undefined":return;case"bigint":if(n)return String(m);default:return e?e(m):void 0}}function d(p,m,y){switch(typeof m){case"string":return`"${Za(m)}"`;case"object":{if(m===null)return"null";if(typeof m.toJSON=="function"){if(m=m.toJSON(p),typeof m!="object")return d(p,m,y);if(m===null)return"null"}if(y.indexOf(m)!==-1)return t;let _="";if(Array.isArray(m)){if(m.length===0)return"[]";if(s<y.length+1)return'"[Array]"';y.push(m);let q=Math.min(m.length,o),F=0;for(;F<q-1;F++){let B=d(F,m[F],y);_+=B!==void 0?B:"null",_+=","}let z=d(F,m[F],y);if(_+=z!==void 0?z:"null",m.length-1>o){let B=m.length-o-1;_+=`,"... ${Uu(B)} not stringified"`}return y.pop(),`[${_}]`}let O=Object.keys(m),x=O.length;if(x===0)return"{}";if(s<y.length+1)return'"[Object]"';let A="",P=Math.min(x,o);k2(m)&&(_+=P2(m,",",o),O=O.slice(m.length),P-=m.length,A=","),i&&(O=M2(O)),y.push(m);for(let q=0;q<P;q++){let F=O[q],z=d(F,m[F],y);z!==void 0&&(_+=`${A}"${Za(F)}":${z}`,A=",")}if(x>o){let q=x-o;_+=`${A}"...":"${Uu(q)} not stringified"`}return y.pop(),`{${_}}`}case"number":return isFinite(m)?String(m):e?e(m):"null";case"boolean":return m===!0?"true":"false";case"undefined":return;case"bigint":if(n)return String(m);default:return e?e(m):void 0}}function h(p,m,y){if(arguments.length>1){let _="";if(typeof y=="number"?_=" ".repeat(Math.min(y,10)):typeof y=="string"&&(_=y.slice(0,10)),m!=null){if(typeof m=="function")return a("",{"":p},[],m,_,"");if(Array.isArray(m))return u("",p,[],wpe(m),_,"")}if(_.length!==0)return c("",p,[],_,"")}return d("",p,[])}return h}});var N2=E((cRe,J5)=>{"use strict";var Spe=si(),{MESSAGE:_pe}=Wr(),xpe=cp();function Epe(r,e){return typeof e=="bigint"?e.toString():e}J5.exports=Spe((r,e)=>{let t=xpe.configure(e);return r[_pe]=t(r,e.replacer||Epe,e.space),r})});var Z5=E((fRe,Q5)=>{"use strict";var Ope=si();Q5.exports=Ope((r,e)=>e.message?(r.message=`[${e.label}] ${r.message}`,r):(r.label=e.label,r))});var eF=E((dRe,X5)=>{"use strict";var Ipe=si(),{MESSAGE:Cpe}=Wr(),Tpe=cp();X5.exports=Ipe(r=>{let e={};return r.message&&(e["@message"]=r.message,delete r.message),r.timestamp&&(e["@timestamp"]=r.timestamp,delete r.timestamp),e["@fields"]=r,r[Cpe]=Tpe(e),r})});var rF=E((hRe,tF)=>{"use strict";var Ape=si();function Mpe(r,e,t){let n=e.reduce((s,o)=>(s[o]=r[o],delete r[o],s),{}),i=Object.keys(r).reduce((s,o)=>(s[o]=r[o],delete r[o],s),{});return Object.assign(r,n,{[t]:i}),r}function kpe(r,e,t){return r[t]=e.reduce((n,i)=>(n[i]=r[i],delete r[i],n),{}),r}tF.exports=Ape((r,e={})=>{let t="metadata";e.key&&(t=e.key);let n=[];return!e.fillExcept&&!e.fillWith&&(n.push("level"),n.push("message")),e.fillExcept&&(n=e.fillExcept),n.length>0?Mpe(r,n,t):e.fillWith?kpe(r,e.fillWith,t):r})});var iF=E((pRe,nF)=>{var Pf=1e3,Rf=Pf*60,Lf=Rf*60,$u=Lf*24,Ppe=$u*7,Rpe=$u*365.25;nF.exports=function(r,e){e=e||{};var t=typeof r;if(t==="string"&&r.length>0)return Lpe(r);if(t==="number"&&isFinite(r))return e.long?Npe(r):Dpe(r);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(r))};function Lpe(r){if(r=String(r),!(r.length>100)){var e=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(r);if(e){var t=parseFloat(e[1]),n=(e[2]||"ms").toLowerCase();switch(n){case"years":case"year":case"yrs":case"yr":case"y":return t*Rpe;case"weeks":case"week":case"w":return t*Ppe;case"days":case"day":case"d":return t*$u;case"hours":case"hour":case"hrs":case"hr":case"h":return t*Lf;case"minutes":case"minute":case"mins":case"min":case"m":return t*Rf;case"seconds":case"second":case"secs":case"sec":case"s":return t*Pf;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return t;default:return}}}}function Dpe(r){var e=Math.abs(r);return e>=$u?Math.round(r/$u)+"d":e>=Lf?Math.round(r/Lf)+"h":e>=Rf?Math.round(r/Rf)+"m":e>=Pf?Math.round(r/Pf)+"s":r+"ms"}function Npe(r){var e=Math.abs(r);return e>=$u?xv(r,e,$u,"day"):e>=Lf?xv(r,e,Lf,"hour"):e>=Rf?xv(r,e,Rf,"minute"):e>=Pf?xv(r,e,Pf,"second"):r+" ms"}function xv(r,e,t,n){var i=e>=t*1.5;return Math.round(r/t)+" "+n+(i?"s":"")}});var oF=E((fp,sF)=>{"use strict";var jpe=si(),Kpe=iF();sF.exports=jpe(r=>{let e=+new Date;return fp.diff=e-(fp.prevTime||e),fp.prevTime=e,r.ms=`+${Kpe(fp.diff)}`,r})});var uF=E((mRe,lF)=>{"use strict";var qpe=require("util").inspect,Fpe=si(),{LEVEL:Vpe,MESSAGE:aF,SPLAT:Bpe}=Wr();lF.exports=Fpe((r,e={})=>{let t=Object.assign({},r);return delete t[Vpe],delete t[aF],delete t[Bpe],r[aF]=qpe(t,!1,e.depth||null,e.colorize),r})});var cF=E((gRe,Ov)=>{"use strict";var{MESSAGE:Upe}=Wr(),Ev=class{constructor(e){this.template=e}transform(e){return e[Upe]=this.template(e),e}};Ov.exports=r=>new Ev(r);Ov.exports.Printf=Ov.exports.Format=Ev});var hF=E((yRe,dF)=>{"use strict";var Gpe=si(),{MESSAGE:fF}=Wr(),$pe=cp();dF.exports=Gpe(r=>{let e=$pe(Object.assign({},r,{level:void 0,message:void 0,splat:void 0})),t=r.padding&&r.padding[r.level]||"";return e!=="{}"?r[fF]=`${r.level}:${t} ${r.message} ${e}`:r[fF]=`${r.level}:${t} ${r.message}`,r})});var gF=E((vRe,mF)=>{"use strict";var Wpe=require("util"),{SPLAT:pF}=Wr(),zpe=/%[scdjifoO%]/g,Hpe=/%%/g,j2=class{constructor(e){this.options=e}_splat(e,t){let n=e.message,i=e[pF]||e.splat||[],s=n.match(Hpe),o=s&&s.length||0,u=t.length-o-i.length,c=u<0?i.splice(u,-1*u):[],d=c.length;if(d)for(let h=0;h<d;h++)Object.assign(e,c[h]);return e.message=Wpe.format(n,...i),e}transform(e){let t=e.message,n=e[pF]||e.splat;if(!n||!n.length)return e;let i=t&&t.match&&t.match(zpe);if(!i&&(n||n.length)){let s=n.length>1?n.splice(0):n,o=s.length;if(o)for(let a=0;a<o;a++)Object.assign(e,s[a]);return e}return i?this._splat(e,i):e}};mF.exports=r=>new j2(r)});var vF=E((Iv,yF)=>{(function(r,e){typeof Iv=="object"&&typeof yF<"u"?e(Iv):typeof define=="function"&&define.amd?define(["exports"],e):e(r.fecha={})})(Iv,function(r){"use strict";var e=/d{1,4}|M{1,4}|YY(?:YY)?|S{1,3}|Do|ZZ|Z|([HhMsDm])\1?|[aA]|"[^"]*"|'[^']*'/g,t="\\d\\d?",n="\\d\\d",i="\\d{3}",s="\\d{4}",o="[^\\s]+",a=/\[([^]*?)\]/gm;function u(M,K){for(var L=[],b=0,R=M.length;b<R;b++)L.push(M[b].substr(0,K));return L}var c=function(M){return function(K,L){var b=L[M].map(function(X){return X.toLowerCase()}),R=b.indexOf(K.toLowerCase());return R>-1?R:null}};function d(M){for(var K=[],L=1;L<arguments.length;L++)K[L-1]=arguments[L];for(var b=0,R=K;b<R.length;b++){var X=R[b];for(var fe in X)M[fe]=X[fe]}return M}var h=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],p=["January","February","March","April","May","June","July","August","September","October","November","December"],m=u(p,3),y=u(h,3),_={dayNamesShort:y,dayNames:h,monthNamesShort:m,monthNames:p,amPm:["am","pm"],DoFn:function(M){return M+["th","st","nd","rd"][M%10>3?0:(M-M%10!==10?1:0)*M%10]}},O=d({},_),x=function(M){return O=d(O,M)},A=function(M){return M.replace(/[|\\{()[^$+*?.-]/g,"\\$&")},P=function(M,K){for(K===void 0&&(K=2),M=String(M);M.length<K;)M="0"+M;return M},q={D:function(M){return String(M.getDate())},DD:function(M){return P(M.getDate())},Do:function(M,K){return K.DoFn(M.getDate())},d:function(M){return String(M.getDay())},dd:function(M){return P(M.getDay())},ddd:function(M,K){return K.dayNamesShort[M.getDay()]},dddd:function(M,K){return K.dayNames[M.getDay()]},M:function(M){return String(M.getMonth()+1)},MM:function(M){return P(M.getMonth()+1)},MMM:function(M,K){return K.monthNamesShort[M.getMonth()]},MMMM:function(M,K){return K.monthNames[M.getMonth()]},YY:function(M){return P(String(M.getFullYear()),4).substr(2)},YYYY:function(M){return P(M.getFullYear(),4)},h:function(M){return String(M.getHours()%12||12)},hh:function(M){return P(M.getHours()%12||12)},H:function(M){return String(M.getHours())},HH:function(M){return P(M.getHours())},m:function(M){return String(M.getMinutes())},mm:function(M){return P(M.getMinutes())},s:function(M){return String(M.getSeconds())},ss:function(M){return P(M.getSeconds())},S:function(M){return String(Math.round(M.getMilliseconds()/100))},SS:function(M){return P(Math.round(M.getMilliseconds()/10),2)},SSS:function(M){return P(M.getMilliseconds(),3)},a:function(M,K){return M.getHours()<12?K.amPm[0]:K.amPm[1]},A:function(M,K){return M.getHours()<12?K.amPm[0].toUpperCase():K.amPm[1].toUpperCase()},ZZ:function(M){var K=M.getTimezoneOffset();return(K>0?"-":"+")+P(Math.floor(Math.abs(K)/60)*100+Math.abs(K)%60,4)},Z:function(M){var K=M.getTimezoneOffset();return(K>0?"-":"+")+P(Math.floor(Math.abs(K)/60),2)+":"+P(Math.abs(K)%60,2)}},F=function(M){return+M-1},z=[null,t],B=[null,o],G=["isPm",o,function(M,K){var L=M.toLowerCase();return L===K.amPm[0]?0:L===K.amPm[1]?1:null}],H=["timezoneOffset","[^\\s]*?[\\+\\-]\\d\\d:?\\d\\d|[^\\s]*?Z?",function(M){var K=(M+"").match(/([+-]|\d\d)/gi);if(K){var L=+K[1]*60+parseInt(K[2],10);return K[0]==="+"?L:-L}return 0}],N={D:["day",t],DD:["day",n],Do:["day",t+o,function(M){return parseInt(M,10)}],M:["month",t,F],MM:["month",n,F],YY:["year",n,function(M){var K=new Date,L=+(""+K.getFullYear()).substr(0,2);return+(""+(+M>68?L-1:L)+M)}],h:["hour",t,void 0,"isPm"],hh:["hour",n,void 0,"isPm"],H:["hour",t],HH:["hour",n],m:["minute",t],mm:["minute",n],s:["second",t],ss:["second",n],YYYY:["year",s],S:["millisecond","\\d",function(M){return+M*100}],SS:["millisecond",n,function(M){return+M*10}],SSS:["millisecond",i],d:z,dd:z,ddd:B,dddd:B,MMM:["month",o,c("monthNamesShort")],MMMM:["month",o,c("monthNames")],a:G,A:G,ZZ:H,Z:H},v={default:"ddd MMM DD YYYY HH:mm:ss",shortDate:"M/D/YY",mediumDate:"MMM D, YYYY",longDate:"MMMM D, YYYY",fullDate:"dddd, MMMM D, YYYY",isoDate:"YYYY-MM-DD",isoDateTime:"YYYY-MM-DDTHH:mm:ssZ",shortTime:"HH:mm",mediumTime:"HH:mm:ss",longTime:"HH:mm:ss.SSS"},w=function(M){return d(v,M)},I=function(M,K,L){if(K===void 0&&(K=v.default),L===void 0&&(L={}),typeof M=="number"&&(M=new Date(M)),Object.prototype.toString.call(M)!=="[object Date]"||isNaN(M.getTime()))throw new Error("Invalid Date pass to format");K=v[K]||K;var b=[];K=K.replace(a,function(X,fe){return b.push(fe),"@@@"});var R=d(d({},O),L);return K=K.replace(e,function(X){return q[X](M,R)}),K.replace(/@@@/g,function(){return b.shift()})};function T(M,K,L){if(L===void 0&&(L={}),typeof K!="string")throw new Error("Invalid format in fecha parse");if(K=v[K]||K,M.length>1e3)return null;var b=new Date,R={year:b.getFullYear(),month:0,day:1,hour:0,minute:0,second:0,millisecond:0,isPm:null,timezoneOffset:null},X=[],fe=[],he=K.replace(a,function(bs,kt){return fe.push(A(kt)),"@@@"}),Ce={},ft={};he=A(he).replace(e,function(bs){var kt=N[bs],Ct=kt[0],_n=kt[1],Pt=kt[3];if(Ce[Ct])throw new Error("Invalid format. "+Ct+" specified twice in format");return Ce[Ct]=!0,Pt&&(ft[Pt]=!0),X.push(kt),"("+_n+")"}),Object.keys(ft).forEach(function(bs){if(!Ce[bs])throw new Error("Invalid format. "+bs+" is required in specified format")}),he=he.replace(/@@@/g,function(){return fe.shift()});var st=M.match(new RegExp(he,"i"));if(!st)return null;for(var Sn=d(d({},O),L),Ze=1;Ze<st.length;Ze++){var bt=X[Ze-1],yo=bt[0],Bt=bt[2],dt=Bt?Bt(st[Ze],Sn):+st[Ze];if(dt==null)return null;R[yo]=dt}R.isPm===1&&R.hour!=null&&+R.hour!=12?R.hour=+R.hour+12:R.isPm===0&&+R.hour==12&&(R.hour=0);var fi;if(R.timezoneOffset==null){fi=new Date(R.year,R.month,R.day,R.hour,R.minute,R.second,R.millisecond);for(var jt=[["month","getMonth"],["day","getDate"],["hour","getHours"],["minute","getMinutes"],["second","getSeconds"]],Ze=0,St=jt.length;Ze<St;Ze++)if(Ce[jt[Ze][0]]&&R[jt[Ze][0]]!==fi[jt[Ze][1]]())return null}else if(fi=new Date(Date.UTC(R.year,R.month,R.day,R.hour,R.minute-R.timezoneOffset,R.second,R.millisecond)),R.month>11||R.month<0||R.day>31||R.day<1||R.hour>23||R.hour<0||R.minute>59||R.minute<0||R.second>59||R.second<0)return null;return fi}var k={format:I,parse:T,defaultI18n:_,setGlobalDateI18n:x,setGlobalDateMasks:w};r.assign=d,r.default=k,r.format=I,r.parse=T,r.defaultI18n=_,r.setGlobalDateI18n=x,r.setGlobalDateMasks=w,Object.defineProperty(r,"__esModule",{value:!0})})});var bF=E((wRe,wF)=>{"use strict";var Ype=vF(),Jpe=si();wF.exports=Jpe((r,e={})=>(e.format&&(r.timestamp=typeof e.format=="function"?e.format():Ype.format(new Date,e.format)),r.timestamp||(r.timestamp=new Date().toISOString()),e.alias&&(r[e.alias]=r.timestamp),r))});var _F=E((bRe,SF)=>{"use strict";var K2=v2(),Qpe=si(),{MESSAGE:q2}=Wr();SF.exports=Qpe((r,e)=>(e.level!==!1&&(r.level=K2.strip(r.level)),e.message!==!1&&(r.message=K2.strip(String(r.message))),e.raw!==!1&&r[q2]&&(r[q2]=K2.strip(String(r[q2]))),r))});var V2=E(F2=>{"use strict";var Zpe=F2.format=si();F2.levels=N5();function wn(r,e){Object.defineProperty(Zpe,r,{get(){return e()},configurable:!0})}wn("align",function(){return K5()});wn("errors",function(){return V5()});wn("cli",function(){return U5()});wn("combine",function(){return $5()});wn("colorize",function(){return vv()});wn("json",function(){return N2()});wn("label",function(){return Z5()});wn("logstash",function(){return eF()});wn("metadata",function(){return rF()});wn("ms",function(){return oF()});wn("padLevels",function(){return C2()});wn("prettyPrint",function(){return uF()});wn("printf",function(){return cF()});wn("simple",function(){return hF()});wn("splat",function(){return gF()});wn("timestamp",function(){return bF()});wn("uncolorize",function(){return _F()})});var B2=E(Cv=>{"use strict";var{format:xF}=require("util");Cv.warn={deprecated(r){return()=>{throw new Error(xF("{ %s } was removed in winston@3.0.0.",r))}},useFormat(r){return()=>{throw new Error([xF("{ %s } was removed in winston@3.0.0.",r),"Use a custom winston.format = winston.format(function) instead."].join(`
`))}},forFunctions(r,e,t){t.forEach(n=>{r[n]=Cv.warn[e](n)})},forProperties(r,e,t){t.forEach(n=>{let i=Cv.warn[e](n);Object.defineProperty(r,n,{get:i,set:i})})}}});var EF=E((xRe,Xpe)=>{Xpe.exports={name:"winston",description:"A logger for just about everything.",version:"3.11.0",author:"Charlie Robbins <charlie.robbins@gmail.com>",maintainers:["David Hyde <dabh@alumni.stanford.edu>"],repository:{type:"git",url:"https://github.com/winstonjs/winston.git"},keywords:["winston","logger","logging","logs","sysadmin","bunyan","pino","loglevel","tools","json","stream"],dependencies:{"@dabh/diagnostics":"^2.0.2","@colors/colors":"^1.6.0",async:"^3.2.3","is-stream":"^2.0.0",logform:"^2.4.0","one-time":"^1.0.0","readable-stream":"^3.4.0","safe-stable-stringify":"^2.3.1","stack-trace":"0.0.x","triple-beam":"^1.3.0","winston-transport":"^4.5.0"},devDependencies:{"@babel/cli":"^7.17.0","@babel/core":"^7.17.2","@babel/preset-env":"^7.16.7","@dabh/eslint-config-populist":"^5.0.0","@types/node":"^20.3.1","abstract-winston-transport":"^0.5.1",assume:"^2.2.0","cross-spawn-async":"^2.2.5",eslint:"^8.9.0",hock:"^1.4.1",mocha:"8.1.3",nyc:"^15.1.0",rimraf:"^5.0.5",split2:"^4.1.0","std-mocks":"^1.0.1",through2:"^4.0.2","winston-compat":"^0.1.5"},main:"./lib/winston.js",browser:"./dist/winston",types:"./index.d.ts",scripts:{lint:"eslint lib/*.js lib/winston/*.js lib/winston/**/*.js --resolve-plugins-relative-to ./node_modules/@dabh/eslint-config-populist",test:"mocha","test:coverage":"nyc npm run test:unit","test:unit":"mocha test/unit","test:integration":"mocha test/integration",build:"rimraf dist && babel lib -d dist",prepublishOnly:"npm run build"},engines:{node:">= 12.0.0"},license:"MIT"}});var IF=E((ERe,OF)=>{OF.exports=require("util").deprecate});var U2=E((ORe,CF)=>{CF.exports=require("stream")});var $2=E((IRe,AF)=>{"use strict";function eme(r,e){var t=this,n=this._readableState&&this._readableState.destroyed,i=this._writableState&&this._writableState.destroyed;return n||i?(e?e(r):r&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,process.nextTick(G2,this,r)):process.nextTick(G2,this,r)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(r||null,function(s){!e&&s?t._writableState?t._writableState.errorEmitted?process.nextTick(Tv,t):(t._writableState.errorEmitted=!0,process.nextTick(TF,t,s)):process.nextTick(TF,t,s):e?(process.nextTick(Tv,t),e(s)):process.nextTick(Tv,t)}),this)}function TF(r,e){G2(r,e),Tv(r)}function Tv(r){r._writableState&&!r._writableState.emitClose||r._readableState&&!r._readableState.emitClose||r.emit("close")}function tme(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)}function G2(r,e){r.emit("error",e)}function rme(r,e){var t=r._readableState,n=r._writableState;t&&t.autoDestroy||n&&n.autoDestroy?r.destroy(e):r.emit("error",e)}AF.exports={destroy:eme,undestroy:tme,errorOrDestroy:rme}});var Xa=E((CRe,PF)=>{"use strict";var kF={};function rs(r,e,t){t||(t=Error);function n(s,o,a){return typeof e=="string"?e:e(s,o,a)}class i extends t{constructor(o,a,u){super(n(o,a,u))}}i.prototype.name=t.name,i.prototype.code=r,kF[r]=i}function MF(r,e){if(Array.isArray(r)){let t=r.length;return r=r.map(n=>String(n)),t>2?`one of ${e} ${r.slice(0,t-1).join(", ")}, or `+r[t-1]:t===2?`one of ${e} ${r[0]} or ${r[1]}`:`of ${e} ${r[0]}`}else return`of ${e} ${String(r)}`}function nme(r,e,t){return r.substr(!t||t<0?0:+t,e.length)===e}function ime(r,e,t){return(t===void 0||t>r.length)&&(t=r.length),r.substring(t-e.length,t)===e}function sme(r,e,t){return typeof t!="number"&&(t=0),t+e.length>r.length?!1:r.indexOf(e,t)!==-1}rs("ERR_INVALID_OPT_VALUE",function(r,e){return'The value "'+e+'" is invalid for option "'+r+'"'},TypeError);rs("ERR_INVALID_ARG_TYPE",function(r,e,t){let n;typeof e=="string"&&nme(e,"not ")?(n="must not be",e=e.replace(/^not /,"")):n="must be";let i;if(ime(r," argument"))i=`The ${r} ${n} ${MF(e,"type")}`;else{let s=sme(r,".")?"property":"argument";i=`The "${r}" ${s} ${n} ${MF(e,"type")}`}return i+=`. Received type ${typeof t}`,i},TypeError);rs("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF");rs("ERR_METHOD_NOT_IMPLEMENTED",function(r){return"The "+r+" method is not implemented"});rs("ERR_STREAM_PREMATURE_CLOSE","Premature close");rs("ERR_STREAM_DESTROYED",function(r){return"Cannot call "+r+" after a stream was destroyed"});rs("ERR_MULTIPLE_CALLBACK","Callback called multiple times");rs("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable");rs("ERR_STREAM_WRITE_AFTER_END","write after end");rs("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError);rs("ERR_UNKNOWN_ENCODING",function(r){return"Unknown encoding: "+r},TypeError);rs("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event");PF.exports.codes=kF});var W2=E((TRe,RF)=>{"use strict";var ome=Xa().codes.ERR_INVALID_OPT_VALUE;function ame(r,e,t){return r.highWaterMark!=null?r.highWaterMark:e?r[t]:null}function lme(r,e,t,n){var i=ame(e,n,t);if(i!=null){if(!(isFinite(i)&&Math.floor(i)===i)||i<0){var s=n?t:"highWaterMark";throw new ome(s,i)}return Math.floor(i)}return r.objectMode?16:16*1024}RF.exports={getHighWaterMark:lme}});var jF=E((ARe,NF)=>{"use strict";function LF(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(r,i).enumerable})),t.push.apply(t,n)}return t}function ume(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?LF(Object(t),!0).forEach(function(n){cme(r,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):LF(Object(t)).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(t,n))})}return r}function cme(r,e,t){return e in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}function fme(r,e){if(!(r instanceof e))throw new TypeError("Cannot call a class as a function")}function DF(r,e){for(var t=0;t<e.length;t++){var n=e[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(r,n.key,n)}}function dme(r,e,t){return e&&DF(r.prototype,e),t&&DF(r,t),r}var hme=require("buffer"),Av=hme.Buffer,pme=require("util"),z2=pme.inspect,mme=z2&&z2.custom||"inspect";function gme(r,e,t){Av.prototype.copy.call(r,e,t)}NF.exports=function(){function r(){fme(this,r),this.head=null,this.tail=null,this.length=0}return dme(r,[{key:"push",value:function(t){var n={data:t,next:null};this.length>0?this.tail.next=n:this.head=n,this.tail=n,++this.length}},{key:"unshift",value:function(t){var n={data:t,next:this.head};this.length===0&&(this.tail=n),this.head=n,++this.length}},{key:"shift",value:function(){if(this.length!==0){var t=this.head.data;return this.length===1?this.head=this.tail=null:this.head=this.head.next,--this.length,t}}},{key:"clear",value:function(){this.head=this.tail=null,this.length=0}},{key:"join",value:function(t){if(this.length===0)return"";for(var n=this.head,i=""+n.data;n=n.next;)i+=t+n.data;return i}},{key:"concat",value:function(t){if(this.length===0)return Av.alloc(0);for(var n=Av.allocUnsafe(t>>>0),i=this.head,s=0;i;)gme(i.data,n,s),s+=i.data.length,i=i.next;return n}},{key:"consume",value:function(t,n){var i;return t<this.head.data.length?(i=this.head.data.slice(0,t),this.head.data=this.head.data.slice(t)):t===this.head.data.length?i=this.shift():i=n?this._getString(t):this._getBuffer(t),i}},{key:"first",value:function(){return this.head.data}},{key:"_getString",value:function(t){var n=this.head,i=1,s=n.data;for(t-=s.length;n=n.next;){var o=n.data,a=t>o.length?o.length:t;if(a===o.length?s+=o:s+=o.slice(0,t),t-=a,t===0){a===o.length?(++i,n.next?this.head=n.next:this.head=this.tail=null):(this.head=n,n.data=o.slice(a));break}++i}return this.length-=i,s}},{key:"_getBuffer",value:function(t){var n=Av.allocUnsafe(t),i=this.head,s=1;for(i.data.copy(n),t-=i.data.length;i=i.next;){var o=i.data,a=t>o.length?o.length:t;if(o.copy(n,n.length-t,0,a),t-=a,t===0){a===o.length?(++s,i.next?this.head=i.next:this.head=this.tail=null):(this.head=i,i.data=o.slice(a));break}++s}return this.length-=s,n}},{key:mme,value:function(t,n){return z2(this,ume({},n,{depth:0,customInspect:!1}))}}]),r}()});var zu=E((H2,qF)=>{var Mv=require("buffer"),to=Mv.Buffer;function KF(r,e){for(var t in r)e[t]=r[t]}to.from&&to.alloc&&to.allocUnsafe&&to.allocUnsafeSlow?qF.exports=Mv:(KF(Mv,H2),H2.Buffer=Wu);function Wu(r,e,t){return to(r,e,t)}Wu.prototype=Object.create(to.prototype);KF(to,Wu);Wu.from=function(r,e,t){if(typeof r=="number")throw new TypeError("Argument must not be a number");return to(r,e,t)};Wu.alloc=function(r,e,t){if(typeof r!="number")throw new TypeError("Argument must be a number");var n=to(r);return e!==void 0?typeof t=="string"?n.fill(e,t):n.fill(e):n.fill(0),n};Wu.allocUnsafe=function(r){if(typeof r!="number")throw new TypeError("Argument must be a number");return to(r)};Wu.allocUnsafeSlow=function(r){if(typeof r!="number")throw new TypeError("Argument must be a number");return Mv.SlowBuffer(r)}});var Q2=E(VF=>{"use strict";var J2=zu().Buffer,FF=J2.isEncoding||function(r){switch(r=""+r,r&&r.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function yme(r){if(!r)return"utf8";for(var e;;)switch(r){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return r;default:if(e)return;r=(""+r).toLowerCase(),e=!0}}function vme(r){var e=yme(r);if(typeof e!="string"&&(J2.isEncoding===FF||!FF(r)))throw new Error("Unknown encoding: "+r);return e||r}VF.StringDecoder=dp;function dp(r){this.encoding=vme(r);var e;switch(this.encoding){case"utf16le":this.text=Eme,this.end=Ome,e=4;break;case"utf8":this.fillLast=Sme,e=4;break;case"base64":this.text=Ime,this.end=Cme,e=3;break;default:this.write=Tme,this.end=Ame;return}this.lastNeed=0,this.lastTotal=0,this.lastChar=J2.allocUnsafe(e)}dp.prototype.write=function(r){if(r.length===0)return"";var e,t;if(this.lastNeed){if(e=this.fillLast(r),e===void 0)return"";t=this.lastNeed,this.lastNeed=0}else t=0;return t<r.length?e?e+this.text(r,t):this.text(r,t):e||""};dp.prototype.end=xme;dp.prototype.text=_me;dp.prototype.fillLast=function(r){if(this.lastNeed<=r.length)return r.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);r.copy(this.lastChar,this.lastTotal-this.lastNeed,0,r.length),this.lastNeed-=r.length};function Y2(r){return r<=127?0:r>>5===6?2:r>>4===14?3:r>>3===30?4:r>>6===2?-1:-2}function wme(r,e,t){var n=e.length-1;if(n<t)return 0;var i=Y2(e[n]);return i>=0?(i>0&&(r.lastNeed=i-1),i):--n<t||i===-2?0:(i=Y2(e[n]),i>=0?(i>0&&(r.lastNeed=i-2),i):--n<t||i===-2?0:(i=Y2(e[n]),i>=0?(i>0&&(i===2?i=0:r.lastNeed=i-3),i):0))}function bme(r,e,t){if((e[0]&192)!==128)return r.lastNeed=0,"\uFFFD";if(r.lastNeed>1&&e.length>1){if((e[1]&192)!==128)return r.lastNeed=1,"\uFFFD";if(r.lastNeed>2&&e.length>2&&(e[2]&192)!==128)return r.lastNeed=2,"\uFFFD"}}function Sme(r){var e=this.lastTotal-this.lastNeed,t=bme(this,r,e);if(t!==void 0)return t;if(this.lastNeed<=r.length)return r.copy(this.lastChar,e,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);r.copy(this.lastChar,e,0,r.length),this.lastNeed-=r.length}function _me(r,e){var t=wme(this,r,e);if(!this.lastNeed)return r.toString("utf8",e);this.lastTotal=t;var n=r.length-(t-this.lastNeed);return r.copy(this.lastChar,0,n),r.toString("utf8",e,n)}function xme(r){var e=r&&r.length?this.write(r):"";return this.lastNeed?e+"\uFFFD":e}function Eme(r,e){if((r.length-e)%2===0){var t=r.toString("utf16le",e);if(t){var n=t.charCodeAt(t.length-1);if(n>=55296&&n<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=r[r.length-2],this.lastChar[1]=r[r.length-1],t.slice(0,-1)}return t}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=r[r.length-1],r.toString("utf16le",e,r.length-1)}function Ome(r){var e=r&&r.length?this.write(r):"";if(this.lastNeed){var t=this.lastTotal-this.lastNeed;return e+this.lastChar.toString("utf16le",0,t)}return e}function Ime(r,e){var t=(r.length-e)%3;return t===0?r.toString("base64",e):(this.lastNeed=3-t,this.lastTotal=3,t===1?this.lastChar[0]=r[r.length-1]:(this.lastChar[0]=r[r.length-2],this.lastChar[1]=r[r.length-1]),r.toString("base64",e,r.length-t))}function Cme(r){var e=r&&r.length?this.write(r):"";return this.lastNeed?e+this.lastChar.toString("base64",0,3-this.lastNeed):e}function Tme(r){return r.toString(this.encoding)}function Ame(r){return r&&r.length?this.write(r):""}});var kv=E((kRe,GF)=>{"use strict";var BF=Xa().codes.ERR_STREAM_PREMATURE_CLOSE;function Mme(r){var e=!1;return function(){if(!e){e=!0;for(var t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];r.apply(this,n)}}}function kme(){}function Pme(r){return r.setHeader&&typeof r.abort=="function"}function UF(r,e,t){if(typeof e=="function")return UF(r,null,e);e||(e={}),t=Mme(t||kme);var n=e.readable||e.readable!==!1&&r.readable,i=e.writable||e.writable!==!1&&r.writable,s=function(){r.writable||a()},o=r._writableState&&r._writableState.finished,a=function(){i=!1,o=!0,n||t.call(r)},u=r._readableState&&r._readableState.endEmitted,c=function(){n=!1,u=!0,i||t.call(r)},d=function(y){t.call(r,y)},h=function(){var y;if(n&&!u)return(!r._readableState||!r._readableState.ended)&&(y=new BF),t.call(r,y);if(i&&!o)return(!r._writableState||!r._writableState.ended)&&(y=new BF),t.call(r,y)},p=function(){r.req.on("finish",a)};return Pme(r)?(r.on("complete",a),r.on("abort",h),r.req?p():r.on("request",p)):i&&!r._writableState&&(r.on("end",s),r.on("close",s)),r.on("end",c),r.on("finish",a),e.error!==!1&&r.on("error",d),r.on("close",h),function(){r.removeListener("complete",a),r.removeListener("abort",h),r.removeListener("request",p),r.req&&r.req.removeListener("finish",a),r.removeListener("end",s),r.removeListener("close",s),r.removeListener("finish",a),r.removeListener("end",c),r.removeListener("error",d),r.removeListener("close",h)}}GF.exports=UF});var WF=E((PRe,$F)=>{"use strict";var Pv;function el(r,e,t){return e in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}var Rme=kv(),tl=Symbol("lastResolve"),Hu=Symbol("lastReject"),hp=Symbol("error"),Rv=Symbol("ended"),Yu=Symbol("lastPromise"),Z2=Symbol("handlePromise"),Ju=Symbol("stream");function rl(r,e){return{value:r,done:e}}function Lme(r){var e=r[tl];if(e!==null){var t=r[Ju].read();t!==null&&(r[Yu]=null,r[tl]=null,r[Hu]=null,e(rl(t,!1)))}}function Dme(r){process.nextTick(Lme,r)}function Nme(r,e){return function(t,n){r.then(function(){if(e[Rv]){t(rl(void 0,!0));return}e[Z2](t,n)},n)}}var jme=Object.getPrototypeOf(function(){}),Kme=Object.setPrototypeOf((Pv={get stream(){return this[Ju]},next:function(){var e=this,t=this[hp];if(t!==null)return Promise.reject(t);if(this[Rv])return Promise.resolve(rl(void 0,!0));if(this[Ju].destroyed)return new Promise(function(o,a){process.nextTick(function(){e[hp]?a(e[hp]):o(rl(void 0,!0))})});var n=this[Yu],i;if(n)i=new Promise(Nme(n,this));else{var s=this[Ju].read();if(s!==null)return Promise.resolve(rl(s,!1));i=new Promise(this[Z2])}return this[Yu]=i,i}},el(Pv,Symbol.asyncIterator,function(){return this}),el(Pv,"return",function(){var e=this;return new Promise(function(t,n){e[Ju].destroy(null,function(i){if(i){n(i);return}t(rl(void 0,!0))})})}),Pv),jme),qme=function(e){var t,n=Object.create(Kme,(t={},el(t,Ju,{value:e,writable:!0}),el(t,tl,{value:null,writable:!0}),el(t,Hu,{value:null,writable:!0}),el(t,hp,{value:null,writable:!0}),el(t,Rv,{value:e._readableState.endEmitted,writable:!0}),el(t,Z2,{value:function(s,o){var a=n[Ju].read();a?(n[Yu]=null,n[tl]=null,n[Hu]=null,s(rl(a,!1))):(n[tl]=s,n[Hu]=o)},writable:!0}),t));return n[Yu]=null,Rme(e,function(i){if(i&&i.code!=="ERR_STREAM_PREMATURE_CLOSE"){var s=n[Hu];s!==null&&(n[Yu]=null,n[tl]=null,n[Hu]=null,s(i)),n[hp]=i;return}var o=n[tl];o!==null&&(n[Yu]=null,n[tl]=null,n[Hu]=null,o(rl(void 0,!0))),n[Rv]=!0}),e.on("readable",Dme.bind(null,n)),n};$F.exports=qme});var JF=E((RRe,YF)=>{"use strict";function zF(r,e,t,n,i,s,o){try{var a=r[s](o),u=a.value}catch(c){t(c);return}a.done?e(u):Promise.resolve(u).then(n,i)}function Fme(r){return function(){var e=this,t=arguments;return new Promise(function(n,i){var s=r.apply(e,t);function o(u){zF(s,n,i,o,a,"next",u)}function a(u){zF(s,n,i,o,a,"throw",u)}o(void 0)})}}function HF(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(r,i).enumerable})),t.push.apply(t,n)}return t}function Vme(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?HF(Object(t),!0).forEach(function(n){Bme(r,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):HF(Object(t)).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(t,n))})}return r}function Bme(r,e,t){return e in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}var Ume=Xa().codes.ERR_INVALID_ARG_TYPE;function Gme(r,e,t){var n;if(e&&typeof e.next=="function")n=e;else if(e&&e[Symbol.asyncIterator])n=e[Symbol.asyncIterator]();else if(e&&e[Symbol.iterator])n=e[Symbol.iterator]();else throw new Ume("iterable",["Iterable"],e);var i=new r(Vme({objectMode:!0},t)),s=!1;i._read=function(){s||(s=!0,o())};function o(){return a.apply(this,arguments)}function a(){return a=Fme(function*(){try{var u=yield n.next(),c=u.value,d=u.done;d?i.push(null):i.push(yield c)?o():s=!1}catch(h){i.destroy(h)}}),a.apply(this,arguments)}return i}YF.exports=Gme});var lO=E((DRe,o6)=>{"use strict";o6.exports=wt;var Df;wt.ReadableState=e6;var LRe=require("events").EventEmitter,XF=function(e,t){return e.listeners(t).length},mp=U2(),Lv=require("buffer").Buffer,$me=global.Uint8Array||function(){};function Wme(r){return Lv.from(r)}function zme(r){return Lv.isBuffer(r)||r instanceof $me}var X2=require("util"),it;X2&&X2.debuglog?it=X2.debuglog("stream"):it=function(){};var Hme=jF(),oO=$2(),Yme=W2(),Jme=Yme.getHighWaterMark,Dv=Xa().codes,Qme=Dv.ERR_INVALID_ARG_TYPE,Zme=Dv.ERR_STREAM_PUSH_AFTER_EOF,Xme=Dv.ERR_METHOD_NOT_IMPLEMENTED,e0e=Dv.ERR_STREAM_UNSHIFT_AFTER_END_EVENT,Nf,eO,tO;ni()(wt,mp);var pp=oO.errorOrDestroy,rO=["error","close","destroy","pause","resume"];function t0e(r,e,t){if(typeof r.prependListener=="function")return r.prependListener(e,t);!r._events||!r._events[e]?r.on(e,t):Array.isArray(r._events[e])?r._events[e].unshift(t):r._events[e]=[t,r._events[e]]}function e6(r,e,t){Df=Df||Qu(),r=r||{},typeof t!="boolean"&&(t=e instanceof Df),this.objectMode=!!r.objectMode,t&&(this.objectMode=this.objectMode||!!r.readableObjectMode),this.highWaterMark=Jme(this,r,"readableHighWaterMark",t),this.buffer=new Hme,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.paused=!0,this.emitClose=r.emitClose!==!1,this.autoDestroy=!!r.autoDestroy,this.destroyed=!1,this.defaultEncoding=r.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,r.encoding&&(Nf||(Nf=Q2().StringDecoder),this.decoder=new Nf(r.encoding),this.encoding=r.encoding)}function wt(r){if(Df=Df||Qu(),!(this instanceof wt))return new wt(r);var e=this instanceof Df;this._readableState=new e6(r,this,e),this.readable=!0,r&&(typeof r.read=="function"&&(this._read=r.read),typeof r.destroy=="function"&&(this._destroy=r.destroy)),mp.call(this)}Object.defineProperty(wt.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState===void 0?!1:this._readableState.destroyed},set:function(e){this._readableState&&(this._readableState.destroyed=e)}});wt.prototype.destroy=oO.destroy;wt.prototype._undestroy=oO.undestroy;wt.prototype._destroy=function(r,e){e(r)};wt.prototype.push=function(r,e){var t=this._readableState,n;return t.objectMode?n=!0:typeof r=="string"&&(e=e||t.defaultEncoding,e!==t.encoding&&(r=Lv.from(r,e),e=""),n=!0),t6(this,r,e,!1,n)};wt.prototype.unshift=function(r){return t6(this,r,null,!0,!1)};function t6(r,e,t,n,i){it("readableAddChunk",e);var s=r._readableState;if(e===null)s.reading=!1,i0e(r,s);else{var o;if(i||(o=r0e(s,e)),o)pp(r,o);else if(s.objectMode||e&&e.length>0)if(typeof e!="string"&&!s.objectMode&&Object.getPrototypeOf(e)!==Lv.prototype&&(e=Wme(e)),n)s.endEmitted?pp(r,new e0e):nO(r,s,e,!0);else if(s.ended)pp(r,new Zme);else{if(s.destroyed)return!1;s.reading=!1,s.decoder&&!t?(e=s.decoder.write(e),s.objectMode||e.length!==0?nO(r,s,e,!1):sO(r,s)):nO(r,s,e,!1)}else n||(s.reading=!1,sO(r,s))}return!s.ended&&(s.length<s.highWaterMark||s.length===0)}function nO(r,e,t,n){e.flowing&&e.length===0&&!e.sync?(e.awaitDrain=0,r.emit("data",t)):(e.length+=e.objectMode?1:t.length,n?e.buffer.unshift(t):e.buffer.push(t),e.needReadable&&Nv(r)),sO(r,e)}function r0e(r,e){var t;return!zme(e)&&typeof e!="string"&&e!==void 0&&!r.objectMode&&(t=new Qme("chunk",["string","Buffer","Uint8Array"],e)),t}wt.prototype.isPaused=function(){return this._readableState.flowing===!1};wt.prototype.setEncoding=function(r){Nf||(Nf=Q2().StringDecoder);var e=new Nf(r);this._readableState.decoder=e,this._readableState.encoding=this._readableState.decoder.encoding;for(var t=this._readableState.buffer.head,n="";t!==null;)n+=e.write(t.data),t=t.next;return this._readableState.buffer.clear(),n!==""&&this._readableState.buffer.push(n),this._readableState.length=n.length,this};var QF=1073741824;function n0e(r){return r>=QF?r=QF:(r--,r|=r>>>1,r|=r>>>2,r|=r>>>4,r|=r>>>8,r|=r>>>16,r++),r}function ZF(r,e){return r<=0||e.length===0&&e.ended?0:e.objectMode?1:r!==r?e.flowing&&e.length?e.buffer.head.data.length:e.length:(r>e.highWaterMark&&(e.highWaterMark=n0e(r)),r<=e.length?r:e.ended?e.length:(e.needReadable=!0,0))}wt.prototype.read=function(r){it("read",r),r=parseInt(r,10);var e=this._readableState,t=r;if(r!==0&&(e.emittedReadable=!1),r===0&&e.needReadable&&((e.highWaterMark!==0?e.length>=e.highWaterMark:e.length>0)||e.ended))return it("read: emitReadable",e.length,e.ended),e.length===0&&e.ended?iO(this):Nv(this),null;if(r=ZF(r,e),r===0&&e.ended)return e.length===0&&iO(this),null;var n=e.needReadable;it("need readable",n),(e.length===0||e.length-r<e.highWaterMark)&&(n=!0,it("length less than watermark",n)),e.ended||e.reading?(n=!1,it("reading or ended",n)):n&&(it("do read"),e.reading=!0,e.sync=!0,e.length===0&&(e.needReadable=!0),this._read(e.highWaterMark),e.sync=!1,e.reading||(r=ZF(t,e)));var i;return r>0?i=i6(r,e):i=null,i===null?(e.needReadable=e.length<=e.highWaterMark,r=0):(e.length-=r,e.awaitDrain=0),e.length===0&&(e.ended||(e.needReadable=!0),t!==r&&e.ended&&iO(this)),i!==null&&this.emit("data",i),i};function i0e(r,e){if(it("onEofChunk"),!e.ended){if(e.decoder){var t=e.decoder.end();t&&t.length&&(e.buffer.push(t),e.length+=e.objectMode?1:t.length)}e.ended=!0,e.sync?Nv(r):(e.needReadable=!1,e.emittedReadable||(e.emittedReadable=!0,r6(r)))}}function Nv(r){var e=r._readableState;it("emitReadable",e.needReadable,e.emittedReadable),e.needReadable=!1,e.emittedReadable||(it("emitReadable",e.flowing),e.emittedReadable=!0,process.nextTick(r6,r))}function r6(r){var e=r._readableState;it("emitReadable_",e.destroyed,e.length,e.ended),!e.destroyed&&(e.length||e.ended)&&(r.emit("readable"),e.emittedReadable=!1),e.needReadable=!e.flowing&&!e.ended&&e.length<=e.highWaterMark,aO(r)}function sO(r,e){e.readingMore||(e.readingMore=!0,process.nextTick(s0e,r,e))}function s0e(r,e){for(;!e.reading&&!e.ended&&(e.length<e.highWaterMark||e.flowing&&e.length===0);){var t=e.length;if(it("maybeReadMore read 0"),r.read(0),t===e.length)break}e.readingMore=!1}wt.prototype._read=function(r){pp(this,new Xme("_read()"))};wt.prototype.pipe=function(r,e){var t=this,n=this._readableState;switch(n.pipesCount){case 0:n.pipes=r;break;case 1:n.pipes=[n.pipes,r];break;default:n.pipes.push(r);break}n.pipesCount+=1,it("pipe count=%d opts=%j",n.pipesCount,e);var i=(!e||e.end!==!1)&&r!==process.stdout&&r!==process.stderr,s=i?a:_;n.endEmitted?process.nextTick(s):t.once("end",s),r.on("unpipe",o);function o(O,x){it("onunpipe"),O===t&&x&&x.hasUnpiped===!1&&(x.hasUnpiped=!0,d())}function a(){it("onend"),r.end()}var u=o0e(t);r.on("drain",u);var c=!1;function d(){it("cleanup"),r.removeListener("close",m),r.removeListener("finish",y),r.removeListener("drain",u),r.removeListener("error",p),r.removeListener("unpipe",o),t.removeListener("end",a),t.removeListener("end",_),t.removeListener("data",h),c=!0,n.awaitDrain&&(!r._writableState||r._writableState.needDrain)&&u()}t.on("data",h);function h(O){it("ondata");var x=r.write(O);it("dest.write",x),x===!1&&((n.pipesCount===1&&n.pipes===r||n.pipesCount>1&&s6(n.pipes,r)!==-1)&&!c&&(it("false write response, pause",n.awaitDrain),n.awaitDrain++),t.pause())}function p(O){it("onerror",O),_(),r.removeListener("error",p),XF(r,"error")===0&&pp(r,O)}t0e(r,"error",p);function m(){r.removeListener("finish",y),_()}r.once("close",m);function y(){it("onfinish"),r.removeListener("close",m),_()}r.once("finish",y);function _(){it("unpipe"),t.unpipe(r)}return r.emit("pipe",t),n.flowing||(it("pipe resume"),t.resume()),r};function o0e(r){return function(){var t=r._readableState;it("pipeOnDrain",t.awaitDrain),t.awaitDrain&&t.awaitDrain--,t.awaitDrain===0&&XF(r,"data")&&(t.flowing=!0,aO(r))}}wt.prototype.unpipe=function(r){var e=this._readableState,t={hasUnpiped:!1};if(e.pipesCount===0)return this;if(e.pipesCount===1)return r&&r!==e.pipes?this:(r||(r=e.pipes),e.pipes=null,e.pipesCount=0,e.flowing=!1,r&&r.emit("unpipe",this,t),this);if(!r){var n=e.pipes,i=e.pipesCount;e.pipes=null,e.pipesCount=0,e.flowing=!1;for(var s=0;s<i;s++)n[s].emit("unpipe",this,{hasUnpiped:!1});return this}var o=s6(e.pipes,r);return o===-1?this:(e.pipes.splice(o,1),e.pipesCount-=1,e.pipesCount===1&&(e.pipes=e.pipes[0]),r.emit("unpipe",this,t),this)};wt.prototype.on=function(r,e){var t=mp.prototype.on.call(this,r,e),n=this._readableState;return r==="data"?(n.readableListening=this.listenerCount("readable")>0,n.flowing!==!1&&this.resume()):r==="readable"&&!n.endEmitted&&!n.readableListening&&(n.readableListening=n.needReadable=!0,n.flowing=!1,n.emittedReadable=!1,it("on readable",n.length,n.reading),n.length?Nv(this):n.reading||process.nextTick(a0e,this)),t};wt.prototype.addListener=wt.prototype.on;wt.prototype.removeListener=function(r,e){var t=mp.prototype.removeListener.call(this,r,e);return r==="readable"&&process.nextTick(n6,this),t};wt.prototype.removeAllListeners=function(r){var e=mp.prototype.removeAllListeners.apply(this,arguments);return(r==="readable"||r===void 0)&&process.nextTick(n6,this),e};function n6(r){var e=r._readableState;e.readableListening=r.listenerCount("readable")>0,e.resumeScheduled&&!e.paused?e.flowing=!0:r.listenerCount("data")>0&&r.resume()}function a0e(r){it("readable nexttick read 0"),r.read(0)}wt.prototype.resume=function(){var r=this._readableState;return r.flowing||(it("resume"),r.flowing=!r.readableListening,l0e(this,r)),r.paused=!1,this};function l0e(r,e){e.resumeScheduled||(e.resumeScheduled=!0,process.nextTick(u0e,r,e))}function u0e(r,e){it("resume",e.reading),e.reading||r.read(0),e.resumeScheduled=!1,r.emit("resume"),aO(r),e.flowing&&!e.reading&&r.read(0)}wt.prototype.pause=function(){return it("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(it("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState.paused=!0,this};function aO(r){var e=r._readableState;for(it("flow",e.flowing);e.flowing&&r.read()!==null;);}wt.prototype.wrap=function(r){var e=this,t=this._readableState,n=!1;r.on("end",function(){if(it("wrapped end"),t.decoder&&!t.ended){var o=t.decoder.end();o&&o.length&&e.push(o)}e.push(null)}),r.on("data",function(o){if(it("wrapped data"),t.decoder&&(o=t.decoder.write(o)),!(t.objectMode&&o==null)&&!(!t.objectMode&&(!o||!o.length))){var a=e.push(o);a||(n=!0,r.pause())}});for(var i in r)this[i]===void 0&&typeof r[i]=="function"&&(this[i]=function(a){return function(){return r[a].apply(r,arguments)}}(i));for(var s=0;s<rO.length;s++)r.on(rO[s],this.emit.bind(this,rO[s]));return this._read=function(o){it("wrapped _read",o),n&&(n=!1,r.resume())},this};typeof Symbol=="function"&&(wt.prototype[Symbol.asyncIterator]=function(){return eO===void 0&&(eO=WF()),eO(this)});Object.defineProperty(wt.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}});Object.defineProperty(wt.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}});Object.defineProperty(wt.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function(e){this._readableState&&(this._readableState.flowing=e)}});wt._fromList=i6;Object.defineProperty(wt.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}});function i6(r,e){if(e.length===0)return null;var t;return e.objectMode?t=e.buffer.shift():!r||r>=e.length?(e.decoder?t=e.buffer.join(""):e.buffer.length===1?t=e.buffer.first():t=e.buffer.concat(e.length),e.buffer.clear()):t=e.buffer.consume(r,e.decoder),t}function iO(r){var e=r._readableState;it("endReadable",e.endEmitted),e.endEmitted||(e.ended=!0,process.nextTick(c0e,e,r))}function c0e(r,e){if(it("endReadableNT",r.endEmitted,r.length),!r.endEmitted&&r.length===0&&(r.endEmitted=!0,e.readable=!1,e.emit("end"),r.autoDestroy)){var t=e._writableState;(!t||t.autoDestroy&&t.finished)&&e.destroy()}}typeof Symbol=="function"&&(wt.from=function(r,e){return tO===void 0&&(tO=JF()),tO(wt,r,e)});function s6(r,e){for(var t=0,n=r.length;t<n;t++)if(r[t]===e)return t;return-1}});var Qu=E((NRe,l6)=>{"use strict";var f0e=Object.keys||function(r){var e=[];for(var t in r)e.push(t);return e};l6.exports=ro;var a6=lO(),cO=qv();ni()(ro,a6);for(uO=f0e(cO.prototype),jv=0;jv<uO.length;jv++)Kv=uO[jv],ro.prototype[Kv]||(ro.prototype[Kv]=cO.prototype[Kv]);var uO,Kv,jv;function ro(r){if(!(this instanceof ro))return new ro(r);a6.call(this,r),cO.call(this,r),this.allowHalfOpen=!0,r&&(r.readable===!1&&(this.readable=!1),r.writable===!1&&(this.writable=!1),r.allowHalfOpen===!1&&(this.allowHalfOpen=!1,this.once("end",d0e)))}Object.defineProperty(ro.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}});Object.defineProperty(ro.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}});Object.defineProperty(ro.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}});function d0e(){this._writableState.ended||process.nextTick(h0e,this)}function h0e(r){r.end()}Object.defineProperty(ro.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState===void 0||this._writableState===void 0?!1:this._readableState.destroyed&&this._writableState.destroyed},set:function(e){this._readableState===void 0||this._writableState===void 0||(this._readableState.destroyed=e,this._writableState.destroyed=e)}})});var qv=E((jRe,p6)=>{"use strict";p6.exports=Dr;function c6(r){var e=this;this.next=null,this.entry=null,this.finish=function(){F0e(e,r)}}var jf;Dr.WritableState=yp;var p0e={deprecate:IF()},f6=U2(),Vv=require("buffer").Buffer,m0e=global.Uint8Array||function(){};function g0e(r){return Vv.from(r)}function y0e(r){return Vv.isBuffer(r)||r instanceof m0e}var dO=$2(),v0e=W2(),w0e=v0e.getHighWaterMark,nl=Xa().codes,b0e=nl.ERR_INVALID_ARG_TYPE,S0e=nl.ERR_METHOD_NOT_IMPLEMENTED,_0e=nl.ERR_MULTIPLE_CALLBACK,x0e=nl.ERR_STREAM_CANNOT_PIPE,E0e=nl.ERR_STREAM_DESTROYED,O0e=nl.ERR_STREAM_NULL_VALUES,I0e=nl.ERR_STREAM_WRITE_AFTER_END,C0e=nl.ERR_UNKNOWN_ENCODING,Kf=dO.errorOrDestroy;ni()(Dr,f6);function T0e(){}function yp(r,e,t){jf=jf||Qu(),r=r||{},typeof t!="boolean"&&(t=e instanceof jf),this.objectMode=!!r.objectMode,t&&(this.objectMode=this.objectMode||!!r.writableObjectMode),this.highWaterMark=w0e(this,r,"writableHighWaterMark",t),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var n=r.decodeStrings===!1;this.decodeStrings=!n,this.defaultEncoding=r.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(i){D0e(e,i)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=r.emitClose!==!1,this.autoDestroy=!!r.autoDestroy,this.bufferedRequestCount=0,this.corkedRequestsFree=new c6(this)}yp.prototype.getBuffer=function(){for(var e=this.bufferedRequest,t=[];e;)t.push(e),e=e.next;return t};(function(){try{Object.defineProperty(yp.prototype,"buffer",{get:p0e.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch{}})();var Fv;typeof Symbol=="function"&&Symbol.hasInstance&&typeof Function.prototype[Symbol.hasInstance]=="function"?(Fv=Function.prototype[Symbol.hasInstance],Object.defineProperty(Dr,Symbol.hasInstance,{value:function(e){return Fv.call(this,e)?!0:this!==Dr?!1:e&&e._writableState instanceof yp}})):Fv=function(e){return e instanceof this};function Dr(r){jf=jf||Qu();var e=this instanceof jf;if(!e&&!Fv.call(Dr,this))return new Dr(r);this._writableState=new yp(r,this,e),this.writable=!0,r&&(typeof r.write=="function"&&(this._write=r.write),typeof r.writev=="function"&&(this._writev=r.writev),typeof r.destroy=="function"&&(this._destroy=r.destroy),typeof r.final=="function"&&(this._final=r.final)),f6.call(this)}Dr.prototype.pipe=function(){Kf(this,new x0e)};function A0e(r,e){var t=new I0e;Kf(r,t),process.nextTick(e,t)}function M0e(r,e,t,n){var i;return t===null?i=new O0e:typeof t!="string"&&!e.objectMode&&(i=new b0e("chunk",["string","Buffer"],t)),i?(Kf(r,i),process.nextTick(n,i),!1):!0}Dr.prototype.write=function(r,e,t){var n=this._writableState,i=!1,s=!n.objectMode&&y0e(r);return s&&!Vv.isBuffer(r)&&(r=g0e(r)),typeof e=="function"&&(t=e,e=null),s?e="buffer":e||(e=n.defaultEncoding),typeof t!="function"&&(t=T0e),n.ending?A0e(this,t):(s||M0e(this,n,r,t))&&(n.pendingcb++,i=P0e(this,n,s,r,e,t)),i};Dr.prototype.cork=function(){this._writableState.corked++};Dr.prototype.uncork=function(){var r=this._writableState;r.corked&&(r.corked--,!r.writing&&!r.corked&&!r.bufferProcessing&&r.bufferedRequest&&d6(this,r))};Dr.prototype.setDefaultEncoding=function(e){if(typeof e=="string"&&(e=e.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((e+"").toLowerCase())>-1))throw new C0e(e);return this._writableState.defaultEncoding=e,this};Object.defineProperty(Dr.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}});function k0e(r,e,t){return!r.objectMode&&r.decodeStrings!==!1&&typeof e=="string"&&(e=Vv.from(e,t)),e}Object.defineProperty(Dr.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}});function P0e(r,e,t,n,i,s){if(!t){var o=k0e(e,n,i);n!==o&&(t=!0,i="buffer",n=o)}var a=e.objectMode?1:n.length;e.length+=a;var u=e.length<e.highWaterMark;if(u||(e.needDrain=!0),e.writing||e.corked){var c=e.lastBufferedRequest;e.lastBufferedRequest={chunk:n,encoding:i,isBuf:t,callback:s,next:null},c?c.next=e.lastBufferedRequest:e.bufferedRequest=e.lastBufferedRequest,e.bufferedRequestCount+=1}else fO(r,e,!1,a,n,i,s);return u}function fO(r,e,t,n,i,s,o){e.writelen=n,e.writecb=o,e.writing=!0,e.sync=!0,e.destroyed?e.onwrite(new E0e("write")):t?r._writev(i,e.onwrite):r._write(i,s,e.onwrite),e.sync=!1}function R0e(r,e,t,n,i){--e.pendingcb,t?(process.nextTick(i,n),process.nextTick(gp,r,e),r._writableState.errorEmitted=!0,Kf(r,n)):(i(n),r._writableState.errorEmitted=!0,Kf(r,n),gp(r,e))}function L0e(r){r.writing=!1,r.writecb=null,r.length-=r.writelen,r.writelen=0}function D0e(r,e){var t=r._writableState,n=t.sync,i=t.writecb;if(typeof i!="function")throw new _0e;if(L0e(t),e)R0e(r,t,n,e,i);else{var s=h6(t)||r.destroyed;!s&&!t.corked&&!t.bufferProcessing&&t.bufferedRequest&&d6(r,t),n?process.nextTick(u6,r,t,s,i):u6(r,t,s,i)}}function u6(r,e,t,n){t||N0e(r,e),e.pendingcb--,n(),gp(r,e)}function N0e(r,e){e.length===0&&e.needDrain&&(e.needDrain=!1,r.emit("drain"))}function d6(r,e){e.bufferProcessing=!0;var t=e.bufferedRequest;if(r._writev&&t&&t.next){var n=e.bufferedRequestCount,i=new Array(n),s=e.corkedRequestsFree;s.entry=t;for(var o=0,a=!0;t;)i[o]=t,t.isBuf||(a=!1),t=t.next,o+=1;i.allBuffers=a,fO(r,e,!0,e.length,i,"",s.finish),e.pendingcb++,e.lastBufferedRequest=null,s.next?(e.corkedRequestsFree=s.next,s.next=null):e.corkedRequestsFree=new c6(e),e.bufferedRequestCount=0}else{for(;t;){var u=t.chunk,c=t.encoding,d=t.callback,h=e.objectMode?1:u.length;if(fO(r,e,!1,h,u,c,d),t=t.next,e.bufferedRequestCount--,e.writing)break}t===null&&(e.lastBufferedRequest=null)}e.bufferedRequest=t,e.bufferProcessing=!1}Dr.prototype._write=function(r,e,t){t(new S0e("_write()"))};Dr.prototype._writev=null;Dr.prototype.end=function(r,e,t){var n=this._writableState;return typeof r=="function"?(t=r,r=null,e=null):typeof e=="function"&&(t=e,e=null),r!=null&&this.write(r,e),n.corked&&(n.corked=1,this.uncork()),n.ending||q0e(this,n,t),this};Object.defineProperty(Dr.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}});function h6(r){return r.ending&&r.length===0&&r.bufferedRequest===null&&!r.finished&&!r.writing}function j0e(r,e){r._final(function(t){e.pendingcb--,t&&Kf(r,t),e.prefinished=!0,r.emit("prefinish"),gp(r,e)})}function K0e(r,e){!e.prefinished&&!e.finalCalled&&(typeof r._final=="function"&&!e.destroyed?(e.pendingcb++,e.finalCalled=!0,process.nextTick(j0e,r,e)):(e.prefinished=!0,r.emit("prefinish")))}function gp(r,e){var t=h6(e);if(t&&(K0e(r,e),e.pendingcb===0&&(e.finished=!0,r.emit("finish"),e.autoDestroy))){var n=r._readableState;(!n||n.autoDestroy&&n.endEmitted)&&r.destroy()}return t}function q0e(r,e,t){e.ending=!0,gp(r,e),t&&(e.finished?process.nextTick(t):r.once("finish",t)),e.ended=!0,r.writable=!1}function F0e(r,e,t){var n=r.entry;for(r.entry=null;n;){var i=n.callback;e.pendingcb--,i(t),n=n.next}e.corkedRequestsFree.next=r}Object.defineProperty(Dr.prototype,"destroyed",{enumerable:!1,get:function(){return this._writableState===void 0?!1:this._writableState.destroyed},set:function(e){this._writableState&&(this._writableState.destroyed=e)}});Dr.prototype.destroy=dO.destroy;Dr.prototype._undestroy=dO.undestroy;Dr.prototype._destroy=function(r,e){e(r)}});var pO=E((KRe,g6)=>{"use strict";var V0e=require("util"),{LEVEL:hO}=Wr(),m6=Zu(),vp=g6.exports=function(e={}){if(m6.call(this,e),!e.transport||typeof e.transport.log!="function")throw new Error("Invalid transport, must be an object with a log method.");this.transport=e.transport,this.level=this.level||e.transport.level,this.handleExceptions=this.handleExceptions||e.transport.handleExceptions,this._deprecated();function t(n){this.emit("error",n,this.transport)}this.transport.__winstonError||(this.transport.__winstonError=t.bind(this),this.transport.on("error",this.transport.__winstonError))};V0e.inherits(vp,m6);vp.prototype._write=function(e,t,n){if(this.silent||e.exception===!0&&!this.handleExceptions)return n(null);(!this.level||this.levels[this.level]>=this.levels[e[hO]])&&this.transport.log(e[hO],e.message,e,this._nop),n(null)};vp.prototype._writev=function(e,t){for(let n=0;n<e.length;n++)this._accept(e[n])&&(this.transport.log(e[n].chunk[hO],e[n].chunk.message,e[n].chunk,this._nop),e[n].callback());return t(null)};vp.prototype._deprecated=function(){console.error([`${this.transport.name} is a legacy winston transport. Consider upgrading: `,"- Upgrade docs: https://github.com/winstonjs/winston/blob/master/UPGRADE-3.0.md"].join(`
`))};vp.prototype.close=function(){this.transport.close&&this.transport.close(),this.transport.__winstonError&&(this.transport.removeListener("error",this.transport.__winstonError),this.transport.__winstonError=null)}});var Zu=E((qRe,mO)=>{"use strict";var B0e=require("util"),y6=qv(),{LEVEL:v6}=Wr(),wp=mO.exports=function(e={}){y6.call(this,{objectMode:!0,highWaterMark:e.highWaterMark}),this.format=e.format,this.level=e.level,this.handleExceptions=e.handleExceptions,this.handleRejections=e.handleRejections,this.silent=e.silent,e.log&&(this.log=e.log),e.logv&&(this.logv=e.logv),e.close&&(this.close=e.close),this.once("pipe",t=>{this.levels=t.levels,this.parent=t}),this.once("unpipe",t=>{t===this.parent&&(this.parent=null,this.close&&this.close())})};B0e.inherits(wp,y6);wp.prototype._write=function(e,t,n){if(this.silent||e.exception===!0&&!this.handleExceptions)return n(null);let i=this.level||this.parent&&this.parent.level;if(!i||this.levels[i]>=this.levels[e[v6]]){if(e&&!this.format)return this.log(e,n);let s,o;try{o=this.format.transform(Object.assign({},e),this.format.options)}catch(a){s=a}if(s||!o){if(n(),s)throw s;return}return this.log(o,n)}return this._writableState.sync=!1,n(null)};wp.prototype._writev=function(e,t){if(this.logv){let n=e.filter(this._accept,this);return n.length?this.logv(n,t):t(null)}for(let n=0;n<e.length;n++){if(!this._accept(e[n]))continue;if(e[n].chunk&&!this.format){this.log(e[n].chunk,e[n].callback);continue}let i,s;try{s=this.format.transform(Object.assign({},e[n].chunk),this.format.options)}catch(o){i=o}if(i||!s){if(e[n].callback(),i)throw t(null),i}else this.log(s,e[n].callback)}return t(null)};wp.prototype._accept=function(e){let t=e.chunk;if(this.silent)return!1;let n=this.level||this.parent&&this.parent.level;return!!((t.exception===!0||!n||this.levels[n]>=this.levels[t[v6]])&&(this.handleExceptions||t.exception!==!0))};wp.prototype._nop=function(){};mO.exports.LegacyTransportStream=pO()});var S6=E((VRe,b6)=>{"use strict";var U0e=require("os"),{LEVEL:w6,MESSAGE:qf}=Wr(),G0e=Zu();b6.exports=class extends G0e{constructor(e={}){super(e),this.name=e.name||"console",this.stderrLevels=this._stringArrayToSet(e.stderrLevels),this.consoleWarnLevels=this._stringArrayToSet(e.consoleWarnLevels),this.eol=typeof e.eol=="string"?e.eol:U0e.EOL,this.setMaxListeners(30)}log(e,t){if(setImmediate(()=>this.emit("logged",e)),this.stderrLevels[e[w6]]){console._stderr?console._stderr.write(`${e[qf]}${this.eol}`):console.error(e[qf]),t&&t();return}else if(this.consoleWarnLevels[e[w6]]){console._stderr?console._stderr.write(`${e[qf]}${this.eol}`):console.warn(e[qf]),t&&t();return}console._stdout?console._stdout.write(`${e[qf]}${this.eol}`):console.log(e[qf]),t&&t()}_stringArrayToSet(e,t){if(!e)return{};if(t=t||"Cannot make set from type other than Array of string elements",!Array.isArray(e))throw new Error(t);return e.reduce((n,i)=>{if(typeof i!="string")throw new Error(t);return n[i]=!0,n},{})}}});var Uv=E((Bv,_6)=>{"use strict";Object.defineProperty(Bv,"__esModule",{value:!0});Bv.default=$0e;function $0e(r){return r&&typeof r.length=="number"&&r.length>=0&&r.length%1===0}_6.exports=Bv.default});var E6=E((Gv,x6)=>{"use strict";Object.defineProperty(Gv,"__esModule",{value:!0});Gv.default=function(r){return function(...e){var t=e.pop();return r.call(this,e,t)}};x6.exports=Gv.default});var C6=E(il=>{"use strict";Object.defineProperty(il,"__esModule",{value:!0});il.fallback=O6;il.wrap=I6;var W0e=il.hasQueueMicrotask=typeof queueMicrotask=="function"&&queueMicrotask,z0e=il.hasSetImmediate=typeof setImmediate=="function"&&setImmediate,H0e=il.hasNextTick=typeof process=="object"&&typeof process.nextTick=="function";function O6(r){setTimeout(r,0)}function I6(r){return(e,...t)=>r(()=>e(...t))}var bp;W0e?bp=queueMicrotask:z0e?bp=setImmediate:H0e?bp=process.nextTick:bp=O6;il.default=I6(bp)});var P6=E(($v,k6)=>{"use strict";Object.defineProperty($v,"__esModule",{value:!0});$v.default=ege;var Y0e=E6(),J0e=M6(Y0e),Q0e=C6(),Z0e=M6(Q0e),X0e=Xu();function M6(r){return r&&r.__esModule?r:{default:r}}function ege(r){return(0,X0e.isAsync)(r)?function(...e){let t=e.pop(),n=r.apply(this,e);return T6(n,t)}:(0,J0e.default)(function(e,t){var n;try{n=r.apply(this,e)}catch(i){return t(i)}if(n&&typeof n.then=="function")return T6(n,t);t(null,n)})}function T6(r,e){return r.then(t=>{A6(e,null,t)},t=>{A6(e,t&&t.message?t:new Error(t))})}function A6(r,e,t){try{r(e,t)}catch(n){(0,Z0e.default)(i=>{throw i},n)}}k6.exports=$v.default});var Xu=E(Wo=>{"use strict";Object.defineProperty(Wo,"__esModule",{value:!0});Wo.isAsyncIterable=Wo.isAsyncGenerator=Wo.isAsync=void 0;var tge=P6(),rge=nge(tge);function nge(r){return r&&r.__esModule?r:{default:r}}function R6(r){return r[Symbol.toStringTag]==="AsyncFunction"}function ige(r){return r[Symbol.toStringTag]==="AsyncGenerator"}function sge(r){return typeof r[Symbol.asyncIterator]=="function"}function oge(r){if(typeof r!="function")throw new Error("expected a function");return R6(r)?(0,rge.default)(r):r}Wo.default=oge;Wo.isAsync=R6;Wo.isAsyncGenerator=ige;Wo.isAsyncIterable=sge});var Ff=E((Wv,L6)=>{"use strict";Object.defineProperty(Wv,"__esModule",{value:!0});Wv.default=age;function age(r,e=r.length){if(!e)throw new Error("arity is undefined");function t(...n){return typeof n[e-1]=="function"?r.apply(this,n):new Promise((i,s)=>{n[e-1]=(o,...a)=>{if(o)return s(o);i(a.length>1?a:a[0])},r.apply(this,n)})}return t}L6.exports=Wv.default});var N6=E((zv,D6)=>{"use strict";Object.defineProperty(zv,"__esModule",{value:!0});var lge=Uv(),uge=gO(lge),cge=Xu(),fge=gO(cge),dge=Ff(),hge=gO(dge);function gO(r){return r&&r.__esModule?r:{default:r}}zv.default=(0,hge.default)((r,e,t)=>{var n=(0,uge.default)(e)?[]:{};r(e,(i,s,o)=>{(0,fge.default)(i)((a,...u)=>{u.length<2&&([u]=u),n[s]=u,o(a)})},i=>t(i,n))},3);D6.exports=zv.default});var yO=E((Hv,j6)=>{"use strict";Object.defineProperty(Hv,"__esModule",{value:!0});Hv.default=pge;function pge(r){function e(...t){if(r!==null){var n=r;r=null,n.apply(this,t)}}return Object.assign(e,r),e}j6.exports=Hv.default});var q6=E((Yv,K6)=>{"use strict";Object.defineProperty(Yv,"__esModule",{value:!0});Yv.default=function(r){return r[Symbol.iterator]&&r[Symbol.iterator]()};K6.exports=Yv.default});var B6=E((Jv,V6)=>{"use strict";Object.defineProperty(Jv,"__esModule",{value:!0});Jv.default=_ge;var mge=Uv(),gge=F6(mge),yge=q6(),vge=F6(yge);function F6(r){return r&&r.__esModule?r:{default:r}}function wge(r){var e=-1,t=r.length;return function(){return++e<t?{value:r[e],key:e}:null}}function bge(r){var e=-1;return function(){var n=r.next();return n.done?null:(e++,{value:n.value,key:e})}}function Sge(r){var e=r?Object.keys(r):[],t=-1,n=e.length;return function i(){var s=e[++t];return s==="__proto__"?i():t<n?{value:r[s],key:s}:null}}function _ge(r){if((0,gge.default)(r))return wge(r);var e=(0,vge.default)(r);return e?bge(e):Sge(r)}V6.exports=Jv.default});var vO=E((Qv,U6)=>{"use strict";Object.defineProperty(Qv,"__esModule",{value:!0});Qv.default=xge;function xge(r){return function(...e){if(r===null)throw new Error("Callback was already called.");var t=r;r=null,t.apply(this,e)}}U6.exports=Qv.default});var Xv=E((Zv,G6)=>{"use strict";Object.defineProperty(Zv,"__esModule",{value:!0});var Ege={};Zv.default=Ege;G6.exports=Zv.default});var W6=E((e1,$6)=>{"use strict";Object.defineProperty(e1,"__esModule",{value:!0});e1.default=Tge;var Oge=Xv(),Ige=Cge(Oge);function Cge(r){return r&&r.__esModule?r:{default:r}}function Tge(r,e,t,n){let i=!1,s=!1,o=!1,a=0,u=0;function c(){a>=e||o||i||(o=!0,r.next().then(({value:p,done:m})=>{if(!(s||i)){if(o=!1,m){i=!0,a<=0&&n(null);return}a++,t(p,u,d),u++,c()}}).catch(h))}function d(p,m){if(a-=1,!s){if(p)return h(p);if(p===!1){i=!0,s=!0;return}if(m===Ige.default||i&&a<=0)return i=!0,n(null);c()}}function h(p){s||(o=!1,i=!0,n(p))}c()}$6.exports=e1.default});var J6=E((t1,Y6)=>{"use strict";Object.defineProperty(t1,"__esModule",{value:!0});var Age=yO(),Mge=Sp(Age),kge=B6(),Pge=Sp(kge),Rge=vO(),Lge=Sp(Rge),z6=Xu(),Dge=W6(),H6=Sp(Dge),Nge=Xv(),jge=Sp(Nge);function Sp(r){return r&&r.__esModule?r:{default:r}}t1.default=r=>(e,t,n)=>{if(n=(0,Mge.default)(n),r<=0)throw new RangeError("concurrency limit cannot be less than 1");if(!e)return n(null);if((0,z6.isAsyncGenerator)(e))return(0,H6.default)(e,r,t,n);if((0,z6.isAsyncIterable)(e))return(0,H6.default)(e[Symbol.asyncIterator](),r,t,n);var i=(0,Pge.default)(e),s=!1,o=!1,a=0,u=!1;function c(h,p){if(!o)if(a-=1,h)s=!0,n(h);else if(h===!1)s=!0,o=!0;else{if(p===jge.default||s&&a<=0)return s=!0,n(null);u||d()}}function d(){for(u=!0;a<r&&!s;){var h=i();if(h===null){s=!0,a<=0&&n(null);return}a+=1,t(h.value,h.key,(0,Lge.default)(c))}u=!1}d()};Y6.exports=t1.default});var bO=E((r1,Q6)=>{"use strict";Object.defineProperty(r1,"__esModule",{value:!0});var Kge=J6(),qge=wO(Kge),Fge=Xu(),Vge=wO(Fge),Bge=Ff(),Uge=wO(Bge);function wO(r){return r&&r.__esModule?r:{default:r}}function Gge(r,e,t,n){return(0,qge.default)(e)(r,(0,Vge.default)(t),n)}r1.default=(0,Uge.default)(Gge,4);Q6.exports=r1.default});var eV=E((n1,X6)=>{"use strict";Object.defineProperty(n1,"__esModule",{value:!0});var $ge=bO(),Wge=Z6($ge),zge=Ff(),Hge=Z6(zge);function Z6(r){return r&&r.__esModule?r:{default:r}}function Yge(r,e,t){return(0,Wge.default)(r,1,e,t)}n1.default=(0,Hge.default)(Yge,3);X6.exports=n1.default});var nV=E((i1,rV)=>{"use strict";Object.defineProperty(i1,"__esModule",{value:!0});i1.default=eye;var Jge=N6(),Qge=tV(Jge),Zge=eV(),Xge=tV(Zge);function tV(r){return r&&r.__esModule?r:{default:r}}function eye(r,e){return(0,Qge.default)(Xge.default,r,e)}rV.exports=i1.default});var SO=E((GRe,sV)=>{"use strict";sV.exports=zo;var s1=Xa().codes,tye=s1.ERR_METHOD_NOT_IMPLEMENTED,rye=s1.ERR_MULTIPLE_CALLBACK,nye=s1.ERR_TRANSFORM_ALREADY_TRANSFORMING,iye=s1.ERR_TRANSFORM_WITH_LENGTH_0,o1=Qu();ni()(zo,o1);function sye(r,e){var t=this._transformState;t.transforming=!1;var n=t.writecb;if(n===null)return this.emit("error",new rye);t.writechunk=null,t.writecb=null,e!=null&&this.push(e),n(r);var i=this._readableState;i.reading=!1,(i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}function zo(r){if(!(this instanceof zo))return new zo(r);o1.call(this,r),this._transformState={afterTransform:sye.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,r&&(typeof r.transform=="function"&&(this._transform=r.transform),typeof r.flush=="function"&&(this._flush=r.flush)),this.on("prefinish",oye)}function oye(){var r=this;typeof this._flush=="function"&&!this._readableState.destroyed?this._flush(function(e,t){iV(r,e,t)}):iV(this,null,null)}zo.prototype.push=function(r,e){return this._transformState.needTransform=!1,o1.prototype.push.call(this,r,e)};zo.prototype._transform=function(r,e,t){t(new tye("_transform()"))};zo.prototype._write=function(r,e,t){var n=this._transformState;if(n.writecb=t,n.writechunk=r,n.writeencoding=e,!n.transforming){var i=this._readableState;(n.needTransform||i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}};zo.prototype._read=function(r){var e=this._transformState;e.writechunk!==null&&!e.transforming?(e.transforming=!0,this._transform(e.writechunk,e.writeencoding,e.afterTransform)):e.needTransform=!0};zo.prototype._destroy=function(r,e){o1.prototype._destroy.call(this,r,function(t){e(t)})};function iV(r,e,t){if(e)return r.emit("error",e);if(t!=null&&r.push(t),r._writableState.length)throw new iye;if(r._transformState.transforming)throw new nye;return r.push(null)}});var lV=E(($Re,aV)=>{"use strict";aV.exports=_p;var oV=SO();ni()(_p,oV);function _p(r){if(!(this instanceof _p))return new _p(r);oV.call(this,r)}_p.prototype._transform=function(r,e,t){t(null,r)}});var hV=E((WRe,dV)=>{"use strict";var _O;function aye(r){var e=!1;return function(){e||(e=!0,r.apply(void 0,arguments))}}var fV=Xa().codes,lye=fV.ERR_MISSING_ARGS,uye=fV.ERR_STREAM_DESTROYED;function uV(r){if(r)throw r}function cye(r){return r.setHeader&&typeof r.abort=="function"}function fye(r,e,t,n){n=aye(n);var i=!1;r.on("close",function(){i=!0}),_O===void 0&&(_O=kv()),_O(r,{readable:e,writable:t},function(o){if(o)return n(o);i=!0,n()});var s=!1;return function(o){if(!i&&!s){if(s=!0,cye(r))return r.abort();if(typeof r.destroy=="function")return r.destroy();n(o||new uye("pipe"))}}}function cV(r){r()}function dye(r,e){return r.pipe(e)}function hye(r){return!r.length||typeof r[r.length-1]!="function"?uV:r.pop()}function pye(){for(var r=arguments.length,e=new Array(r),t=0;t<r;t++)e[t]=arguments[t];var n=hye(e);if(Array.isArray(e[0])&&(e=e[0]),e.length<2)throw new lye("streams");var i,s=e.map(function(o,a){var u=a<e.length-1,c=a>0;return fye(o,u,c,function(d){i||(i=d),d&&s.forEach(cV),!u&&(s.forEach(cV),n(i))})});return e.reduce(dye)}dV.exports=pye});var Vf=E((ns,Ep)=>{var xp=require("stream");process.env.READABLE_STREAM==="disable"&&xp?(Ep.exports=xp.Readable,Object.assign(Ep.exports,xp),Ep.exports.Stream=xp):(ns=Ep.exports=lO(),ns.Stream=xp||ns,ns.Readable=ns,ns.Writable=qv(),ns.Duplex=Qu(),ns.Transform=SO(),ns.PassThrough=lV(),ns.finished=kv(),ns.pipeline=hV())});var AO=E((zRe,mV)=>{var Bf=[],Op=[],xO=function(){};function OO(r){return~Bf.indexOf(r)?!1:(Bf.push(r),!0)}function IO(r){xO=r}function mye(r){for(var e=[],t=0;t<Bf.length;t++){if(Bf[t].async){e.push(Bf[t]);continue}if(Bf[t](r))return!0}return e.length?new Promise(function(i){Promise.all(e.map(function(o){return o(r)})).then(function(o){i(o.some(Boolean))})}):!1}function CO(r){return~Op.indexOf(r)?!1:(Op.push(r),!0)}function EO(){xO.apply(xO,arguments)}function pV(r){for(var e=0;e<Op.length;e++)r=Op[e].apply(Op[e],arguments);return r}function TO(r,e){var t=Object.prototype.hasOwnProperty;for(var n in e)t.call(e,n)&&(r[n]=e[n]);return r}function gye(r){return r.enabled=!1,r.modify=CO,r.set=IO,r.use=OO,TO(function(){return!1},r)}function yye(r){function e(){var t=Array.prototype.slice.call(arguments,0);return EO.call(EO,r,pV(t,r)),!0}return r.enabled=!0,r.modify=CO,r.set=IO,r.use=OO,TO(e,r)}mV.exports=function(e){return e.introduce=TO,e.enabled=mye,e.process=pV,e.modify=CO,e.write=EO,e.nope=gye,e.yep=yye,e.set=IO,e.use=OO,e}});var yV=E((HRe,gV)=>{var vye=AO(),wye=vye(function r(e,t){return t=t||{},t.namespace=e,t.prod=!0,t.dev=!1,t.force||r.force?r.yep(t):r.nope(t)});gV.exports=wye});var wV=E((YRe,vV)=>{"use strict";vV.exports={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]}});var SV=E((JRe,bV)=>{bV.exports=function(e){return!e||typeof e=="string"?!1:e instanceof Array||Array.isArray(e)||e.length>=0&&(e.splice instanceof Function||Object.getOwnPropertyDescriptor(e,e.length-1)&&e.constructor.name!=="String")}});var EV=E((QRe,xV)=>{"use strict";var bye=SV(),Sye=Array.prototype.concat,_ye=Array.prototype.slice,_V=xV.exports=function(e){for(var t=[],n=0,i=e.length;n<i;n++){var s=e[n];bye(s)?t=Sye.call(t,_ye.call(s)):t.push(s)}return t};_V.wrap=function(r){return function(){return r(_V(arguments))}}});var TV=E((ZRe,CV)=>{var Ip=wV(),Cp=EV(),OV=Object.hasOwnProperty,IV=Object.create(null);for(a1 in Ip)OV.call(Ip,a1)&&(IV[Ip[a1]]=a1);var a1,Pi=CV.exports={to:{},get:{}};Pi.get=function(r){var e=r.substring(0,3).toLowerCase(),t,n;switch(e){case"hsl":t=Pi.get.hsl(r),n="hsl";break;case"hwb":t=Pi.get.hwb(r),n="hwb";break;default:t=Pi.get.rgb(r),n="rgb";break}return t?{model:n,value:t}:null};Pi.get.rgb=function(r){if(!r)return null;var e=/^#([a-f0-9]{3,4})$/i,t=/^#([a-f0-9]{6})([a-f0-9]{2})?$/i,n=/^rgba?\(\s*([+-]?\d+)(?=[\s,])\s*(?:,\s*)?([+-]?\d+)(?=[\s,])\s*(?:,\s*)?([+-]?\d+)\s*(?:[,|\/]\s*([+-]?[\d\.]+)(%?)\s*)?\)$/,i=/^rgba?\(\s*([+-]?[\d\.]+)\%\s*,?\s*([+-]?[\d\.]+)\%\s*,?\s*([+-]?[\d\.]+)\%\s*(?:[,|\/]\s*([+-]?[\d\.]+)(%?)\s*)?\)$/,s=/^(\w+)$/,o=[0,0,0,1],a,u,c;if(a=r.match(t)){for(c=a[2],a=a[1],u=0;u<3;u++){var d=u*2;o[u]=parseInt(a.slice(d,d+2),16)}c&&(o[3]=parseInt(c,16)/255)}else if(a=r.match(e)){for(a=a[1],c=a[3],u=0;u<3;u++)o[u]=parseInt(a[u]+a[u],16);c&&(o[3]=parseInt(c+c,16)/255)}else if(a=r.match(n)){for(u=0;u<3;u++)o[u]=parseInt(a[u+1],0);a[4]&&(a[5]?o[3]=parseFloat(a[4])*.01:o[3]=parseFloat(a[4]))}else if(a=r.match(i)){for(u=0;u<3;u++)o[u]=Math.round(parseFloat(a[u+1])*2.55);a[4]&&(a[5]?o[3]=parseFloat(a[4])*.01:o[3]=parseFloat(a[4]))}else return(a=r.match(s))?a[1]==="transparent"?[0,0,0,0]:OV.call(Ip,a[1])?(o=Ip[a[1]],o[3]=1,o):null:null;for(u=0;u<3;u++)o[u]=sl(o[u],0,255);return o[3]=sl(o[3],0,1),o};Pi.get.hsl=function(r){if(!r)return null;var e=/^hsla?\(\s*([+-]?(?:\d{0,3}\.)?\d+)(?:deg)?\s*,?\s*([+-]?[\d\.]+)%\s*,?\s*([+-]?[\d\.]+)%\s*(?:[,|\/]\s*([+-]?(?=\.\d|\d)(?:0|[1-9]\d*)?(?:\.\d*)?(?:[eE][+-]?\d+)?)\s*)?\)$/,t=r.match(e);if(t){var n=parseFloat(t[4]),i=(parseFloat(t[1])%360+360)%360,s=sl(parseFloat(t[2]),0,100),o=sl(parseFloat(t[3]),0,100),a=sl(isNaN(n)?1:n,0,1);return[i,s,o,a]}return null};Pi.get.hwb=function(r){if(!r)return null;var e=/^hwb\(\s*([+-]?\d{0,3}(?:\.\d+)?)(?:deg)?\s*,\s*([+-]?[\d\.]+)%\s*,\s*([+-]?[\d\.]+)%\s*(?:,\s*([+-]?(?=\.\d|\d)(?:0|[1-9]\d*)?(?:\.\d*)?(?:[eE][+-]?\d+)?)\s*)?\)$/,t=r.match(e);if(t){var n=parseFloat(t[4]),i=(parseFloat(t[1])%360+360)%360,s=sl(parseFloat(t[2]),0,100),o=sl(parseFloat(t[3]),0,100),a=sl(isNaN(n)?1:n,0,1);return[i,s,o,a]}return null};Pi.to.hex=function(){var r=Cp(arguments);return"#"+l1(r[0])+l1(r[1])+l1(r[2])+(r[3]<1?l1(Math.round(r[3]*255)):"")};Pi.to.rgb=function(){var r=Cp(arguments);return r.length<4||r[3]===1?"rgb("+Math.round(r[0])+", "+Math.round(r[1])+", "+Math.round(r[2])+")":"rgba("+Math.round(r[0])+", "+Math.round(r[1])+", "+Math.round(r[2])+", "+r[3]+")"};Pi.to.rgb.percent=function(){var r=Cp(arguments),e=Math.round(r[0]/255*100),t=Math.round(r[1]/255*100),n=Math.round(r[2]/255*100);return r.length<4||r[3]===1?"rgb("+e+"%, "+t+"%, "+n+"%)":"rgba("+e+"%, "+t+"%, "+n+"%, "+r[3]+")"};Pi.to.hsl=function(){var r=Cp(arguments);return r.length<4||r[3]===1?"hsl("+r[0]+", "+r[1]+"%, "+r[2]+"%)":"hsla("+r[0]+", "+r[1]+"%, "+r[2]+"%, "+r[3]+")"};Pi.to.hwb=function(){var r=Cp(arguments),e="";return r.length>=4&&r[3]!==1&&(e=", "+r[3]),"hwb("+r[0]+", "+r[1]+"%, "+r[2]+"%"+e+")"};Pi.to.keyword=function(r){return IV[r.slice(0,3)]};function sl(r,e,t){return Math.min(Math.max(e,r),t)}function l1(r){var e=Math.round(r).toString(16).toUpperCase();return e.length<2?"0"+e:e}});var MV=E((XRe,AV)=>{"use strict";AV.exports={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]}});var MO=E((eLe,LV)=>{var ec=MV(),RV={};for(u1 in ec)ec.hasOwnProperty(u1)&&(RV[ec[u1]]=u1);var u1,Ie=LV.exports={rgb:{channels:3,labels:"rgb"},hsl:{channels:3,labels:"hsl"},hsv:{channels:3,labels:"hsv"},hwb:{channels:3,labels:"hwb"},cmyk:{channels:4,labels:"cmyk"},xyz:{channels:3,labels:"xyz"},lab:{channels:3,labels:"lab"},lch:{channels:3,labels:"lch"},hex:{channels:1,labels:["hex"]},keyword:{channels:1,labels:["keyword"]},ansi16:{channels:1,labels:["ansi16"]},ansi256:{channels:1,labels:["ansi256"]},hcg:{channels:3,labels:["h","c","g"]},apple:{channels:3,labels:["r16","g16","b16"]},gray:{channels:1,labels:["gray"]}};for($n in Ie)if(Ie.hasOwnProperty($n)){if(!("channels"in Ie[$n]))throw new Error("missing channels property: "+$n);if(!("labels"in Ie[$n]))throw new Error("missing channel labels property: "+$n);if(Ie[$n].labels.length!==Ie[$n].channels)throw new Error("channel and label counts mismatch: "+$n);kV=Ie[$n].channels,PV=Ie[$n].labels,delete Ie[$n].channels,delete Ie[$n].labels,Object.defineProperty(Ie[$n],"channels",{value:kV}),Object.defineProperty(Ie[$n],"labels",{value:PV})}var kV,PV,$n;Ie.rgb.hsl=function(r){var e=r[0]/255,t=r[1]/255,n=r[2]/255,i=Math.min(e,t,n),s=Math.max(e,t,n),o=s-i,a,u,c;return s===i?a=0:e===s?a=(t-n)/o:t===s?a=2+(n-e)/o:n===s&&(a=4+(e-t)/o),a=Math.min(a*60,360),a<0&&(a+=360),c=(i+s)/2,s===i?u=0:c<=.5?u=o/(s+i):u=o/(2-s-i),[a,u*100,c*100]};Ie.rgb.hsv=function(r){var e,t,n,i,s,o=r[0]/255,a=r[1]/255,u=r[2]/255,c=Math.max(o,a,u),d=c-Math.min(o,a,u),h=function(p){return(c-p)/6/d+1/2};return d===0?i=s=0:(s=d/c,e=h(o),t=h(a),n=h(u),o===c?i=n-t:a===c?i=1/3+e-n:u===c&&(i=2/3+t-e),i<0?i+=1:i>1&&(i-=1)),[i*360,s*100,c*100]};Ie.rgb.hwb=function(r){var e=r[0],t=r[1],n=r[2],i=Ie.rgb.hsl(r)[0],s=1/255*Math.min(e,Math.min(t,n));return n=1-1/255*Math.max(e,Math.max(t,n)),[i,s*100,n*100]};Ie.rgb.cmyk=function(r){var e=r[0]/255,t=r[1]/255,n=r[2]/255,i,s,o,a;return a=Math.min(1-e,1-t,1-n),i=(1-e-a)/(1-a)||0,s=(1-t-a)/(1-a)||0,o=(1-n-a)/(1-a)||0,[i*100,s*100,o*100,a*100]};function xye(r,e){return Math.pow(r[0]-e[0],2)+Math.pow(r[1]-e[1],2)+Math.pow(r[2]-e[2],2)}Ie.rgb.keyword=function(r){var e=RV[r];if(e)return e;var t=1/0,n;for(var i in ec)if(ec.hasOwnProperty(i)){var s=ec[i],o=xye(r,s);o<t&&(t=o,n=i)}return n};Ie.keyword.rgb=function(r){return ec[r]};Ie.rgb.xyz=function(r){var e=r[0]/255,t=r[1]/255,n=r[2]/255;e=e>.04045?Math.pow((e+.055)/1.055,2.4):e/12.92,t=t>.04045?Math.pow((t+.055)/1.055,2.4):t/12.92,n=n>.04045?Math.pow((n+.055)/1.055,2.4):n/12.92;var i=e*.4124+t*.3576+n*.1805,s=e*.2126+t*.7152+n*.0722,o=e*.0193+t*.1192+n*.9505;return[i*100,s*100,o*100]};Ie.rgb.lab=function(r){var e=Ie.rgb.xyz(r),t=e[0],n=e[1],i=e[2],s,o,a;return t/=95.047,n/=100,i/=108.883,t=t>.008856?Math.pow(t,1/3):7.787*t+16/116,n=n>.008856?Math.pow(n,1/3):7.787*n+16/116,i=i>.008856?Math.pow(i,1/3):7.787*i+16/116,s=116*n-16,o=500*(t-n),a=200*(n-i),[s,o,a]};Ie.hsl.rgb=function(r){var e=r[0]/360,t=r[1]/100,n=r[2]/100,i,s,o,a,u;if(t===0)return u=n*255,[u,u,u];n<.5?s=n*(1+t):s=n+t-n*t,i=2*n-s,a=[0,0,0];for(var c=0;c<3;c++)o=e+1/3*-(c-1),o<0&&o++,o>1&&o--,6*o<1?u=i+(s-i)*6*o:2*o<1?u=s:3*o<2?u=i+(s-i)*(2/3-o)*6:u=i,a[c]=u*255;return a};Ie.hsl.hsv=function(r){var e=r[0],t=r[1]/100,n=r[2]/100,i=t,s=Math.max(n,.01),o,a;return n*=2,t*=n<=1?n:2-n,i*=s<=1?s:2-s,a=(n+t)/2,o=n===0?2*i/(s+i):2*t/(n+t),[e,o*100,a*100]};Ie.hsv.rgb=function(r){var e=r[0]/60,t=r[1]/100,n=r[2]/100,i=Math.floor(e)%6,s=e-Math.floor(e),o=255*n*(1-t),a=255*n*(1-t*s),u=255*n*(1-t*(1-s));switch(n*=255,i){case 0:return[n,u,o];case 1:return[a,n,o];case 2:return[o,n,u];case 3:return[o,a,n];case 4:return[u,o,n];case 5:return[n,o,a]}};Ie.hsv.hsl=function(r){var e=r[0],t=r[1]/100,n=r[2]/100,i=Math.max(n,.01),s,o,a;return a=(2-t)*n,s=(2-t)*i,o=t*i,o/=s<=1?s:2-s,o=o||0,a/=2,[e,o*100,a*100]};Ie.hwb.rgb=function(r){var e=r[0]/360,t=r[1]/100,n=r[2]/100,i=t+n,s,o,a,u;i>1&&(t/=i,n/=i),s=Math.floor(6*e),o=1-n,a=6*e-s,s&1&&(a=1-a),u=t+a*(o-t);var c,d,h;switch(s){default:case 6:case 0:c=o,d=u,h=t;break;case 1:c=u,d=o,h=t;break;case 2:c=t,d=o,h=u;break;case 3:c=t,d=u,h=o;break;case 4:c=u,d=t,h=o;break;case 5:c=o,d=t,h=u;break}return[c*255,d*255,h*255]};Ie.cmyk.rgb=function(r){var e=r[0]/100,t=r[1]/100,n=r[2]/100,i=r[3]/100,s,o,a;return s=1-Math.min(1,e*(1-i)+i),o=1-Math.min(1,t*(1-i)+i),a=1-Math.min(1,n*(1-i)+i),[s*255,o*255,a*255]};Ie.xyz.rgb=function(r){var e=r[0]/100,t=r[1]/100,n=r[2]/100,i,s,o;return i=e*3.2406+t*-1.5372+n*-.4986,s=e*-.9689+t*1.8758+n*.0415,o=e*.0557+t*-.204+n*1.057,i=i>.0031308?1.055*Math.pow(i,1/2.4)-.055:i*12.92,s=s>.0031308?1.055*Math.pow(s,1/2.4)-.055:s*12.92,o=o>.0031308?1.055*Math.pow(o,1/2.4)-.055:o*12.92,i=Math.min(Math.max(0,i),1),s=Math.min(Math.max(0,s),1),o=Math.min(Math.max(0,o),1),[i*255,s*255,o*255]};Ie.xyz.lab=function(r){var e=r[0],t=r[1],n=r[2],i,s,o;return e/=95.047,t/=100,n/=108.883,e=e>.008856?Math.pow(e,1/3):7.787*e+16/116,t=t>.008856?Math.pow(t,1/3):7.787*t+16/116,n=n>.008856?Math.pow(n,1/3):7.787*n+16/116,i=116*t-16,s=500*(e-t),o=200*(t-n),[i,s,o]};Ie.lab.xyz=function(r){var e=r[0],t=r[1],n=r[2],i,s,o;s=(e+16)/116,i=t/500+s,o=s-n/200;var a=Math.pow(s,3),u=Math.pow(i,3),c=Math.pow(o,3);return s=a>.008856?a:(s-16/116)/7.787,i=u>.008856?u:(i-16/116)/7.787,o=c>.008856?c:(o-16/116)/7.787,i*=95.047,s*=100,o*=108.883,[i,s,o]};Ie.lab.lch=function(r){var e=r[0],t=r[1],n=r[2],i,s,o;return i=Math.atan2(n,t),s=i*360/2/Math.PI,s<0&&(s+=360),o=Math.sqrt(t*t+n*n),[e,o,s]};Ie.lch.lab=function(r){var e=r[0],t=r[1],n=r[2],i,s,o;return o=n/360*2*Math.PI,i=t*Math.cos(o),s=t*Math.sin(o),[e,i,s]};Ie.rgb.ansi16=function(r){var e=r[0],t=r[1],n=r[2],i=1 in arguments?arguments[1]:Ie.rgb.hsv(r)[2];if(i=Math.round(i/50),i===0)return 30;var s=30+(Math.round(n/255)<<2|Math.round(t/255)<<1|Math.round(e/255));return i===2&&(s+=60),s};Ie.hsv.ansi16=function(r){return Ie.rgb.ansi16(Ie.hsv.rgb(r),r[2])};Ie.rgb.ansi256=function(r){var e=r[0],t=r[1],n=r[2];if(e===t&&t===n)return e<8?16:e>248?231:Math.round((e-8)/247*24)+232;var i=16+36*Math.round(e/255*5)+6*Math.round(t/255*5)+Math.round(n/255*5);return i};Ie.ansi16.rgb=function(r){var e=r%10;if(e===0||e===7)return r>50&&(e+=3.5),e=e/10.5*255,[e,e,e];var t=(~~(r>50)+1)*.5,n=(e&1)*t*255,i=(e>>1&1)*t*255,s=(e>>2&1)*t*255;return[n,i,s]};Ie.ansi256.rgb=function(r){if(r>=232){var e=(r-232)*10+8;return[e,e,e]}r-=16;var t,n=Math.floor(r/36)/5*255,i=Math.floor((t=r%36)/6)/5*255,s=t%6/5*255;return[n,i,s]};Ie.rgb.hex=function(r){var e=((Math.round(r[0])&255)<<16)+((Math.round(r[1])&255)<<8)+(Math.round(r[2])&255),t=e.toString(16).toUpperCase();return"000000".substring(t.length)+t};Ie.hex.rgb=function(r){var e=r.toString(16).match(/[a-f0-9]{6}|[a-f0-9]{3}/i);if(!e)return[0,0,0];var t=e[0];e[0].length===3&&(t=t.split("").map(function(a){return a+a}).join(""));var n=parseInt(t,16),i=n>>16&255,s=n>>8&255,o=n&255;return[i,s,o]};Ie.rgb.hcg=function(r){var e=r[0]/255,t=r[1]/255,n=r[2]/255,i=Math.max(Math.max(e,t),n),s=Math.min(Math.min(e,t),n),o=i-s,a,u;return o<1?a=s/(1-o):a=0,o<=0?u=0:i===e?u=(t-n)/o%6:i===t?u=2+(n-e)/o:u=4+(e-t)/o+4,u/=6,u%=1,[u*360,o*100,a*100]};Ie.hsl.hcg=function(r){var e=r[1]/100,t=r[2]/100,n=1,i=0;return t<.5?n=2*e*t:n=2*e*(1-t),n<1&&(i=(t-.5*n)/(1-n)),[r[0],n*100,i*100]};Ie.hsv.hcg=function(r){var e=r[1]/100,t=r[2]/100,n=e*t,i=0;return n<1&&(i=(t-n)/(1-n)),[r[0],n*100,i*100]};Ie.hcg.rgb=function(r){var e=r[0]/360,t=r[1]/100,n=r[2]/100;if(t===0)return[n*255,n*255,n*255];var i=[0,0,0],s=e%1*6,o=s%1,a=1-o,u=0;switch(Math.floor(s)){case 0:i[0]=1,i[1]=o,i[2]=0;break;case 1:i[0]=a,i[1]=1,i[2]=0;break;case 2:i[0]=0,i[1]=1,i[2]=o;break;case 3:i[0]=0,i[1]=a,i[2]=1;break;case 4:i[0]=o,i[1]=0,i[2]=1;break;default:i[0]=1,i[1]=0,i[2]=a}return u=(1-t)*n,[(t*i[0]+u)*255,(t*i[1]+u)*255,(t*i[2]+u)*255]};Ie.hcg.hsv=function(r){var e=r[1]/100,t=r[2]/100,n=e+t*(1-e),i=0;return n>0&&(i=e/n),[r[0],i*100,n*100]};Ie.hcg.hsl=function(r){var e=r[1]/100,t=r[2]/100,n=t*(1-e)+.5*e,i=0;return n>0&&n<.5?i=e/(2*n):n>=.5&&n<1&&(i=e/(2*(1-n))),[r[0],i*100,n*100]};Ie.hcg.hwb=function(r){var e=r[1]/100,t=r[2]/100,n=e+t*(1-e);return[r[0],(n-e)*100,(1-n)*100]};Ie.hwb.hcg=function(r){var e=r[1]/100,t=r[2]/100,n=1-t,i=n-e,s=0;return i<1&&(s=(n-i)/(1-i)),[r[0],i*100,s*100]};Ie.apple.rgb=function(r){return[r[0]/65535*255,r[1]/65535*255,r[2]/65535*255]};Ie.rgb.apple=function(r){return[r[0]/255*65535,r[1]/255*65535,r[2]/255*65535]};Ie.gray.rgb=function(r){return[r[0]/100*255,r[0]/100*255,r[0]/100*255]};Ie.gray.hsl=Ie.gray.hsv=function(r){return[0,0,r[0]]};Ie.gray.hwb=function(r){return[0,100,r[0]]};Ie.gray.cmyk=function(r){return[0,0,0,r[0]]};Ie.gray.lab=function(r){return[r[0],0,0]};Ie.gray.hex=function(r){var e=Math.round(r[0]/100*255)&255,t=(e<<16)+(e<<8)+e,n=t.toString(16).toUpperCase();return"000000".substring(n.length)+n};Ie.rgb.gray=function(r){var e=(r[0]+r[1]+r[2])/3;return[e/255*100]}});var NV=E((tLe,DV)=>{var c1=MO();function Eye(){for(var r={},e=Object.keys(c1),t=e.length,n=0;n<t;n++)r[e[n]]={distance:-1,parent:null};return r}function Oye(r){var e=Eye(),t=[r];for(e[r].distance=0;t.length;)for(var n=t.pop(),i=Object.keys(c1[n]),s=i.length,o=0;o<s;o++){var a=i[o],u=e[a];u.distance===-1&&(u.distance=e[n].distance+1,u.parent=n,t.unshift(a))}return e}function Iye(r,e){return function(t){return e(r(t))}}function Cye(r,e){for(var t=[e[r].parent,r],n=c1[e[r].parent][r],i=e[r].parent;e[i].parent;)t.unshift(e[i].parent),n=Iye(c1[e[i].parent][i],n),i=e[i].parent;return n.conversion=t,n}DV.exports=function(r){for(var e=Oye(r),t={},n=Object.keys(e),i=n.length,s=0;s<i;s++){var o=n[s],a=e[o];a.parent!==null&&(t[o]=Cye(o,e))}return t}});var KV=E((rLe,jV)=>{var kO=MO(),Tye=NV(),Uf={},Aye=Object.keys(kO);function Mye(r){var e=function(t){return t==null?t:(arguments.length>1&&(t=Array.prototype.slice.call(arguments)),r(t))};return"conversion"in r&&(e.conversion=r.conversion),e}function kye(r){var e=function(t){if(t==null)return t;arguments.length>1&&(t=Array.prototype.slice.call(arguments));var n=r(t);if(typeof n=="object")for(var i=n.length,s=0;s<i;s++)n[s]=Math.round(n[s]);return n};return"conversion"in r&&(e.conversion=r.conversion),e}Aye.forEach(function(r){Uf[r]={},Object.defineProperty(Uf[r],"channels",{value:kO[r].channels}),Object.defineProperty(Uf[r],"labels",{value:kO[r].labels});var e=Tye(r),t=Object.keys(e);t.forEach(function(n){var i=e[n];Uf[r][n]=kye(i),Uf[r][n].raw=Mye(i)})});jV.exports=Uf});var VV=E((nLe,FV)=>{"use strict";var Tp=TV(),Ri=KV(),LO=[].slice,qV=["keyword","gray","hex"],PO={};Object.keys(Ri).forEach(function(r){PO[LO.call(Ri[r].labels).sort().join("")]=r});var f1={};function bn(r,e){if(!(this instanceof bn))return new bn(r,e);if(e&&e in qV&&(e=null),e&&!(e in Ri))throw new Error("Unknown model: "+e);var t,n;if(r==null)this.model="rgb",this.color=[0,0,0],this.valpha=1;else if(r instanceof bn)this.model=r.model,this.color=r.color.slice(),this.valpha=r.valpha;else if(typeof r=="string"){var i=Tp.get(r);if(i===null)throw new Error("Unable to parse color from string: "+r);this.model=i.model,n=Ri[this.model].channels,this.color=i.value.slice(0,n),this.valpha=typeof i.value[n]=="number"?i.value[n]:1}else if(r.length){this.model=e||"rgb",n=Ri[this.model].channels;var s=LO.call(r,0,n);this.color=RO(s,n),this.valpha=typeof r[n]=="number"?r[n]:1}else if(typeof r=="number")r&=16777215,this.model="rgb",this.color=[r>>16&255,r>>8&255,r&255],this.valpha=1;else{this.valpha=1;var o=Object.keys(r);"alpha"in r&&(o.splice(o.indexOf("alpha"),1),this.valpha=typeof r.alpha=="number"?r.alpha:0);var a=o.sort().join("");if(!(a in PO))throw new Error("Unable to parse color from object: "+JSON.stringify(r));this.model=PO[a];var u=Ri[this.model].labels,c=[];for(t=0;t<u.length;t++)c.push(r[u[t]]);this.color=RO(c)}if(f1[this.model])for(n=Ri[this.model].channels,t=0;t<n;t++){var d=f1[this.model][t];d&&(this.color[t]=d(this.color[t]))}this.valpha=Math.max(0,Math.min(1,this.valpha)),Object.freeze&&Object.freeze(this)}bn.prototype={toString:function(){return this.string()},toJSON:function(){return this[this.model]()},string:function(r){var e=this.model in Tp.to?this:this.rgb();e=e.round(typeof r=="number"?r:1);var t=e.valpha===1?e.color:e.color.concat(this.valpha);return Tp.to[e.model](t)},percentString:function(r){var e=this.rgb().round(typeof r=="number"?r:1),t=e.valpha===1?e.color:e.color.concat(this.valpha);return Tp.to.rgb.percent(t)},array:function(){return this.valpha===1?this.color.slice():this.color.concat(this.valpha)},object:function(){for(var r={},e=Ri[this.model].channels,t=Ri[this.model].labels,n=0;n<e;n++)r[t[n]]=this.color[n];return this.valpha!==1&&(r.alpha=this.valpha),r},unitArray:function(){var r=this.rgb().color;return r[0]/=255,r[1]/=255,r[2]/=255,this.valpha!==1&&r.push(this.valpha),r},unitObject:function(){var r=this.rgb().object();return r.r/=255,r.g/=255,r.b/=255,this.valpha!==1&&(r.alpha=this.valpha),r},round:function(r){return r=Math.max(r||0,0),new bn(this.color.map(Rye(r)).concat(this.valpha),this.model)},alpha:function(r){return arguments.length?new bn(this.color.concat(Math.max(0,Math.min(1,r))),this.model):this.valpha},red:Nr("rgb",0,rn(255)),green:Nr("rgb",1,rn(255)),blue:Nr("rgb",2,rn(255)),hue:Nr(["hsl","hsv","hsl","hwb","hcg"],0,function(r){return(r%360+360)%360}),saturationl:Nr("hsl",1,rn(100)),lightness:Nr("hsl",2,rn(100)),saturationv:Nr("hsv",1,rn(100)),value:Nr("hsv",2,rn(100)),chroma:Nr("hcg",1,rn(100)),gray:Nr("hcg",2,rn(100)),white:Nr("hwb",1,rn(100)),wblack:Nr("hwb",2,rn(100)),cyan:Nr("cmyk",0,rn(100)),magenta:Nr("cmyk",1,rn(100)),yellow:Nr("cmyk",2,rn(100)),black:Nr("cmyk",3,rn(100)),x:Nr("xyz",0,rn(100)),y:Nr("xyz",1,rn(100)),z:Nr("xyz",2,rn(100)),l:Nr("lab",0,rn(100)),a:Nr("lab",1),b:Nr("lab",2),keyword:function(r){return arguments.length?new bn(r):Ri[this.model].keyword(this.color)},hex:function(r){return arguments.length?new bn(r):Tp.to.hex(this.rgb().round().color)},rgbNumber:function(){var r=this.rgb().color;return(r[0]&255)<<16|(r[1]&255)<<8|r[2]&255},luminosity:function(){for(var r=this.rgb().color,e=[],t=0;t<r.length;t++){var n=r[t]/255;e[t]=n<=.03928?n/12.92:Math.pow((n+.055)/1.055,2.4)}return .2126*e[0]+.7152*e[1]+.0722*e[2]},contrast:function(r){var e=this.luminosity(),t=r.luminosity();return e>t?(e+.05)/(t+.05):(t+.05)/(e+.05)},level:function(r){var e=this.contrast(r);return e>=7.1?"AAA":e>=4.5?"AA":""},isDark:function(){var r=this.rgb().color,e=(r[0]*299+r[1]*587+r[2]*114)/1e3;return e<128},isLight:function(){return!this.isDark()},negate:function(){for(var r=this.rgb(),e=0;e<3;e++)r.color[e]=255-r.color[e];return r},lighten:function(r){var e=this.hsl();return e.color[2]+=e.color[2]*r,e},darken:function(r){var e=this.hsl();return e.color[2]-=e.color[2]*r,e},saturate:function(r){var e=this.hsl();return e.color[1]+=e.color[1]*r,e},desaturate:function(r){var e=this.hsl();return e.color[1]-=e.color[1]*r,e},whiten:function(r){var e=this.hwb();return e.color[1]+=e.color[1]*r,e},blacken:function(r){var e=this.hwb();return e.color[2]+=e.color[2]*r,e},grayscale:function(){var r=this.rgb().color,e=r[0]*.3+r[1]*.59+r[2]*.11;return bn.rgb(e,e,e)},fade:function(r){return this.alpha(this.valpha-this.valpha*r)},opaquer:function(r){return this.alpha(this.valpha+this.valpha*r)},rotate:function(r){var e=this.hsl(),t=e.color[0];return t=(t+r)%360,t=t<0?360+t:t,e.color[0]=t,e},mix:function(r,e){if(!r||!r.rgb)throw new Error('Argument to "mix" was not a Color instance, but rather an instance of '+typeof r);var t=r.rgb(),n=this.rgb(),i=e===void 0?.5:e,s=2*i-1,o=t.alpha()-n.alpha(),a=((s*o===-1?s:(s+o)/(1+s*o))+1)/2,u=1-a;return bn.rgb(a*t.red()+u*n.red(),a*t.green()+u*n.green(),a*t.blue()+u*n.blue(),t.alpha()*i+n.alpha()*(1-i))}};Object.keys(Ri).forEach(function(r){if(qV.indexOf(r)===-1){var e=Ri[r].channels;bn.prototype[r]=function(){if(this.model===r)return new bn(this);if(arguments.length)return new bn(arguments,r);var t=typeof arguments[e]=="number"?e:this.valpha;return new bn(Lye(Ri[this.model][r].raw(this.color)).concat(t),r)},bn[r]=function(t){return typeof t=="number"&&(t=RO(LO.call(arguments),e)),new bn(t,r)}}});function Pye(r,e){return Number(r.toFixed(e))}function Rye(r){return function(e){return Pye(e,r)}}function Nr(r,e,t){return r=Array.isArray(r)?r:[r],r.forEach(function(n){(f1[n]||(f1[n]=[]))[e]=t}),r=r[0],function(n){var i;return arguments.length?(t&&(n=t(n)),i=this[r](),i.color[e]=n,i):(i=this[r]().color[e],t&&(i=t(i)),i)}}function rn(r){return function(e){return Math.max(0,Math.min(r,e))}}function Lye(r){return Array.isArray(r)?r:[r]}function RO(r,e){for(var t=0;t<e;t++)typeof r[t]!="number"&&(r[t]=0);return r}FV.exports=bn});var UV=E((iLe,BV)=>{"use strict";BV.exports=function(e){for(var t=0,n=0;t<e.length;n=e.charCodeAt(t++)+((n<<5)-n));var i=Math.floor(Math.abs(Math.sin(n)*1e4%1*16777216)).toString(16);return"#"+Array(6-i.length+1).join("0")+i}});var zV=E((sLe,WV)=>{"use strict";var GV=VV(),$V=UV();WV.exports=function(e,t){var n=e.split(t||":"),i=$V(n[0]);if(!n.length)return i;for(var s=0,o=n.length-1;s<o;s++)i=GV(i).mix(GV($V(n[s+1]))).saturate(1).hex();return i}});var YV=E((oLe,HV)=>{"use strict";function Ds(r,e){if(e)return new Ds(r).style(e);if(!(this instanceof Ds))return new Ds(r);this.text=r}Ds.prototype.prefix="\x1B[";Ds.prototype.suffix="m";Ds.prototype.hex=function(e){e=e[0]==="#"?e.substring(1):e,e.length===3&&(e=e.split(""),e[5]=e[2],e[4]=e[2],e[3]=e[1],e[2]=e[1],e[1]=e[0],e=e.join(""));var t=e.substring(0,2),n=e.substring(2,4),i=e.substring(4,6);return[parseInt(t,16),parseInt(n,16),parseInt(i,16)]};Ds.prototype.rgb=function(e,t,n){var i=e/255*5,s=t/255*5,o=n/255*5;return this.ansi(i,s,o)};Ds.prototype.ansi=function(e,t,n){var i=Math.round(e),s=Math.round(t),o=Math.round(n);return 16+i*36+s*6+o};Ds.prototype.reset=function(){return this.prefix+"39;49"+this.suffix};Ds.prototype.style=function(e){return this.prefix+"38;5;"+this.rgb.apply(this,this.hex(e))+this.suffix+this.text+this.reset()};HV.exports=Ds});var QV=E((aLe,JV)=>{var Dye=zV(),Nye=YV();JV.exports=function(e,t){var n=t.namespace,i=t.colors!==!1?Nye(n+":",Dye(n)):n+":";return e[0]=i+" "+e[0],e}});var XV=E((lLe,ZV)=>{"use strict";ZV.exports=function(e,t){if(!t)return!1;for(var n=t.split(/[\s,]+/),i=0;i<n.length;i++){if(t=n[i].replace("*",".*?"),t.charAt(0)==="-"){if(new RegExp("^"+t.substr(1)+"$").test(e))return!1;continue}if(new RegExp("^"+t+"$").test(e))return!0}return!1}});var tB=E((uLe,eB)=>{var jye=XV();eB.exports=function(e){return function(n){try{return jye(n,e())}catch{}return!1}}});var nB=E((cLe,rB)=>{var Kye=tB();rB.exports=Kye(function(){return process.env.DEBUG||process.env.DIAGNOSTICS})});var sB=E((fLe,iB)=>{iB.exports=function(r,e){try{Function.prototype.apply.call(console.log,console,e)}catch{}}});var aB=E((dLe,oB)=>{var qye=AO(),Fye=require("tty").isatty(1),d1=qye(function r(e,t){return t=t||{},t.colors="colors"in t?t.colors:Fye,t.namespace=e,t.prod=!1,t.dev=!0,!r.enabled(e)&&!(t.force||r.force)?r.nope(t):r.yep(t)});d1.modify(QV());d1.use(nB());d1.set(sB());oB.exports=d1});var Ap=E((hLe,DO)=>{process.env.NODE_ENV==="production"?DO.exports=yV():DO.exports=aB()});var uB=E((pLe,lB)=>{"use strict";var NO=require("fs"),{StringDecoder:Vye}=require("string_decoder"),{Stream:Bye}=Vf();function Uye(){}lB.exports=(r,e)=>{let t=Buffer.alloc(65536),n=new Vye("utf8"),i=new Bye,s="",o=0,a=0;return r.start===-1&&delete r.start,i.readable=!0,i.destroy=()=>{i.destroyed=!0,i.emit("end"),i.emit("close")},NO.open(r.file,"a+","0644",(u,c)=>{if(u){e?e(u):i.emit("error",u),i.destroy();return}(function d(){if(i.destroyed){NO.close(c,Uye);return}return NO.read(c,t,0,t.length,o,(h,p)=>{if(h){e?e(h):i.emit("error",h),i.destroy();return}if(!p)return s&&((r.start==null||a>r.start)&&(e?e(null,s):i.emit("line",s)),a++,s=""),setTimeout(d,1e3);let m=n.write(t.slice(0,p));e||i.emit("data",m),m=(s+m).split(/\n+/);let y=m.length-1,_=0;for(;_<y;_++)(r.start==null||a>r.start)&&(e?e(null,m[_]):i.emit("line",m[_])),a++;return s=m[y],o+=p,d()})})()}),e?i.destroy:i}});var dB=E((gLe,fB)=>{"use strict";var Ho=require("fs"),Mn=require("path"),Gye=nV(),$ye=require("zlib"),{MESSAGE:Wye}=Wr(),{Stream:zye,PassThrough:cB}=Vf(),Hye=Zu(),Ns=Ap()("winston:file"),Yye=require("os"),Jye=uB();fB.exports=class extends Hye{constructor(e={}){super(e),this.name=e.name||"file";function t(n,...i){i.slice(1).forEach(s=>{if(e[s])throw new Error(`Cannot set ${s} and ${n} together`)})}if(this._stream=new cB,this._stream.setMaxListeners(30),this._onError=this._onError.bind(this),e.filename||e.dirname)t("filename or dirname","stream"),this._basename=this.filename=e.filename?Mn.basename(e.filename):"winston.log",this.dirname=e.dirname||Mn.dirname(e.filename),this.options=e.options||{flags:"a"};else if(e.stream)console.warn("options.stream will be removed in winston@4. Use winston.transports.Stream"),t("stream","filename","maxsize"),this._dest=this._stream.pipe(this._setupStream(e.stream)),this.dirname=Mn.dirname(this._dest.path);else throw new Error("Cannot log to file without filename or stream.");this.maxsize=e.maxsize||null,this.rotationFormat=e.rotationFormat||!1,this.zippedArchive=e.zippedArchive||!1,this.maxFiles=e.maxFiles||null,this.eol=typeof e.eol=="string"?e.eol:Yye.EOL,this.tailable=e.tailable||!1,this.lazy=e.lazy||!1,this._size=0,this._pendingSize=0,this._created=0,this._drain=!1,this._opening=!1,this._ending=!1,this._fileExist=!1,this.dirname&&this._createLogDirIfNotExist(this.dirname),this.lazy||this.open()}finishIfEnding(){this._ending&&(this._opening?this.once("open",()=>{this._stream.once("finish",()=>this.emit("finish")),setImmediate(()=>this._stream.end())}):(this._stream.once("finish",()=>this.emit("finish")),setImmediate(()=>this._stream.end())))}log(e,t=()=>{}){if(this.silent)return t(),!0;if(this._drain){this._stream.once("drain",()=>{this._drain=!1,this.log(e,t)});return}if(this._rotate){this._stream.once("rotate",()=>{this._rotate=!1,this.log(e,t)});return}if(this.lazy){if(!this._fileExist){this._opening||this.open(),this.once("open",()=>{this._fileExist=!0,this.log(e,t)});return}if(this._needsNewFile(this._pendingSize)){this._dest.once("close",()=>{this._opening||this.open(),this.once("open",()=>{this.log(e,t)})});return}}let n=`${e[Wye]}${this.eol}`,i=Buffer.byteLength(n);function s(){if(this._size+=i,this._pendingSize-=i,Ns("logged %s %s",this._size,n),this.emit("logged",e),!this._rotate&&!this._opening&&this._needsNewFile()){if(this.lazy){this._endStream(()=>{this.emit("fileclosed")});return}this._rotate=!0,this._endStream(()=>this._rotateFile())}}this._pendingSize+=i,this._opening&&!this.rotatedWhileOpening&&this._needsNewFile(this._size+this._pendingSize)&&(this.rotatedWhileOpening=!0);let o=this._stream.write(n,s.bind(this));return o?t():(this._drain=!0,this._stream.once("drain",()=>{this._drain=!1,t()})),Ns("written",o,this._drain),this.finishIfEnding(),o}query(e,t){typeof e=="function"&&(t=e,e={}),e=h(e);let n=Mn.join(this.dirname,this.filename),i="",s=[],o=0,a=Ho.createReadStream(n,{encoding:"utf8"});a.on("error",p=>{if(a.readable&&a.destroy(),!!t)return p.code!=="ENOENT"?t(p):t(null,s)}),a.on("data",p=>{p=(i+p).split(/\n+/);let m=p.length-1,y=0;for(;y<m;y++)(!e.start||o>=e.start)&&u(p[y]),o++;i=p[m]}),a.on("close",()=>{i&&u(i,!0),e.order==="desc"&&(s=s.reverse()),t&&t(null,s)});function u(p,m){try{let y=JSON.parse(p);d(y)&&c(y)}catch(y){m||a.emit("error",y)}}function c(p){if(e.rows&&s.length>=e.rows&&e.order!=="desc"){a.readable&&a.destroy();return}e.fields&&(p=e.fields.reduce((m,y)=>(m[y]=p[y],m),{})),e.order==="desc"&&s.length>=e.rows&&s.shift(),s.push(p)}function d(p){if(!p||typeof p!="object")return;let m=new Date(p.timestamp);if(!(e.from&&m<e.from||e.until&&m>e.until||e.level&&e.level!==p.level))return!0}function h(p){return p=p||{},p.rows=p.rows||p.limit||10,p.start=p.start||0,p.until=p.until||new Date,typeof p.until!="object"&&(p.until=new Date(p.until)),p.from=p.from||p.until-24*60*60*1e3,typeof p.from!="object"&&(p.from=new Date(p.from)),p.order=p.order||"desc",p}}stream(e={}){let t=Mn.join(this.dirname,this.filename),n=new zye,i={file:t,start:e.start};return n.destroy=Jye(i,(s,o)=>{if(s)return n.emit("error",s);try{n.emit("data",o),o=JSON.parse(o),n.emit("log",o)}catch(a){n.emit("error",a)}}),n}open(){this.filename&&(this._opening||(this._opening=!0,this.stat((e,t)=>{if(e)return this.emit("error",e);Ns("stat done: %s { size: %s }",this.filename,t),this._size=t,this._dest=this._createStream(this._stream),this._opening=!1,this.once("open",()=>{this._stream.eventNames().includes("rotate")?this._stream.emit("rotate"):this._rotate=!1})})))}stat(e){let t=this._getFile(),n=Mn.join(this.dirname,t);Ho.stat(n,(i,s)=>{if(i&&i.code==="ENOENT")return Ns("ENOENT\xA0ok",n),this.filename=t,e(null,0);if(i)return Ns(`err ${i.code} ${n}`),e(i);if(!s||this._needsNewFile(s.size))return this._incFile(()=>this.stat(e));this.filename=t,e(null,s.size)})}close(e){this._stream&&this._stream.end(()=>{e&&e(),this.emit("flush"),this.emit("closed")})}_needsNewFile(e){return e=e||this._size,this.maxsize&&e>=this.maxsize}_onError(e){this.emit("error",e)}_setupStream(e){return e.on("error",this._onError),e}_cleanupStream(e){return e.removeListener("error",this._onError),e.destroy(),e}_rotateFile(){this._incFile(()=>this.open())}_endStream(e=()=>{}){this._dest?(this._stream.unpipe(this._dest),this._dest.end(()=>{this._cleanupStream(this._dest),e()})):e()}_createStream(e){let t=Mn.join(this.dirname,this.filename);Ns("create stream start",t,this.options);let n=Ho.createWriteStream(t,this.options).on("error",i=>Ns(i)).on("close",()=>Ns("close",n.path,n.bytesWritten)).on("open",()=>{Ns("file open ok",t),this.emit("open",t),e.pipe(n),this.rotatedWhileOpening&&(this._stream=new cB,this._stream.setMaxListeners(30),this._rotateFile(),this.rotatedWhileOpening=!1,this._cleanupStream(n),e.end())});if(Ns("create stream ok",t),this.zippedArchive){let i=$ye.createGzip();return i.pipe(n),i}return n}_incFile(e){Ns("_incFile",this.filename);let t=Mn.extname(this._basename),n=Mn.basename(this._basename,t);this.tailable?this._checkMaxFilesTailable(t,n,e):(this._created+=1,this._checkMaxFilesIncrementing(t,n,e))}_getFile(){let e=Mn.extname(this._basename),t=Mn.basename(this._basename,e),n=this.rotationFormat?this.rotationFormat():this._created,i=!this.tailable&&this._created?`${t}${n}${e}`:`${t}${e}`;return this.zippedArchive&&!this.tailable?`${i}.gz`:i}_checkMaxFilesIncrementing(e,t,n){if(!this.maxFiles||this._created<this.maxFiles)return setImmediate(n);let i=this._created-this.maxFiles,s=i!==0?i:"",o=this.zippedArchive?".gz":"",a=`${t}${s}${e}${o}`,u=Mn.join(this.dirname,a);Ho.unlink(u,n)}_checkMaxFilesTailable(e,t,n){let i=[];if(!this.maxFiles)return;let s=this.zippedArchive?".gz":"";for(let o=this.maxFiles-1;o>1;o--)i.push(function(a,u){let c=`${t}${a-1}${e}${s}`,d=Mn.join(this.dirname,c);Ho.exists(d,h=>{if(!h)return u(null);c=`${t}${a}${e}${s}`,Ho.rename(d,Mn.join(this.dirname,c),u)})}.bind(this,o));Gye(i,()=>{Ho.rename(Mn.join(this.dirname,`${t}${e}`),Mn.join(this.dirname,`${t}1${e}${s}`),n)})}_createLogDirIfNotExist(e){Ho.existsSync(e)||Ho.mkdirSync(e,{recursive:!0})}}});var pB=E((vLe,hB)=>{"use strict";var Qye=require("http"),Zye=require("https"),{Stream:Xye}=Vf(),eve=Zu(),tve=cp();hB.exports=class extends eve{constructor(e={}){super(e),this.options=e,this.name=e.name||"http",this.ssl=!!e.ssl,this.host=e.host||"localhost",this.port=e.port,this.auth=e.auth,this.path=e.path||"",this.agent=e.agent,this.headers=e.headers||{},this.headers["content-type"]="application/json",this.batch=e.batch||!1,this.batchInterval=e.batchInterval||5e3,this.batchCount=e.batchCount||10,this.batchOptions=[],this.batchTimeoutID=-1,this.batchCallback={},this.port||(this.port=this.ssl?443:80)}log(e,t){this._request(e,null,null,(n,i)=>{i&&i.statusCode!==200&&(n=new Error(`Invalid HTTP Status Code: ${i.statusCode}`)),n?this.emit("warn",n):this.emit("logged",e)}),t&&setImmediate(t)}query(e,t){typeof e=="function"&&(t=e,e={}),e={method:"query",params:this.normalizeQuery(e)};let n=e.params.auth||null;delete e.params.auth;let i=e.params.path||null;delete e.params.path,this._request(e,n,i,(s,o,a)=>{if(o&&o.statusCode!==200&&(s=new Error(`Invalid HTTP Status Code: ${o.statusCode}`)),s)return t(s);if(typeof a=="string")try{a=JSON.parse(a)}catch(u){return t(u)}t(null,a)})}stream(e={}){let t=new Xye;e={method:"stream",params:e};let n=e.params.path||null;delete e.params.path;let i=e.params.auth||null;delete e.params.auth;let s="",o=this._request(e,i,n);return t.destroy=()=>o.destroy(),o.on("data",a=>{a=(s+a).split(/\n+/);let u=a.length-1,c=0;for(;c<u;c++)try{t.emit("log",JSON.parse(a[c]))}catch(d){t.emit("error",d)}s=a[u]}),o.on("error",a=>t.emit("error",a)),t}_request(e,t,n,i){e=e||{},t=t||this.auth,n=n||this.path||"",this.batch?this._doBatch(e,i,t,n):this._doRequest(e,i,t,n)}_doBatch(e,t,n,i){if(this.batchOptions.push(e),this.batchOptions.length===1){let s=this;this.batchCallback=t,this.batchTimeoutID=setTimeout(function(){s.batchTimeoutID=-1,s._doBatchRequest(s.batchCallback,n,i)},this.batchInterval)}this.batchOptions.length===this.batchCount&&this._doBatchRequest(this.batchCallback,n,i)}_doBatchRequest(e,t,n){this.batchTimeoutID>0&&(clearTimeout(this.batchTimeoutID),this.batchTimeoutID=-1);let i=this.batchOptions.slice();this.batchOptions=[],this._doRequest(i,e,t,n)}_doRequest(e,t,n,i){let s=Object.assign({},this.headers);n&&n.bearer&&(s.Authorization=`Bearer ${n.bearer}`);let o=(this.ssl?Zye:Qye).request({...this.options,method:"POST",host:this.host,port:this.port,path:`/${i.replace(/^\//,"")}`,headers:s,auth:n&&n.username&&n.password?`${n.username}:${n.password}`:"",agent:this.agent});o.on("error",t),o.on("response",a=>a.on("end",()=>t(null,a)).resume()),o.end(Buffer.from(tve(e,this.options.replacer),"utf8"))}}});var jO=E((wLe,mB)=>{"use strict";var no=r=>r!==null&&typeof r=="object"&&typeof r.pipe=="function";no.writable=r=>no(r)&&r.writable!==!1&&typeof r._write=="function"&&typeof r._writableState=="object";no.readable=r=>no(r)&&r.readable!==!1&&typeof r._read=="function"&&typeof r._readableState=="object";no.duplex=r=>no.writable(r)&&no.readable(r);no.transform=r=>no.duplex(r)&&typeof r._transform=="function";mB.exports=no});var yB=E((SLe,gB)=>{"use strict";var rve=jO(),{MESSAGE:nve}=Wr(),ive=require("os"),sve=Zu();gB.exports=class extends sve{constructor(e={}){if(super(e),!e.stream||!rve(e.stream))throw new Error("options.stream is required.");this._stream=e.stream,this._stream.setMaxListeners(1/0),this.isObjectMode=e.stream._writableState.objectMode,this.eol=typeof e.eol=="string"?e.eol:ive.EOL}log(e,t){if(setImmediate(()=>this.emit("logged",e)),this.isObjectMode){this._stream.write(e),t&&t();return}this._stream.write(`${e[nve]}${this.eol}`),t&&t()}}});var vB=E(Mp=>{"use strict";Object.defineProperty(Mp,"Console",{configurable:!0,enumerable:!0,get(){return S6()}});Object.defineProperty(Mp,"File",{configurable:!0,enumerable:!0,get(){return dB()}});Object.defineProperty(Mp,"Http",{configurable:!0,enumerable:!0,get(){return pB()}});Object.defineProperty(Mp,"Stream",{configurable:!0,enumerable:!0,get(){return yB()}})});var p1=E(kp=>{"use strict";var h1=V2(),{configs:KO}=Wr();kp.cli=h1.levels(KO.cli);kp.npm=h1.levels(KO.npm);kp.syslog=h1.levels(KO.syslog);kp.addColors=h1.levels});var bB=E((m1,wB)=>{"use strict";Object.defineProperty(m1,"__esModule",{value:!0});var ove=Uv(),ave=tc(ove),lve=Xv(),uve=tc(lve),cve=bO(),fve=tc(cve),dve=yO(),hve=tc(dve),pve=vO(),mve=tc(pve),gve=Xu(),yve=tc(gve),vve=Ff(),wve=tc(vve);function tc(r){return r&&r.__esModule?r:{default:r}}function bve(r,e,t){t=(0,hve.default)(t);var n=0,i=0,{length:s}=r,o=!1;s===0&&t(null);function a(u,c){u===!1&&(o=!0),o!==!0&&(u?t(u):(++i===s||c===uve.default)&&t(null))}for(;n<s;n++)e(r[n],n,(0,mve.default)(a))}function Sve(r,e,t){return(0,fve.default)(r,1/0,e,t)}function _ve(r,e,t){var n=(0,ave.default)(r)?bve:Sve;return n(r,(0,yve.default)(e),t)}m1.default=(0,wve.default)(_ve,3);wB.exports=m1.default});var _B=E((g1,SB)=>{"use strict";Object.defineProperty(g1,"__esModule",{value:!0});g1.default=xve;function xve(r){return(e,t,n)=>r(e,n)}SB.exports=g1.default});var w1=E((v1,xB)=>{"use strict";Object.defineProperty(v1,"__esModule",{value:!0});var Eve=bB(),Ove=y1(Eve),Ive=_B(),Cve=y1(Ive),Tve=Xu(),Ave=y1(Tve),Mve=Ff(),kve=y1(Mve);function y1(r){return r&&r.__esModule?r:{default:r}}function Pve(r,e,t){return(0,Ove.default)(r,(0,Cve.default)((0,Ave.default)(e)),t)}v1.default=(0,kve.default)(Pve,3);xB.exports=v1.default});var OB=E((ELe,EB)=>{"use strict";var Rve=Object.prototype.toString;EB.exports=function(e){if(typeof e.displayName=="string"&&e.constructor.name)return e.displayName;if(typeof e.name=="string"&&e.name)return e.name;if(typeof e=="object"&&e.constructor&&typeof e.constructor.name=="string")return e.constructor.name;var t=e.toString(),n=Rve.call(e).slice(8,-1);return n==="Function"?t=t.substring(t.indexOf("(")+1,t.indexOf(")")):t=n,t||"anonymous"}});var qO=E((OLe,IB)=>{"use strict";var Lve=OB();IB.exports=function(e){var t=0,n;function i(){return t||(t=1,n=e.apply(this,arguments),e=null),n}return i.displayName=Lve(e),i}});var FO=E(Rp=>{Rp.get=function(r){var e=Error.stackTraceLimit;Error.stackTraceLimit=1/0;var t={},n=Error.prepareStackTrace;Error.prepareStackTrace=function(s,o){return o},Error.captureStackTrace(t,r||Rp.get);var i=t.stack;return Error.prepareStackTrace=n,Error.stackTraceLimit=e,i};Rp.parse=function(r){if(!r.stack)return[];var e=this,t=r.stack.split(`
`).slice(1);return t.map(function(n){if(n.match(/^\s*[-]{4,}$/))return e._createParsedCallSite({fileName:n,lineNumber:null,functionName:null,typeName:null,methodName:null,columnNumber:null,native:null});var i=n.match(/at (?:(.+)\s+\()?(?:(.+?):(\d+)(?::(\d+))?|([^)]+))\)?/);if(i){var s=null,o=null,a=null,u=null,c=null,d=i[5]==="native";if(i[1]){a=i[1];var h=a.lastIndexOf(".");if(a[h-1]=="."&&h--,h>0){s=a.substr(0,h),o=a.substr(h+1);var p=s.indexOf(".Module");p>0&&(a=a.substr(p+1),s=s.substr(0,p))}u=null}o&&(u=s,c=o),o==="<anonymous>"&&(c=null,a=null);var m={fileName:i[2]||null,lineNumber:parseInt(i[3],10)||null,functionName:a,typeName:u,methodName:c,columnNumber:parseInt(i[4],10)||null,native:d};return e._createParsedCallSite(m)}}).filter(function(n){return!!n})};function Pp(r){for(var e in r)this[e]=r[e]}var Dve=["this","typeName","functionName","methodName","fileName","lineNumber","columnNumber","function","evalOrigin"],Nve=["topLevel","eval","native","constructor"];Dve.forEach(function(r){Pp.prototype[r]=null,Pp.prototype["get"+r[0].toUpperCase()+r.substr(1)]=function(){return this[r]}});Nve.forEach(function(r){Pp.prototype[r]=!1,Pp.prototype["is"+r[0].toUpperCase()+r.substr(1)]=function(){return this[r]}});Rp._createParsedCallSite=function(r){return new Pp(r)}});var VO=E((TLe,CB)=>{"use strict";var{Writable:jve}=Vf();CB.exports=class extends jve{constructor(e){if(super({objectMode:!0}),!e)throw new Error("ExceptionStream requires a TransportStream instance.");this.handleExceptions=!0,this.transport=e}_write(e,t,n){return e.exception?this.transport.log(e,n):(n(),!0)}}});var UO=E((MLe,MB)=>{"use strict";var TB=require("os"),Kve=w1(),BO=Ap()("winston:exception"),qve=qO(),AB=FO(),Fve=VO();MB.exports=class{constructor(e){if(!e)throw new Error("Logger is required to handle exceptions");this.logger=e,this.handlers=new Map}handle(...e){e.forEach(t=>{if(Array.isArray(t))return t.forEach(n=>this._addHandler(n));this._addHandler(t)}),this.catcher||(this.catcher=this._uncaughtException.bind(this),process.on("uncaughtException",this.catcher))}unhandle(){this.catcher&&(process.removeListener("uncaughtException",this.catcher),this.catcher=!1,Array.from(this.handlers.values()).forEach(e=>this.logger.unpipe(e)))}getAllInfo(e){let t=null;return e&&(t=typeof e=="string"?e:e.message),{error:e,level:"error",message:[`uncaughtException: ${t||"(no error message)"}`,e&&e.stack||"  No stack trace"].join(`
`),stack:e&&e.stack,exception:!0,date:new Date().toString(),process:this.getProcessInfo(),os:this.getOsInfo(),trace:this.getTrace(e)}}getProcessInfo(){return{pid:process.pid,uid:process.getuid?process.getuid():null,gid:process.getgid?process.getgid():null,cwd:process.cwd(),execPath:process.execPath,version:process.version,argv:process.argv,memoryUsage:process.memoryUsage()}}getOsInfo(){return{loadavg:TB.loadavg(),uptime:TB.uptime()}}getTrace(e){return(e?AB.parse(e):AB.get()).map(n=>({column:n.getColumnNumber(),file:n.getFileName(),function:n.getFunctionName(),line:n.getLineNumber(),method:n.getMethodName(),native:n.isNative()}))}_addHandler(e){if(!this.handlers.has(e)){e.handleExceptions=!0;let t=new Fve(e);this.handlers.set(e,t),this.logger.pipe(t)}}_uncaughtException(e){let t=this.getAllInfo(e),n=this._getExceptionHandlers(),i=typeof this.logger.exitOnError=="function"?this.logger.exitOnError(e):this.logger.exitOnError,s;!n.length&&i&&(console.warn("winston: exitOnError cannot be true with no exception handlers."),console.warn("winston: not exiting process."),i=!1);function o(){BO("doExit",i),BO("process._exiting",process._exiting),i&&!process._exiting&&(s&&clearTimeout(s),process.exit(1))}if(!n||n.length===0)return process.nextTick(o);Kve(n,(a,u)=>{let c=qve(u),d=a.transport||a;function h(p){return()=>{BO(p),c()}}d._ending=!0,d.once("finish",h("finished")),d.once("error",h("error"))},()=>i&&o()),this.logger.log(t),i&&(s=setTimeout(o,3e3))}_getExceptionHandlers(){return this.logger.transports.filter(e=>(e.transport||e).handleExceptions)}}});var $O=E((PLe,RB)=>{"use strict";var kB=require("os"),Vve=w1(),GO=Ap()("winston:rejection"),Bve=qO(),PB=FO(),Uve=VO();RB.exports=class{constructor(e){if(!e)throw new Error("Logger is required to handle rejections");this.logger=e,this.handlers=new Map}handle(...e){e.forEach(t=>{if(Array.isArray(t))return t.forEach(n=>this._addHandler(n));this._addHandler(t)}),this.catcher||(this.catcher=this._unhandledRejection.bind(this),process.on("unhandledRejection",this.catcher))}unhandle(){this.catcher&&(process.removeListener("unhandledRejection",this.catcher),this.catcher=!1,Array.from(this.handlers.values()).forEach(e=>this.logger.unpipe(e)))}getAllInfo(e){let t=null;return e&&(t=typeof e=="string"?e:e.message),{error:e,level:"error",message:[`unhandledRejection: ${t||"(no error message)"}`,e&&e.stack||"  No stack trace"].join(`
`),stack:e&&e.stack,exception:!0,date:new Date().toString(),process:this.getProcessInfo(),os:this.getOsInfo(),trace:this.getTrace(e)}}getProcessInfo(){return{pid:process.pid,uid:process.getuid?process.getuid():null,gid:process.getgid?process.getgid():null,cwd:process.cwd(),execPath:process.execPath,version:process.version,argv:process.argv,memoryUsage:process.memoryUsage()}}getOsInfo(){return{loadavg:kB.loadavg(),uptime:kB.uptime()}}getTrace(e){return(e?PB.parse(e):PB.get()).map(n=>({column:n.getColumnNumber(),file:n.getFileName(),function:n.getFunctionName(),line:n.getLineNumber(),method:n.getMethodName(),native:n.isNative()}))}_addHandler(e){if(!this.handlers.has(e)){e.handleRejections=!0;let t=new Uve(e);this.handlers.set(e,t),this.logger.pipe(t)}}_unhandledRejection(e){let t=this.getAllInfo(e),n=this._getRejectionHandlers(),i=typeof this.logger.exitOnError=="function"?this.logger.exitOnError(e):this.logger.exitOnError,s;!n.length&&i&&(console.warn("winston: exitOnError cannot be true with no rejection handlers."),console.warn("winston: not exiting process."),i=!1);function o(){GO("doExit",i),GO("process._exiting",process._exiting),i&&!process._exiting&&(s&&clearTimeout(s),process.exit(1))}if(!n||n.length===0)return process.nextTick(o);Vve(n,(a,u)=>{let c=Bve(u),d=a.transport||a;function h(p){return()=>{GO(p),c()}}d._ending=!0,d.once("finish",h("finished")),d.once("error",h("error"))},()=>i&&o()),this.logger.log(t),i&&(s=setTimeout(o,3e3))}_getRejectionHandlers(){return this.logger.transports.filter(e=>(e.transport||e).handleRejections)}}});var DB=E((RLe,LB)=>{"use strict";var WO=class{constructor(e){let t=b1();if(typeof e!="object"||Array.isArray(e)||!(e instanceof t))throw new Error("Logger is required for profiling");this.logger=e,this.start=Date.now()}done(...e){typeof e[e.length-1]=="function"&&(console.warn("Callback function no longer supported as of winston@3.0.0"),e.pop());let t=typeof e[e.length-1]=="object"?e.pop():{};return t.level=t.level||"info",t.durationMs=Date.now()-this.start,this.logger.write(t)}};LB.exports=WO});var b1=E((LLe,qB)=>{"use strict";var{Stream:Gve,Transform:$ve}=Vf(),NB=w1(),{LEVEL:io,SPLAT:jB}=Wr(),KB=jO(),Wve=UO(),zve=$O(),Hve=pO(),Yve=DB(),{warn:Jve}=B2(),Qve=p1(),Zve=/%[scdjifoO%]/g,S1=class extends $ve{constructor(e){super({objectMode:!0}),this.configure(e)}child(e){let t=this;return Object.create(t,{write:{value:function(n){let i=Object.assign({},e,n);n instanceof Error&&(i.stack=n.stack,i.message=n.message),t.write(i)}}})}configure({silent:e,format:t,defaultMeta:n,levels:i,level:s="info",exitOnError:o=!0,transports:a,colors:u,emitErrs:c,formatters:d,padLevels:h,rewriters:p,stripColors:m,exceptionHandlers:y,rejectionHandlers:_}={}){if(this.transports.length&&this.clear(),this.silent=e,this.format=t||this.format||N2()(),this.defaultMeta=n||null,this.levels=i||this.levels||Qve.npm.levels,this.level=s,this.exceptions&&this.exceptions.unhandle(),this.rejections&&this.rejections.unhandle(),this.exceptions=new Wve(this),this.rejections=new zve(this),this.profilers={},this.exitOnError=o,a&&(a=Array.isArray(a)?a:[a],a.forEach(O=>this.add(O))),u||c||d||h||p||m)throw new Error(["{ colors, emitErrs, formatters, padLevels, rewriters, stripColors } were removed in winston@3.0.0.","Use a custom winston.format(function) instead.","See: https://github.com/winstonjs/winston/tree/master/UPGRADE-3.0.md"].join(`
`));y&&this.exceptions.handle(y),_&&this.rejections.handle(_)}isLevelEnabled(e){let t=zO(this.levels,e);if(t===null)return!1;let n=zO(this.levels,this.level);return n===null?!1:!this.transports||this.transports.length===0?n>=t:this.transports.findIndex(s=>{let o=zO(this.levels,s.level);return o===null&&(o=n),o>=t})!==-1}log(e,t,...n){if(arguments.length===1)return e[io]=e.level,this._addDefaultMeta(e),this.write(e),this;if(arguments.length===2)return t&&typeof t=="object"?(t[io]=t.level=e,this._addDefaultMeta(t),this.write(t),this):(t={[io]:e,level:e,message:t},this._addDefaultMeta(t),this.write(t),this);let[i]=n;if(typeof i=="object"&&i!==null&&!(t&&t.match&&t.match(Zve))){let o=Object.assign({},this.defaultMeta,i,{[io]:e,[jB]:n,level:e,message:t});return i.message&&(o.message=`${o.message} ${i.message}`),i.stack&&(o.stack=i.stack),this.write(o),this}return this.write(Object.assign({},this.defaultMeta,{[io]:e,[jB]:n,level:e,message:t})),this}_transform(e,t,n){if(this.silent)return n();e[io]||(e[io]=e.level),!this.levels[e[io]]&&this.levels[e[io]]!==0&&console.error("[winston] Unknown logger level: %s",e[io]),this._readableState.pipes||console.error("[winston] Attempt to write logs with no transports, which can increase memory usage: %j",e);try{this.push(this.format.transform(e,this.format.options))}finally{this._writableState.sync=!1,n()}}_final(e){let t=this.transports.slice();NB(t,(n,i)=>{if(!n||n.finished)return setImmediate(i);n.once("finish",i),n.end()},e)}add(e){let t=!KB(e)||e.log.length>2?new Hve({transport:e}):e;if(!t._writableState||!t._writableState.objectMode)throw new Error("Transports must WritableStreams in objectMode. Set { objectMode: true }.");return this._onEvent("error",t),this._onEvent("warn",t),this.pipe(t),e.handleExceptions&&this.exceptions.handle(),e.handleRejections&&this.rejections.handle(),this}remove(e){if(!e)return this;let t=e;return(!KB(e)||e.log.length>2)&&(t=this.transports.filter(n=>n.transport===e)[0]),t&&this.unpipe(t),this}clear(){return this.unpipe(),this}close(){return this.exceptions.unhandle(),this.rejections.unhandle(),this.clear(),this.emit("close"),this}setLevels(){Jve.deprecated("setLevels")}query(e,t){typeof e=="function"&&(t=e,e={}),e=e||{};let n={},i=Object.assign({},e.query||{});function s(a,u){e.query&&typeof a.formatQuery=="function"&&(e.query=a.formatQuery(i)),a.query(e,(c,d)=>{if(c)return u(c);typeof a.formatResults=="function"&&(d=a.formatResults(d,e.format)),u(null,d)})}function o(a,u){s(a,(c,d)=>{u&&(d=c||d,d&&(n[a.name]=d),u()),u=null})}NB(this.transports.filter(a=>!!a.query),o,()=>t(null,n))}stream(e={}){let t=new Gve,n=[];return t._streams=n,t.destroy=()=>{let i=n.length;for(;i--;)n[i].destroy()},this.transports.filter(i=>!!i.stream).forEach(i=>{let s=i.stream(e);s&&(n.push(s),s.on("log",o=>{o.transport=o.transport||[],o.transport.push(i.name),t.emit("log",o)}),s.on("error",o=>{o.transport=o.transport||[],o.transport.push(i.name),t.emit("error",o)}))}),t}startTimer(){return new Yve(this)}profile(e,...t){let n=Date.now();if(this.profilers[e]){let i=this.profilers[e];delete this.profilers[e],typeof t[t.length-2]=="function"&&(console.warn("Callback function no longer supported as of winston@3.0.0"),t.pop());let s=typeof t[t.length-1]=="object"?t.pop():{};return s.level=s.level||"info",s.durationMs=n-i,s.message=s.message||e,this.write(s)}return this.profilers[e]=n,this}handleExceptions(...e){console.warn("Deprecated: .handleExceptions() will be removed in winston@4. Use .exceptions.handle()"),this.exceptions.handle(...e)}unhandleExceptions(...e){console.warn("Deprecated: .unhandleExceptions() will be removed in winston@4. Use .exceptions.unhandle()"),this.exceptions.unhandle(...e)}cli(){throw new Error(["Logger.cli() was removed in winston@3.0.0","Use a custom winston.formats.cli() instead.","See: https://github.com/winstonjs/winston/tree/master/UPGRADE-3.0.md"].join(`
`))}_onEvent(e,t){function n(i){e==="error"&&!this.transports.includes(t)&&this.add(t),this.emit(e,i,t)}t["__winston"+e]||(t["__winston"+e]=n.bind(this),t.on(e,t["__winston"+e]))}_addDefaultMeta(e){this.defaultMeta&&Object.assign(e,this.defaultMeta)}};function zO(r,e){let t=r[e];return!t&&t!==0?null:t}Object.defineProperty(S1.prototype,"transports",{configurable:!1,enumerable:!0,get(){let{pipes:r}=this._readableState;return Array.isArray(r)?r:[r].filter(Boolean)}});qB.exports=S1});var HO=E((DLe,FB)=>{"use strict";var{LEVEL:Xve}=Wr(),e1e=p1(),t1e=b1(),r1e=Ap()("winston:create-logger");function n1e(r){return"is"+r.charAt(0).toUpperCase()+r.slice(1)+"Enabled"}FB.exports=function(r={}){r.levels=r.levels||e1e.npm.levels;class e extends t1e{constructor(i){super(i)}}let t=new e(r);return Object.keys(r.levels).forEach(function(n){if(r1e('Define prototype method for "%s"',n),n==="log"){console.warn('Level "log" not defined: conflicts with the method "log". Use a different level name.');return}e.prototype[n]=function(...i){let s=this||t;if(i.length===1){let[o]=i,a=o&&o.message&&o||{message:o};return a.level=a[Xve]=n,s._addDefaultMeta(a),s.write(a),this||t}return i.length===0?(s.log(n,""),s):s.log(n,...i)},e.prototype[n1e(n)]=function(){return(this||t).isLevelEnabled(n)}}),t}});var BB=E((jLe,VB)=>{"use strict";var i1e=HO();VB.exports=class{constructor(e={}){this.loggers=new Map,this.options=e}add(e,t){if(!this.loggers.has(e)){t=Object.assign({},t||this.options);let n=t.transports||this.options.transports;n?t.transports=Array.isArray(n)?n.slice():[n]:t.transports=[];let i=i1e(t);i.on("close",()=>this._delete(e)),this.loggers.set(e,i)}return this.loggers.get(e)}get(e,t){return this.add(e,t)}has(e){return!!this.loggers.has(e)}close(e){if(e)return this._removeLogger(e);this.loggers.forEach((t,n)=>this._removeLogger(n))}_removeLogger(e){if(!this.loggers.has(e))return;this.loggers.get(e).close(),this._delete(e)}_delete(e){this.loggers.delete(e)}}});var GB=E(Wt=>{"use strict";var UB=V2(),{warn:Lp}=B2();Wt.version=EF().version;Wt.transports=vB();Wt.config=p1();Wt.addColors=UB.levels;Wt.format=UB.format;Wt.createLogger=HO();Wt.Logger=b1();Wt.ExceptionHandler=UO();Wt.RejectionHandler=$O();Wt.Container=BB();Wt.Transport=Zu();Wt.loggers=new Wt.Container;var Yo=Wt.createLogger();Object.keys(Wt.config.npm.levels).concat(["log","query","stream","add","remove","clear","profile","startTimer","handleExceptions","unhandleExceptions","handleRejections","unhandleRejections","configure","child"]).forEach(r=>Wt[r]=(...e)=>Yo[r](...e));Object.defineProperty(Wt,"level",{get(){return Yo.level},set(r){Yo.level=r}});Object.defineProperty(Wt,"exceptions",{get(){return Yo.exceptions}});["exitOnError"].forEach(r=>{Object.defineProperty(Wt,r,{get(){return Yo[r]},set(e){Yo[r]=e}})});Object.defineProperty(Wt,"default",{get(){return{exceptionHandlers:Yo.exceptionHandlers,rejectionHandlers:Yo.rejectionHandlers,transports:Yo.transports}}});Lp.deprecated(Wt,"setLevels");Lp.forFunctions(Wt,"useFormat",["cli"]);Lp.forProperties(Wt,"useFormat",["padLevels","stripColors"]);Lp.forFunctions(Wt,"deprecated",["addRewriter","addFilter","clone","extend"]);Lp.forProperties(Wt,"deprecated",["emitErrs","levelLength"])});var sI=E(JB=>{"use strict";JB.parse=function(r,e){return new iI(r,e).parse()};var iI=class r{constructor(e,t){this.source=e,this.transform=t||g1e,this.position=0,this.entries=[],this.recorded=[],this.dimension=0}isEof(){return this.position>=this.source.length}nextCharacter(){var e=this.source[this.position++];return e==="\\"?{value:this.source[this.position++],escaped:!0}:{value:e,escaped:!1}}record(e){this.recorded.push(e)}newEntry(e){var t;(this.recorded.length>0||e)&&(t=this.recorded.join(""),t==="NULL"&&!e&&(t=null),t!==null&&(t=this.transform(t)),this.entries.push(t),this.recorded=[])}consumeDimensions(){if(this.source[0]==="[")for(;!this.isEof();){var e=this.nextCharacter();if(e.value==="=")break}}parse(e){var t,n,i;for(this.consumeDimensions();!this.isEof();)if(t=this.nextCharacter(),t.value==="{"&&!i)this.dimension++,this.dimension>1&&(n=new r(this.source.substr(this.position-1),this.transform),this.entries.push(n.parse(!0)),this.position+=n.position-2);else if(t.value==="}"&&!i){if(this.dimension--,!this.dimension&&(this.newEntry(),e))return this.entries}else t.value==='"'&&!t.escaped?(i&&this.newEntry(!0),i=!i):t.value===","&&!i?this.newEntry():this.record(t.value);if(this.dimension!==0)throw new Error("array dimension not balanced");return this.entries}};function g1e(r){return r}});var oI=E((dDe,QB)=>{var y1e=sI();QB.exports={create:function(r,e){return{parse:function(){return y1e.parse(r,e)}}}}});var e8=E((hDe,XB)=>{"use strict";var v1e=/(\d{1,})-(\d{2})-(\d{2}) (\d{2}):(\d{2}):(\d{2})(\.\d{1,})?.*?( BC)?$/,w1e=/^(\d{1,})-(\d{2})-(\d{2})( BC)?$/,b1e=/([Z+-])(\d{2})?:?(\d{2})?:?(\d{2})?/,S1e=/^-?infinity$/;XB.exports=function(e){if(S1e.test(e))return Number(e.replace("i","I"));var t=v1e.exec(e);if(!t)return _1e(e)||null;var n=!!t[8],i=parseInt(t[1],10);n&&(i=ZB(i));var s=parseInt(t[2],10)-1,o=t[3],a=parseInt(t[4],10),u=parseInt(t[5],10),c=parseInt(t[6],10),d=t[7];d=d?1e3*parseFloat(d):0;var h,p=x1e(e);return p!=null?(h=new Date(Date.UTC(i,s,o,a,u,c,d)),aI(i)&&h.setUTCFullYear(i),p!==0&&h.setTime(h.getTime()-p)):(h=new Date(i,s,o,a,u,c,d),aI(i)&&h.setFullYear(i)),h};function _1e(r){var e=w1e.exec(r);if(e){var t=parseInt(e[1],10),n=!!e[4];n&&(t=ZB(t));var i=parseInt(e[2],10)-1,s=e[3],o=new Date(t,i,s);return aI(t)&&o.setFullYear(t),o}}function x1e(r){if(r.endsWith("+00"))return 0;var e=b1e.exec(r.split(" ")[1]);if(e){var t=e[1];if(t==="Z")return 0;var n=t==="-"?-1:1,i=parseInt(e[2],10)*3600+parseInt(e[3]||0,10)*60+parseInt(e[4]||0,10);return i*n*1e3}}function ZB(r){return-(r-1)}function aI(r){return r>=0&&r<100}});var r8=E((pDe,t8)=>{t8.exports=O1e;var E1e=Object.prototype.hasOwnProperty;function O1e(r){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var n in t)E1e.call(t,n)&&(r[n]=t[n])}return r}});var s8=E((mDe,i8)=>{"use strict";var I1e=r8();i8.exports=zf;function zf(r){if(!(this instanceof zf))return new zf(r);I1e(this,K1e(r))}var C1e=["seconds","minutes","hours","days","months","years"];zf.prototype.toPostgres=function(){var r=C1e.filter(this.hasOwnProperty,this);return this.milliseconds&&r.indexOf("seconds")<0&&r.push("seconds"),r.length===0?"0":r.map(function(e){var t=this[e]||0;return e==="seconds"&&this.milliseconds&&(t=(t+this.milliseconds/1e3).toFixed(6).replace(/\.?0+$/,"")),t+" "+e},this).join(" ")};var T1e={years:"Y",months:"M",days:"D",hours:"H",minutes:"M",seconds:"S"},A1e=["years","months","days"],M1e=["hours","minutes","seconds"];zf.prototype.toISOString=zf.prototype.toISO=function(){var r=A1e.map(t,this).join(""),e=M1e.map(t,this).join("");return"P"+r+"T"+e;function t(n){var i=this[n]||0;return n==="seconds"&&this.milliseconds&&(i=(i+this.milliseconds/1e3).toFixed(6).replace(/0+$/,"")),i+T1e[n]}};var lI="([+-]?\\d+)",k1e=lI+"\\s+years?",P1e=lI+"\\s+mons?",R1e=lI+"\\s+days?",L1e="([+-])?([\\d]*):(\\d\\d):(\\d\\d)\\.?(\\d{1,6})?",D1e=new RegExp([k1e,P1e,R1e,L1e].map(function(r){return"("+r+")?"}).join("\\s*")),n8={years:2,months:4,days:6,hours:9,minutes:10,seconds:11,milliseconds:12},N1e=["hours","minutes","seconds","milliseconds"];function j1e(r){var e=r+"000000".slice(r.length);return parseInt(e,10)/1e3}function K1e(r){if(!r)return{};var e=D1e.exec(r),t=e[8]==="-";return Object.keys(n8).reduce(function(n,i){var s=n8[i],o=e[s];return!o||(o=i==="milliseconds"?j1e(o):parseInt(o,10),!o)||(t&&~N1e.indexOf(i)&&(o*=-1),n[i]=o),n},{})}});var a8=E((gDe,o8)=>{"use strict";o8.exports=function(e){if(/^\\x/.test(e))return new Buffer(e.substr(2),"hex");for(var t="",n=0;n<e.length;)if(e[n]!=="\\")t+=e[n],++n;else if(/[0-7]{3}/.test(e.substr(n+1,3)))t+=String.fromCharCode(parseInt(e.substr(n+1,3),8)),n+=4;else{for(var i=1;n+i<e.length&&e[n+i]==="\\";)i++;for(var s=0;s<Math.floor(i/2);++s)t+="\\";n+=Math.floor(i/2)*2}return new Buffer(t,"binary")}});var p8=E((yDe,h8)=>{var Np=sI(),jp=oI(),E1=e8(),u8=s8(),c8=a8();function O1(r){return function(t){return t===null?t:r(t)}}function f8(r){return r===null?r:r==="TRUE"||r==="t"||r==="true"||r==="y"||r==="yes"||r==="on"||r==="1"}function q1e(r){return r?Np.parse(r,f8):null}function F1e(r){return parseInt(r,10)}function uI(r){return r?Np.parse(r,O1(F1e)):null}function V1e(r){return r?Np.parse(r,O1(function(e){return d8(e).trim()})):null}var B1e=function(r){if(!r)return null;var e=jp.create(r,function(t){return t!==null&&(t=hI(t)),t});return e.parse()},cI=function(r){if(!r)return null;var e=jp.create(r,function(t){return t!==null&&(t=parseFloat(t)),t});return e.parse()},is=function(r){if(!r)return null;var e=jp.create(r);return e.parse()},fI=function(r){if(!r)return null;var e=jp.create(r,function(t){return t!==null&&(t=E1(t)),t});return e.parse()},U1e=function(r){if(!r)return null;var e=jp.create(r,function(t){return t!==null&&(t=u8(t)),t});return e.parse()},G1e=function(r){return r?Np.parse(r,O1(c8)):null},dI=function(r){return parseInt(r,10)},d8=function(r){var e=String(r);return/^\d+$/.test(e)?e:r},l8=function(r){return r?Np.parse(r,O1(JSON.parse)):null},hI=function(r){return r[0]!=="("?null:(r=r.substring(1,r.length-1).split(","),{x:parseFloat(r[0]),y:parseFloat(r[1])})},$1e=function(r){if(r[0]!=="<"&&r[1]!=="(")return null;for(var e="(",t="",n=!1,i=2;i<r.length-1;i++){if(n||(e+=r[i]),r[i]===")"){n=!0;continue}else if(!n)continue;r[i]!==","&&(t+=r[i])}var s=hI(e);return s.radius=parseFloat(t),s},W1e=function(r){r(20,d8),r(21,dI),r(23,dI),r(26,dI),r(700,parseFloat),r(701,parseFloat),r(16,f8),r(1082,E1),r(1114,E1),r(1184,E1),r(600,hI),r(651,is),r(718,$1e),r(1e3,q1e),r(1001,G1e),r(1005,uI),r(1007,uI),r(1028,uI),r(1016,V1e),r(1017,B1e),r(1021,cI),r(1022,cI),r(1231,cI),r(1014,is),r(1015,is),r(1008,is),r(1009,is),r(1040,is),r(1041,is),r(1115,fI),r(1182,fI),r(1185,fI),r(1186,u8),r(1187,U1e),r(17,c8),r(114,JSON.parse.bind(JSON)),r(3802,JSON.parse.bind(JSON)),r(199,l8),r(3807,l8),r(3907,is),r(2951,is),r(791,is),r(1183,is),r(1270,is)};h8.exports={init:W1e}});var g8=E((vDe,m8)=>{"use strict";var oi=1e6;function z1e(r){var e=r.readInt32BE(0),t=r.readUInt32BE(4),n="";e<0&&(e=~e+(t===0),t=~t+1>>>0,n="-");var i="",s,o,a,u,c,d;{if(s=e%oi,e=e/oi>>>0,o=4294967296*s+t,t=o/oi>>>0,a=""+(o-oi*t),t===0&&e===0)return n+a+i;for(u="",c=6-a.length,d=0;d<c;d++)u+="0";i=u+a+i}{if(s=e%oi,e=e/oi>>>0,o=4294967296*s+t,t=o/oi>>>0,a=""+(o-oi*t),t===0&&e===0)return n+a+i;for(u="",c=6-a.length,d=0;d<c;d++)u+="0";i=u+a+i}{if(s=e%oi,e=e/oi>>>0,o=4294967296*s+t,t=o/oi>>>0,a=""+(o-oi*t),t===0&&e===0)return n+a+i;for(u="",c=6-a.length,d=0;d<c;d++)u+="0";i=u+a+i}return s=e%oi,o=4294967296*s+t,a=""+o%oi,n+a+i}m8.exports=z1e});var S8=E((wDe,b8)=>{var H1e=g8(),pr=function(r,e,t,n,i){t=t||0,n=n||!1,i=i||function(m,y,_){return m*Math.pow(2,_)+y};var s=t>>3,o=function(m){return n?~m&255:m},a=255,u=8-t%8;e<u&&(a=255<<8-e&255,u=e),t&&(a=a>>t%8);var c=0;t%8+e>=8&&(c=i(0,o(r[s])&a,u));for(var d=e+t>>3,h=s+1;h<d;h++)c=i(c,o(r[h]),8);var p=(e+t)%8;return p>0&&(c=i(c,o(r[d])>>8-p,p)),c},w8=function(r,e,t){var n=Math.pow(2,t-1)-1,i=pr(r,1),s=pr(r,t,1);if(s===0)return 0;var o=1,a=function(c,d,h){c===0&&(c=1);for(var p=1;p<=h;p++)o/=2,(d&1<<h-p)>0&&(c+=o);return c},u=pr(r,e,t+1,!1,a);return s==Math.pow(2,t+1)-1?u===0?i===0?1/0:-1/0:NaN:(i===0?1:-1)*Math.pow(2,s-n)*u},Y1e=function(r){return pr(r,1)==1?-1*(pr(r,15,1,!0)+1):pr(r,15,1)},y8=function(r){return pr(r,1)==1?-1*(pr(r,31,1,!0)+1):pr(r,31,1)},J1e=function(r){return w8(r,23,8)},Q1e=function(r){return w8(r,52,11)},Z1e=function(r){var e=pr(r,16,32);if(e==49152)return NaN;for(var t=Math.pow(1e4,pr(r,16,16)),n=0,i=[],s=pr(r,16),o=0;o<s;o++)n+=pr(r,16,64+16*o)*t,t/=1e4;var a=Math.pow(10,pr(r,16,48));return(e===0?1:-1)*Math.round(n*a)/a},v8=function(r,e){var t=pr(e,1),n=pr(e,63,1),i=new Date((t===0?1:-1)*n/1e3+9466848e5);return r||i.setTime(i.getTime()+i.getTimezoneOffset()*6e4),i.usec=n%1e3,i.getMicroSeconds=function(){return this.usec},i.setMicroSeconds=function(s){this.usec=s},i.getUTCMicroSeconds=function(){return this.usec},i},Kp=function(r){for(var e=pr(r,32),t=pr(r,32,32),n=pr(r,32,64),i=96,s=[],o=0;o<e;o++)s[o]=pr(r,32,i),i+=32,i+=32;var a=function(c){var d=pr(r,32,i);if(i+=32,d==4294967295)return null;var h;if(c==23||c==20)return h=pr(r,d*8,i),i+=d*8,h;if(c==25)return h=r.toString(this.encoding,i>>3,(i+=d<<3)>>3),h;console.log("ERROR: ElementType not implemented: "+c)},u=function(c,d){var h=[],p;if(c.length>1){var m=c.shift();for(p=0;p<m;p++)h[p]=u(c,d);c.unshift(m)}else for(p=0;p<c[0];p++)h[p]=a(d);return h};return u(s,n)},X1e=function(r){return r.toString("utf8")},ewe=function(r){return r===null?null:pr(r,8)>0},twe=function(r){r(20,H1e),r(21,Y1e),r(23,y8),r(26,y8),r(1700,Z1e),r(700,J1e),r(701,Q1e),r(16,ewe),r(1114,v8.bind(null,!1)),r(1184,v8.bind(null,!0)),r(1e3,Kp),r(1007,Kp),r(1016,Kp),r(1008,Kp),r(1009,Kp),r(25,X1e)};b8.exports={init:twe}});var x8=E((bDe,_8)=>{_8.exports={BOOL:16,BYTEA:17,CHAR:18,INT8:20,INT2:21,INT4:23,REGPROC:24,TEXT:25,OID:26,TID:27,XID:28,CID:29,JSON:114,XML:142,PG_NODE_TREE:194,SMGR:210,PATH:602,POLYGON:604,CIDR:650,FLOAT4:700,FLOAT8:701,ABSTIME:702,RELTIME:703,TINTERVAL:704,CIRCLE:718,MACADDR8:774,MONEY:790,MACADDR:829,INET:869,ACLITEM:1033,BPCHAR:1042,VARCHAR:1043,DATE:1082,TIME:1083,TIMESTAMP:1114,TIMESTAMPTZ:1184,INTERVAL:1186,TIMETZ:1266,BIT:1560,VARBIT:1562,NUMERIC:1700,REFCURSOR:1790,REGPROCEDURE:2202,REGOPER:2203,REGOPERATOR:2204,REGCLASS:2205,REGTYPE:2206,UUID:2950,TXID_SNAPSHOT:2970,PG_LSN:3220,PG_NDISTINCT:3361,PG_DEPENDENCIES:3402,TSVECTOR:3614,TSQUERY:3615,GTSVECTOR:3642,REGCONFIG:3734,REGDICTIONARY:3769,JSONB:3802,REGNAMESPACE:4089,REGROLE:4096}});var Vp=E(Fp=>{var rwe=p8(),nwe=S8(),iwe=oI(),swe=x8();Fp.getTypeParser=owe;Fp.setTypeParser=awe;Fp.arrayParser=iwe;Fp.builtins=swe;var qp={text:{},binary:{}};function E8(r){return String(r)}function owe(r,e){return e=e||"text",qp[e]&&qp[e][r]||E8}function awe(r,e,t){typeof e=="function"&&(t=e,e="text"),qp[e][r]=t}rwe.init(function(r,e){qp.text[r]=e});nwe.init(function(r,e){qp.binary[r]=e})});var Bp=E((_De,pI)=>{"use strict";pI.exports={host:"localhost",user:process.platform==="win32"?process.env.USERNAME:process.env.USER,database:void 0,password:null,connectionString:void 0,port:5432,rows:0,binary:!1,max:10,idleTimeoutMillis:3e4,client_encoding:"",ssl:!1,application_name:void 0,fallback_application_name:void 0,options:void 0,parseInputDatesAsUTC:!1,statement_timeout:!1,lock_timeout:!1,idle_in_transaction_session_timeout:!1,query_timeout:!1,connect_timeout:0,keepalives:1,keepalives_idle:0};var Hf=Vp(),lwe=Hf.getTypeParser(20,"text"),uwe=Hf.getTypeParser(1016,"text");pI.exports.__defineSetter__("parseInt8",function(r){Hf.setTypeParser(20,"text",r?Hf.getTypeParser(23,"text"):lwe),Hf.setTypeParser(1016,"text",r?Hf.getTypeParser(1007,"text"):uwe)})});var Up=E((xDe,I8)=>{"use strict";var cwe=Bp();function fwe(r){var e=r.replace(/\\/g,"\\\\").replace(/"/g,'\\"');return'"'+e+'"'}function O8(r){for(var e="{",t=0;t<r.length;t++)t>0&&(e=e+","),r[t]===null||typeof r[t]>"u"?e=e+"NULL":Array.isArray(r[t])?e=e+O8(r[t]):r[t]instanceof Buffer?e+="\\\\x"+r[t].toString("hex"):e+=fwe(I1(r[t]));return e=e+"}",e}var I1=function(r,e){if(r==null)return null;if(r instanceof Buffer)return r;if(ArrayBuffer.isView(r)){var t=Buffer.from(r.buffer,r.byteOffset,r.byteLength);return t.length===r.byteLength?t:t.slice(r.byteOffset,r.byteOffset+r.byteLength)}return r instanceof Date?cwe.parseInputDatesAsUTC?pwe(r):hwe(r):Array.isArray(r)?O8(r):typeof r=="object"?dwe(r,e):r.toString()};function dwe(r,e){if(r&&typeof r.toPostgres=="function"){if(e=e||[],e.indexOf(r)!==-1)throw new Error('circular reference detected while preparing "'+r+'" for query');return e.push(r),I1(r.toPostgres(I1),e)}return JSON.stringify(r)}function kn(r,e){for(r=""+r;r.length<e;)r="0"+r;return r}function hwe(r){var e=-r.getTimezoneOffset(),t=r.getFullYear(),n=t<1;n&&(t=Math.abs(t)+1);var i=kn(t,4)+"-"+kn(r.getMonth()+1,2)+"-"+kn(r.getDate(),2)+"T"+kn(r.getHours(),2)+":"+kn(r.getMinutes(),2)+":"+kn(r.getSeconds(),2)+"."+kn(r.getMilliseconds(),3);return e<0?(i+="-",e*=-1):i+="+",i+=kn(Math.floor(e/60),2)+":"+kn(e%60,2),n&&(i+=" BC"),i}function pwe(r){var e=r.getUTCFullYear(),t=e<1;t&&(e=Math.abs(e)+1);var n=kn(e,4)+"-"+kn(r.getUTCMonth()+1,2)+"-"+kn(r.getUTCDate(),2)+"T"+kn(r.getUTCHours(),2)+":"+kn(r.getUTCMinutes(),2)+":"+kn(r.getUTCSeconds(),2)+"."+kn(r.getUTCMilliseconds(),3);return n+="+00:00",t&&(n+=" BC"),n}function mwe(r,e,t){return r=typeof r=="string"?{text:r}:r,e&&(typeof e=="function"?r.callback=e:r.values=e),t&&(r.callback=t),r}var gwe=function(r){return'"'+r.replace(/"/g,'""')+'"'},ywe=function(r){for(var e=!1,t="'",n=0;n<r.length;n++){var i=r[n];i==="'"?t+=i+i:i==="\\"?(t+=i+i,e=!0):t+=i}return t+="'",e===!0&&(t=" E"+t),t};I8.exports={prepareValue:function(e){return I1(e)},normalizeQueryConfig:mwe,escapeIdentifier:gwe,escapeLiteral:ywe}});var T8=E((EDe,C8)=>{"use strict";var Gp=require("crypto");function mI(r){return Gp.createHash("md5").update(r,"utf-8").digest("hex")}function vwe(r,e,t){var n=mI(e+r),i=mI(Buffer.concat([Buffer.from(n),t]));return"md5"+i}function wwe(r){return Gp.createHash("sha256").update(r).digest()}function bwe(r,e){return Gp.createHmac("sha256",r).update(e).digest()}async function Swe(r,e,t){return Gp.pbkdf2Sync(r,e,t,32,"sha256")}C8.exports={postgresMd5PasswordHash:vwe,randomBytes:Gp.randomBytes,deriveKey:Swe,sha256:wwe,hmacSha256:bwe,md5:mI}});var P8=E((ODe,k8)=>{var A8=require("crypto");k8.exports={postgresMd5PasswordHash:xwe,randomBytes:_we,deriveKey:Iwe,sha256:Ewe,hmacSha256:Owe,md5:gI};var M8=A8.webcrypto||globalThis.crypto,Yf=M8.subtle,yI=new TextEncoder;function _we(r){return M8.getRandomValues(Buffer.alloc(r))}async function gI(r){try{return A8.createHash("md5").update(r,"utf-8").digest("hex")}catch{let t=typeof r=="string"?yI.encode(r):r,n=await Yf.digest("MD5",t);return Array.from(new Uint8Array(n)).map(i=>i.toString(16).padStart(2,"0")).join("")}}async function xwe(r,e,t){var n=await gI(e+r),i=await gI(Buffer.concat([Buffer.from(n),t]));return"md5"+i}async function Ewe(r){return await Yf.digest("SHA-256",r)}async function Owe(r,e){let t=await Yf.importKey("raw",r,{name:"HMAC",hash:"SHA-256"},!1,["sign"]);return await Yf.sign("HMAC",t,yI.encode(e))}async function Iwe(r,e,t){let n=await Yf.importKey("raw",yI.encode(r),"PBKDF2",!1,["deriveBits"]),i={name:"PBKDF2",hash:"SHA-256",salt:e,iterations:t};return await Yf.deriveBits(i,n,32*8,["deriveBits"])}});var wI=E((IDe,vI)=>{"use strict";var Cwe=parseInt(process.versions&&process.versions.node&&process.versions.node.split(".")[0])<15;Cwe?vI.exports=T8():vI.exports=P8()});var N8=E((CDe,D8)=>{"use strict";var rc=wI();function Twe(r){if(r.indexOf("SCRAM-SHA-256")===-1)throw new Error("SASL: Only mechanism SCRAM-SHA-256 is currently supported");let e=rc.randomBytes(18).toString("base64");return{mechanism:"SCRAM-SHA-256",clientNonce:e,response:"n,,n=*,r="+e,message:"SASLInitialResponse"}}async function Awe(r,e,t){if(r.message!=="SASLInitialResponse")throw new Error("SASL: Last message was not SASLInitialResponse");if(typeof e!="string")throw new Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: client password must be a string");if(e==="")throw new Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: client password must be a non-empty string");if(typeof t!="string")throw new Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: serverData must be a string");let n=Pwe(t);if(n.nonce.startsWith(r.clientNonce)){if(n.nonce.length===r.clientNonce.length)throw new Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: server nonce is too short")}else throw new Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: server nonce does not start with client nonce");var i="n=*,r="+r.clientNonce,s="r="+n.nonce+",s="+n.salt+",i="+n.iteration,o="c=biws,r="+n.nonce,a=i+","+s+","+o,u=Buffer.from(n.salt,"base64"),c=await rc.deriveKey(e,u,n.iteration),d=await rc.hmacSha256(c,"Client Key"),h=await rc.sha256(d),p=await rc.hmacSha256(h,a),m=Lwe(Buffer.from(d),Buffer.from(p)).toString("base64"),y=await rc.hmacSha256(c,"Server Key"),_=await rc.hmacSha256(y,a);r.message="SASLResponse",r.serverSignature=Buffer.from(_).toString("base64"),r.response=o+",p="+m}function Mwe(r,e){if(r.message!=="SASLResponse")throw new Error("SASL: Last message was not SASLResponse");if(typeof e!="string")throw new Error("SASL: SCRAM-SERVER-FINAL-MESSAGE: serverData must be a string");let{serverSignature:t}=Rwe(e);if(t!==r.serverSignature)throw new Error("SASL: SCRAM-SERVER-FINAL-MESSAGE: server signature does not match")}function kwe(r){if(typeof r!="string")throw new TypeError("SASL: text must be a string");return r.split("").map((e,t)=>r.charCodeAt(t)).every(e=>e>=33&&e<=43||e>=45&&e<=126)}function R8(r){return/^(?:[a-zA-Z0-9+/]{4})*(?:[a-zA-Z0-9+/]{2}==|[a-zA-Z0-9+/]{3}=)?$/.test(r)}function L8(r){if(typeof r!="string")throw new TypeError("SASL: attribute pairs text must be a string");return new Map(r.split(",").map(e=>{if(!/^.=/.test(e))throw new Error("SASL: Invalid attribute pair entry");let t=e[0],n=e.substring(2);return[t,n]}))}function Pwe(r){let e=L8(r),t=e.get("r");if(t){if(!kwe(t))throw new Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: nonce must only contain printable characters")}else throw new Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: nonce missing");let n=e.get("s");if(n){if(!R8(n))throw new Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: salt must be base64")}else throw new Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: salt missing");let i=e.get("i");if(i){if(!/^[1-9][0-9]*$/.test(i))throw new Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: invalid iteration count")}else throw new Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: iteration missing");let s=parseInt(i,10);return{nonce:t,salt:n,iteration:s}}function Rwe(r){let t=L8(r).get("v");if(t){if(!R8(t))throw new Error("SASL: SCRAM-SERVER-FINAL-MESSAGE: server signature must be base64")}else throw new Error("SASL: SCRAM-SERVER-FINAL-MESSAGE: server signature is missing");return{serverSignature:t}}function Lwe(r,e){if(!Buffer.isBuffer(r))throw new TypeError("first argument must be a Buffer");if(!Buffer.isBuffer(e))throw new TypeError("second argument must be a Buffer");if(r.length!==e.length)throw new Error("Buffer lengths must match");if(r.length===0)throw new Error("Buffers cannot be empty");return Buffer.from(r.map((t,n)=>r[n]^e[n]))}D8.exports={startSession:Twe,continueSession:Awe,finalizeSession:Mwe}});var bI=E((TDe,j8)=>{"use strict";var Dwe=Vp();function C1(r){this._types=r||Dwe,this.text={},this.binary={}}C1.prototype.getOverrides=function(r){switch(r){case"text":return this.text;case"binary":return this.binary;default:return{}}};C1.prototype.setTypeParser=function(r,e,t){typeof e=="function"&&(t=e,e="text"),this.getOverrides(e)[r]=t};C1.prototype.getTypeParser=function(r,e){return e=e||"text",this.getOverrides(e)[r]||this._types.getTypeParser(r,e)};j8.exports=C1});var q8=E((ADe,K8)=>{"use strict";function SI(r){if(r.charAt(0)==="/"){let a=r.split(" ");return{host:a[0],database:a[1]}}let e={},t,n=!1;/ |%[^a-f0-9]|%[a-f0-9][^a-f0-9]/i.test(r)&&(r=encodeURI(r).replace(/\%25(\d\d)/g,"%$1"));try{t=new URL(r,"postgres://base")}catch{t=new URL(r.replace("@/","@___DUMMY___/"),"postgres://base"),n=!0}for(let a of t.searchParams.entries())e[a[0]]=a[1];if(e.user=e.user||decodeURIComponent(t.username),e.password=e.password||decodeURIComponent(t.password),t.protocol=="socket:")return e.host=decodeURI(t.pathname),e.database=t.searchParams.get("db"),e.client_encoding=t.searchParams.get("encoding"),e;let i=n?"":t.hostname;e.host?i&&/^%2f/i.test(i)&&(t.pathname=i+t.pathname):e.host=decodeURIComponent(i),e.port||(e.port=t.port);let s=t.pathname.slice(1)||null;e.database=s?decodeURI(s):null,(e.ssl==="true"||e.ssl==="1")&&(e.ssl=!0),e.ssl==="0"&&(e.ssl=!1),(e.sslcert||e.sslkey||e.sslrootcert||e.sslmode)&&(e.ssl={});let o=e.sslcert||e.sslkey||e.sslrootcert?require("fs"):null;switch(e.sslcert&&(e.ssl.cert=o.readFileSync(e.sslcert).toString()),e.sslkey&&(e.ssl.key=o.readFileSync(e.sslkey).toString()),e.sslrootcert&&(e.ssl.ca=o.readFileSync(e.sslrootcert).toString()),e.sslmode){case"disable":{e.ssl=!1;break}case"prefer":case"require":case"verify-ca":case"verify-full":break;case"no-verify":{e.ssl.rejectUnauthorized=!1;break}}return e}K8.exports=SI;SI.parse=SI});var xI=E((MDe,B8)=>{"use strict";var Nwe=require("dns"),V8=Bp(),F8=q8().parse,Wn=function(r,e,t){return t===void 0?t=process.env["PG"+r.toUpperCase()]:t===!1||(t=process.env[t]),e[r]||t||V8[r]},jwe=function(){switch(process.env.PGSSLMODE){case"disable":return!1;case"prefer":case"require":case"verify-ca":case"verify-full":return!0;case"no-verify":return{rejectUnauthorized:!1}}return V8.ssl},Jf=function(r){return"'"+(""+r).replace(/\\/g,"\\\\").replace(/'/g,"\\'")+"'"},ss=function(r,e,t){var n=e[t];n!=null&&r.push(t+"="+Jf(n))},_I=class{constructor(e){e=typeof e=="string"?F8(e):e||{},e.connectionString&&(e=Object.assign({},e,F8(e.connectionString))),this.user=Wn("user",e),this.database=Wn("database",e),this.database===void 0&&(this.database=this.user),this.port=parseInt(Wn("port",e),10),this.host=Wn("host",e),Object.defineProperty(this,"password",{configurable:!0,enumerable:!1,writable:!0,value:Wn("password",e)}),this.binary=Wn("binary",e),this.options=Wn("options",e),this.ssl=typeof e.ssl>"u"?jwe():e.ssl,typeof this.ssl=="string"&&this.ssl==="true"&&(this.ssl=!0),this.ssl==="no-verify"&&(this.ssl={rejectUnauthorized:!1}),this.ssl&&this.ssl.key&&Object.defineProperty(this.ssl,"key",{enumerable:!1}),this.client_encoding=Wn("client_encoding",e),this.replication=Wn("replication",e),this.isDomainSocket=!(this.host||"").indexOf("/"),this.application_name=Wn("application_name",e,"PGAPPNAME"),this.fallback_application_name=Wn("fallback_application_name",e,!1),this.statement_timeout=Wn("statement_timeout",e,!1),this.lock_timeout=Wn("lock_timeout",e,!1),this.idle_in_transaction_session_timeout=Wn("idle_in_transaction_session_timeout",e,!1),this.query_timeout=Wn("query_timeout",e,!1),e.connectionTimeoutMillis===void 0?this.connect_timeout=process.env.PGCONNECT_TIMEOUT||0:this.connect_timeout=Math.floor(e.connectionTimeoutMillis/1e3),e.keepAlive===!1?this.keepalives=0:e.keepAlive===!0&&(this.keepalives=1),typeof e.keepAliveInitialDelayMillis=="number"&&(this.keepalives_idle=Math.floor(e.keepAliveInitialDelayMillis/1e3))}getLibpqConnectionString(e){var t=[];ss(t,this,"user"),ss(t,this,"password"),ss(t,this,"port"),ss(t,this,"application_name"),ss(t,this,"fallback_application_name"),ss(t,this,"connect_timeout"),ss(t,this,"options");var n=typeof this.ssl=="object"?this.ssl:this.ssl?{sslmode:this.ssl}:{};if(ss(t,n,"sslmode"),ss(t,n,"sslca"),ss(t,n,"sslkey"),ss(t,n,"sslcert"),ss(t,n,"sslrootcert"),this.database&&t.push("dbname="+Jf(this.database)),this.replication&&t.push("replication="+Jf(this.replication)),this.host&&t.push("host="+Jf(this.host)),this.isDomainSocket)return e(null,t.join(" "));this.client_encoding&&t.push("client_encoding="+Jf(this.client_encoding)),Nwe.lookup(this.host,function(i,s){return i?e(i,null):(t.push("hostaddr="+Jf(s)),e(null,t.join(" ")))})}};B8.exports=_I});var $8=E((kDe,G8)=>{"use strict";var Kwe=Vp(),U8=/^([A-Za-z]+)(?: (\d+))?(?: (\d+))?/,EI=class{constructor(e,t){this.command=null,this.rowCount=null,this.oid=null,this.rows=[],this.fields=[],this._parsers=void 0,this._types=t,this.RowCtor=null,this.rowAsArray=e==="array",this.rowAsArray&&(this.parseRow=this._parseRowAsArray),this._prebuiltEmptyResultObject=null}addCommandComplete(e){var t;e.text?t=U8.exec(e.text):t=U8.exec(e.command),t&&(this.command=t[1],t[3]?(this.oid=parseInt(t[2],10),this.rowCount=parseInt(t[3],10)):t[2]&&(this.rowCount=parseInt(t[2],10)))}_parseRowAsArray(e){for(var t=new Array(e.length),n=0,i=e.length;n<i;n++){var s=e[n];s!==null?t[n]=this._parsers[n](s):t[n]=null}return t}parseRow(e){for(var t={...this._prebuiltEmptyResultObject},n=0,i=e.length;n<i;n++){var s=e[n],o=this.fields[n].name;s!==null&&(t[o]=this._parsers[n](s))}return t}addRow(e){this.rows.push(e)}addFields(e){this.fields=e,this.fields.length&&(this._parsers=new Array(e.length));for(var t=0;t<e.length;t++){var n=e[t];this._types?this._parsers[t]=this._types.getTypeParser(n.dataTypeID,n.format||"text"):this._parsers[t]=Kwe.getTypeParser(n.dataTypeID,n.format||"text")}this._createPrebuiltEmptyResultObject()}_createPrebuiltEmptyResultObject(){for(var e={},t=0;t<this.fields.length;t++)e[this.fields[t].name]=null;this._prebuiltEmptyResultObject={...e}}};G8.exports=EI});var Y8=E((PDe,H8)=>{"use strict";var{EventEmitter:qwe}=require("events"),W8=$8(),z8=Up(),OI=class extends qwe{constructor(e,t,n){super(),e=z8.normalizeQueryConfig(e,t,n),this.text=e.text,this.values=e.values,this.rows=e.rows,this.types=e.types,this.name=e.name,this.binary=e.binary,this.portal=e.portal||"",this.callback=e.callback,this._rowMode=e.rowMode,process.domain&&e.callback&&(this.callback=process.domain.bind(e.callback)),this._result=new W8(this._rowMode,this.types),this._results=this._result,this.isPreparedStatement=!1,this._canceledDueToError=!1,this._promise=null}requiresPreparation(){return this.name||this.rows?!0:!this.text||!this.values?!1:this.values.length>0}_checkForMultirow(){this._result.command&&(Array.isArray(this._results)||(this._results=[this._result]),this._result=new W8(this._rowMode,this.types),this._results.push(this._result))}handleRowDescription(e){this._checkForMultirow(),this._result.addFields(e.fields),this._accumulateRows=this.callback||!this.listeners("row").length}handleDataRow(e){let t;if(!this._canceledDueToError){try{t=this._result.parseRow(e.fields)}catch(n){this._canceledDueToError=n;return}this.emit("row",t,this._result),this._accumulateRows&&this._result.addRow(t)}}handleCommandComplete(e,t){this._checkForMultirow(),this._result.addCommandComplete(e),this.rows&&t.sync()}handleEmptyQuery(e){this.rows&&e.sync()}handleError(e,t){if(this._canceledDueToError&&(e=this._canceledDueToError,this._canceledDueToError=!1),this.callback)return this.callback(e);this.emit("error",e)}handleReadyForQuery(e){if(this._canceledDueToError)return this.handleError(this._canceledDueToError,e);if(this.callback)try{this.callback(null,this._results)}catch(t){process.nextTick(()=>{throw t})}this.emit("end",this._results)}submit(e){if(typeof this.text!="string"&&typeof this.name!="string")return new Error("A query must have either text or a name. Supplying neither is unsupported.");let t=e.parsedStatements[this.name];return this.text&&t&&this.text!==t?new Error(`Prepared statements must be unique - '${this.name}' was used for a different statement`):this.values&&!Array.isArray(this.values)?new Error("Query values must be an array"):(this.requiresPreparation()?this.prepare(e):e.query(this.text),null)}hasBeenParsed(e){return this.name&&e.parsedStatements[this.name]}handlePortalSuspended(e){this._getRows(e,this.rows)}_getRows(e,t){e.execute({portal:this.portal,rows:t}),t?e.flush():e.sync()}prepare(e){this.isPreparedStatement=!0,this.hasBeenParsed(e)||e.parse({text:this.text,name:this.name,types:this.types});try{e.bind({portal:this.portal,statement:this.name,values:this.values,binary:this.binary,valueMapper:z8.prepareValue})}catch(t){this.handleError(t,e);return}e.describe({type:"P",name:this.portal||""}),this._getRows(e,this.rows)}handleCopyInResponse(e){e.sendCopyFail("No source stream defined")}handleCopyData(e,t){}};H8.exports=OI});var FI=E(Be=>{"use strict";Object.defineProperty(Be,"__esModule",{value:!0});Be.NoticeMessage=Be.DataRowMessage=Be.CommandCompleteMessage=Be.ReadyForQueryMessage=Be.NotificationResponseMessage=Be.BackendKeyDataMessage=Be.AuthenticationMD5Password=Be.ParameterStatusMessage=Be.ParameterDescriptionMessage=Be.RowDescriptionMessage=Be.Field=Be.CopyResponse=Be.CopyDataMessage=Be.DatabaseError=Be.copyDone=Be.emptyQuery=Be.replicationStart=Be.portalSuspended=Be.noData=Be.closeComplete=Be.bindComplete=Be.parseComplete=void 0;Be.parseComplete={name:"parseComplete",length:5};Be.bindComplete={name:"bindComplete",length:5};Be.closeComplete={name:"closeComplete",length:5};Be.noData={name:"noData",length:5};Be.portalSuspended={name:"portalSuspended",length:5};Be.replicationStart={name:"replicationStart",length:4};Be.emptyQuery={name:"emptyQuery",length:4};Be.copyDone={name:"copyDone",length:4};var II=class extends Error{constructor(e,t,n){super(e),this.length=t,this.name=n}};Be.DatabaseError=II;var CI=class{constructor(e,t){this.length=e,this.chunk=t,this.name="copyData"}};Be.CopyDataMessage=CI;var TI=class{constructor(e,t,n,i){this.length=e,this.name=t,this.binary=n,this.columnTypes=new Array(i)}};Be.CopyResponse=TI;var AI=class{constructor(e,t,n,i,s,o,a){this.name=e,this.tableID=t,this.columnID=n,this.dataTypeID=i,this.dataTypeSize=s,this.dataTypeModifier=o,this.format=a}};Be.Field=AI;var MI=class{constructor(e,t){this.length=e,this.fieldCount=t,this.name="rowDescription",this.fields=new Array(this.fieldCount)}};Be.RowDescriptionMessage=MI;var kI=class{constructor(e,t){this.length=e,this.parameterCount=t,this.name="parameterDescription",this.dataTypeIDs=new Array(this.parameterCount)}};Be.ParameterDescriptionMessage=kI;var PI=class{constructor(e,t,n){this.length=e,this.parameterName=t,this.parameterValue=n,this.name="parameterStatus"}};Be.ParameterStatusMessage=PI;var RI=class{constructor(e,t){this.length=e,this.salt=t,this.name="authenticationMD5Password"}};Be.AuthenticationMD5Password=RI;var LI=class{constructor(e,t,n){this.length=e,this.processID=t,this.secretKey=n,this.name="backendKeyData"}};Be.BackendKeyDataMessage=LI;var DI=class{constructor(e,t,n,i){this.length=e,this.processId=t,this.channel=n,this.payload=i,this.name="notification"}};Be.NotificationResponseMessage=DI;var NI=class{constructor(e,t){this.length=e,this.status=t,this.name="readyForQuery"}};Be.ReadyForQueryMessage=NI;var jI=class{constructor(e,t){this.length=e,this.text=t,this.name="commandComplete"}};Be.CommandCompleteMessage=jI;var KI=class{constructor(e,t){this.length=e,this.fields=t,this.name="dataRow",this.fieldCount=t.length}};Be.DataRowMessage=KI;var qI=class{constructor(e,t){this.length=e,this.message=t,this.name="notice"}};Be.NoticeMessage=qI});var J8=E(T1=>{"use strict";Object.defineProperty(T1,"__esModule",{value:!0});T1.Writer=void 0;var VI=class{constructor(e=256){this.size=e,this.offset=5,this.headerPosition=0,this.buffer=Buffer.allocUnsafe(e)}ensure(e){var t=this.buffer.length-this.offset;if(t<e){var n=this.buffer,i=n.length+(n.length>>1)+e;this.buffer=Buffer.allocUnsafe(i),n.copy(this.buffer)}}addInt32(e){return this.ensure(4),this.buffer[this.offset++]=e>>>24&255,this.buffer[this.offset++]=e>>>16&255,this.buffer[this.offset++]=e>>>8&255,this.buffer[this.offset++]=e>>>0&255,this}addInt16(e){return this.ensure(2),this.buffer[this.offset++]=e>>>8&255,this.buffer[this.offset++]=e>>>0&255,this}addCString(e){if(!e)this.ensure(1);else{var t=Buffer.byteLength(e);this.ensure(t+1),this.buffer.write(e,this.offset,"utf-8"),this.offset+=t}return this.buffer[this.offset++]=0,this}addString(e=""){var t=Buffer.byteLength(e);return this.ensure(t),this.buffer.write(e,this.offset),this.offset+=t,this}add(e){return this.ensure(e.length),e.copy(this.buffer,this.offset),this.offset+=e.length,this}join(e){if(e){this.buffer[this.headerPosition]=e;let t=this.offset-(this.headerPosition+1);this.buffer.writeInt32BE(t,this.headerPosition+1)}return this.buffer.slice(e?0:5,this.offset)}flush(e){var t=this.join(e);return this.offset=5,this.headerPosition=0,this.buffer=Buffer.allocUnsafe(this.size),t}};T1.Writer=VI});var Z8=E(M1=>{"use strict";Object.defineProperty(M1,"__esModule",{value:!0});M1.serialize=void 0;var BI=J8(),mr=new BI.Writer,Fwe=r=>{mr.addInt16(3).addInt16(0);for(let n of Object.keys(r))mr.addCString(n).addCString(r[n]);mr.addCString("client_encoding").addCString("UTF8");var e=mr.addCString("").flush(),t=e.length+4;return new BI.Writer().addInt32(t).add(e).flush()},Vwe=()=>{let r=Buffer.allocUnsafe(8);return r.writeInt32BE(8,0),r.writeInt32BE(80877103,4),r},Bwe=r=>mr.addCString(r).flush(112),Uwe=function(r,e){return mr.addCString(r).addInt32(Buffer.byteLength(e)).addString(e),mr.flush(112)},Gwe=function(r){return mr.addString(r).flush(112)},$we=r=>mr.addCString(r).flush(81),Q8=[],Wwe=r=>{let e=r.name||"";e.length>63&&(console.error("Warning! Postgres only supports 63 characters for query names."),console.error("You supplied %s (%s)",e,e.length),console.error("This can cause conflicts and silent errors executing queries"));let t=r.types||Q8;for(var n=t.length,i=mr.addCString(e).addCString(r.text).addInt16(n),s=0;s<n;s++)i.addInt32(t[s]);return mr.flush(80)},Qf=new BI.Writer,zwe=function(r,e){for(let t=0;t<r.length;t++){let n=e?e(r[t],t):r[t];n==null?(mr.addInt16(0),Qf.addInt32(-1)):n instanceof Buffer?(mr.addInt16(1),Qf.addInt32(n.length),Qf.add(n)):(mr.addInt16(0),Qf.addInt32(Buffer.byteLength(n)),Qf.addString(n))}},Hwe=(r={})=>{let e=r.portal||"",t=r.statement||"",n=r.binary||!1,i=r.values||Q8,s=i.length;return mr.addCString(e).addCString(t),mr.addInt16(s),zwe(i,r.valueMapper),mr.addInt16(s),mr.add(Qf.flush()),mr.addInt16(n?1:0),mr.flush(66)},Ywe=Buffer.from([69,0,0,0,9,0,0,0,0,0]),Jwe=r=>{if(!r||!r.portal&&!r.rows)return Ywe;let e=r.portal||"",t=r.rows||0,n=Buffer.byteLength(e),i=4+n+1+4,s=Buffer.allocUnsafe(1+i);return s[0]=69,s.writeInt32BE(i,1),s.write(e,5,"utf-8"),s[n+5]=0,s.writeUInt32BE(t,s.length-4),s},Qwe=(r,e)=>{let t=Buffer.allocUnsafe(16);return t.writeInt32BE(16,0),t.writeInt16BE(1234,4),t.writeInt16BE(5678,6),t.writeInt32BE(r,8),t.writeInt32BE(e,12),t},UI=(r,e)=>{let n=4+Buffer.byteLength(e)+1,i=Buffer.allocUnsafe(1+n);return i[0]=r,i.writeInt32BE(n,1),i.write(e,5,"utf-8"),i[n]=0,i},Zwe=mr.addCString("P").flush(68),Xwe=mr.addCString("S").flush(68),ebe=r=>r.name?UI(68,`${r.type}${r.name||""}`):r.type==="P"?Zwe:Xwe,tbe=r=>{let e=`${r.type}${r.name||""}`;return UI(67,e)},rbe=r=>mr.add(r).flush(100),nbe=r=>UI(102,r),A1=r=>Buffer.from([r,0,0,0,4]),ibe=A1(72),sbe=A1(83),obe=A1(88),abe=A1(99),lbe={startup:Fwe,password:Bwe,requestSsl:Vwe,sendSASLInitialResponseMessage:Uwe,sendSCRAMClientFinalMessage:Gwe,query:$we,parse:Wwe,bind:Hwe,execute:Jwe,describe:ebe,close:tbe,flush:()=>ibe,sync:()=>sbe,end:()=>obe,copyData:rbe,copyDone:()=>abe,copyFail:nbe,cancel:Qwe};M1.serialize=lbe});var X8=E(k1=>{"use strict";Object.defineProperty(k1,"__esModule",{value:!0});k1.BufferReader=void 0;var ube=Buffer.allocUnsafe(0),GI=class{constructor(e=0){this.offset=e,this.buffer=ube,this.encoding="utf-8"}setBuffer(e,t){this.offset=e,this.buffer=t}int16(){let e=this.buffer.readInt16BE(this.offset);return this.offset+=2,e}byte(){let e=this.buffer[this.offset];return this.offset++,e}int32(){let e=this.buffer.readInt32BE(this.offset);return this.offset+=4,e}string(e){let t=this.buffer.toString(this.encoding,this.offset,this.offset+e);return this.offset+=e,t}cstring(){let e=this.offset,t=e;for(;this.buffer[t++]!==0;);return this.offset=t,this.buffer.toString(this.encoding,e,t-1)}bytes(e){let t=this.buffer.slice(this.offset,this.offset+e);return this.offset+=e,t}};k1.BufferReader=GI});var rU=E(Zf=>{"use strict";var cbe=Zf&&Zf.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Zf,"__esModule",{value:!0});Zf.Parser=void 0;var jr=FI(),fbe=X8(),dbe=cbe(require("assert")),$I=1,hbe=4,eU=$I+hbe,tU=Buffer.allocUnsafe(0),WI=class{constructor(e){if(this.buffer=tU,this.bufferLength=0,this.bufferOffset=0,this.reader=new fbe.BufferReader,e?.mode==="binary")throw new Error("Binary mode not supported yet");this.mode=e?.mode||"text"}parse(e,t){this.mergeBuffer(e);let n=this.bufferOffset+this.bufferLength,i=this.bufferOffset;for(;i+eU<=n;){let s=this.buffer[i],o=this.buffer.readUInt32BE(i+$I),a=$I+o;if(a+i<=n){let u=this.handlePacket(i+eU,s,o,this.buffer);t(u),i+=a}else break}i===n?(this.buffer=tU,this.bufferLength=0,this.bufferOffset=0):(this.bufferLength=n-i,this.bufferOffset=i)}mergeBuffer(e){if(this.bufferLength>0){let t=this.bufferLength+e.byteLength;if(t+this.bufferOffset>this.buffer.byteLength){let i;if(t<=this.buffer.byteLength&&this.bufferOffset>=this.bufferLength)i=this.buffer;else{let s=this.buffer.byteLength*2;for(;t>=s;)s*=2;i=Buffer.allocUnsafe(s)}this.buffer.copy(i,0,this.bufferOffset,this.bufferOffset+this.bufferLength),this.buffer=i,this.bufferOffset=0}e.copy(this.buffer,this.bufferOffset+this.bufferLength),this.bufferLength=t}else this.buffer=e,this.bufferOffset=0,this.bufferLength=e.byteLength}handlePacket(e,t,n,i){switch(t){case 50:return jr.bindComplete;case 49:return jr.parseComplete;case 51:return jr.closeComplete;case 110:return jr.noData;case 115:return jr.portalSuspended;case 99:return jr.copyDone;case 87:return jr.replicationStart;case 73:return jr.emptyQuery;case 68:return this.parseDataRowMessage(e,n,i);case 67:return this.parseCommandCompleteMessage(e,n,i);case 90:return this.parseReadyForQueryMessage(e,n,i);case 65:return this.parseNotificationMessage(e,n,i);case 82:return this.parseAuthenticationResponse(e,n,i);case 83:return this.parseParameterStatusMessage(e,n,i);case 75:return this.parseBackendKeyData(e,n,i);case 69:return this.parseErrorMessage(e,n,i,"error");case 78:return this.parseErrorMessage(e,n,i,"notice");case 84:return this.parseRowDescriptionMessage(e,n,i);case 116:return this.parseParameterDescriptionMessage(e,n,i);case 71:return this.parseCopyInMessage(e,n,i);case 72:return this.parseCopyOutMessage(e,n,i);case 100:return this.parseCopyData(e,n,i);default:dbe.default.fail(`unknown message code: ${t.toString(16)}`)}}parseReadyForQueryMessage(e,t,n){this.reader.setBuffer(e,n);let i=this.reader.string(1);return new jr.ReadyForQueryMessage(t,i)}parseCommandCompleteMessage(e,t,n){this.reader.setBuffer(e,n);let i=this.reader.cstring();return new jr.CommandCompleteMessage(t,i)}parseCopyData(e,t,n){let i=n.slice(e,e+(t-4));return new jr.CopyDataMessage(t,i)}parseCopyInMessage(e,t,n){return this.parseCopyMessage(e,t,n,"copyInResponse")}parseCopyOutMessage(e,t,n){return this.parseCopyMessage(e,t,n,"copyOutResponse")}parseCopyMessage(e,t,n,i){this.reader.setBuffer(e,n);let s=this.reader.byte()!==0,o=this.reader.int16(),a=new jr.CopyResponse(t,i,s,o);for(let u=0;u<o;u++)a.columnTypes[u]=this.reader.int16();return a}parseNotificationMessage(e,t,n){this.reader.setBuffer(e,n);let i=this.reader.int32(),s=this.reader.cstring(),o=this.reader.cstring();return new jr.NotificationResponseMessage(t,i,s,o)}parseRowDescriptionMessage(e,t,n){this.reader.setBuffer(e,n);let i=this.reader.int16(),s=new jr.RowDescriptionMessage(t,i);for(let o=0;o<i;o++)s.fields[o]=this.parseField();return s}parseField(){let e=this.reader.cstring(),t=this.reader.int32(),n=this.reader.int16(),i=this.reader.int32(),s=this.reader.int16(),o=this.reader.int32(),a=this.reader.int16()===0?"text":"binary";return new jr.Field(e,t,n,i,s,o,a)}parseParameterDescriptionMessage(e,t,n){this.reader.setBuffer(e,n);let i=this.reader.int16(),s=new jr.ParameterDescriptionMessage(t,i);for(let o=0;o<i;o++)s.dataTypeIDs[o]=this.reader.int32();return s}parseDataRowMessage(e,t,n){this.reader.setBuffer(e,n);let i=this.reader.int16(),s=new Array(i);for(let o=0;o<i;o++){let a=this.reader.int32();s[o]=a===-1?null:this.reader.string(a)}return new jr.DataRowMessage(t,s)}parseParameterStatusMessage(e,t,n){this.reader.setBuffer(e,n);let i=this.reader.cstring(),s=this.reader.cstring();return new jr.ParameterStatusMessage(t,i,s)}parseBackendKeyData(e,t,n){this.reader.setBuffer(e,n);let i=this.reader.int32(),s=this.reader.int32();return new jr.BackendKeyDataMessage(t,i,s)}parseAuthenticationResponse(e,t,n){this.reader.setBuffer(e,n);let i=this.reader.int32(),s={name:"authenticationOk",length:t};switch(i){case 0:break;case 3:s.length===8&&(s.name="authenticationCleartextPassword");break;case 5:if(s.length===12){s.name="authenticationMD5Password";let a=this.reader.bytes(4);return new jr.AuthenticationMD5Password(t,a)}break;case 10:s.name="authenticationSASL",s.mechanisms=[];let o;do o=this.reader.cstring(),o&&s.mechanisms.push(o);while(o);break;case 11:s.name="authenticationSASLContinue",s.data=this.reader.string(t-8);break;case 12:s.name="authenticationSASLFinal",s.data=this.reader.string(t-8);break;default:throw new Error("Unknown authenticationOk message type "+i)}return s}parseErrorMessage(e,t,n,i){this.reader.setBuffer(e,n);let s={},o=this.reader.string(1);for(;o!=="\0";)s[o]=this.reader.cstring(),o=this.reader.string(1);let a=s.M,u=i==="notice"?new jr.NoticeMessage(t,a):new jr.DatabaseError(a,t,i);return u.severity=s.S,u.code=s.C,u.detail=s.D,u.hint=s.H,u.position=s.P,u.internalPosition=s.p,u.internalQuery=s.q,u.where=s.W,u.schema=s.s,u.table=s.t,u.column=s.c,u.dataType=s.d,u.constraint=s.n,u.file=s.F,u.line=s.L,u.routine=s.R,u}};Zf.Parser=WI});var zI=E(ol=>{"use strict";Object.defineProperty(ol,"__esModule",{value:!0});ol.DatabaseError=ol.serialize=ol.parse=void 0;var pbe=FI();Object.defineProperty(ol,"DatabaseError",{enumerable:!0,get:function(){return pbe.DatabaseError}});var mbe=Z8();Object.defineProperty(ol,"serialize",{enumerable:!0,get:function(){return mbe.serialize}});var gbe=rU();function ybe(r,e){let t=new gbe.Parser;return r.on("data",n=>t.parse(n,e)),new Promise(n=>r.on("end",()=>n()))}ol.parse=ybe});var nU={};sS(nU,{default:()=>vbe});var vbe,iU=an(()=>{vbe={}});var sU=E((qDe,HI)=>{HI.exports.getStream=function(e){let t=require("net");if(typeof t.Socket=="function")return new t.Socket;{let{CloudflareSocket:n}=(iU(),vi(nU));return new n(e)}};HI.exports.getSecureStream=function(e){var t=require("tls");return t.connect?t.connect(e):(e.socket.startTls(e),e.socket)}});var JI=E((VDe,oU)=>{"use strict";var FDe=require("net"),wbe=require("events").EventEmitter,{parse:bbe,serialize:hn}=zI(),{getStream:Sbe,getSecureStream:_be}=sU(),xbe=hn.flush(),Ebe=hn.sync(),Obe=hn.end(),YI=class extends wbe{constructor(e){super(),e=e||{},this.stream=e.stream||Sbe(e.ssl),typeof this.stream=="function"&&(this.stream=this.stream(e)),this._keepAlive=e.keepAlive,this._keepAliveInitialDelayMillis=e.keepAliveInitialDelayMillis,this.lastBuffer=!1,this.parsedStatements={},this.ssl=e.ssl||!1,this._ending=!1,this._emitMessage=!1;var t=this;this.on("newListener",function(n){n==="message"&&(t._emitMessage=!0)})}connect(e,t){var n=this;this._connecting=!0,this.stream.setNoDelay(!0),this.stream.connect(e,t),this.stream.once("connect",function(){n._keepAlive&&n.stream.setKeepAlive(!0,n._keepAliveInitialDelayMillis),n.emit("connect")});let i=function(s){n._ending&&(s.code==="ECONNRESET"||s.code==="EPIPE")||n.emit("error",s)};if(this.stream.on("error",i),this.stream.on("close",function(){n.emit("end")}),!this.ssl)return this.attachListeners(this.stream);this.stream.once("data",function(s){var o=s.toString("utf8");switch(o){case"S":break;case"N":return n.stream.end(),n.emit("error",new Error("The server does not support SSL connections"));default:return n.stream.end(),n.emit("error",new Error("There was an error establishing an SSL connection"))}let a={socket:n.stream};n.ssl!==!0&&(Object.assign(a,n.ssl),"key"in n.ssl&&(a.key=n.ssl.key));var u=require("net");u.isIP&&u.isIP(t)===0&&(a.servername=t);try{n.stream=_be(a)}catch(c){return n.emit("error",c)}n.attachListeners(n.stream),n.stream.on("error",i),n.emit("sslconnect")})}attachListeners(e){bbe(e,t=>{var n=t.name==="error"?"errorMessage":t.name;this._emitMessage&&this.emit("message",t),this.emit(n,t)})}requestSsl(){this.stream.write(hn.requestSsl())}startup(e){this.stream.write(hn.startup(e))}cancel(e,t){this._send(hn.cancel(e,t))}password(e){this._send(hn.password(e))}sendSASLInitialResponseMessage(e,t){this._send(hn.sendSASLInitialResponseMessage(e,t))}sendSCRAMClientFinalMessage(e){this._send(hn.sendSCRAMClientFinalMessage(e))}_send(e){return this.stream.writable?this.stream.write(e):!1}query(e){this._send(hn.query(e))}parse(e){this._send(hn.parse(e))}bind(e){this._send(hn.bind(e))}execute(e){this._send(hn.execute(e))}flush(){this.stream.writable&&this.stream.write(xbe)}sync(){this._ending=!0,this._send(Ebe)}ref(){this.stream.ref()}unref(){this.stream.unref()}end(){if(this._ending=!0,!this._connecting||!this.stream.writable){this.stream.end();return}return this.stream.write(Obe,()=>{this.stream.end()})}close(e){this._send(hn.close(e))}describe(e){this._send(hn.describe(e))}sendCopyFromChunk(e){this._send(hn.copyData(e))}endCopyFrom(){this._send(hn.copyDone())}sendCopyFail(e){this._send(hn.copyFail(e))}};oU.exports=YI});var cU=E((BDe,uU)=>{"use strict";var{Transform:Ibe}=require("stream"),{StringDecoder:Cbe}=require("string_decoder"),al=Symbol("last"),P1=Symbol("decoder");function Tbe(r,e,t){let n;if(this.overflow){if(n=this[P1].write(r).split(this.matcher),n.length===1)return t();n.shift(),this.overflow=!1}else this[al]+=this[P1].write(r),n=this[al].split(this.matcher);this[al]=n.pop();for(let i=0;i<n.length;i++)try{lU(this,this.mapper(n[i]))}catch(s){return t(s)}if(this.overflow=this[al].length>this.maxLength,this.overflow&&!this.skipOverflow){t(new Error("maximum buffer reached"));return}t()}function Abe(r){if(this[al]+=this[P1].end(),this[al])try{lU(this,this.mapper(this[al]))}catch(e){return r(e)}r()}function lU(r,e){e!==void 0&&r.push(e)}function aU(r){return r}function Mbe(r,e,t){switch(r=r||/\r?\n/,e=e||aU,t=t||{},arguments.length){case 1:typeof r=="function"?(e=r,r=/\r?\n/):typeof r=="object"&&!(r instanceof RegExp)&&(t=r,r=/\r?\n/);break;case 2:typeof r=="function"?(t=e,e=r,r=/\r?\n/):typeof e=="object"&&(t=e,e=aU)}t=Object.assign({},t),t.autoDestroy=!0,t.transform=Tbe,t.flush=Abe,t.readableObjectMode=!0;let n=new Ibe(t);return n[al]="",n[P1]=new Cbe("utf8"),n.matcher=r,n.mapper=e,n.maxLength=t.maxLength,n.skipOverflow=t.skipOverflow||!1,n.overflow=!1,n._destroy=function(i,s){this._writableState.errorEmitted=!1,s(i)},n}uU.exports=Mbe});var hU=E((UDe,Jo)=>{"use strict";var fU=require("path"),kbe=require("stream").Stream,Pbe=cU(),dU=require("util"),Rbe=5432,R1=process.platform==="win32",$p=process.stderr,Lbe=56,Dbe=7,Nbe=61440,jbe=32768;function Kbe(r){return(r&Nbe)==jbe}var Xf=["host","port","database","user","password"],QI=Xf.length,qbe=Xf[QI-1];function ZI(){var r=$p instanceof kbe&&$p.writable===!0;if(r){var e=Array.prototype.slice.call(arguments).concat(`
`);$p.write(dU.format.apply(dU,e))}}Object.defineProperty(Jo.exports,"isWin",{get:function(){return R1},set:function(r){R1=r}});Jo.exports.warnTo=function(r){var e=$p;return $p=r,e};Jo.exports.getFileName=function(r){var e=r||process.env,t=e.PGPASSFILE||(R1?fU.join(e.APPDATA||"./","postgresql","pgpass.conf"):fU.join(e.HOME||"./",".pgpass"));return t};Jo.exports.usePgPass=function(r,e){return Object.prototype.hasOwnProperty.call(process.env,"PGPASSWORD")?!1:R1?!0:(e=e||"<unkn>",Kbe(r.mode)?r.mode&(Lbe|Dbe)?(ZI('WARNING: password file "%s" has group or world access; permissions should be u=rw (0600) or less',e),!1):!0:(ZI('WARNING: password file "%s" is not a plain file',e),!1))};var Fbe=Jo.exports.match=function(r,e){return Xf.slice(0,-1).reduce(function(t,n,i){return i==1&&Number(r[n]||Rbe)===Number(e[n])?t&&!0:t&&(e[n]==="*"||e[n]===r[n])},!0)};Jo.exports.getPassword=function(r,e,t){var n,i=e.pipe(Pbe());function s(u){var c=Vbe(u);c&&Bbe(c)&&Fbe(r,c)&&(n=c[qbe],i.end())}var o=function(){e.destroy(),t(n)},a=function(u){e.destroy(),ZI("WARNING: error on reading file: %s",u),t(void 0)};e.on("error",a),i.on("data",s).on("end",o).on("error",a)};var Vbe=Jo.exports.parseLine=function(r){if(r.length<11||r.match(/^\s+#/))return null;for(var e="",t="",n=0,i=0,s=0,o={},a=!1,u=function(d,h,p){var m=r.substring(h,p);Object.hasOwnProperty.call(process.env,"PGPASS_NO_DEESCAPE")||(m=m.replace(/\\([:\\])/g,"$1")),o[Xf[d]]=m},c=0;c<r.length-1;c+=1){if(e=r.charAt(c+1),t=r.charAt(c),a=n==QI-1,a){u(n,i);break}c>=0&&e==":"&&t!=="\\"&&(u(n,i,c+1),i=c+2,n+=1)}return o=Object.keys(o).length===QI?o:null,o},Bbe=Jo.exports.isValidEntry=function(r){for(var e={0:function(o){return o.length>0},1:function(o){return o==="*"?!0:(o=Number(o),isFinite(o)&&o>0&&o<9007199254740992&&Math.floor(o)===o)},2:function(o){return o.length>0},3:function(o){return o.length>0},4:function(o){return o.length>0}},t=0;t<Xf.length;t+=1){var n=e[t],i=r[Xf[t]]||"",s=n(i);if(!s)return!1}return!0}});var mU=E(($De,XI)=>{"use strict";var GDe=require("path"),pU=require("fs"),L1=hU();XI.exports=function(r,e){var t=L1.getFileName();pU.stat(t,function(n,i){if(n||!L1.usePgPass(i,t))return e(void 0);var s=pU.createReadStream(t);L1.getPassword(r,s,e)})};XI.exports.warnTo=L1.warnTo});var wU=E((WDe,vU)=>{"use strict";var Ube=require("events").EventEmitter,gU=Up(),eC=N8(),Gbe=bI(),$be=xI(),yU=Y8(),Wbe=Bp(),zbe=JI(),Hbe=wI(),D1=class extends Ube{constructor(e){super(),this.connectionParameters=new $be(e),this.user=this.connectionParameters.user,this.database=this.connectionParameters.database,this.port=this.connectionParameters.port,this.host=this.connectionParameters.host,Object.defineProperty(this,"password",{configurable:!0,enumerable:!1,writable:!0,value:this.connectionParameters.password}),this.replication=this.connectionParameters.replication;var t=e||{};this._Promise=t.Promise||global.Promise,this._types=new Gbe(t.types),this._ending=!1,this._ended=!1,this._connecting=!1,this._connected=!1,this._connectionError=!1,this._queryable=!0,this.connection=t.connection||new zbe({stream:t.stream,ssl:this.connectionParameters.ssl,keepAlive:t.keepAlive||!1,keepAliveInitialDelayMillis:t.keepAliveInitialDelayMillis||0,encoding:this.connectionParameters.client_encoding||"utf8"}),this.queryQueue=[],this.binary=t.binary||Wbe.binary,this.processID=null,this.secretKey=null,this.ssl=this.connectionParameters.ssl||!1,this.ssl&&this.ssl.key&&Object.defineProperty(this.ssl,"key",{enumerable:!1}),this._connectionTimeoutMillis=t.connectionTimeoutMillis||0}_errorAllQueries(e){let t=n=>{process.nextTick(()=>{n.handleError(e,this.connection)})};this.activeQuery&&(t(this.activeQuery),this.activeQuery=null),this.queryQueue.forEach(t),this.queryQueue.length=0}_connect(e){var t=this,n=this.connection;if(this._connectionCallback=e,this._connecting||this._connected){let i=new Error("Client has already been connected. You cannot reuse a client.");process.nextTick(()=>{e(i)});return}this._connecting=!0,this.connectionTimeoutHandle,this._connectionTimeoutMillis>0&&(this.connectionTimeoutHandle=setTimeout(()=>{n._ending=!0,n.stream.destroy(new Error("timeout expired"))},this._connectionTimeoutMillis)),this.host&&this.host.indexOf("/")===0?n.connect(this.host+"/.s.PGSQL."+this.port):n.connect(this.port,this.host),n.on("connect",function(){t.ssl?n.requestSsl():n.startup(t.getStartupConf())}),n.on("sslconnect",function(){n.startup(t.getStartupConf())}),this._attachListeners(n),n.once("end",()=>{let i=this._ending?new Error("Connection terminated"):new Error("Connection terminated unexpectedly");clearTimeout(this.connectionTimeoutHandle),this._errorAllQueries(i),this._ended=!0,this._ending||(this._connecting&&!this._connectionError?this._connectionCallback?this._connectionCallback(i):this._handleErrorEvent(i):this._connectionError||this._handleErrorEvent(i)),process.nextTick(()=>{this.emit("end")})})}connect(e){if(e){this._connect(e);return}return new this._Promise((t,n)=>{this._connect(i=>{i?n(i):t()})})}_attachListeners(e){e.on("authenticationCleartextPassword",this._handleAuthCleartextPassword.bind(this)),e.on("authenticationMD5Password",this._handleAuthMD5Password.bind(this)),e.on("authenticationSASL",this._handleAuthSASL.bind(this)),e.on("authenticationSASLContinue",this._handleAuthSASLContinue.bind(this)),e.on("authenticationSASLFinal",this._handleAuthSASLFinal.bind(this)),e.on("backendKeyData",this._handleBackendKeyData.bind(this)),e.on("error",this._handleErrorEvent.bind(this)),e.on("errorMessage",this._handleErrorMessage.bind(this)),e.on("readyForQuery",this._handleReadyForQuery.bind(this)),e.on("notice",this._handleNotice.bind(this)),e.on("rowDescription",this._handleRowDescription.bind(this)),e.on("dataRow",this._handleDataRow.bind(this)),e.on("portalSuspended",this._handlePortalSuspended.bind(this)),e.on("emptyQuery",this._handleEmptyQuery.bind(this)),e.on("commandComplete",this._handleCommandComplete.bind(this)),e.on("parseComplete",this._handleParseComplete.bind(this)),e.on("copyInResponse",this._handleCopyInResponse.bind(this)),e.on("copyData",this._handleCopyData.bind(this)),e.on("notification",this._handleNotification.bind(this))}_checkPgPass(e){let t=this.connection;if(typeof this.password=="function")this._Promise.resolve().then(()=>this.password()).then(n=>{if(n!==void 0){if(typeof n!="string"){t.emit("error",new TypeError("Password must be a string"));return}this.connectionParameters.password=this.password=n}else this.connectionParameters.password=this.password=null;e()}).catch(n=>{t.emit("error",n)});else if(this.password!==null)e();else try{mU()(this.connectionParameters,i=>{i!==void 0&&(this.connectionParameters.password=this.password=i),e()})}catch(n){this.emit("error",n)}}_handleAuthCleartextPassword(e){this._checkPgPass(()=>{this.connection.password(this.password)})}_handleAuthMD5Password(e){this._checkPgPass(async()=>{try{let t=await Hbe.postgresMd5PasswordHash(this.user,this.password,e.salt);this.connection.password(t)}catch(t){this.emit("error",t)}})}_handleAuthSASL(e){this._checkPgPass(()=>{try{this.saslSession=eC.startSession(e.mechanisms),this.connection.sendSASLInitialResponseMessage(this.saslSession.mechanism,this.saslSession.response)}catch(t){this.connection.emit("error",t)}})}async _handleAuthSASLContinue(e){try{await eC.continueSession(this.saslSession,this.password,e.data),this.connection.sendSCRAMClientFinalMessage(this.saslSession.response)}catch(t){this.connection.emit("error",t)}}_handleAuthSASLFinal(e){try{eC.finalizeSession(this.saslSession,e.data),this.saslSession=null}catch(t){this.connection.emit("error",t)}}_handleBackendKeyData(e){this.processID=e.processID,this.secretKey=e.secretKey}_handleReadyForQuery(e){this._connecting&&(this._connecting=!1,this._connected=!0,clearTimeout(this.connectionTimeoutHandle),this._connectionCallback&&(this._connectionCallback(null,this),this._connectionCallback=null),this.emit("connect"));let{activeQuery:t}=this;this.activeQuery=null,this.readyForQuery=!0,t&&t.handleReadyForQuery(this.connection),this._pulseQueryQueue()}_handleErrorWhileConnecting(e){if(!this._connectionError){if(this._connectionError=!0,clearTimeout(this.connectionTimeoutHandle),this._connectionCallback)return this._connectionCallback(e);this.emit("error",e)}}_handleErrorEvent(e){if(this._connecting)return this._handleErrorWhileConnecting(e);this._queryable=!1,this._errorAllQueries(e),this.emit("error",e)}_handleErrorMessage(e){if(this._connecting)return this._handleErrorWhileConnecting(e);let t=this.activeQuery;if(!t){this._handleErrorEvent(e);return}this.activeQuery=null,t.handleError(e,this.connection)}_handleRowDescription(e){this.activeQuery.handleRowDescription(e)}_handleDataRow(e){this.activeQuery.handleDataRow(e)}_handlePortalSuspended(e){this.activeQuery.handlePortalSuspended(this.connection)}_handleEmptyQuery(e){this.activeQuery.handleEmptyQuery(this.connection)}_handleCommandComplete(e){this.activeQuery.handleCommandComplete(e,this.connection)}_handleParseComplete(e){this.activeQuery.name&&(this.connection.parsedStatements[this.activeQuery.name]=this.activeQuery.text)}_handleCopyInResponse(e){this.activeQuery.handleCopyInResponse(this.connection)}_handleCopyData(e){this.activeQuery.handleCopyData(e,this.connection)}_handleNotification(e){this.emit("notification",e)}_handleNotice(e){this.emit("notice",e)}getStartupConf(){var e=this.connectionParameters,t={user:e.user,database:e.database},n=e.application_name||e.fallback_application_name;return n&&(t.application_name=n),e.replication&&(t.replication=""+e.replication),e.statement_timeout&&(t.statement_timeout=String(parseInt(e.statement_timeout,10))),e.lock_timeout&&(t.lock_timeout=String(parseInt(e.lock_timeout,10))),e.idle_in_transaction_session_timeout&&(t.idle_in_transaction_session_timeout=String(parseInt(e.idle_in_transaction_session_timeout,10))),e.options&&(t.options=e.options),t}cancel(e,t){if(e.activeQuery===t){var n=this.connection;this.host&&this.host.indexOf("/")===0?n.connect(this.host+"/.s.PGSQL."+this.port):n.connect(this.port,this.host),n.on("connect",function(){n.cancel(e.processID,e.secretKey)})}else e.queryQueue.indexOf(t)!==-1&&e.queryQueue.splice(e.queryQueue.indexOf(t),1)}setTypeParser(e,t,n){return this._types.setTypeParser(e,t,n)}getTypeParser(e,t){return this._types.getTypeParser(e,t)}escapeIdentifier(e){return gU.escapeIdentifier(e)}escapeLiteral(e){return gU.escapeLiteral(e)}_pulseQueryQueue(){if(this.readyForQuery===!0)if(this.activeQuery=this.queryQueue.shift(),this.activeQuery){this.readyForQuery=!1,this.hasExecuted=!0;let e=this.activeQuery.submit(this.connection);e&&process.nextTick(()=>{this.activeQuery.handleError(e,this.connection),this.readyForQuery=!0,this._pulseQueryQueue()})}else this.hasExecuted&&(this.activeQuery=null,this.emit("drain"))}query(e,t,n){var i,s,o,a,u;if(e==null)throw new TypeError("Client was passed a null or undefined query");return typeof e.submit=="function"?(o=e.query_timeout||this.connectionParameters.query_timeout,s=i=e,typeof t=="function"&&(i.callback=i.callback||t)):(o=this.connectionParameters.query_timeout,i=new yU(e,t,n),i.callback||(s=new this._Promise((c,d)=>{i.callback=(h,p)=>h?d(h):c(p)}).catch(c=>{throw Error.captureStackTrace(c),c}))),o&&(u=i.callback,a=setTimeout(()=>{var c=new Error("Query read timeout");process.nextTick(()=>{i.handleError(c,this.connection)}),u(c),i.callback=()=>{};var d=this.queryQueue.indexOf(i);d>-1&&this.queryQueue.splice(d,1),this._pulseQueryQueue()},o),i.callback=(c,d)=>{clearTimeout(a),u(c,d)}),this.binary&&!i.binary&&(i.binary=!0),i._result&&!i._result._types&&(i._result._types=this._types),this._queryable?this._ending?(process.nextTick(()=>{i.handleError(new Error("Client was closed and is not queryable"),this.connection)}),s):(this.queryQueue.push(i),this._pulseQueryQueue(),s):(process.nextTick(()=>{i.handleError(new Error("Client has encountered a connection error and is not queryable"),this.connection)}),s)}ref(){this.connection.ref()}unref(){this.connection.unref()}end(e){if(this._ending=!0,!this.connection._connecting||this._ended)if(e)e();else return this._Promise.resolve();if(this.activeQuery||!this._queryable?this.connection.stream.destroy():this.connection.end(),e)this.connection.once("end",e);else return new this._Promise(t=>{this.connection.once("end",t)})}};D1.Query=yU;vU.exports=D1});var xU=E((zDe,_U)=>{"use strict";var Ybe=require("events").EventEmitter,bU=function(){},SU=(r,e)=>{let t=r.findIndex(e);return t===-1?void 0:r.splice(t,1)[0]},tC=class{constructor(e,t,n){this.client=e,this.idleListener=t,this.timeoutId=n}},ed=class{constructor(e){this.callback=e}};function Jbe(){throw new Error("Release called on client which has already been released to the pool.")}function N1(r,e){if(e)return{callback:e,result:void 0};let t,n,i=function(o,a){o?t(o):n(a)},s=new r(function(o,a){n=o,t=a}).catch(o=>{throw Error.captureStackTrace(o),o});return{callback:i,result:s}}function Qbe(r,e){return function t(n){n.client=e,e.removeListener("error",t),e.on("error",()=>{r.log("additional client error after disconnection due to error",n)}),r._remove(e),r.emit("error",n,e)}}var rC=class extends Ybe{constructor(e,t){super(),this.options=Object.assign({},e),e!=null&&"password"in e&&Object.defineProperty(this.options,"password",{configurable:!0,enumerable:!1,writable:!0,value:e.password}),e!=null&&e.ssl&&e.ssl.key&&Object.defineProperty(this.options.ssl,"key",{enumerable:!1}),this.options.max=this.options.max||this.options.poolSize||10,this.options.maxUses=this.options.maxUses||1/0,this.options.allowExitOnIdle=this.options.allowExitOnIdle||!1,this.options.maxLifetimeSeconds=this.options.maxLifetimeSeconds||0,this.log=this.options.log||function(){},this.Client=this.options.Client||t||td().Client,this.Promise=this.options.Promise||global.Promise,typeof this.options.idleTimeoutMillis>"u"&&(this.options.idleTimeoutMillis=1e4),this._clients=[],this._idle=[],this._expired=new WeakSet,this._pendingQueue=[],this._endCallback=void 0,this.ending=!1,this.ended=!1}_isFull(){return this._clients.length>=this.options.max}_pulseQueue(){if(this.log("pulse queue"),this.ended){this.log("pulse queue ended");return}if(this.ending){this.log("pulse queue on ending"),this._idle.length&&this._idle.slice().map(t=>{this._remove(t.client)}),this._clients.length||(this.ended=!0,this._endCallback());return}if(!this._pendingQueue.length){this.log("no queued requests");return}if(!this._idle.length&&this._isFull())return;let e=this._pendingQueue.shift();if(this._idle.length){let t=this._idle.pop();clearTimeout(t.timeoutId);let n=t.client;n.ref&&n.ref();let i=t.idleListener;return this._acquireClient(n,e,i,!1)}if(!this._isFull())return this.newClient(e);throw new Error("unexpected condition")}_remove(e){let t=SU(this._idle,n=>n.client===e);t!==void 0&&clearTimeout(t.timeoutId),this._clients=this._clients.filter(n=>n!==e),e.end(),this.emit("remove",e)}connect(e){if(this.ending){let i=new Error("Cannot use a pool after calling end on the pool");return e?e(i):this.Promise.reject(i)}let t=N1(this.Promise,e),n=t.result;if(this._isFull()||this._idle.length){if(this._idle.length&&process.nextTick(()=>this._pulseQueue()),!this.options.connectionTimeoutMillis)return this._pendingQueue.push(new ed(t.callback)),n;let i=(a,u,c)=>{clearTimeout(o),t.callback(a,u,c)},s=new ed(i),o=setTimeout(()=>{SU(this._pendingQueue,a=>a.callback===i),s.timedOut=!0,t.callback(new Error("timeout exceeded when trying to connect"))},this.options.connectionTimeoutMillis);return this._pendingQueue.push(s),n}return this.newClient(new ed(t.callback)),n}newClient(e){let t=new this.Client(this.options);this._clients.push(t);let n=Qbe(this,t);this.log("checking client timeout");let i,s=!1;this.options.connectionTimeoutMillis&&(i=setTimeout(()=>{this.log("ending client due to timeout"),s=!0,t.connection?t.connection.stream.destroy():t.end()},this.options.connectionTimeoutMillis)),this.log("connecting new client"),t.connect(o=>{if(i&&clearTimeout(i),t.on("error",n),o)this.log("client failed to connect",o),this._clients=this._clients.filter(a=>a!==t),s&&(o.message="Connection terminated due to connection timeout"),this._pulseQueue(),e.timedOut||e.callback(o,void 0,bU);else{if(this.log("new client connected"),this.options.maxLifetimeSeconds!==0){let a=setTimeout(()=>{this.log("ending client due to expired lifetime"),this._expired.add(t),this._idle.findIndex(c=>c.client===t)!==-1&&this._acquireClient(t,new ed((c,d,h)=>h()),n,!1)},this.options.maxLifetimeSeconds*1e3);a.unref(),t.once("end",()=>clearTimeout(a))}return this._acquireClient(t,e,n,!0)}})}_acquireClient(e,t,n,i){i&&this.emit("connect",e),this.emit("acquire",e),e.release=this._releaseOnce(e,n),e.removeListener("error",n),t.timedOut?i&&this.options.verify?this.options.verify(e,e.release):e.release():i&&this.options.verify?this.options.verify(e,s=>{if(s)return e.release(s),t.callback(s,void 0,bU);t.callback(void 0,e,e.release)}):t.callback(void 0,e,e.release)}_releaseOnce(e,t){let n=!1;return i=>{n&&Jbe(),n=!0,this._release(e,t,i)}}_release(e,t,n){if(e.on("error",t),e._poolUseCount=(e._poolUseCount||0)+1,this.emit("release",n,e),n||this.ending||!e._queryable||e._ending||e._poolUseCount>=this.options.maxUses){e._poolUseCount>=this.options.maxUses&&this.log("remove expended client"),this._remove(e),this._pulseQueue();return}if(this._expired.has(e)){this.log("remove expired client"),this._expired.delete(e),this._remove(e),this._pulseQueue();return}let s;this.options.idleTimeoutMillis&&(s=setTimeout(()=>{this.log("remove idle client"),this._remove(e)},this.options.idleTimeoutMillis),this.options.allowExitOnIdle&&s.unref()),this.options.allowExitOnIdle&&e.unref(),this._idle.push(new tC(e,t,s)),this._pulseQueue()}query(e,t,n){if(typeof e=="function"){let s=N1(this.Promise,e);return setImmediate(function(){return s.callback(new Error("Passing a function as the first parameter to pool.query is not supported"))}),s.result}typeof t=="function"&&(n=t,t=void 0);let i=N1(this.Promise,n);return n=i.callback,this.connect((s,o)=>{if(s)return n(s);let a=!1,u=c=>{a||(a=!0,o.release(c),n(c))};o.once("error",u),this.log("dispatching query");try{o.query(e,t,(c,d)=>{if(this.log("query dispatched"),o.removeListener("error",u),!a)return a=!0,o.release(c),c?n(c):n(void 0,d)})}catch(c){return o.release(c),n(c)}}),i.result}end(e){if(this.log("ending"),this.ending){let n=new Error("Called end on pool more than once");return e?e(n):this.Promise.reject(n)}this.ending=!0;let t=N1(this.Promise,e);return this._endCallback=t.callback,this._pulseQueue(),t.result}get waitingCount(){return this._pendingQueue.length}get idleCount(){return this._idle.length}get expiredCount(){return this._clients.reduce((e,t)=>e+(this._expired.has(t)?1:0),0)}get totalCount(){return this._clients.length}};_U.exports=rC});var IU=E((HDe,OU)=>{"use strict";var EU=require("events").EventEmitter,Zbe=require("util"),nC=Up(),rd=OU.exports=function(r,e,t){EU.call(this),r=nC.normalizeQueryConfig(r,e,t),this.text=r.text,this.values=r.values,this.name=r.name,this.callback=r.callback,this.state="new",this._arrayMode=r.rowMode==="array",this._emitRowEvents=!1,this.on("newListener",function(n){n==="row"&&(this._emitRowEvents=!0)}.bind(this))};Zbe.inherits(rd,EU);var Xbe={sqlState:"code",statementPosition:"position",messagePrimary:"message",context:"where",schemaName:"schema",tableName:"table",columnName:"column",dataTypeName:"dataType",constraintName:"constraint",sourceFile:"file",sourceLine:"line",sourceFunction:"routine"};rd.prototype.handleError=function(r){var e=this.native.pq.resultErrorFields();if(e)for(var t in e){var n=Xbe[t]||t;r[n]=e[t]}this.callback?this.callback(r):this.emit("error",r),this.state="error"};rd.prototype.then=function(r,e){return this._getPromise().then(r,e)};rd.prototype.catch=function(r){return this._getPromise().catch(r)};rd.prototype._getPromise=function(){return this._promise?this._promise:(this._promise=new Promise(function(r,e){this._once("end",r),this._once("error",e)}.bind(this)),this._promise)};rd.prototype.submit=function(r){this.state="running";var e=this;this.native=r.native,r.native.arrayMode=this._arrayMode;var t=function(s,o,a){if(r.native.arrayMode=!1,setImmediate(function(){e.emit("_done")}),s)return e.handleError(s);e._emitRowEvents&&(a.length>1?o.forEach((u,c)=>{u.forEach(d=>{e.emit("row",d,a[c])})}):o.forEach(function(u){e.emit("row",u,a)})),e.state="end",e.emit("end",a),e.callback&&e.callback(null,a)};if(process.domain&&(t=process.domain.bind(t)),this.name){this.name.length>63&&(console.error("Warning! Postgres only supports 63 characters for query names."),console.error("You supplied %s (%s)",this.name,this.name.length),console.error("This can cause conflicts and silent errors executing queries"));var n=(this.values||[]).map(nC.prepareValue);if(r.namedQueries[this.name]){if(this.text&&r.namedQueries[this.name]!==this.text){let s=new Error(`Prepared statements must be unique - '${this.name}' was used for a different statement`);return t(s)}return r.native.execute(this.name,n,t)}return r.native.prepare(this.name,this.text,n.length,function(s){return s?t(s):(r.namedQueries[e.name]=e.text,e.native.execute(e.name,n,t))})}else if(this.values){if(!Array.isArray(this.values)){let s=new Error("Query values must be an array");return t(s)}var i=this.values.map(nC.prepareValue);r.native.query(this.text,i,t)}else r.native.query(this.text,t)}});var kU=E((YDe,MU)=>{"use strict";var CU;try{CU=require("pg-native")}catch(r){throw r}var eSe=bI(),TU=require("events").EventEmitter,tSe=require("util"),rSe=xI(),AU=IU(),ai=MU.exports=function(r){TU.call(this),r=r||{},this._Promise=r.Promise||global.Promise,this._types=new eSe(r.types),this.native=new CU({types:this._types}),this._queryQueue=[],this._ending=!1,this._connecting=!1,this._connected=!1,this._queryable=!0;var e=this.connectionParameters=new rSe(r);r.nativeConnectionString&&(e.nativeConnectionString=r.nativeConnectionString),this.user=e.user,Object.defineProperty(this,"password",{configurable:!0,enumerable:!1,writable:!0,value:e.password}),this.database=e.database,this.host=e.host,this.port=e.port,this.namedQueries={}};ai.Query=AU;tSe.inherits(ai,TU);ai.prototype._errorAllQueries=function(r){let e=t=>{process.nextTick(()=>{t.native=this.native,t.handleError(r)})};this._hasActiveQuery()&&(e(this._activeQuery),this._activeQuery=null),this._queryQueue.forEach(e),this._queryQueue.length=0};ai.prototype._connect=function(r){var e=this;if(this._connecting){process.nextTick(()=>r(new Error("Client has already been connected. You cannot reuse a client.")));return}this._connecting=!0,this.connectionParameters.getLibpqConnectionString(function(t,n){if(e.connectionParameters.nativeConnectionString&&(n=e.connectionParameters.nativeConnectionString),t)return r(t);e.native.connect(n,function(i){if(i)return e.native.end(),r(i);e._connected=!0,e.native.on("error",function(s){e._queryable=!1,e._errorAllQueries(s),e.emit("error",s)}),e.native.on("notification",function(s){e.emit("notification",{channel:s.relname,payload:s.extra})}),e.emit("connect"),e._pulseQueryQueue(!0),r()})})};ai.prototype.connect=function(r){if(r){this._connect(r);return}return new this._Promise((e,t)=>{this._connect(n=>{n?t(n):e()})})};ai.prototype.query=function(r,e,t){var n,i,s,o,a;if(r==null)throw new TypeError("Client was passed a null or undefined query");if(typeof r.submit=="function")s=r.query_timeout||this.connectionParameters.query_timeout,i=n=r,typeof e=="function"&&(r.callback=e);else if(s=this.connectionParameters.query_timeout,n=new AU(r,e,t),!n.callback){let u,c;i=new this._Promise((d,h)=>{u=d,c=h}).catch(d=>{throw Error.captureStackTrace(d),d}),n.callback=(d,h)=>d?c(d):u(h)}return s&&(a=n.callback,o=setTimeout(()=>{var u=new Error("Query read timeout");process.nextTick(()=>{n.handleError(u,this.connection)}),a(u),n.callback=()=>{};var c=this._queryQueue.indexOf(n);c>-1&&this._queryQueue.splice(c,1),this._pulseQueryQueue()},s),n.callback=(u,c)=>{clearTimeout(o),a(u,c)}),this._queryable?this._ending?(n.native=this.native,process.nextTick(()=>{n.handleError(new Error("Client was closed and is not queryable"))}),i):(this._queryQueue.push(n),this._pulseQueryQueue(),i):(n.native=this.native,process.nextTick(()=>{n.handleError(new Error("Client has encountered a connection error and is not queryable"))}),i)};ai.prototype.end=function(r){var e=this;this._ending=!0,this._connected||this.once("connect",this.end.bind(this,r));var t;return r||(t=new this._Promise(function(n,i){r=s=>s?i(s):n()})),this.native.end(function(){e._errorAllQueries(new Error("Connection terminated")),process.nextTick(()=>{e.emit("end"),r&&r()})}),t};ai.prototype._hasActiveQuery=function(){return this._activeQuery&&this._activeQuery.state!=="error"&&this._activeQuery.state!=="end"};ai.prototype._pulseQueryQueue=function(r){if(this._connected&&!this._hasActiveQuery()){var e=this._queryQueue.shift();if(!e){r||this.emit("drain");return}this._activeQuery=e,e.submit(this);var t=this;e.once("_done",function(){t._pulseQueryQueue()})}};ai.prototype.cancel=function(r){this._activeQuery===r?this.native.cancel(function(){}):this._queryQueue.indexOf(r)!==-1&&this._queryQueue.splice(this._queryQueue.indexOf(r),1)};ai.prototype.ref=function(){};ai.prototype.unref=function(){};ai.prototype.setTypeParser=function(r,e,t){return this._types.setTypeParser(r,e,t)};ai.prototype.getTypeParser=function(r,e){return this._types.getTypeParser(r,e)}});var iC=E((JDe,PU)=>{"use strict";PU.exports=kU()});var td=E((ZDe,Wp)=>{"use strict";var nSe=wU(),iSe=Bp(),sSe=JI(),oSe=xU(),{DatabaseError:aSe}=zI(),{escapeIdentifier:lSe,escapeLiteral:uSe}=Up(),cSe=r=>class extends oSe{constructor(t){super(t,r)}},sC=function(r){this.defaults=iSe,this.Client=r,this.Query=this.Client.Query,this.Pool=cSe(this.Client),this._pools=[],this.Connection=sSe,this.types=Vp(),this.DatabaseError=aSe,this.escapeIdentifier=lSe,this.escapeLiteral=uSe};typeof process.env.NODE_PG_FORCE_NATIVE<"u"?Wp.exports=new sC(iC()):(Wp.exports=new sC(nSe),Object.defineProperty(Wp.exports,"native",{configurable:!0,enumerable:!1,get(){var r=null;try{r=new sC(iC())}catch(e){if(e.code!=="MODULE_NOT_FOUND")throw e}return Object.defineProperty(Wp.exports,"native",{value:r}),r}}))});var oC=E(j1=>{"use strict";Object.defineProperty(j1,"__esModule",{value:!0});j1.withConnection=void 0;function fSe(r,e){return async t=>{try{try{r("Connecting to database..."),await t.connect(),r("... connected to database")}catch(i){throw r(`Error connecting to database: ${i.message}`),i}return await e(t)}catch(n){throw r(`Error using connection: ${n.message}`),n}finally{try{r("Closing connection..."),await t.end(),r("... connection closed")}catch(n){r(`Error closing the connection: ${n.message}`)}}}}j1.withConnection=fSe});var lC=E(nd=>{"use strict";Object.defineProperty(nd,"__esModule",{value:!0});nd.runCreateQuery=nd.createDb=void 0;var dSe=td(),hSe=oC(),pSe="42P04";async function mSe(r,e,t={}){if(typeof r!="string")throw new Error("Must pass database name as a string");let n=t.logger!=null?t.logger:()=>{};if(e==null)throw new Error("No config object");if("client"in e)return aC(r,n)(e.client);if(typeof e.user!="string"||typeof e.password!="string"||typeof e.host!="string"||typeof e.port!="number")throw new Error("Database config problem");let{user:i,password:s,host:o,port:a}=e,u=new dSe.Client({database:e.defaultDatabase!=null?e.defaultDatabase:"postgres",user:i,password:s,host:o,port:a});return u.on("error",d=>{n(`pg client emitted an error: ${d.message}`)}),hSe.withConnection(n,aC(r,n))(u)}nd.createDb=mSe;function aC(r,e){return async t=>{await t.query(`CREATE DATABASE "${r.replace(/\"/g,'""')}"`).catch(n=>{switch(n.code){case pSe:{e(`'${r}' database already exists`);return}default:throw e(n),new Error(`Error creating database. Caused by: '${n.name}: ${n.message}'`)}})}}nd.runCreateQuery=aC});var cC=E((t3e,Hp)=>{"use strict";var zp=class r{constructor(e,t){this.strings=e,this.values=t}get query(){return this.bind?this.text:this.sql}get text(){return this.strings.reduce((e,t,n)=>e+"$"+n+t)}append(e){return e instanceof r?(this.strings[this.strings.length-1]+=e.strings[0],this.strings.push.apply(this.strings,e.strings.slice(1)),(this.values||this.bind).push.apply(this.values,e.values)):this.strings[this.strings.length-1]+=e,this}useBind(e){return e===void 0&&(e=!0),e&&!this.bind?(this.bind=this.values,delete this.values):!e&&this.bind&&(this.values=this.bind,delete this.bind),this}setName(e){return this.name=e,this}};Object.defineProperty(zp.prototype,"sql",{enumerable:!0,get(){return this.strings.join("?")}});function uC(r){return new zp(r.slice(0),Array.from(arguments).slice(1))}Hp.exports=uC;Hp.exports.SQL=uC;Hp.exports.default=uC;Hp.exports.SQLStatement=zp});var LU=E(K1=>{"use strict";Object.defineProperty(K1,"__esModule",{value:!0});K1.loadSqlFromJs=void 0;var RU=require("path"),gSe=r=>{let e=require(r);if(!e.generateSql)throw new Error(`Invalid javascript migration file: '${RU.basename(r)}'.
It must to export a 'generateSql' function.`);let t=e.generateSql();if(typeof t!="string")throw new Error(`Invalid javascript migration file: '${RU.basename(r)}'.
'generateSql' function must return a string literal.`);return t};K1.loadSqlFromJs=gSe});var DU=E(q1=>{"use strict";Object.defineProperty(q1,"__esModule",{value:!0});q1.parseFileName=void 0;var ySe=r=>{let e=parseInt(r,10);if(isNaN(e))throw new Error("Migration file name should begin with an integer ID.'");return e},vSe=r=>{let e=/^(-?\d+)[-_]?(.*).(sql|js)$/gi.exec(r);if(!e)throw new Error(`Invalid file name: '${r}'.`);let[,t,n,i]=e,s=i.toLowerCase();if(s!=="js"&&s!=="sql")throw new Error("Not a JS or SQL file");return{id:ySe(t),name:n==null||n===""?r:n,type:s}};q1.parseFileName=vSe});var NU=E(F1=>{"use strict";Object.defineProperty(F1,"__esModule",{value:!0});F1.loadMigrationFile=void 0;var wSe=require("util"),bSe=require("fs"),SSe=require("path"),_Se=require("crypto"),xSe=LU(),ESe=DU(),OSe=wSe.promisify(bSe.readFile),ISe=r=>SSe.basename(r),CSe=async r=>OSe(r,"utf8"),TSe=r=>_Se.createHash("sha1").update(r,"utf8").digest("hex"),ASe=(r,e,t)=>{switch(t){case"sql":return e;case"js":return xSe.loadSqlFromJs(r);default:return t}},MSe=async r=>{let e=ISe(r);try{let{id:t,name:n,type:i}=ESe.parseFileName(e),s=await CSe(r),o=ASe(r,s,i),a=TSe(e+o);return{id:t,name:n,contents:s,fileName:e,hash:a,sql:o}}catch(t){throw new Error(`${t.message} - Offending file: '${e}'.`)}};F1.loadMigrationFile=MSe});var fC=E(id=>{"use strict";Object.defineProperty(id,"__esModule",{value:!0});id.validateMigrationHashes=id.validateMigrationOrdering=void 0;var kSe=(r,e)=>r.id!==e;function PSe(r){let e=r.find(kSe);if(e)throw new Error(`Found a non-consecutive migration ID on file: '${e.fileName}'`)}id.validateMigrationOrdering=PSe;function RSe(r,e){let t=i=>{let s=e[i.id];return s!=null&&s.hash!==i.hash},n=r.filter(t);if(n.length>0){let i=n.map(({fileName:s})=>s);throw new Error(`Hashes don't match for migrations '${i}'.
This means that the scripts have changed since it was applied.`)}}id.validateMigrationHashes=RSe});var dC=E(V1=>{"use strict";Object.defineProperty(V1,"__esModule",{value:!0});V1.loadMigrationFiles=void 0;var LSe=require("fs"),jU=require("path"),DSe=require("util"),NSe=NU(),jSe=fC(),KSe=DSe.promisify(LSe.readdir),qSe=r=>/\.(sql|js)$/gi.test(r),FSe=async(r,e=()=>{},t=!1)=>{e(`Loading migrations from: ${r}`);let n=await KSe(r);if(e(`Found migration files: ${n}`),n==null)return[];let i=[];t||i.push(jU.join(__dirname,"migrations/0_create-migrations-table.sql")),i=[...i,...n.map(a=>jU.resolve(r,a))].filter(qSe);let o=(await Promise.all(i.map(NSe.loadMigrationFile))).sort((a,u)=>a.id-u.id);return jSe.validateMigrationOrdering(o),o};V1.loadMigrationFiles=FSe});var qU=E(U1=>{"use strict";Object.defineProperty(U1,"__esModule",{value:!0});U1.runMigration=void 0;var KU=cC(),B1=()=>{},VSe=async(r,e,t,n)=>{n(`Saving migration to '${r}': ${t.id} | ${t.name} | ${t.hash}`);let i=KU.default`INSERT INTO `.append(r).append(KU.default` ("id", "name", "hash") VALUES (${t.id},${t.name},${t.hash})`);return e.query(i)},BSe=(r,e,t=B1)=>async n=>{let i=n.sql.includes("-- postgres-migrations disable-transaction")===!1;t(`Running migration in transaction: ${i}`);let s=i?()=>e.query("START TRANSACTION"):B1,o=i?()=>e.query("COMMIT"):B1,a=i?()=>e.query("ROLLBACK"):B1;try{return await s(),await e.query(n.sql),await VSe(r,e,n,t),await o(),n}catch(u){try{await a()}catch{}throw new Error(`An error occurred running '${n.name}'. Rolled back this migration. No further migrations were run. Reason: ${u.message}`)}};U1.runMigration=BSe});var FU=E(G1=>{"use strict";Object.defineProperty(G1,"__esModule",{value:!0});G1.withAdvisoryLock=void 0;function USe(r,e){return async t=>{try{try{r("Acquiring advisory lock...");let i=!1;for(;!i;)(await t.query("SELECT pg_try_advisory_lock(-8525285245963000605);")).rows[0].pg_try_advisory_lock===!0?i=!0:await new Promise(o=>setTimeout(o,1e3));r("... acquired advisory lock")}catch(i){throw r(`Error acquiring advisory lock: ${i.message}`),i}return await e(t)}catch(n){throw r(`Error while using lock: ${n.message}`),n}finally{try{r("Releasing advisory lock..."),await t.query("SELECT pg_advisory_unlock(-8525285245963000605);"),r("... released advisory lock")}catch(n){r(`Error releasing advisory lock: ${n.message}`)}}}}G1.withAdvisoryLock=USe});var $U=E($1=>{"use strict";Object.defineProperty($1,"__esModule",{value:!0});$1.migrate=void 0;var VU=td(),GSe=cC(),$Se=lC(),WSe=dC(),zSe=qU(),HSe=fC(),BU=oC(),UU=FU();async function YSe(r,e,t={}){let n=t.logger!=null?t.logger:()=>{};if(r==null)throw new Error("No config object");if(typeof e!="string")throw new Error("Must pass migrations directory as a string");let i=await WSe.loadMigrationFiles(e,n,t.skipCreateMigrationTable);if("client"in r)return UU.withAdvisoryLock(n,GU(i,n))(r.client);if(typeof r.database!="string"||typeof r.user!="string"||typeof r.password!="string"||typeof r.host!="string"||typeof r.port!="number")throw new Error("Database config problem");if(r.ensureDatabaseExists===!0){let{user:s,password:o,host:a,port:u}=r,c=new VU.Client({database:r.defaultDatabase!=null?r.defaultDatabase:"postgres",user:s,password:o,host:a,port:u});await BU.withConnection(n,async h=>{(await h.query({text:"SELECT 1 FROM pg_database WHERE datname=$1",values:[r.database]})).rowCount!==1&&await $Se.runCreateQuery(r.database,n)(h)})(c)}{let s=new VU.Client(r);return s.on("error",a=>{n(`pg client emitted an error: ${a.message}`)}),BU.withConnection(n,UU.withAdvisoryLock(n,GU(i,n)))(s)}}$1.migrate=YSe;function GU(r,e){return async t=>{try{let n="migrations";e("Starting migrations");let i=await JSe(n,t,e);HSe.validateMigrationHashes(r,i);let s=QSe(r,i),o=[];for(let a of s){e(`Starting migration: ${a.id} ${a.name}`);let u=await zSe.runMigration(n,t,e)(a);e(`Finished migration: ${a.id} ${a.name}`),o.push(u)}return ZSe(o,e),e("Finished migrations"),o}catch(n){let i=new Error(`Migration failed. Reason: ${n.message}`);throw i.cause=n,i}}}async function JSe(r,e,t){let n=[];if(await XSe(e,r)){t(`Migrations table with name '${r}' exists, filtering not applied migrations.`);let{rows:i}=await e.query(`SELECT * FROM ${r} ORDER BY id`);n=i}else t(`Migrations table with name '${r}' hasn't been created,
so the database is new and we need to run all migrations.`);return n}function QSe(r,e){let t=n=>!e[n.id];return r.filter(t)}function ZSe(r,e){r.length===0?e("No migrations applied"):e(`Successfully applied migrations: ${r.map(({name:t})=>t)}`)}async function XSe(r,e){let t=await r.query(GSe.default`SELECT EXISTS (
  SELECT 1
  FROM   pg_catalog.pg_class c
  WHERE  c.relname = ${e}
  AND    c.relkind = 'r'
);`);return t.rows.length>0&&t.rows[0].exists}});var WU=E(W1=>{"use strict";Object.defineProperty(W1,"__esModule",{value:!0});W1.MigrationError=void 0;var hC=class extends Error{};W1.MigrationError=hC});var zU=E(oo=>{"use strict";Object.defineProperty(oo,"__esModule",{value:!0});oo.MigrationError=oo.loadMigrationFiles=oo.migrate=oo.createDb=void 0;var e_e=lC();Object.defineProperty(oo,"createDb",{enumerable:!0,get:function(){return e_e.createDb}});var t_e=$U();Object.defineProperty(oo,"migrate",{enumerable:!0,get:function(){return t_e.migrate}});var r_e=dC();Object.defineProperty(oo,"loadMigrationFiles",{enumerable:!0,get:function(){return r_e.loadMigrationFiles}});var n_e=WU();Object.defineProperty(oo,"MigrationError",{enumerable:!0,get:function(){return n_e.MigrationError}})});var yC=E((YU,gC)=>{(function(r,e){"use strict";function t(N,v){if(!N)throw new Error(v||"Assertion failed")}function n(N,v){N.super_=v;var w=function(){};w.prototype=v.prototype,N.prototype=new w,N.prototype.constructor=N}function i(N,v,w){if(i.isBN(N))return N;this.negative=0,this.words=null,this.length=0,this.red=null,N!==null&&((v==="le"||v==="be")&&(w=v,v=10),this._init(N||0,v||10,w||"be"))}typeof r=="object"?r.exports=i:e.BN=i,i.BN=i,i.wordSize=26;var s;try{typeof window<"u"&&typeof window.Buffer<"u"?s=window.Buffer:s=require("buffer").Buffer}catch{}i.isBN=function(v){return v instanceof i?!0:v!==null&&typeof v=="object"&&v.constructor.wordSize===i.wordSize&&Array.isArray(v.words)},i.max=function(v,w){return v.cmp(w)>0?v:w},i.min=function(v,w){return v.cmp(w)<0?v:w},i.prototype._init=function(v,w,I){if(typeof v=="number")return this._initNumber(v,w,I);if(typeof v=="object")return this._initArray(v,w,I);w==="hex"&&(w=16),t(w===(w|0)&&w>=2&&w<=36),v=v.toString().replace(/\s+/g,"");var T=0;v[0]==="-"&&(T++,this.negative=1),T<v.length&&(w===16?this._parseHex(v,T,I):(this._parseBase(v,w,T),I==="le"&&this._initArray(this.toArray(),w,I)))},i.prototype._initNumber=function(v,w,I){v<0&&(this.negative=1,v=-v),v<67108864?(this.words=[v&67108863],this.length=1):v<4503599627370496?(this.words=[v&67108863,v/67108864&67108863],this.length=2):(t(v<9007199254740992),this.words=[v&67108863,v/67108864&67108863,1],this.length=3),I==="le"&&this._initArray(this.toArray(),w,I)},i.prototype._initArray=function(v,w,I){if(t(typeof v.length=="number"),v.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(v.length/3),this.words=new Array(this.length);for(var T=0;T<this.length;T++)this.words[T]=0;var k,M,K=0;if(I==="be")for(T=v.length-1,k=0;T>=0;T-=3)M=v[T]|v[T-1]<<8|v[T-2]<<16,this.words[k]|=M<<K&67108863,this.words[k+1]=M>>>26-K&67108863,K+=24,K>=26&&(K-=26,k++);else if(I==="le")for(T=0,k=0;T<v.length;T+=3)M=v[T]|v[T+1]<<8|v[T+2]<<16,this.words[k]|=M<<K&67108863,this.words[k+1]=M>>>26-K&67108863,K+=24,K>=26&&(K-=26,k++);return this.strip()};function o(N,v){var w=N.charCodeAt(v);return w>=65&&w<=70?w-55:w>=97&&w<=102?w-87:w-48&15}function a(N,v,w){var I=o(N,w);return w-1>=v&&(I|=o(N,w-1)<<4),I}i.prototype._parseHex=function(v,w,I){this.length=Math.ceil((v.length-w)/6),this.words=new Array(this.length);for(var T=0;T<this.length;T++)this.words[T]=0;var k=0,M=0,K;if(I==="be")for(T=v.length-1;T>=w;T-=2)K=a(v,w,T)<<k,this.words[M]|=K&67108863,k>=18?(k-=18,M+=1,this.words[M]|=K>>>26):k+=8;else{var L=v.length-w;for(T=L%2===0?w+1:w;T<v.length;T+=2)K=a(v,w,T)<<k,this.words[M]|=K&67108863,k>=18?(k-=18,M+=1,this.words[M]|=K>>>26):k+=8}this.strip()};function u(N,v,w,I){for(var T=0,k=Math.min(N.length,w),M=v;M<k;M++){var K=N.charCodeAt(M)-48;T*=I,K>=49?T+=K-49+10:K>=17?T+=K-17+10:T+=K}return T}i.prototype._parseBase=function(v,w,I){this.words=[0],this.length=1;for(var T=0,k=1;k<=67108863;k*=w)T++;T--,k=k/w|0;for(var M=v.length-I,K=M%T,L=Math.min(M,M-K)+I,b=0,R=I;R<L;R+=T)b=u(v,R,R+T,w),this.imuln(k),this.words[0]+b<67108864?this.words[0]+=b:this._iaddn(b);if(K!==0){var X=1;for(b=u(v,R,v.length,w),R=0;R<K;R++)X*=w;this.imuln(X),this.words[0]+b<67108864?this.words[0]+=b:this._iaddn(b)}this.strip()},i.prototype.copy=function(v){v.words=new Array(this.length);for(var w=0;w<this.length;w++)v.words[w]=this.words[w];v.length=this.length,v.negative=this.negative,v.red=this.red},i.prototype.clone=function(){var v=new i(null);return this.copy(v),v},i.prototype._expand=function(v){for(;this.length<v;)this.words[this.length++]=0;return this},i.prototype.strip=function(){for(;this.length>1&&this.words[this.length-1]===0;)this.length--;return this._normSign()},i.prototype._normSign=function(){return this.length===1&&this.words[0]===0&&(this.negative=0),this},i.prototype.inspect=function(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var c=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],d=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],h=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];i.prototype.toString=function(v,w){v=v||10,w=w|0||1;var I;if(v===16||v==="hex"){I="";for(var T=0,k=0,M=0;M<this.length;M++){var K=this.words[M],L=((K<<T|k)&16777215).toString(16);k=K>>>24-T&16777215,k!==0||M!==this.length-1?I=c[6-L.length]+L+I:I=L+I,T+=2,T>=26&&(T-=26,M--)}for(k!==0&&(I=k.toString(16)+I);I.length%w!==0;)I="0"+I;return this.negative!==0&&(I="-"+I),I}if(v===(v|0)&&v>=2&&v<=36){var b=d[v],R=h[v];I="";var X=this.clone();for(X.negative=0;!X.isZero();){var fe=X.modn(R).toString(v);X=X.idivn(R),X.isZero()?I=fe+I:I=c[b-fe.length]+fe+I}for(this.isZero()&&(I="0"+I);I.length%w!==0;)I="0"+I;return this.negative!==0&&(I="-"+I),I}t(!1,"Base should be between 2 and 36")},i.prototype.toNumber=function(){var v=this.words[0];return this.length===2?v+=this.words[1]*67108864:this.length===3&&this.words[2]===1?v+=4503599627370496+this.words[1]*67108864:this.length>2&&t(!1,"Number can only safely store up to 53 bits"),this.negative!==0?-v:v},i.prototype.toJSON=function(){return this.toString(16)},i.prototype.toBuffer=function(v,w){return t(typeof s<"u"),this.toArrayLike(s,v,w)},i.prototype.toArray=function(v,w){return this.toArrayLike(Array,v,w)},i.prototype.toArrayLike=function(v,w,I){var T=this.byteLength(),k=I||Math.max(1,T);t(T<=k,"byte array longer than desired length"),t(k>0,"Requested array length <= 0"),this.strip();var M=w==="le",K=new v(k),L,b,R=this.clone();if(M){for(b=0;!R.isZero();b++)L=R.andln(255),R.iushrn(8),K[b]=L;for(;b<k;b++)K[b]=0}else{for(b=0;b<k-T;b++)K[b]=0;for(b=0;!R.isZero();b++)L=R.andln(255),R.iushrn(8),K[k-b-1]=L}return K},Math.clz32?i.prototype._countBits=function(v){return 32-Math.clz32(v)}:i.prototype._countBits=function(v){var w=v,I=0;return w>=4096&&(I+=13,w>>>=13),w>=64&&(I+=7,w>>>=7),w>=8&&(I+=4,w>>>=4),w>=2&&(I+=2,w>>>=2),I+w},i.prototype._zeroBits=function(v){if(v===0)return 26;var w=v,I=0;return w&8191||(I+=13,w>>>=13),w&127||(I+=7,w>>>=7),w&15||(I+=4,w>>>=4),w&3||(I+=2,w>>>=2),w&1||I++,I},i.prototype.bitLength=function(){var v=this.words[this.length-1],w=this._countBits(v);return(this.length-1)*26+w};function p(N){for(var v=new Array(N.bitLength()),w=0;w<v.length;w++){var I=w/26|0,T=w%26;v[w]=(N.words[I]&1<<T)>>>T}return v}i.prototype.zeroBits=function(){if(this.isZero())return 0;for(var v=0,w=0;w<this.length;w++){var I=this._zeroBits(this.words[w]);if(v+=I,I!==26)break}return v},i.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},i.prototype.toTwos=function(v){return this.negative!==0?this.abs().inotn(v).iaddn(1):this.clone()},i.prototype.fromTwos=function(v){return this.testn(v-1)?this.notn(v).iaddn(1).ineg():this.clone()},i.prototype.isNeg=function(){return this.negative!==0},i.prototype.neg=function(){return this.clone().ineg()},i.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},i.prototype.iuor=function(v){for(;this.length<v.length;)this.words[this.length++]=0;for(var w=0;w<v.length;w++)this.words[w]=this.words[w]|v.words[w];return this.strip()},i.prototype.ior=function(v){return t((this.negative|v.negative)===0),this.iuor(v)},i.prototype.or=function(v){return this.length>v.length?this.clone().ior(v):v.clone().ior(this)},i.prototype.uor=function(v){return this.length>v.length?this.clone().iuor(v):v.clone().iuor(this)},i.prototype.iuand=function(v){var w;this.length>v.length?w=v:w=this;for(var I=0;I<w.length;I++)this.words[I]=this.words[I]&v.words[I];return this.length=w.length,this.strip()},i.prototype.iand=function(v){return t((this.negative|v.negative)===0),this.iuand(v)},i.prototype.and=function(v){return this.length>v.length?this.clone().iand(v):v.clone().iand(this)},i.prototype.uand=function(v){return this.length>v.length?this.clone().iuand(v):v.clone().iuand(this)},i.prototype.iuxor=function(v){var w,I;this.length>v.length?(w=this,I=v):(w=v,I=this);for(var T=0;T<I.length;T++)this.words[T]=w.words[T]^I.words[T];if(this!==w)for(;T<w.length;T++)this.words[T]=w.words[T];return this.length=w.length,this.strip()},i.prototype.ixor=function(v){return t((this.negative|v.negative)===0),this.iuxor(v)},i.prototype.xor=function(v){return this.length>v.length?this.clone().ixor(v):v.clone().ixor(this)},i.prototype.uxor=function(v){return this.length>v.length?this.clone().iuxor(v):v.clone().iuxor(this)},i.prototype.inotn=function(v){t(typeof v=="number"&&v>=0);var w=Math.ceil(v/26)|0,I=v%26;this._expand(w),I>0&&w--;for(var T=0;T<w;T++)this.words[T]=~this.words[T]&67108863;return I>0&&(this.words[T]=~this.words[T]&67108863>>26-I),this.strip()},i.prototype.notn=function(v){return this.clone().inotn(v)},i.prototype.setn=function(v,w){t(typeof v=="number"&&v>=0);var I=v/26|0,T=v%26;return this._expand(I+1),w?this.words[I]=this.words[I]|1<<T:this.words[I]=this.words[I]&~(1<<T),this.strip()},i.prototype.iadd=function(v){var w;if(this.negative!==0&&v.negative===0)return this.negative=0,w=this.isub(v),this.negative^=1,this._normSign();if(this.negative===0&&v.negative!==0)return v.negative=0,w=this.isub(v),v.negative=1,w._normSign();var I,T;this.length>v.length?(I=this,T=v):(I=v,T=this);for(var k=0,M=0;M<T.length;M++)w=(I.words[M]|0)+(T.words[M]|0)+k,this.words[M]=w&67108863,k=w>>>26;for(;k!==0&&M<I.length;M++)w=(I.words[M]|0)+k,this.words[M]=w&67108863,k=w>>>26;if(this.length=I.length,k!==0)this.words[this.length]=k,this.length++;else if(I!==this)for(;M<I.length;M++)this.words[M]=I.words[M];return this},i.prototype.add=function(v){var w;return v.negative!==0&&this.negative===0?(v.negative=0,w=this.sub(v),v.negative^=1,w):v.negative===0&&this.negative!==0?(this.negative=0,w=v.sub(this),this.negative=1,w):this.length>v.length?this.clone().iadd(v):v.clone().iadd(this)},i.prototype.isub=function(v){if(v.negative!==0){v.negative=0;var w=this.iadd(v);return v.negative=1,w._normSign()}else if(this.negative!==0)return this.negative=0,this.iadd(v),this.negative=1,this._normSign();var I=this.cmp(v);if(I===0)return this.negative=0,this.length=1,this.words[0]=0,this;var T,k;I>0?(T=this,k=v):(T=v,k=this);for(var M=0,K=0;K<k.length;K++)w=(T.words[K]|0)-(k.words[K]|0)+M,M=w>>26,this.words[K]=w&67108863;for(;M!==0&&K<T.length;K++)w=(T.words[K]|0)+M,M=w>>26,this.words[K]=w&67108863;if(M===0&&K<T.length&&T!==this)for(;K<T.length;K++)this.words[K]=T.words[K];return this.length=Math.max(this.length,K),T!==this&&(this.negative=1),this.strip()},i.prototype.sub=function(v){return this.clone().isub(v)};function m(N,v,w){w.negative=v.negative^N.negative;var I=N.length+v.length|0;w.length=I,I=I-1|0;var T=N.words[0]|0,k=v.words[0]|0,M=T*k,K=M&67108863,L=M/67108864|0;w.words[0]=K;for(var b=1;b<I;b++){for(var R=L>>>26,X=L&67108863,fe=Math.min(b,v.length-1),he=Math.max(0,b-N.length+1);he<=fe;he++){var Ce=b-he|0;T=N.words[Ce]|0,k=v.words[he]|0,M=T*k+X,R+=M/67108864|0,X=M&67108863}w.words[b]=X|0,L=R|0}return L!==0?w.words[b]=L|0:w.length--,w.strip()}var y=function(v,w,I){var T=v.words,k=w.words,M=I.words,K=0,L,b,R,X=T[0]|0,fe=X&8191,he=X>>>13,Ce=T[1]|0,ft=Ce&8191,st=Ce>>>13,Sn=T[2]|0,Ze=Sn&8191,bt=Sn>>>13,yo=T[3]|0,Bt=yo&8191,dt=yo>>>13,fi=T[4]|0,jt=fi&8191,St=fi>>>13,bs=T[5]|0,kt=bs&8191,Ct=bs>>>13,_n=T[6]|0,Pt=_n&8191,zt=_n>>>13,Lm=T[7]|0,Ut=Lm&8191,gr=Lm>>>13,sa=T[8]|0,Kt=sa&8191,Qt=sa>>>13,yc=T[9]|0,Zt=yc&8191,Xt=yc>>>13,vc=k[0]|0,er=vc&8191,tr=vc>>>13,wc=k[1]|0,rr=wc&8191,yr=wc>>>13,Dm=k[2]|0,vr=Dm&8191,ar=Dm>>>13,Ld=k[3]|0,wr=Ld&8191,br=Ld>>>13,Nm=k[4]|0,Sr=Nm&8191,lr=Nm>>>13,jm=k[5]|0,_r=jm&8191,xr=jm>>>13,bc=k[6]|0,Er=bc&8191,nr=bc>>>13,Km=k[7]|0,Or=Km&8191,Ir=Km>>>13,qm=k[8]|0,Cr=qm&8191,Tr=qm>>>13,Fm=k[9]|0,Ar=Fm&8191,ur=Fm>>>13;I.negative=v.negative^w.negative,I.length=19,L=Math.imul(fe,er),b=Math.imul(fe,tr),b=b+Math.imul(he,er)|0,R=Math.imul(he,tr);var Dd=(K+L|0)+((b&8191)<<13)|0;K=(R+(b>>>13)|0)+(Dd>>>26)|0,Dd&=67108863,L=Math.imul(ft,er),b=Math.imul(ft,tr),b=b+Math.imul(st,er)|0,R=Math.imul(st,tr),L=L+Math.imul(fe,rr)|0,b=b+Math.imul(fe,yr)|0,b=b+Math.imul(he,rr)|0,R=R+Math.imul(he,yr)|0;var Nd=(K+L|0)+((b&8191)<<13)|0;K=(R+(b>>>13)|0)+(Nd>>>26)|0,Nd&=67108863,L=Math.imul(Ze,er),b=Math.imul(Ze,tr),b=b+Math.imul(bt,er)|0,R=Math.imul(bt,tr),L=L+Math.imul(ft,rr)|0,b=b+Math.imul(ft,yr)|0,b=b+Math.imul(st,rr)|0,R=R+Math.imul(st,yr)|0,L=L+Math.imul(fe,vr)|0,b=b+Math.imul(fe,ar)|0,b=b+Math.imul(he,vr)|0,R=R+Math.imul(he,ar)|0;var jd=(K+L|0)+((b&8191)<<13)|0;K=(R+(b>>>13)|0)+(jd>>>26)|0,jd&=67108863,L=Math.imul(Bt,er),b=Math.imul(Bt,tr),b=b+Math.imul(dt,er)|0,R=Math.imul(dt,tr),L=L+Math.imul(Ze,rr)|0,b=b+Math.imul(Ze,yr)|0,b=b+Math.imul(bt,rr)|0,R=R+Math.imul(bt,yr)|0,L=L+Math.imul(ft,vr)|0,b=b+Math.imul(ft,ar)|0,b=b+Math.imul(st,vr)|0,R=R+Math.imul(st,ar)|0,L=L+Math.imul(fe,wr)|0,b=b+Math.imul(fe,br)|0,b=b+Math.imul(he,wr)|0,R=R+Math.imul(he,br)|0;var Kd=(K+L|0)+((b&8191)<<13)|0;K=(R+(b>>>13)|0)+(Kd>>>26)|0,Kd&=67108863,L=Math.imul(jt,er),b=Math.imul(jt,tr),b=b+Math.imul(St,er)|0,R=Math.imul(St,tr),L=L+Math.imul(Bt,rr)|0,b=b+Math.imul(Bt,yr)|0,b=b+Math.imul(dt,rr)|0,R=R+Math.imul(dt,yr)|0,L=L+Math.imul(Ze,vr)|0,b=b+Math.imul(Ze,ar)|0,b=b+Math.imul(bt,vr)|0,R=R+Math.imul(bt,ar)|0,L=L+Math.imul(ft,wr)|0,b=b+Math.imul(ft,br)|0,b=b+Math.imul(st,wr)|0,R=R+Math.imul(st,br)|0,L=L+Math.imul(fe,Sr)|0,b=b+Math.imul(fe,lr)|0,b=b+Math.imul(he,Sr)|0,R=R+Math.imul(he,lr)|0;var qd=(K+L|0)+((b&8191)<<13)|0;K=(R+(b>>>13)|0)+(qd>>>26)|0,qd&=67108863,L=Math.imul(kt,er),b=Math.imul(kt,tr),b=b+Math.imul(Ct,er)|0,R=Math.imul(Ct,tr),L=L+Math.imul(jt,rr)|0,b=b+Math.imul(jt,yr)|0,b=b+Math.imul(St,rr)|0,R=R+Math.imul(St,yr)|0,L=L+Math.imul(Bt,vr)|0,b=b+Math.imul(Bt,ar)|0,b=b+Math.imul(dt,vr)|0,R=R+Math.imul(dt,ar)|0,L=L+Math.imul(Ze,wr)|0,b=b+Math.imul(Ze,br)|0,b=b+Math.imul(bt,wr)|0,R=R+Math.imul(bt,br)|0,L=L+Math.imul(ft,Sr)|0,b=b+Math.imul(ft,lr)|0,b=b+Math.imul(st,Sr)|0,R=R+Math.imul(st,lr)|0,L=L+Math.imul(fe,_r)|0,b=b+Math.imul(fe,xr)|0,b=b+Math.imul(he,_r)|0,R=R+Math.imul(he,xr)|0;var Fd=(K+L|0)+((b&8191)<<13)|0;K=(R+(b>>>13)|0)+(Fd>>>26)|0,Fd&=67108863,L=Math.imul(Pt,er),b=Math.imul(Pt,tr),b=b+Math.imul(zt,er)|0,R=Math.imul(zt,tr),L=L+Math.imul(kt,rr)|0,b=b+Math.imul(kt,yr)|0,b=b+Math.imul(Ct,rr)|0,R=R+Math.imul(Ct,yr)|0,L=L+Math.imul(jt,vr)|0,b=b+Math.imul(jt,ar)|0,b=b+Math.imul(St,vr)|0,R=R+Math.imul(St,ar)|0,L=L+Math.imul(Bt,wr)|0,b=b+Math.imul(Bt,br)|0,b=b+Math.imul(dt,wr)|0,R=R+Math.imul(dt,br)|0,L=L+Math.imul(Ze,Sr)|0,b=b+Math.imul(Ze,lr)|0,b=b+Math.imul(bt,Sr)|0,R=R+Math.imul(bt,lr)|0,L=L+Math.imul(ft,_r)|0,b=b+Math.imul(ft,xr)|0,b=b+Math.imul(st,_r)|0,R=R+Math.imul(st,xr)|0,L=L+Math.imul(fe,Er)|0,b=b+Math.imul(fe,nr)|0,b=b+Math.imul(he,Er)|0,R=R+Math.imul(he,nr)|0;var oa=(K+L|0)+((b&8191)<<13)|0;K=(R+(b>>>13)|0)+(oa>>>26)|0,oa&=67108863,L=Math.imul(Ut,er),b=Math.imul(Ut,tr),b=b+Math.imul(gr,er)|0,R=Math.imul(gr,tr),L=L+Math.imul(Pt,rr)|0,b=b+Math.imul(Pt,yr)|0,b=b+Math.imul(zt,rr)|0,R=R+Math.imul(zt,yr)|0,L=L+Math.imul(kt,vr)|0,b=b+Math.imul(kt,ar)|0,b=b+Math.imul(Ct,vr)|0,R=R+Math.imul(Ct,ar)|0,L=L+Math.imul(jt,wr)|0,b=b+Math.imul(jt,br)|0,b=b+Math.imul(St,wr)|0,R=R+Math.imul(St,br)|0,L=L+Math.imul(Bt,Sr)|0,b=b+Math.imul(Bt,lr)|0,b=b+Math.imul(dt,Sr)|0,R=R+Math.imul(dt,lr)|0,L=L+Math.imul(Ze,_r)|0,b=b+Math.imul(Ze,xr)|0,b=b+Math.imul(bt,_r)|0,R=R+Math.imul(bt,xr)|0,L=L+Math.imul(ft,Er)|0,b=b+Math.imul(ft,nr)|0,b=b+Math.imul(st,Er)|0,R=R+Math.imul(st,nr)|0,L=L+Math.imul(fe,Or)|0,b=b+Math.imul(fe,Ir)|0,b=b+Math.imul(he,Or)|0,R=R+Math.imul(he,Ir)|0;var Vd=(K+L|0)+((b&8191)<<13)|0;K=(R+(b>>>13)|0)+(Vd>>>26)|0,Vd&=67108863,L=Math.imul(Kt,er),b=Math.imul(Kt,tr),b=b+Math.imul(Qt,er)|0,R=Math.imul(Qt,tr),L=L+Math.imul(Ut,rr)|0,b=b+Math.imul(Ut,yr)|0,b=b+Math.imul(gr,rr)|0,R=R+Math.imul(gr,yr)|0,L=L+Math.imul(Pt,vr)|0,b=b+Math.imul(Pt,ar)|0,b=b+Math.imul(zt,vr)|0,R=R+Math.imul(zt,ar)|0,L=L+Math.imul(kt,wr)|0,b=b+Math.imul(kt,br)|0,b=b+Math.imul(Ct,wr)|0,R=R+Math.imul(Ct,br)|0,L=L+Math.imul(jt,Sr)|0,b=b+Math.imul(jt,lr)|0,b=b+Math.imul(St,Sr)|0,R=R+Math.imul(St,lr)|0,L=L+Math.imul(Bt,_r)|0,b=b+Math.imul(Bt,xr)|0,b=b+Math.imul(dt,_r)|0,R=R+Math.imul(dt,xr)|0,L=L+Math.imul(Ze,Er)|0,b=b+Math.imul(Ze,nr)|0,b=b+Math.imul(bt,Er)|0,R=R+Math.imul(bt,nr)|0,L=L+Math.imul(ft,Or)|0,b=b+Math.imul(ft,Ir)|0,b=b+Math.imul(st,Or)|0,R=R+Math.imul(st,Ir)|0,L=L+Math.imul(fe,Cr)|0,b=b+Math.imul(fe,Tr)|0,b=b+Math.imul(he,Cr)|0,R=R+Math.imul(he,Tr)|0;var aa=(K+L|0)+((b&8191)<<13)|0;K=(R+(b>>>13)|0)+(aa>>>26)|0,aa&=67108863,L=Math.imul(Zt,er),b=Math.imul(Zt,tr),b=b+Math.imul(Xt,er)|0,R=Math.imul(Xt,tr),L=L+Math.imul(Kt,rr)|0,b=b+Math.imul(Kt,yr)|0,b=b+Math.imul(Qt,rr)|0,R=R+Math.imul(Qt,yr)|0,L=L+Math.imul(Ut,vr)|0,b=b+Math.imul(Ut,ar)|0,b=b+Math.imul(gr,vr)|0,R=R+Math.imul(gr,ar)|0,L=L+Math.imul(Pt,wr)|0,b=b+Math.imul(Pt,br)|0,b=b+Math.imul(zt,wr)|0,R=R+Math.imul(zt,br)|0,L=L+Math.imul(kt,Sr)|0,b=b+Math.imul(kt,lr)|0,b=b+Math.imul(Ct,Sr)|0,R=R+Math.imul(Ct,lr)|0,L=L+Math.imul(jt,_r)|0,b=b+Math.imul(jt,xr)|0,b=b+Math.imul(St,_r)|0,R=R+Math.imul(St,xr)|0,L=L+Math.imul(Bt,Er)|0,b=b+Math.imul(Bt,nr)|0,b=b+Math.imul(dt,Er)|0,R=R+Math.imul(dt,nr)|0,L=L+Math.imul(Ze,Or)|0,b=b+Math.imul(Ze,Ir)|0,b=b+Math.imul(bt,Or)|0,R=R+Math.imul(bt,Ir)|0,L=L+Math.imul(ft,Cr)|0,b=b+Math.imul(ft,Tr)|0,b=b+Math.imul(st,Cr)|0,R=R+Math.imul(st,Tr)|0,L=L+Math.imul(fe,Ar)|0,b=b+Math.imul(fe,ur)|0,b=b+Math.imul(he,Ar)|0,R=R+Math.imul(he,ur)|0;var Bd=(K+L|0)+((b&8191)<<13)|0;K=(R+(b>>>13)|0)+(Bd>>>26)|0,Bd&=67108863,L=Math.imul(Zt,rr),b=Math.imul(Zt,yr),b=b+Math.imul(Xt,rr)|0,R=Math.imul(Xt,yr),L=L+Math.imul(Kt,vr)|0,b=b+Math.imul(Kt,ar)|0,b=b+Math.imul(Qt,vr)|0,R=R+Math.imul(Qt,ar)|0,L=L+Math.imul(Ut,wr)|0,b=b+Math.imul(Ut,br)|0,b=b+Math.imul(gr,wr)|0,R=R+Math.imul(gr,br)|0,L=L+Math.imul(Pt,Sr)|0,b=b+Math.imul(Pt,lr)|0,b=b+Math.imul(zt,Sr)|0,R=R+Math.imul(zt,lr)|0,L=L+Math.imul(kt,_r)|0,b=b+Math.imul(kt,xr)|0,b=b+Math.imul(Ct,_r)|0,R=R+Math.imul(Ct,xr)|0,L=L+Math.imul(jt,Er)|0,b=b+Math.imul(jt,nr)|0,b=b+Math.imul(St,Er)|0,R=R+Math.imul(St,nr)|0,L=L+Math.imul(Bt,Or)|0,b=b+Math.imul(Bt,Ir)|0,b=b+Math.imul(dt,Or)|0,R=R+Math.imul(dt,Ir)|0,L=L+Math.imul(Ze,Cr)|0,b=b+Math.imul(Ze,Tr)|0,b=b+Math.imul(bt,Cr)|0,R=R+Math.imul(bt,Tr)|0,L=L+Math.imul(ft,Ar)|0,b=b+Math.imul(ft,ur)|0,b=b+Math.imul(st,Ar)|0,R=R+Math.imul(st,ur)|0;var Ud=(K+L|0)+((b&8191)<<13)|0;K=(R+(b>>>13)|0)+(Ud>>>26)|0,Ud&=67108863,L=Math.imul(Zt,vr),b=Math.imul(Zt,ar),b=b+Math.imul(Xt,vr)|0,R=Math.imul(Xt,ar),L=L+Math.imul(Kt,wr)|0,b=b+Math.imul(Kt,br)|0,b=b+Math.imul(Qt,wr)|0,R=R+Math.imul(Qt,br)|0,L=L+Math.imul(Ut,Sr)|0,b=b+Math.imul(Ut,lr)|0,b=b+Math.imul(gr,Sr)|0,R=R+Math.imul(gr,lr)|0,L=L+Math.imul(Pt,_r)|0,b=b+Math.imul(Pt,xr)|0,b=b+Math.imul(zt,_r)|0,R=R+Math.imul(zt,xr)|0,L=L+Math.imul(kt,Er)|0,b=b+Math.imul(kt,nr)|0,b=b+Math.imul(Ct,Er)|0,R=R+Math.imul(Ct,nr)|0,L=L+Math.imul(jt,Or)|0,b=b+Math.imul(jt,Ir)|0,b=b+Math.imul(St,Or)|0,R=R+Math.imul(St,Ir)|0,L=L+Math.imul(Bt,Cr)|0,b=b+Math.imul(Bt,Tr)|0,b=b+Math.imul(dt,Cr)|0,R=R+Math.imul(dt,Tr)|0,L=L+Math.imul(Ze,Ar)|0,b=b+Math.imul(Ze,ur)|0,b=b+Math.imul(bt,Ar)|0,R=R+Math.imul(bt,ur)|0;var Gd=(K+L|0)+((b&8191)<<13)|0;K=(R+(b>>>13)|0)+(Gd>>>26)|0,Gd&=67108863,L=Math.imul(Zt,wr),b=Math.imul(Zt,br),b=b+Math.imul(Xt,wr)|0,R=Math.imul(Xt,br),L=L+Math.imul(Kt,Sr)|0,b=b+Math.imul(Kt,lr)|0,b=b+Math.imul(Qt,Sr)|0,R=R+Math.imul(Qt,lr)|0,L=L+Math.imul(Ut,_r)|0,b=b+Math.imul(Ut,xr)|0,b=b+Math.imul(gr,_r)|0,R=R+Math.imul(gr,xr)|0,L=L+Math.imul(Pt,Er)|0,b=b+Math.imul(Pt,nr)|0,b=b+Math.imul(zt,Er)|0,R=R+Math.imul(zt,nr)|0,L=L+Math.imul(kt,Or)|0,b=b+Math.imul(kt,Ir)|0,b=b+Math.imul(Ct,Or)|0,R=R+Math.imul(Ct,Ir)|0,L=L+Math.imul(jt,Cr)|0,b=b+Math.imul(jt,Tr)|0,b=b+Math.imul(St,Cr)|0,R=R+Math.imul(St,Tr)|0,L=L+Math.imul(Bt,Ar)|0,b=b+Math.imul(Bt,ur)|0,b=b+Math.imul(dt,Ar)|0,R=R+Math.imul(dt,ur)|0;var Sc=(K+L|0)+((b&8191)<<13)|0;K=(R+(b>>>13)|0)+(Sc>>>26)|0,Sc&=67108863,L=Math.imul(Zt,Sr),b=Math.imul(Zt,lr),b=b+Math.imul(Xt,Sr)|0,R=Math.imul(Xt,lr),L=L+Math.imul(Kt,_r)|0,b=b+Math.imul(Kt,xr)|0,b=b+Math.imul(Qt,_r)|0,R=R+Math.imul(Qt,xr)|0,L=L+Math.imul(Ut,Er)|0,b=b+Math.imul(Ut,nr)|0,b=b+Math.imul(gr,Er)|0,R=R+Math.imul(gr,nr)|0,L=L+Math.imul(Pt,Or)|0,b=b+Math.imul(Pt,Ir)|0,b=b+Math.imul(zt,Or)|0,R=R+Math.imul(zt,Ir)|0,L=L+Math.imul(kt,Cr)|0,b=b+Math.imul(kt,Tr)|0,b=b+Math.imul(Ct,Cr)|0,R=R+Math.imul(Ct,Tr)|0,L=L+Math.imul(jt,Ar)|0,b=b+Math.imul(jt,ur)|0,b=b+Math.imul(St,Ar)|0,R=R+Math.imul(St,ur)|0;var _c=(K+L|0)+((b&8191)<<13)|0;K=(R+(b>>>13)|0)+(_c>>>26)|0,_c&=67108863,L=Math.imul(Zt,_r),b=Math.imul(Zt,xr),b=b+Math.imul(Xt,_r)|0,R=Math.imul(Xt,xr),L=L+Math.imul(Kt,Er)|0,b=b+Math.imul(Kt,nr)|0,b=b+Math.imul(Qt,Er)|0,R=R+Math.imul(Qt,nr)|0,L=L+Math.imul(Ut,Or)|0,b=b+Math.imul(Ut,Ir)|0,b=b+Math.imul(gr,Or)|0,R=R+Math.imul(gr,Ir)|0,L=L+Math.imul(Pt,Cr)|0,b=b+Math.imul(Pt,Tr)|0,b=b+Math.imul(zt,Cr)|0,R=R+Math.imul(zt,Tr)|0,L=L+Math.imul(kt,Ar)|0,b=b+Math.imul(kt,ur)|0,b=b+Math.imul(Ct,Ar)|0,R=R+Math.imul(Ct,ur)|0;var xc=(K+L|0)+((b&8191)<<13)|0;K=(R+(b>>>13)|0)+(xc>>>26)|0,xc&=67108863,L=Math.imul(Zt,Er),b=Math.imul(Zt,nr),b=b+Math.imul(Xt,Er)|0,R=Math.imul(Xt,nr),L=L+Math.imul(Kt,Or)|0,b=b+Math.imul(Kt,Ir)|0,b=b+Math.imul(Qt,Or)|0,R=R+Math.imul(Qt,Ir)|0,L=L+Math.imul(Ut,Cr)|0,b=b+Math.imul(Ut,Tr)|0,b=b+Math.imul(gr,Cr)|0,R=R+Math.imul(gr,Tr)|0,L=L+Math.imul(Pt,Ar)|0,b=b+Math.imul(Pt,ur)|0,b=b+Math.imul(zt,Ar)|0,R=R+Math.imul(zt,ur)|0;var $d=(K+L|0)+((b&8191)<<13)|0;K=(R+(b>>>13)|0)+($d>>>26)|0,$d&=67108863,L=Math.imul(Zt,Or),b=Math.imul(Zt,Ir),b=b+Math.imul(Xt,Or)|0,R=Math.imul(Xt,Ir),L=L+Math.imul(Kt,Cr)|0,b=b+Math.imul(Kt,Tr)|0,b=b+Math.imul(Qt,Cr)|0,R=R+Math.imul(Qt,Tr)|0,L=L+Math.imul(Ut,Ar)|0,b=b+Math.imul(Ut,ur)|0,b=b+Math.imul(gr,Ar)|0,R=R+Math.imul(gr,ur)|0;var Wd=(K+L|0)+((b&8191)<<13)|0;K=(R+(b>>>13)|0)+(Wd>>>26)|0,Wd&=67108863,L=Math.imul(Zt,Cr),b=Math.imul(Zt,Tr),b=b+Math.imul(Xt,Cr)|0,R=Math.imul(Xt,Tr),L=L+Math.imul(Kt,Ar)|0,b=b+Math.imul(Kt,ur)|0,b=b+Math.imul(Qt,Ar)|0,R=R+Math.imul(Qt,ur)|0;var zd=(K+L|0)+((b&8191)<<13)|0;K=(R+(b>>>13)|0)+(zd>>>26)|0,zd&=67108863,L=Math.imul(Zt,Ar),b=Math.imul(Zt,ur),b=b+Math.imul(Xt,Ar)|0,R=Math.imul(Xt,ur);var Hd=(K+L|0)+((b&8191)<<13)|0;return K=(R+(b>>>13)|0)+(Hd>>>26)|0,Hd&=67108863,M[0]=Dd,M[1]=Nd,M[2]=jd,M[3]=Kd,M[4]=qd,M[5]=Fd,M[6]=oa,M[7]=Vd,M[8]=aa,M[9]=Bd,M[10]=Ud,M[11]=Gd,M[12]=Sc,M[13]=_c,M[14]=xc,M[15]=$d,M[16]=Wd,M[17]=zd,M[18]=Hd,K!==0&&(M[19]=K,I.length++),I};Math.imul||(y=m);function _(N,v,w){w.negative=v.negative^N.negative,w.length=N.length+v.length;for(var I=0,T=0,k=0;k<w.length-1;k++){var M=T;T=0;for(var K=I&67108863,L=Math.min(k,v.length-1),b=Math.max(0,k-N.length+1);b<=L;b++){var R=k-b,X=N.words[R]|0,fe=v.words[b]|0,he=X*fe,Ce=he&67108863;M=M+(he/67108864|0)|0,Ce=Ce+K|0,K=Ce&67108863,M=M+(Ce>>>26)|0,T+=M>>>26,M&=67108863}w.words[k]=K,I=M,M=T}return I!==0?w.words[k]=I:w.length--,w.strip()}function O(N,v,w){var I=new x;return I.mulp(N,v,w)}i.prototype.mulTo=function(v,w){var I,T=this.length+v.length;return this.length===10&&v.length===10?I=y(this,v,w):T<63?I=m(this,v,w):T<1024?I=_(this,v,w):I=O(this,v,w),I};function x(N,v){this.x=N,this.y=v}x.prototype.makeRBT=function(v){for(var w=new Array(v),I=i.prototype._countBits(v)-1,T=0;T<v;T++)w[T]=this.revBin(T,I,v);return w},x.prototype.revBin=function(v,w,I){if(v===0||v===I-1)return v;for(var T=0,k=0;k<w;k++)T|=(v&1)<<w-k-1,v>>=1;return T},x.prototype.permute=function(v,w,I,T,k,M){for(var K=0;K<M;K++)T[K]=w[v[K]],k[K]=I[v[K]]},x.prototype.transform=function(v,w,I,T,k,M){this.permute(M,v,w,I,T,k);for(var K=1;K<k;K<<=1)for(var L=K<<1,b=Math.cos(2*Math.PI/L),R=Math.sin(2*Math.PI/L),X=0;X<k;X+=L)for(var fe=b,he=R,Ce=0;Ce<K;Ce++){var ft=I[X+Ce],st=T[X+Ce],Sn=I[X+Ce+K],Ze=T[X+Ce+K],bt=fe*Sn-he*Ze;Ze=fe*Ze+he*Sn,Sn=bt,I[X+Ce]=ft+Sn,T[X+Ce]=st+Ze,I[X+Ce+K]=ft-Sn,T[X+Ce+K]=st-Ze,Ce!==L&&(bt=b*fe-R*he,he=b*he+R*fe,fe=bt)}},x.prototype.guessLen13b=function(v,w){var I=Math.max(w,v)|1,T=I&1,k=0;for(I=I/2|0;I;I=I>>>1)k++;return 1<<k+1+T},x.prototype.conjugate=function(v,w,I){if(!(I<=1))for(var T=0;T<I/2;T++){var k=v[T];v[T]=v[I-T-1],v[I-T-1]=k,k=w[T],w[T]=-w[I-T-1],w[I-T-1]=-k}},x.prototype.normalize13b=function(v,w){for(var I=0,T=0;T<w/2;T++){var k=Math.round(v[2*T+1]/w)*8192+Math.round(v[2*T]/w)+I;v[T]=k&67108863,k<67108864?I=0:I=k/67108864|0}return v},x.prototype.convert13b=function(v,w,I,T){for(var k=0,M=0;M<w;M++)k=k+(v[M]|0),I[2*M]=k&8191,k=k>>>13,I[2*M+1]=k&8191,k=k>>>13;for(M=2*w;M<T;++M)I[M]=0;t(k===0),t((k&-8192)===0)},x.prototype.stub=function(v){for(var w=new Array(v),I=0;I<v;I++)w[I]=0;return w},x.prototype.mulp=function(v,w,I){var T=2*this.guessLen13b(v.length,w.length),k=this.makeRBT(T),M=this.stub(T),K=new Array(T),L=new Array(T),b=new Array(T),R=new Array(T),X=new Array(T),fe=new Array(T),he=I.words;he.length=T,this.convert13b(v.words,v.length,K,T),this.convert13b(w.words,w.length,R,T),this.transform(K,M,L,b,T,k),this.transform(R,M,X,fe,T,k);for(var Ce=0;Ce<T;Ce++){var ft=L[Ce]*X[Ce]-b[Ce]*fe[Ce];b[Ce]=L[Ce]*fe[Ce]+b[Ce]*X[Ce],L[Ce]=ft}return this.conjugate(L,b,T),this.transform(L,b,he,M,T,k),this.conjugate(he,M,T),this.normalize13b(he,T),I.negative=v.negative^w.negative,I.length=v.length+w.length,I.strip()},i.prototype.mul=function(v){var w=new i(null);return w.words=new Array(this.length+v.length),this.mulTo(v,w)},i.prototype.mulf=function(v){var w=new i(null);return w.words=new Array(this.length+v.length),O(this,v,w)},i.prototype.imul=function(v){return this.clone().mulTo(v,this)},i.prototype.imuln=function(v){t(typeof v=="number"),t(v<67108864);for(var w=0,I=0;I<this.length;I++){var T=(this.words[I]|0)*v,k=(T&67108863)+(w&67108863);w>>=26,w+=T/67108864|0,w+=k>>>26,this.words[I]=k&67108863}return w!==0&&(this.words[I]=w,this.length++),this},i.prototype.muln=function(v){return this.clone().imuln(v)},i.prototype.sqr=function(){return this.mul(this)},i.prototype.isqr=function(){return this.imul(this.clone())},i.prototype.pow=function(v){var w=p(v);if(w.length===0)return new i(1);for(var I=this,T=0;T<w.length&&w[T]===0;T++,I=I.sqr());if(++T<w.length)for(var k=I.sqr();T<w.length;T++,k=k.sqr())w[T]!==0&&(I=I.mul(k));return I},i.prototype.iushln=function(v){t(typeof v=="number"&&v>=0);var w=v%26,I=(v-w)/26,T=67108863>>>26-w<<26-w,k;if(w!==0){var M=0;for(k=0;k<this.length;k++){var K=this.words[k]&T,L=(this.words[k]|0)-K<<w;this.words[k]=L|M,M=K>>>26-w}M&&(this.words[k]=M,this.length++)}if(I!==0){for(k=this.length-1;k>=0;k--)this.words[k+I]=this.words[k];for(k=0;k<I;k++)this.words[k]=0;this.length+=I}return this.strip()},i.prototype.ishln=function(v){return t(this.negative===0),this.iushln(v)},i.prototype.iushrn=function(v,w,I){t(typeof v=="number"&&v>=0);var T;w?T=(w-w%26)/26:T=0;var k=v%26,M=Math.min((v-k)/26,this.length),K=67108863^67108863>>>k<<k,L=I;if(T-=M,T=Math.max(0,T),L){for(var b=0;b<M;b++)L.words[b]=this.words[b];L.length=M}if(M!==0)if(this.length>M)for(this.length-=M,b=0;b<this.length;b++)this.words[b]=this.words[b+M];else this.words[0]=0,this.length=1;var R=0;for(b=this.length-1;b>=0&&(R!==0||b>=T);b--){var X=this.words[b]|0;this.words[b]=R<<26-k|X>>>k,R=X&K}return L&&R!==0&&(L.words[L.length++]=R),this.length===0&&(this.words[0]=0,this.length=1),this.strip()},i.prototype.ishrn=function(v,w,I){return t(this.negative===0),this.iushrn(v,w,I)},i.prototype.shln=function(v){return this.clone().ishln(v)},i.prototype.ushln=function(v){return this.clone().iushln(v)},i.prototype.shrn=function(v){return this.clone().ishrn(v)},i.prototype.ushrn=function(v){return this.clone().iushrn(v)},i.prototype.testn=function(v){t(typeof v=="number"&&v>=0);var w=v%26,I=(v-w)/26,T=1<<w;if(this.length<=I)return!1;var k=this.words[I];return!!(k&T)},i.prototype.imaskn=function(v){t(typeof v=="number"&&v>=0);var w=v%26,I=(v-w)/26;if(t(this.negative===0,"imaskn works only with positive numbers"),this.length<=I)return this;if(w!==0&&I++,this.length=Math.min(I,this.length),w!==0){var T=67108863^67108863>>>w<<w;this.words[this.length-1]&=T}return this.strip()},i.prototype.maskn=function(v){return this.clone().imaskn(v)},i.prototype.iaddn=function(v){return t(typeof v=="number"),t(v<67108864),v<0?this.isubn(-v):this.negative!==0?this.length===1&&(this.words[0]|0)<v?(this.words[0]=v-(this.words[0]|0),this.negative=0,this):(this.negative=0,this.isubn(v),this.negative=1,this):this._iaddn(v)},i.prototype._iaddn=function(v){this.words[0]+=v;for(var w=0;w<this.length&&this.words[w]>=67108864;w++)this.words[w]-=67108864,w===this.length-1?this.words[w+1]=1:this.words[w+1]++;return this.length=Math.max(this.length,w+1),this},i.prototype.isubn=function(v){if(t(typeof v=="number"),t(v<67108864),v<0)return this.iaddn(-v);if(this.negative!==0)return this.negative=0,this.iaddn(v),this.negative=1,this;if(this.words[0]-=v,this.length===1&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var w=0;w<this.length&&this.words[w]<0;w++)this.words[w]+=67108864,this.words[w+1]-=1;return this.strip()},i.prototype.addn=function(v){return this.clone().iaddn(v)},i.prototype.subn=function(v){return this.clone().isubn(v)},i.prototype.iabs=function(){return this.negative=0,this},i.prototype.abs=function(){return this.clone().iabs()},i.prototype._ishlnsubmul=function(v,w,I){var T=v.length+I,k;this._expand(T);var M,K=0;for(k=0;k<v.length;k++){M=(this.words[k+I]|0)+K;var L=(v.words[k]|0)*w;M-=L&67108863,K=(M>>26)-(L/67108864|0),this.words[k+I]=M&67108863}for(;k<this.length-I;k++)M=(this.words[k+I]|0)+K,K=M>>26,this.words[k+I]=M&67108863;if(K===0)return this.strip();for(t(K===-1),K=0,k=0;k<this.length;k++)M=-(this.words[k]|0)+K,K=M>>26,this.words[k]=M&67108863;return this.negative=1,this.strip()},i.prototype._wordDiv=function(v,w){var I=this.length-v.length,T=this.clone(),k=v,M=k.words[k.length-1]|0,K=this._countBits(M);I=26-K,I!==0&&(k=k.ushln(I),T.iushln(I),M=k.words[k.length-1]|0);var L=T.length-k.length,b;if(w!=="mod"){b=new i(null),b.length=L+1,b.words=new Array(b.length);for(var R=0;R<b.length;R++)b.words[R]=0}var X=T.clone()._ishlnsubmul(k,1,L);X.negative===0&&(T=X,b&&(b.words[L]=1));for(var fe=L-1;fe>=0;fe--){var he=(T.words[k.length+fe]|0)*67108864+(T.words[k.length+fe-1]|0);for(he=Math.min(he/M|0,67108863),T._ishlnsubmul(k,he,fe);T.negative!==0;)he--,T.negative=0,T._ishlnsubmul(k,1,fe),T.isZero()||(T.negative^=1);b&&(b.words[fe]=he)}return b&&b.strip(),T.strip(),w!=="div"&&I!==0&&T.iushrn(I),{div:b||null,mod:T}},i.prototype.divmod=function(v,w,I){if(t(!v.isZero()),this.isZero())return{div:new i(0),mod:new i(0)};var T,k,M;return this.negative!==0&&v.negative===0?(M=this.neg().divmod(v,w),w!=="mod"&&(T=M.div.neg()),w!=="div"&&(k=M.mod.neg(),I&&k.negative!==0&&k.iadd(v)),{div:T,mod:k}):this.negative===0&&v.negative!==0?(M=this.divmod(v.neg(),w),w!=="mod"&&(T=M.div.neg()),{div:T,mod:M.mod}):this.negative&v.negative?(M=this.neg().divmod(v.neg(),w),w!=="div"&&(k=M.mod.neg(),I&&k.negative!==0&&k.isub(v)),{div:M.div,mod:k}):v.length>this.length||this.cmp(v)<0?{div:new i(0),mod:this}:v.length===1?w==="div"?{div:this.divn(v.words[0]),mod:null}:w==="mod"?{div:null,mod:new i(this.modn(v.words[0]))}:{div:this.divn(v.words[0]),mod:new i(this.modn(v.words[0]))}:this._wordDiv(v,w)},i.prototype.div=function(v){return this.divmod(v,"div",!1).div},i.prototype.mod=function(v){return this.divmod(v,"mod",!1).mod},i.prototype.umod=function(v){return this.divmod(v,"mod",!0).mod},i.prototype.divRound=function(v){var w=this.divmod(v);if(w.mod.isZero())return w.div;var I=w.div.negative!==0?w.mod.isub(v):w.mod,T=v.ushrn(1),k=v.andln(1),M=I.cmp(T);return M<0||k===1&&M===0?w.div:w.div.negative!==0?w.div.isubn(1):w.div.iaddn(1)},i.prototype.modn=function(v){t(v<=67108863);for(var w=(1<<26)%v,I=0,T=this.length-1;T>=0;T--)I=(w*I+(this.words[T]|0))%v;return I},i.prototype.idivn=function(v){t(v<=67108863);for(var w=0,I=this.length-1;I>=0;I--){var T=(this.words[I]|0)+w*67108864;this.words[I]=T/v|0,w=T%v}return this.strip()},i.prototype.divn=function(v){return this.clone().idivn(v)},i.prototype.egcd=function(v){t(v.negative===0),t(!v.isZero());var w=this,I=v.clone();w.negative!==0?w=w.umod(v):w=w.clone();for(var T=new i(1),k=new i(0),M=new i(0),K=new i(1),L=0;w.isEven()&&I.isEven();)w.iushrn(1),I.iushrn(1),++L;for(var b=I.clone(),R=w.clone();!w.isZero();){for(var X=0,fe=1;!(w.words[0]&fe)&&X<26;++X,fe<<=1);if(X>0)for(w.iushrn(X);X-- >0;)(T.isOdd()||k.isOdd())&&(T.iadd(b),k.isub(R)),T.iushrn(1),k.iushrn(1);for(var he=0,Ce=1;!(I.words[0]&Ce)&&he<26;++he,Ce<<=1);if(he>0)for(I.iushrn(he);he-- >0;)(M.isOdd()||K.isOdd())&&(M.iadd(b),K.isub(R)),M.iushrn(1),K.iushrn(1);w.cmp(I)>=0?(w.isub(I),T.isub(M),k.isub(K)):(I.isub(w),M.isub(T),K.isub(k))}return{a:M,b:K,gcd:I.iushln(L)}},i.prototype._invmp=function(v){t(v.negative===0),t(!v.isZero());var w=this,I=v.clone();w.negative!==0?w=w.umod(v):w=w.clone();for(var T=new i(1),k=new i(0),M=I.clone();w.cmpn(1)>0&&I.cmpn(1)>0;){for(var K=0,L=1;!(w.words[0]&L)&&K<26;++K,L<<=1);if(K>0)for(w.iushrn(K);K-- >0;)T.isOdd()&&T.iadd(M),T.iushrn(1);for(var b=0,R=1;!(I.words[0]&R)&&b<26;++b,R<<=1);if(b>0)for(I.iushrn(b);b-- >0;)k.isOdd()&&k.iadd(M),k.iushrn(1);w.cmp(I)>=0?(w.isub(I),T.isub(k)):(I.isub(w),k.isub(T))}var X;return w.cmpn(1)===0?X=T:X=k,X.cmpn(0)<0&&X.iadd(v),X},i.prototype.gcd=function(v){if(this.isZero())return v.abs();if(v.isZero())return this.abs();var w=this.clone(),I=v.clone();w.negative=0,I.negative=0;for(var T=0;w.isEven()&&I.isEven();T++)w.iushrn(1),I.iushrn(1);do{for(;w.isEven();)w.iushrn(1);for(;I.isEven();)I.iushrn(1);var k=w.cmp(I);if(k<0){var M=w;w=I,I=M}else if(k===0||I.cmpn(1)===0)break;w.isub(I)}while(!0);return I.iushln(T)},i.prototype.invm=function(v){return this.egcd(v).a.umod(v)},i.prototype.isEven=function(){return(this.words[0]&1)===0},i.prototype.isOdd=function(){return(this.words[0]&1)===1},i.prototype.andln=function(v){return this.words[0]&v},i.prototype.bincn=function(v){t(typeof v=="number");var w=v%26,I=(v-w)/26,T=1<<w;if(this.length<=I)return this._expand(I+1),this.words[I]|=T,this;for(var k=T,M=I;k!==0&&M<this.length;M++){var K=this.words[M]|0;K+=k,k=K>>>26,K&=67108863,this.words[M]=K}return k!==0&&(this.words[M]=k,this.length++),this},i.prototype.isZero=function(){return this.length===1&&this.words[0]===0},i.prototype.cmpn=function(v){var w=v<0;if(this.negative!==0&&!w)return-1;if(this.negative===0&&w)return 1;this.strip();var I;if(this.length>1)I=1;else{w&&(v=-v),t(v<=67108863,"Number is too big");var T=this.words[0]|0;I=T===v?0:T<v?-1:1}return this.negative!==0?-I|0:I},i.prototype.cmp=function(v){if(this.negative!==0&&v.negative===0)return-1;if(this.negative===0&&v.negative!==0)return 1;var w=this.ucmp(v);return this.negative!==0?-w|0:w},i.prototype.ucmp=function(v){if(this.length>v.length)return 1;if(this.length<v.length)return-1;for(var w=0,I=this.length-1;I>=0;I--){var T=this.words[I]|0,k=v.words[I]|0;if(T!==k){T<k?w=-1:T>k&&(w=1);break}}return w},i.prototype.gtn=function(v){return this.cmpn(v)===1},i.prototype.gt=function(v){return this.cmp(v)===1},i.prototype.gten=function(v){return this.cmpn(v)>=0},i.prototype.gte=function(v){return this.cmp(v)>=0},i.prototype.ltn=function(v){return this.cmpn(v)===-1},i.prototype.lt=function(v){return this.cmp(v)===-1},i.prototype.lten=function(v){return this.cmpn(v)<=0},i.prototype.lte=function(v){return this.cmp(v)<=0},i.prototype.eqn=function(v){return this.cmpn(v)===0},i.prototype.eq=function(v){return this.cmp(v)===0},i.red=function(v){return new G(v)},i.prototype.toRed=function(v){return t(!this.red,"Already a number in reduction context"),t(this.negative===0,"red works only with positives"),v.convertTo(this)._forceRed(v)},i.prototype.fromRed=function(){return t(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},i.prototype._forceRed=function(v){return this.red=v,this},i.prototype.forceRed=function(v){return t(!this.red,"Already a number in reduction context"),this._forceRed(v)},i.prototype.redAdd=function(v){return t(this.red,"redAdd works only with red numbers"),this.red.add(this,v)},i.prototype.redIAdd=function(v){return t(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,v)},i.prototype.redSub=function(v){return t(this.red,"redSub works only with red numbers"),this.red.sub(this,v)},i.prototype.redISub=function(v){return t(this.red,"redISub works only with red numbers"),this.red.isub(this,v)},i.prototype.redShl=function(v){return t(this.red,"redShl works only with red numbers"),this.red.shl(this,v)},i.prototype.redMul=function(v){return t(this.red,"redMul works only with red numbers"),this.red._verify2(this,v),this.red.mul(this,v)},i.prototype.redIMul=function(v){return t(this.red,"redMul works only with red numbers"),this.red._verify2(this,v),this.red.imul(this,v)},i.prototype.redSqr=function(){return t(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},i.prototype.redISqr=function(){return t(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},i.prototype.redSqrt=function(){return t(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},i.prototype.redInvm=function(){return t(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},i.prototype.redNeg=function(){return t(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},i.prototype.redPow=function(v){return t(this.red&&!v.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,v)};var A={k256:null,p224:null,p192:null,p25519:null};function P(N,v){this.name=N,this.p=new i(v,16),this.n=this.p.bitLength(),this.k=new i(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}P.prototype._tmp=function(){var v=new i(null);return v.words=new Array(Math.ceil(this.n/13)),v},P.prototype.ireduce=function(v){var w=v,I;do this.split(w,this.tmp),w=this.imulK(w),w=w.iadd(this.tmp),I=w.bitLength();while(I>this.n);var T=I<this.n?-1:w.ucmp(this.p);return T===0?(w.words[0]=0,w.length=1):T>0?w.isub(this.p):w.strip!==void 0?w.strip():w._strip(),w},P.prototype.split=function(v,w){v.iushrn(this.n,0,w)},P.prototype.imulK=function(v){return v.imul(this.k)};function q(){P.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}n(q,P),q.prototype.split=function(v,w){for(var I=4194303,T=Math.min(v.length,9),k=0;k<T;k++)w.words[k]=v.words[k];if(w.length=T,v.length<=9){v.words[0]=0,v.length=1;return}var M=v.words[9];for(w.words[w.length++]=M&I,k=10;k<v.length;k++){var K=v.words[k]|0;v.words[k-10]=(K&I)<<4|M>>>22,M=K}M>>>=22,v.words[k-10]=M,M===0&&v.length>10?v.length-=10:v.length-=9},q.prototype.imulK=function(v){v.words[v.length]=0,v.words[v.length+1]=0,v.length+=2;for(var w=0,I=0;I<v.length;I++){var T=v.words[I]|0;w+=T*977,v.words[I]=w&67108863,w=T*64+(w/67108864|0)}return v.words[v.length-1]===0&&(v.length--,v.words[v.length-1]===0&&v.length--),v};function F(){P.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}n(F,P);function z(){P.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}n(z,P);function B(){P.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}n(B,P),B.prototype.imulK=function(v){for(var w=0,I=0;I<v.length;I++){var T=(v.words[I]|0)*19+w,k=T&67108863;T>>>=26,v.words[I]=k,w=T}return w!==0&&(v.words[v.length++]=w),v},i._prime=function(v){if(A[v])return A[v];var w;if(v==="k256")w=new q;else if(v==="p224")w=new F;else if(v==="p192")w=new z;else if(v==="p25519")w=new B;else throw new Error("Unknown prime "+v);return A[v]=w,w};function G(N){if(typeof N=="string"){var v=i._prime(N);this.m=v.p,this.prime=v}else t(N.gtn(1),"modulus must be greater than 1"),this.m=N,this.prime=null}G.prototype._verify1=function(v){t(v.negative===0,"red works only with positives"),t(v.red,"red works only with red numbers")},G.prototype._verify2=function(v,w){t((v.negative|w.negative)===0,"red works only with positives"),t(v.red&&v.red===w.red,"red works only with red numbers")},G.prototype.imod=function(v){return this.prime?this.prime.ireduce(v)._forceRed(this):v.umod(this.m)._forceRed(this)},G.prototype.neg=function(v){return v.isZero()?v.clone():this.m.sub(v)._forceRed(this)},G.prototype.add=function(v,w){this._verify2(v,w);var I=v.add(w);return I.cmp(this.m)>=0&&I.isub(this.m),I._forceRed(this)},G.prototype.iadd=function(v,w){this._verify2(v,w);var I=v.iadd(w);return I.cmp(this.m)>=0&&I.isub(this.m),I},G.prototype.sub=function(v,w){this._verify2(v,w);var I=v.sub(w);return I.cmpn(0)<0&&I.iadd(this.m),I._forceRed(this)},G.prototype.isub=function(v,w){this._verify2(v,w);var I=v.isub(w);return I.cmpn(0)<0&&I.iadd(this.m),I},G.prototype.shl=function(v,w){return this._verify1(v),this.imod(v.ushln(w))},G.prototype.imul=function(v,w){return this._verify2(v,w),this.imod(v.imul(w))},G.prototype.mul=function(v,w){return this._verify2(v,w),this.imod(v.mul(w))},G.prototype.isqr=function(v){return this.imul(v,v.clone())},G.prototype.sqr=function(v){return this.mul(v,v)},G.prototype.sqrt=function(v){if(v.isZero())return v.clone();var w=this.m.andln(3);if(t(w%2===1),w===3){var I=this.m.add(new i(1)).iushrn(2);return this.pow(v,I)}for(var T=this.m.subn(1),k=0;!T.isZero()&&T.andln(1)===0;)k++,T.iushrn(1);t(!T.isZero());var M=new i(1).toRed(this),K=M.redNeg(),L=this.m.subn(1).iushrn(1),b=this.m.bitLength();for(b=new i(2*b*b).toRed(this);this.pow(b,L).cmp(K)!==0;)b.redIAdd(K);for(var R=this.pow(b,T),X=this.pow(v,T.addn(1).iushrn(1)),fe=this.pow(v,T),he=k;fe.cmp(M)!==0;){for(var Ce=fe,ft=0;Ce.cmp(M)!==0;ft++)Ce=Ce.redSqr();t(ft<he);var st=this.pow(R,new i(1).iushln(he-ft-1));X=X.redMul(st),R=st.redSqr(),fe=fe.redMul(R),he=ft}return X},G.prototype.invm=function(v){var w=v._invmp(this.m);return w.negative!==0?(w.negative=0,this.imod(w).redNeg()):this.imod(w)},G.prototype.pow=function(v,w){if(w.isZero())return new i(1).toRed(this);if(w.cmpn(1)===0)return v.clone();var I=4,T=new Array(1<<I);T[0]=new i(1).toRed(this),T[1]=v;for(var k=2;k<T.length;k++)T[k]=this.mul(T[k-1],v);var M=T[0],K=0,L=0,b=w.bitLength()%26;for(b===0&&(b=26),k=w.length-1;k>=0;k--){for(var R=w.words[k],X=b-1;X>=0;X--){var fe=R>>X&1;if(M!==T[0]&&(M=this.sqr(M)),fe===0&&K===0){L=0;continue}K<<=1,K|=fe,L++,!(L!==I&&(k!==0||X!==0))&&(M=this.mul(M,T[K]),L=0,K=0)}b=26}return M},G.prototype.convertTo=function(v){var w=v.umod(this.m);return w===v?w.clone():w},G.prototype.convertFrom=function(v){var w=v.clone();return w.red=null,w},i.mont=function(v){return new H(v)};function H(N){G.call(this,N),this.shift=this.m.bitLength(),this.shift%26!==0&&(this.shift+=26-this.shift%26),this.r=new i(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}n(H,G),H.prototype.convertTo=function(v){return this.imod(v.ushln(this.shift))},H.prototype.convertFrom=function(v){var w=this.imod(v.mul(this.rinv));return w.red=null,w},H.prototype.imul=function(v,w){if(v.isZero()||w.isZero())return v.words[0]=0,v.length=1,v;var I=v.imul(w),T=I.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),k=I.isub(T).iushrn(this.shift),M=k;return k.cmp(this.m)>=0?M=k.isub(this.m):k.cmpn(0)<0&&(M=k.iadd(this.m)),M._forceRed(this)},H.prototype.mul=function(v,w){if(v.isZero()||w.isZero())return new i(0)._forceRed(this);var I=v.mul(w),T=I.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),k=I.isub(T).iushrn(this.shift),M=k;return k.cmp(this.m)>=0?M=k.isub(this.m):k.cmpn(0)<0&&(M=k.iadd(this.m)),M._forceRed(this)},H.prototype.invm=function(v){var w=this.imod(v._invmp(this.m).mul(this.r2));return w._forceRed(this)}})(typeof gC>"u"||gC,YU)});var Y1=E((v3e,JU)=>{"use strict";var H1=require("buffer"),sd=H1.Buffer,os={},as;for(as in H1)H1.hasOwnProperty(as)&&(as==="SlowBuffer"||as==="Buffer"||(os[as]=H1[as]));var od=os.Buffer={};for(as in sd)sd.hasOwnProperty(as)&&(as==="allocUnsafe"||as==="allocUnsafeSlow"||(od[as]=sd[as]));os.Buffer.prototype=sd.prototype;(!od.from||od.from===Uint8Array.from)&&(od.from=function(r,e,t){if(typeof r=="number")throw new TypeError('The "value" argument must not be of type number. Received type '+typeof r);if(r&&typeof r.length>"u")throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof r);return sd(r,e,t)});od.alloc||(od.alloc=function(r,e,t){if(typeof r!="number")throw new TypeError('The "size" argument must be of type number. Received type '+typeof r);if(r<0||r>=2*(1<<30))throw new RangeError('The value "'+r+'" is invalid for option "size"');var n=sd(r);return!e||e.length===0?n.fill(0):typeof t=="string"?n.fill(e,t):n.fill(e),n});if(!os.kStringMaxLength)try{os.kStringMaxLength=process.binding("buffer").kStringMaxLength}catch{}os.constants||(os.constants={MAX_LENGTH:os.kMaxLength},os.kStringMaxLength&&(os.constants.MAX_STRING_LENGTH=os.kStringMaxLength));JU.exports=os});var J1=E(QU=>{"use strict";var i_e=ni();function ls(r){this._reporterState={obj:null,path:[],options:r||{},errors:[]}}QU.Reporter=ls;ls.prototype.isError=function(e){return e instanceof ad};ls.prototype.save=function(){let e=this._reporterState;return{obj:e.obj,pathLen:e.path.length}};ls.prototype.restore=function(e){let t=this._reporterState;t.obj=e.obj,t.path=t.path.slice(0,e.pathLen)};ls.prototype.enterKey=function(e){return this._reporterState.path.push(e)};ls.prototype.exitKey=function(e){let t=this._reporterState;t.path=t.path.slice(0,e-1)};ls.prototype.leaveKey=function(e,t,n){let i=this._reporterState;this.exitKey(e),i.obj!==null&&(i.obj[t]=n)};ls.prototype.path=function(){return this._reporterState.path.join("/")};ls.prototype.enterObject=function(){let e=this._reporterState,t=e.obj;return e.obj={},t};ls.prototype.leaveObject=function(e){let t=this._reporterState,n=t.obj;return t.obj=e,n};ls.prototype.error=function(e){let t,n=this._reporterState,i=e instanceof ad;if(i?t=e:t=new ad(n.path.map(function(s){return"["+JSON.stringify(s)+"]"}).join(""),e.message||e,e.stack),!n.options.partial)throw t;return i||n.errors.push(t),t};ls.prototype.wrapResult=function(e){let t=this._reporterState;return t.options.partial?{result:this.isError(e)?null:e,errors:t.errors}:e};function ad(r,e){this.path=r,this.rethrow(e)}i_e(ad,Error);ad.prototype.rethrow=function(e){if(this.message=e+" at: "+(this.path||"(shallow)"),Error.captureStackTrace&&Error.captureStackTrace(this,ad),!this.stack)try{throw new Error(this.message)}catch(t){this.stack=t.stack}return this}});var cd=E(vC=>{"use strict";var s_e=ni(),Q1=J1().Reporter,ld=Y1().Buffer;function us(r,e){if(Q1.call(this,e),!ld.isBuffer(r)){this.error("Input not Buffer");return}this.base=r,this.offset=0,this.length=r.length}s_e(us,Q1);vC.DecoderBuffer=us;us.isDecoderBuffer=function(e){return e instanceof us?!0:typeof e=="object"&&ld.isBuffer(e.base)&&e.constructor.name==="DecoderBuffer"&&typeof e.offset=="number"&&typeof e.length=="number"&&typeof e.save=="function"&&typeof e.restore=="function"&&typeof e.isEmpty=="function"&&typeof e.readUInt8=="function"&&typeof e.skip=="function"&&typeof e.raw=="function"};us.prototype.save=function(){return{offset:this.offset,reporter:Q1.prototype.save.call(this)}};us.prototype.restore=function(e){let t=new us(this.base);return t.offset=e.offset,t.length=this.offset,this.offset=e.offset,Q1.prototype.restore.call(this,e.reporter),t};us.prototype.isEmpty=function(){return this.offset===this.length};us.prototype.readUInt8=function(e){return this.offset+1<=this.length?this.base.readUInt8(this.offset++,!0):this.error(e||"DecoderBuffer overrun")};us.prototype.skip=function(e,t){if(!(this.offset+e<=this.length))return this.error(t||"DecoderBuffer overrun");let n=new us(this.base);return n._reporterState=this._reporterState,n.offset=this.offset,n.length=this.offset+e,this.offset+=e,n};us.prototype.raw=function(e){return this.base.slice(e?e.offset:this.offset,this.length)};function ud(r,e){if(Array.isArray(r))this.length=0,this.value=r.map(function(t){return ud.isEncoderBuffer(t)||(t=new ud(t,e)),this.length+=t.length,t},this);else if(typeof r=="number"){if(!(0<=r&&r<=255))return e.error("non-byte EncoderBuffer value");this.value=r,this.length=1}else if(typeof r=="string")this.value=r,this.length=ld.byteLength(r);else if(ld.isBuffer(r))this.value=r,this.length=r.length;else return e.error("Unsupported type: "+typeof r)}vC.EncoderBuffer=ud;ud.isEncoderBuffer=function(e){return e instanceof ud?!0:typeof e=="object"&&e.constructor.name==="EncoderBuffer"&&typeof e.length=="number"&&typeof e.join=="function"};ud.prototype.join=function(e,t){return e||(e=ld.alloc(this.length)),t||(t=0),this.length===0||(Array.isArray(this.value)?this.value.forEach(function(n){n.join(e,t),t+=n.length}):(typeof this.value=="number"?e[t]=this.value:typeof this.value=="string"?e.write(this.value,t):ld.isBuffer(this.value)&&this.value.copy(e,t),t+=this.length)),e}});var eG=E((S3e,XU)=>{XU.exports=ZU;function ZU(r,e){if(!r)throw new Error(e||"Assertion failed")}ZU.equal=function(e,t,n){if(e!=t)throw new Error(n||"Assertion failed: "+e+" != "+t)}});var Z1=E((_3e,rG)=>{"use strict";var o_e=J1().Reporter,a_e=cd().EncoderBuffer,l_e=cd().DecoderBuffer,zn=eG(),tG=["seq","seqof","set","setof","objid","bool","gentime","utctime","null_","enum","int","objDesc","bitstr","bmpstr","charstr","genstr","graphstr","ia5str","iso646str","numstr","octstr","printstr","t61str","unistr","utf8str","videostr"],u_e=["key","obj","use","optional","explicit","implicit","def","choice","any","contains"].concat(tG),c_e=["_peekTag","_decodeTag","_use","_decodeStr","_decodeObjid","_decodeTime","_decodeNull","_decodeInt","_decodeBool","_decodeList","_encodeComposite","_encodeStr","_encodeObjid","_encodeTime","_encodeNull","_encodeInt","_encodeBool"];function Dt(r,e,t){let n={};this._baseState=n,n.name=t,n.enc=r,n.parent=e||null,n.children=null,n.tag=null,n.args=null,n.reverseArgs=null,n.choice=null,n.optional=!1,n.any=!1,n.obj=!1,n.use=null,n.useDecoder=null,n.key=null,n.default=null,n.explicit=null,n.implicit=null,n.contains=null,n.parent||(n.children=[],this._wrap())}rG.exports=Dt;var f_e=["enc","parent","children","tag","args","reverseArgs","choice","optional","any","obj","use","alteredUse","key","default","explicit","implicit","contains"];Dt.prototype.clone=function(){let e=this._baseState,t={};f_e.forEach(function(i){t[i]=e[i]});let n=new this.constructor(t.parent);return n._baseState=t,n};Dt.prototype._wrap=function(){let e=this._baseState;u_e.forEach(function(t){this[t]=function(){let i=new this.constructor(this);return e.children.push(i),i[t].apply(i,arguments)}},this)};Dt.prototype._init=function(e){let t=this._baseState;zn(t.parent===null),e.call(this),t.children=t.children.filter(function(n){return n._baseState.parent===this},this),zn.equal(t.children.length,1,"Root node can have only one child")};Dt.prototype._useArgs=function(e){let t=this._baseState,n=e.filter(function(i){return i instanceof this.constructor},this);e=e.filter(function(i){return!(i instanceof this.constructor)},this),n.length!==0&&(zn(t.children===null),t.children=n,n.forEach(function(i){i._baseState.parent=this},this)),e.length!==0&&(zn(t.args===null),t.args=e,t.reverseArgs=e.map(function(i){if(typeof i!="object"||i.constructor!==Object)return i;let s={};return Object.keys(i).forEach(function(o){o==(o|0)&&(o|=0);let a=i[o];s[a]=o}),s}))};c_e.forEach(function(r){Dt.prototype[r]=function(){let t=this._baseState;throw new Error(r+" not implemented for encoding: "+t.enc)}});tG.forEach(function(r){Dt.prototype[r]=function(){let t=this._baseState,n=Array.prototype.slice.call(arguments);return zn(t.tag===null),t.tag=r,this._useArgs(n),this}});Dt.prototype.use=function(e){zn(e);let t=this._baseState;return zn(t.use===null),t.use=e,this};Dt.prototype.optional=function(){let e=this._baseState;return e.optional=!0,this};Dt.prototype.def=function(e){let t=this._baseState;return zn(t.default===null),t.default=e,t.optional=!0,this};Dt.prototype.explicit=function(e){let t=this._baseState;return zn(t.explicit===null&&t.implicit===null),t.explicit=e,this};Dt.prototype.implicit=function(e){let t=this._baseState;return zn(t.explicit===null&&t.implicit===null),t.implicit=e,this};Dt.prototype.obj=function(){let e=this._baseState,t=Array.prototype.slice.call(arguments);return e.obj=!0,t.length!==0&&this._useArgs(t),this};Dt.prototype.key=function(e){let t=this._baseState;return zn(t.key===null),t.key=e,this};Dt.prototype.any=function(){let e=this._baseState;return e.any=!0,this};Dt.prototype.choice=function(e){let t=this._baseState;return zn(t.choice===null),t.choice=e,this._useArgs(Object.keys(e).map(function(n){return e[n]})),this};Dt.prototype.contains=function(e){let t=this._baseState;return zn(t.use===null),t.contains=e,this};Dt.prototype._decode=function(e,t){let n=this._baseState;if(n.parent===null)return e.wrapResult(n.children[0]._decode(e,t));let i=n.default,s=!0,o=null;if(n.key!==null&&(o=e.enterKey(n.key)),n.optional){let u=null;if(n.explicit!==null?u=n.explicit:n.implicit!==null?u=n.implicit:n.tag!==null&&(u=n.tag),u===null&&!n.any){let c=e.save();try{n.choice===null?this._decodeGeneric(n.tag,e,t):this._decodeChoice(e,t),s=!0}catch{s=!1}e.restore(c)}else if(s=this._peekTag(e,u,n.any),e.isError(s))return s}let a;if(n.obj&&s&&(a=e.enterObject()),s){if(n.explicit!==null){let c=this._decodeTag(e,n.explicit);if(e.isError(c))return c;e=c}let u=e.offset;if(n.use===null&&n.choice===null){let c;n.any&&(c=e.save());let d=this._decodeTag(e,n.implicit!==null?n.implicit:n.tag,n.any);if(e.isError(d))return d;n.any?i=e.raw(c):e=d}if(t&&t.track&&n.tag!==null&&t.track(e.path(),u,e.length,"tagged"),t&&t.track&&n.tag!==null&&t.track(e.path(),e.offset,e.length,"content"),n.any||(n.choice===null?i=this._decodeGeneric(n.tag,e,t):i=this._decodeChoice(e,t)),e.isError(i))return i;if(!n.any&&n.choice===null&&n.children!==null&&n.children.forEach(function(d){d._decode(e,t)}),n.contains&&(n.tag==="octstr"||n.tag==="bitstr")){let c=new l_e(i);i=this._getUse(n.contains,e._reporterState.obj)._decode(c,t)}}return n.obj&&s&&(i=e.leaveObject(a)),n.key!==null&&(i!==null||s===!0)?e.leaveKey(o,n.key,i):o!==null&&e.exitKey(o),i};Dt.prototype._decodeGeneric=function(e,t,n){let i=this._baseState;return e==="seq"||e==="set"?null:e==="seqof"||e==="setof"?this._decodeList(t,e,i.args[0],n):/str$/.test(e)?this._decodeStr(t,e,n):e==="objid"&&i.args?this._decodeObjid(t,i.args[0],i.args[1],n):e==="objid"?this._decodeObjid(t,null,null,n):e==="gentime"||e==="utctime"?this._decodeTime(t,e,n):e==="null_"?this._decodeNull(t,n):e==="bool"?this._decodeBool(t,n):e==="objDesc"?this._decodeStr(t,e,n):e==="int"||e==="enum"?this._decodeInt(t,i.args&&i.args[0],n):i.use!==null?this._getUse(i.use,t._reporterState.obj)._decode(t,n):t.error("unknown tag: "+e)};Dt.prototype._getUse=function(e,t){let n=this._baseState;return n.useDecoder=this._use(e,t),zn(n.useDecoder._baseState.parent===null),n.useDecoder=n.useDecoder._baseState.children[0],n.implicit!==n.useDecoder._baseState.implicit&&(n.useDecoder=n.useDecoder.clone(),n.useDecoder._baseState.implicit=n.implicit),n.useDecoder};Dt.prototype._decodeChoice=function(e,t){let n=this._baseState,i=null,s=!1;return Object.keys(n.choice).some(function(o){let a=e.save(),u=n.choice[o];try{let c=u._decode(e,t);if(e.isError(c))return!1;i={type:o,value:c},s=!0}catch{return e.restore(a),!1}return!0},this),s?i:e.error("Choice not matched")};Dt.prototype._createEncoderBuffer=function(e){return new a_e(e,this.reporter)};Dt.prototype._encode=function(e,t,n){let i=this._baseState;if(i.default!==null&&i.default===e)return;let s=this._encodeValue(e,t,n);if(s!==void 0&&!this._skipDefault(s,t,n))return s};Dt.prototype._encodeValue=function(e,t,n){let i=this._baseState;if(i.parent===null)return i.children[0]._encode(e,t||new o_e);let s=null;if(this.reporter=t,i.optional&&e===void 0)if(i.default!==null)e=i.default;else return;let o=null,a=!1;if(i.any)s=this._createEncoderBuffer(e);else if(i.choice)s=this._encodeChoice(e,t);else if(i.contains)o=this._getUse(i.contains,n)._encode(e,t),a=!0;else if(i.children)o=i.children.map(function(u){if(u._baseState.tag==="null_")return u._encode(null,t,e);if(u._baseState.key===null)return t.error("Child should have a key");let c=t.enterKey(u._baseState.key);if(typeof e!="object")return t.error("Child expected, but input is not object");let d=u._encode(e[u._baseState.key],t,e);return t.leaveKey(c),d},this).filter(function(u){return u}),o=this._createEncoderBuffer(o);else if(i.tag==="seqof"||i.tag==="setof"){if(!(i.args&&i.args.length===1))return t.error("Too many args for : "+i.tag);if(!Array.isArray(e))return t.error("seqof/setof, but data is not Array");let u=this.clone();u._baseState.implicit=null,o=this._createEncoderBuffer(e.map(function(c){let d=this._baseState;return this._getUse(d.args[0],e)._encode(c,t)},u))}else i.use!==null?s=this._getUse(i.use,n)._encode(e,t):(o=this._encodePrimitive(i.tag,e),a=!0);if(!i.any&&i.choice===null){let u=i.implicit!==null?i.implicit:i.tag,c=i.implicit===null?"universal":"context";u===null?i.use===null&&t.error("Tag could be omitted only for .use()"):i.use===null&&(s=this._encodeComposite(u,a,c,o))}return i.explicit!==null&&(s=this._encodeComposite(i.explicit,!1,"context",s)),s};Dt.prototype._encodeChoice=function(e,t){let n=this._baseState,i=n.choice[e.type];return i||zn(!1,e.type+" not found in "+JSON.stringify(Object.keys(n.choice))),i._encode(e.value,t)};Dt.prototype._encodePrimitive=function(e,t){let n=this._baseState;if(/str$/.test(e))return this._encodeStr(t,e);if(e==="objid"&&n.args)return this._encodeObjid(t,n.reverseArgs[0],n.args[1]);if(e==="objid")return this._encodeObjid(t,null,null);if(e==="gentime"||e==="utctime")return this._encodeTime(t,e);if(e==="null_")return this._encodeNull();if(e==="int"||e==="enum")return this._encodeInt(t,n.args&&n.reverseArgs[0]);if(e==="bool")return this._encodeBool(t);if(e==="objDesc")return this._encodeStr(t,e);throw new Error("Unsupported tag: "+e)};Dt.prototype._isNumstr=function(e){return/^[0-9 ]*$/.test(e)};Dt.prototype._isPrintstr=function(e){return/^[A-Za-z0-9 '()+,-./:=?]*$/.test(e)}});var X1=E(nc=>{"use strict";function nG(r){let e={};return Object.keys(r).forEach(function(t){(t|0)==t&&(t=t|0);let n=r[t];e[n]=t}),e}nc.tagClass={0:"universal",1:"application",2:"context",3:"private"};nc.tagClassByName=nG(nc.tagClass);nc.tag={0:"end",1:"bool",2:"int",3:"bitstr",4:"octstr",5:"null_",6:"objid",7:"objDesc",8:"external",9:"real",10:"enum",11:"embed",12:"utf8str",13:"relativeOid",16:"seq",17:"set",18:"numstr",19:"printstr",20:"t61str",21:"videostr",22:"ia5str",23:"utctime",24:"gentime",25:"graphstr",26:"iso646str",27:"genstr",28:"unistr",29:"charstr",30:"bmpstr"};nc.tagByName=nG(nc.tag)});var bC=E((E3e,oG)=>{"use strict";var d_e=ni(),Qo=Y1().Buffer,iG=Z1(),wC=X1();function sG(r){this.enc="der",this.name=r.name,this.entity=r,this.tree=new js,this.tree._init(r.body)}oG.exports=sG;sG.prototype.encode=function(e,t){return this.tree._encode(e,t).join()};function js(r){iG.call(this,"der",r)}d_e(js,iG);js.prototype._encodeComposite=function(e,t,n,i){let s=h_e(e,t,n,this.reporter);if(i.length<128){let u=Qo.alloc(2);return u[0]=s,u[1]=i.length,this._createEncoderBuffer([u,i])}let o=1;for(let u=i.length;u>=256;u>>=8)o++;let a=Qo.alloc(1+1+o);a[0]=s,a[1]=128|o;for(let u=1+o,c=i.length;c>0;u--,c>>=8)a[u]=c&255;return this._createEncoderBuffer([a,i])};js.prototype._encodeStr=function(e,t){if(t==="bitstr")return this._createEncoderBuffer([e.unused|0,e.data]);if(t==="bmpstr"){let n=Qo.alloc(e.length*2);for(let i=0;i<e.length;i++)n.writeUInt16BE(e.charCodeAt(i),i*2);return this._createEncoderBuffer(n)}else return t==="numstr"?this._isNumstr(e)?this._createEncoderBuffer(e):this.reporter.error("Encoding of string type: numstr supports only digits and space"):t==="printstr"?this._isPrintstr(e)?this._createEncoderBuffer(e):this.reporter.error("Encoding of string type: printstr supports only latin upper and lower case letters, digits, space, apostrophe, left and rigth parenthesis, plus sign, comma, hyphen, dot, slash, colon, equal sign, question mark"):/str$/.test(t)?this._createEncoderBuffer(e):t==="objDesc"?this._createEncoderBuffer(e):this.reporter.error("Encoding of string type: "+t+" unsupported")};js.prototype._encodeObjid=function(e,t,n){if(typeof e=="string"){if(!t)return this.reporter.error("string objid given, but no values map found");if(!t.hasOwnProperty(e))return this.reporter.error("objid not found in values map");e=t[e].split(/[\s.]+/g);for(let a=0;a<e.length;a++)e[a]|=0}else if(Array.isArray(e)){e=e.slice();for(let a=0;a<e.length;a++)e[a]|=0}if(!Array.isArray(e))return this.reporter.error("objid() should be either array or string, got: "+JSON.stringify(e));if(!n){if(e[1]>=40)return this.reporter.error("Second objid identifier OOB");e.splice(0,2,e[0]*40+e[1])}let i=0;for(let a=0;a<e.length;a++){let u=e[a];for(i++;u>=128;u>>=7)i++}let s=Qo.alloc(i),o=s.length-1;for(let a=e.length-1;a>=0;a--){let u=e[a];for(s[o--]=u&127;(u>>=7)>0;)s[o--]=128|u&127}return this._createEncoderBuffer(s)};function cs(r){return r<10?"0"+r:r}js.prototype._encodeTime=function(e,t){let n,i=new Date(e);return t==="gentime"?n=[cs(i.getUTCFullYear()),cs(i.getUTCMonth()+1),cs(i.getUTCDate()),cs(i.getUTCHours()),cs(i.getUTCMinutes()),cs(i.getUTCSeconds()),"Z"].join(""):t==="utctime"?n=[cs(i.getUTCFullYear()%100),cs(i.getUTCMonth()+1),cs(i.getUTCDate()),cs(i.getUTCHours()),cs(i.getUTCMinutes()),cs(i.getUTCSeconds()),"Z"].join(""):this.reporter.error("Encoding "+t+" time is not supported yet"),this._encodeStr(n,"octstr")};js.prototype._encodeNull=function(){return this._createEncoderBuffer("")};js.prototype._encodeInt=function(e,t){if(typeof e=="string"){if(!t)return this.reporter.error("String int or enum given, but no values map");if(!t.hasOwnProperty(e))return this.reporter.error("Values map doesn't contain: "+JSON.stringify(e));e=t[e]}if(typeof e!="number"&&!Qo.isBuffer(e)){let s=e.toArray();!e.sign&&s[0]&128&&s.unshift(0),e=Qo.from(s)}if(Qo.isBuffer(e)){let s=e.length;e.length===0&&s++;let o=Qo.alloc(s);return e.copy(o),e.length===0&&(o[0]=0),this._createEncoderBuffer(o)}if(e<128)return this._createEncoderBuffer(e);if(e<256)return this._createEncoderBuffer([0,e]);let n=1;for(let s=e;s>=256;s>>=8)n++;let i=new Array(n);for(let s=i.length-1;s>=0;s--)i[s]=e&255,e>>=8;return i[0]&128&&i.unshift(0),this._createEncoderBuffer(Qo.from(i))};js.prototype._encodeBool=function(e){return this._createEncoderBuffer(e?255:0)};js.prototype._use=function(e,t){return typeof e=="function"&&(e=e(t)),e._getEncoder("der").tree};js.prototype._skipDefault=function(e,t,n){let i=this._baseState,s;if(i.default===null)return!1;let o=e.join();if(i.defaultBuffer===void 0&&(i.defaultBuffer=this._encodeValue(i.default,t,n).join()),o.length!==i.defaultBuffer.length)return!1;for(s=0;s<o.length;s++)if(o[s]!==i.defaultBuffer[s])return!1;return!0};function h_e(r,e,t,n){let i;if(r==="seqof"?r="seq":r==="setof"&&(r="set"),wC.tagByName.hasOwnProperty(r))i=wC.tagByName[r];else if(typeof r=="number"&&(r|0)===r)i=r;else return n.error("Unknown tag: "+r);return i>=31?n.error("Multi-octet tag encoding unsupported"):(e||(i|=32),i|=wC.tagClassByName[t||"universal"]<<6,i)}});var lG=E((O3e,aG)=>{"use strict";var p_e=ni(),SC=bC();function _C(r){SC.call(this,r),this.enc="pem"}p_e(_C,SC);aG.exports=_C;_C.prototype.encode=function(e,t){let i=SC.prototype.encode.call(this,e).toString("base64"),s=["-----BEGIN "+t.label+"-----"];for(let o=0;o<i.length;o+=64)s.push(i.slice(o,o+64));return s.push("-----END "+t.label+"-----"),s.join(`
`)}});var xC=E(cG=>{"use strict";var uG=cG;uG.der=bC();uG.pem=lG()});var OC=E((C3e,gG)=>{"use strict";var m_e=ni(),g_e=yC(),fG=cd().DecoderBuffer,hG=Z1(),dG=X1();function pG(r){this.enc="der",this.name=r.name,this.entity=r,this.tree=new Li,this.tree._init(r.body)}gG.exports=pG;pG.prototype.decode=function(e,t){return fG.isDecoderBuffer(e)||(e=new fG(e,t)),this.tree._decode(e,t)};function Li(r){hG.call(this,"der",r)}m_e(Li,hG);Li.prototype._peekTag=function(e,t,n){if(e.isEmpty())return!1;let i=e.save(),s=EC(e,'Failed to peek tag: "'+t+'"');return e.isError(s)?s:(e.restore(i),s.tag===t||s.tagStr===t||s.tagStr+"of"===t||n)};Li.prototype._decodeTag=function(e,t,n){let i=EC(e,'Failed to decode tag of "'+t+'"');if(e.isError(i))return i;let s=mG(e,i.primitive,'Failed to get length of "'+t+'"');if(e.isError(s))return s;if(!n&&i.tag!==t&&i.tagStr!==t&&i.tagStr+"of"!==t)return e.error('Failed to match tag: "'+t+'"');if(i.primitive||s!==null)return e.skip(s,'Failed to match body of: "'+t+'"');let o=e.save(),a=this._skipUntilEnd(e,'Failed to skip indefinite length body: "'+this.tag+'"');return e.isError(a)?a:(s=e.offset-o.offset,e.restore(o),e.skip(s,'Failed to match body of: "'+t+'"'))};Li.prototype._skipUntilEnd=function(e,t){for(;;){let n=EC(e,t);if(e.isError(n))return n;let i=mG(e,n.primitive,t);if(e.isError(i))return i;let s;if(n.primitive||i!==null?s=e.skip(i):s=this._skipUntilEnd(e,t),e.isError(s))return s;if(n.tagStr==="end")break}};Li.prototype._decodeList=function(e,t,n,i){let s=[];for(;!e.isEmpty();){let o=this._peekTag(e,"end");if(e.isError(o))return o;let a=n.decode(e,"der",i);if(e.isError(a)&&o)break;s.push(a)}return s};Li.prototype._decodeStr=function(e,t){if(t==="bitstr"){let n=e.readUInt8();return e.isError(n)?n:{unused:n,data:e.raw()}}else if(t==="bmpstr"){let n=e.raw();if(n.length%2===1)return e.error("Decoding of string type: bmpstr length mismatch");let i="";for(let s=0;s<n.length/2;s++)i+=String.fromCharCode(n.readUInt16BE(s*2));return i}else if(t==="numstr"){let n=e.raw().toString("ascii");return this._isNumstr(n)?n:e.error("Decoding of string type: numstr unsupported characters")}else{if(t==="octstr")return e.raw();if(t==="objDesc")return e.raw();if(t==="printstr"){let n=e.raw().toString("ascii");return this._isPrintstr(n)?n:e.error("Decoding of string type: printstr unsupported characters")}else return/str$/.test(t)?e.raw().toString():e.error("Decoding of string type: "+t+" unsupported")}};Li.prototype._decodeObjid=function(e,t,n){let i,s=[],o=0,a=0;for(;!e.isEmpty();)a=e.readUInt8(),o<<=7,o|=a&127,a&128||(s.push(o),o=0);a&128&&s.push(o);let u=s[0]/40|0,c=s[0]%40;if(n?i=s:i=[u,c].concat(s.slice(1)),t){let d=t[i.join(" ")];d===void 0&&(d=t[i.join(".")]),d!==void 0&&(i=d)}return i};Li.prototype._decodeTime=function(e,t){let n=e.raw().toString(),i,s,o,a,u,c;if(t==="gentime")i=n.slice(0,4)|0,s=n.slice(4,6)|0,o=n.slice(6,8)|0,a=n.slice(8,10)|0,u=n.slice(10,12)|0,c=n.slice(12,14)|0;else if(t==="utctime")i=n.slice(0,2)|0,s=n.slice(2,4)|0,o=n.slice(4,6)|0,a=n.slice(6,8)|0,u=n.slice(8,10)|0,c=n.slice(10,12)|0,i<70?i=2e3+i:i=1900+i;else return e.error("Decoding "+t+" time is not supported yet");return Date.UTC(i,s-1,o,a,u,c,0)};Li.prototype._decodeNull=function(){return null};Li.prototype._decodeBool=function(e){let t=e.readUInt8();return e.isError(t)?t:t!==0};Li.prototype._decodeInt=function(e,t){let n=e.raw(),i=new g_e(n);return t&&(i=t[i.toString(10)]||i),i};Li.prototype._use=function(e,t){return typeof e=="function"&&(e=e(t)),e._getDecoder("der").tree};function EC(r,e){let t=r.readUInt8(e);if(r.isError(t))return t;let n=dG.tagClass[t>>6],i=(t&32)===0;if((t&31)===31){let o=t;for(t=0;(o&128)===128;){if(o=r.readUInt8(e),r.isError(o))return o;t<<=7,t|=o&127}}else t&=31;let s=dG.tag[t];return{cls:n,primitive:i,tag:t,tagStr:s}}function mG(r,e,t){let n=r.readUInt8(t);if(r.isError(n))return n;if(!e&&n===128)return null;if(!(n&128))return n;let i=n&127;if(i>4)return r.error("length octect is too long");n=0;for(let s=0;s<i;s++){n<<=8;let o=r.readUInt8(t);if(r.isError(o))return o;n|=o}return n}});var vG=E((T3e,yG)=>{"use strict";var y_e=ni(),v_e=Y1().Buffer,IC=OC();function CC(r){IC.call(this,r),this.enc="pem"}y_e(CC,IC);yG.exports=CC;CC.prototype.decode=function(e,t){let n=e.toString().split(/[\r\n]+/g),i=t.label.toUpperCase(),s=/^-----(BEGIN|END) ([^-]+)-----$/,o=-1,a=-1;for(let d=0;d<n.length;d++){let h=n[d].match(s);if(h!==null&&h[2]===i)if(o===-1){if(h[1]!=="BEGIN")break;o=d}else{if(h[1]!=="END")break;a=d;break}}if(o===-1||a===-1)throw new Error("PEM section not found for: "+i);let u=n.slice(o+1,a).join("");u.replace(/[^a-z0-9+/=]+/gi,"");let c=v_e.from(u,"base64");return IC.prototype.decode.call(this,c,t)}});var TC=E(bG=>{"use strict";var wG=bG;wG.der=OC();wG.pem=vG()});var _G=E(SG=>{"use strict";var w_e=xC(),b_e=TC(),S_e=ni(),__e=SG;__e.define=function(e,t){return new fd(e,t)};function fd(r,e){this.name=r,this.body=e,this.decoders={},this.encoders={}}fd.prototype._createNamed=function(e){let t=this.name;function n(i){this._initNamed(i,t)}return S_e(n,e),n.prototype._initNamed=function(s,o){e.call(this,s,o)},new n(this)};fd.prototype._getDecoder=function(e){return e=e||"der",this.decoders.hasOwnProperty(e)||(this.decoders[e]=this._createNamed(b_e[e])),this.decoders[e]};fd.prototype.decode=function(e,t,n){return this._getDecoder(t).decode(e,n)};fd.prototype._getEncoder=function(e){return e=e||"der",this.encoders.hasOwnProperty(e)||(this.encoders[e]=this._createNamed(w_e[e])),this.encoders[e]};fd.prototype.encode=function(e,t,n){return this._getEncoder(t).encode(e,n)}});var EG=E(xG=>{"use strict";var ew=xG;ew.Reporter=J1().Reporter;ew.DecoderBuffer=cd().DecoderBuffer;ew.EncoderBuffer=cd().EncoderBuffer;ew.Node=Z1()});var CG=E(IG=>{"use strict";var OG=IG;OG._reverse=function(e){let t={};return Object.keys(e).forEach(function(n){(n|0)==n&&(n=n|0);let i=e[n];t[i]=n}),t};OG.der=X1()});var AG=E(TG=>{"use strict";var dd=TG;dd.bignum=yC();dd.define=_G().define;dd.base=EG();dd.constants=CG();dd.decoders=TC();dd.encoders=xC()});var AC=E((L3e,MG)=>{var tw=zu().Buffer,x_e=require("stream"),E_e=require("util");function rw(r){if(this.buffer=null,this.writable=!0,this.readable=!0,!r)return this.buffer=tw.alloc(0),this;if(typeof r.pipe=="function")return this.buffer=tw.alloc(0),r.pipe(this),this;if(r.length||typeof r=="object")return this.buffer=r,this.writable=!1,process.nextTick(function(){this.emit("end",r),this.readable=!1,this.emit("close")}.bind(this)),this;throw new TypeError("Unexpected data type ("+typeof r+")")}E_e.inherits(rw,x_e);rw.prototype.write=function(e){this.buffer=tw.concat([this.buffer,tw.from(e)]),this.emit("data",e)};rw.prototype.end=function(e){e&&this.write(e),this.emit("end",e),this.emit("close"),this.writable=!1,this.readable=!1};MG.exports=rw});var PG=E((D3e,kG)=>{"use strict";var Yp=require("buffer").Buffer,MC=require("buffer").SlowBuffer;kG.exports=nw;function nw(r,e){if(!Yp.isBuffer(r)||!Yp.isBuffer(e)||r.length!==e.length)return!1;for(var t=0,n=0;n<r.length;n++)t|=r[n]^e[n];return t===0}nw.install=function(){Yp.prototype.equal=MC.prototype.equal=function(e){return nw(this,e)}};var O_e=Yp.prototype.equal,I_e=MC.prototype.equal;nw.restore=function(){Yp.prototype.equal=O_e,MC.prototype.equal=I_e}});var LG=E((N3e,RG)=>{"use strict";function kC(r){var e=(r/8|0)+(r%8===0?0:1);return e}var C_e={ES256:kC(256),ES384:kC(384),ES512:kC(521)};function T_e(r){var e=C_e[r];if(e)return e;throw new Error('Unknown algorithm "'+r+'"')}RG.exports=T_e});var VG=E((j3e,FG)=>{"use strict";var iw=zu().Buffer,NG=LG(),sw=128,jG=0,A_e=32,M_e=16,k_e=2,KG=M_e|A_e|jG<<6,ow=k_e|jG<<6;function P_e(r){return r.replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function qG(r){if(iw.isBuffer(r))return r;if(typeof r=="string")return iw.from(r,"base64");throw new TypeError("ECDSA signature must be a Base64 string or a Buffer")}function R_e(r,e){r=qG(r);var t=NG(e),n=t+1,i=r.length,s=0;if(r[s++]!==KG)throw new Error('Could not find expected "seq"');var o=r[s++];if(o===(sw|1)&&(o=r[s++]),i-s<o)throw new Error('"seq" specified length of "'+o+'", only "'+(i-s)+'" remaining');if(r[s++]!==ow)throw new Error('Could not find expected "int" for "r"');var a=r[s++];if(i-s-2<a)throw new Error('"r" specified length of "'+a+'", only "'+(i-s-2)+'" available');if(n<a)throw new Error('"r" specified length of "'+a+'", max of "'+n+'" is acceptable');var u=s;if(s+=a,r[s++]!==ow)throw new Error('Could not find expected "int" for "s"');var c=r[s++];if(i-s!==c)throw new Error('"s" specified length of "'+c+'", expected "'+(i-s)+'"');if(n<c)throw new Error('"s" specified length of "'+c+'", max of "'+n+'" is acceptable');var d=s;if(s+=c,s!==i)throw new Error('Expected to consume entire buffer, but "'+(i-s)+'" bytes remain');var h=t-a,p=t-c,m=iw.allocUnsafe(h+a+p+c);for(s=0;s<h;++s)m[s]=0;r.copy(m,s,u+Math.max(-h,0),u+a),s=t;for(var y=s;s<y+p;++s)m[s]=0;return r.copy(m,s,d+Math.max(-p,0),d+c),m=m.toString("base64"),m=P_e(m),m}function DG(r,e,t){for(var n=0;e+n<t&&r[e+n]===0;)++n;var i=r[e+n]>=sw;return i&&--n,n}function L_e(r,e){r=qG(r);var t=NG(e),n=r.length;if(n!==t*2)throw new TypeError('"'+e+'" signatures must be "'+t*2+'" bytes, saw "'+n+'"');var i=DG(r,0,t),s=DG(r,t,r.length),o=t-i,a=t-s,u=1+1+o+1+1+a,c=u<sw,d=iw.allocUnsafe((c?2:3)+u),h=0;return d[h++]=KG,c?d[h++]=u:(d[h++]=sw|1,d[h++]=u&255),d[h++]=ow,d[h++]=o,i<0?(d[h++]=0,h+=r.copy(d,h,0,t)):h+=r.copy(d,h,i,t),d[h++]=ow,d[h++]=a,s<0?(d[h++]=0,r.copy(d,h,t)):r.copy(d,h,t+s),d}FG.exports={derToJose:R_e,joseToDer:L_e}});var LC=E((K3e,JG)=>{var D_e=PG(),pd=zu().Buffer,ao=require("crypto"),UG=VG(),BG=require("util"),N_e=`"%s" is not a valid algorithm.
  Supported algorithms are:
  "HS256", "HS384", "HS512", "RS256", "RS384", "RS512", "PS256", "PS384", "PS512", "ES256", "ES384", "ES512" and "none".`,Jp="secret must be a string or buffer",hd="key must be a string or a buffer",j_e="key must be a string, a buffer or an object",PC=typeof ao.createPublicKey=="function";PC&&(hd+=" or a KeyObject",Jp+="or a KeyObject");function GG(r){if(!pd.isBuffer(r)&&typeof r!="string"&&(!PC||typeof r!="object"||typeof r.type!="string"||typeof r.asymmetricKeyType!="string"||typeof r.export!="function"))throw Ks(hd)}function $G(r){if(!pd.isBuffer(r)&&typeof r!="string"&&typeof r!="object")throw Ks(j_e)}function K_e(r){if(!pd.isBuffer(r)){if(typeof r=="string")return r;if(!PC||typeof r!="object"||r.type!=="secret"||typeof r.export!="function")throw Ks(Jp)}}function RC(r){return r.replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function WG(r){r=r.toString();var e=4-r.length%4;if(e!==4)for(var t=0;t<e;++t)r+="=";return r.replace(/\-/g,"+").replace(/_/g,"/")}function Ks(r){var e=[].slice.call(arguments,1),t=BG.format.bind(BG,r).apply(null,e);return new TypeError(t)}function q_e(r){return pd.isBuffer(r)||typeof r=="string"}function Qp(r){return q_e(r)||(r=JSON.stringify(r)),r}function zG(r){return function(t,n){K_e(n),t=Qp(t);var i=ao.createHmac("sha"+r,n),s=(i.update(t),i.digest("base64"));return RC(s)}}function F_e(r){return function(t,n,i){var s=zG(r)(t,i);return D_e(pd.from(n),pd.from(s))}}function HG(r){return function(t,n){$G(n),t=Qp(t);var i=ao.createSign("RSA-SHA"+r),s=(i.update(t),i.sign(n,"base64"));return RC(s)}}function YG(r){return function(t,n,i){GG(i),t=Qp(t),n=WG(n);var s=ao.createVerify("RSA-SHA"+r);return s.update(t),s.verify(i,n,"base64")}}function V_e(r){return function(t,n){$G(n),t=Qp(t);var i=ao.createSign("RSA-SHA"+r),s=(i.update(t),i.sign({key:n,padding:ao.constants.RSA_PKCS1_PSS_PADDING,saltLength:ao.constants.RSA_PSS_SALTLEN_DIGEST},"base64"));return RC(s)}}function B_e(r){return function(t,n,i){GG(i),t=Qp(t),n=WG(n);var s=ao.createVerify("RSA-SHA"+r);return s.update(t),s.verify({key:i,padding:ao.constants.RSA_PKCS1_PSS_PADDING,saltLength:ao.constants.RSA_PSS_SALTLEN_DIGEST},n,"base64")}}function U_e(r){var e=HG(r);return function(){var n=e.apply(null,arguments);return n=UG.derToJose(n,"ES"+r),n}}function G_e(r){var e=YG(r);return function(n,i,s){i=UG.joseToDer(i,"ES"+r).toString("base64");var o=e(n,i,s);return o}}function $_e(){return function(){return""}}function W_e(){return function(e,t){return t===""}}JG.exports=function(e){var t={hs:zG,rs:HG,ps:V_e,es:U_e,none:$_e},n={hs:F_e,rs:YG,ps:B_e,es:G_e,none:W_e},i=e.match(/^(RS|PS|ES|HS)(256|384|512)$|^(none)$/);if(!i)throw Ks(N_e,e);var s=(i[1]||i[3]).toLowerCase(),o=i[2];return{sign:t[s](o),verify:n[s](o)}}});var DC=E((q3e,QG)=>{var z_e=require("buffer").Buffer;QG.exports=function(e){return typeof e=="string"?e:typeof e=="number"||z_e.isBuffer(e)?e.toString():JSON.stringify(e)}});var n$=E((F3e,r$)=>{var H_e=zu().Buffer,ZG=AC(),Y_e=LC(),J_e=require("stream"),XG=DC(),NC=require("util");function e$(r,e){return H_e.from(r,e).toString("base64").replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function Q_e(r,e,t){t=t||"utf8";var n=e$(XG(r),"binary"),i=e$(XG(e),t);return NC.format("%s.%s",n,i)}function t$(r){var e=r.header,t=r.payload,n=r.secret||r.privateKey,i=r.encoding,s=Y_e(e.alg),o=Q_e(e,t,i),a=s.sign(o,n);return NC.format("%s.%s",o,a)}function aw(r){var e=r.secret||r.privateKey||r.key,t=new ZG(e);this.readable=!0,this.header=r.header,this.encoding=r.encoding,this.secret=this.privateKey=this.key=t,this.payload=new ZG(r.payload),this.secret.once("close",function(){!this.payload.writable&&this.readable&&this.sign()}.bind(this)),this.payload.once("close",function(){!this.secret.writable&&this.readable&&this.sign()}.bind(this))}NC.inherits(aw,J_e);aw.prototype.sign=function(){try{var e=t$({header:this.header,payload:this.payload.buffer,secret:this.secret.buffer,encoding:this.encoding});return this.emit("done",e),this.emit("data",e),this.emit("end"),this.readable=!1,e}catch(t){this.readable=!1,this.emit("error",t),this.emit("close")}};aw.sign=t$;r$.exports=aw});var h$=E((V3e,d$)=>{var s$=zu().Buffer,i$=AC(),Z_e=LC(),X_e=require("stream"),o$=DC(),exe=require("util"),txe=/^[a-zA-Z0-9\-_]+?\.[a-zA-Z0-9\-_]+?\.([a-zA-Z0-9\-_]+)?$/;function rxe(r){return Object.prototype.toString.call(r)==="[object Object]"}function nxe(r){if(rxe(r))return r;try{return JSON.parse(r)}catch{return}}function a$(r){var e=r.split(".",1)[0];return nxe(s$.from(e,"base64").toString("binary"))}function ixe(r){return r.split(".",2).join(".")}function l$(r){return r.split(".")[2]}function sxe(r,e){e=e||"utf8";var t=r.split(".")[1];return s$.from(t,"base64").toString(e)}function u$(r){return txe.test(r)&&!!a$(r)}function c$(r,e,t){if(!e){var n=new Error("Missing algorithm parameter for jws.verify");throw n.code="MISSING_ALGORITHM",n}r=o$(r);var i=l$(r),s=ixe(r),o=Z_e(e);return o.verify(s,i,t)}function f$(r,e){if(e=e||{},r=o$(r),!u$(r))return null;var t=a$(r);if(!t)return null;var n=sxe(r);return(t.typ==="JWT"||e.json)&&(n=JSON.parse(n,e.encoding)),{header:t,payload:n,signature:l$(r)}}function md(r){r=r||{};var e=r.secret||r.publicKey||r.key,t=new i$(e);this.readable=!0,this.algorithm=r.algorithm,this.encoding=r.encoding,this.secret=this.publicKey=this.key=t,this.signature=new i$(r.signature),this.secret.once("close",function(){!this.signature.writable&&this.readable&&this.verify()}.bind(this)),this.signature.once("close",function(){!this.secret.writable&&this.readable&&this.verify()}.bind(this))}exe.inherits(md,X_e);md.prototype.verify=function(){try{var e=c$(this.signature.buffer,this.algorithm,this.key.buffer),t=f$(this.signature.buffer,this.encoding);return this.emit("done",e,t),this.emit("data",e),this.emit("end"),this.readable=!1,e}catch(n){this.readable=!1,this.emit("error",n),this.emit("close")}};md.decode=f$;md.isValid=u$;md.verify=c$;d$.exports=md});var m$=E(ll=>{var p$=n$(),lw=h$(),oxe=["HS256","HS384","HS512","RS256","RS384","RS512","PS256","PS384","PS512","ES256","ES384","ES512"];ll.ALGORITHMS=oxe;ll.sign=p$.sign;ll.verify=lw.verify;ll.decode=lw.decode;ll.isValid=lw.isValid;ll.createSign=function(e){return new p$(e)};ll.createVerify=function(e){return new lw(e)}});var uw=E((U3e,g$)=>{"use strict";var jC={};jC.supportedContentEncodings={AES_GCM:"aesgcm",AES_128_GCM:"aes128gcm"};jC.supportedUrgency={VERY_LOW:"very-low",LOW:"low",NORMAL:"normal",HIGH:"high"};g$.exports=jC});var KC=E((G3e,y$)=>{"use strict";function axe(r){return/^[A-Za-z0-9\-_]+$/.test(r)}y$.exports={validate:axe}});var FC=E(($3e,O$)=>{"use strict";var lxe=require("crypto"),uxe=AG(),cxe=m$(),{URL:w$}=require("url"),v$=uw(),b$=KC(),fxe=12*60*60,dxe=24*60*60,hxe=uxe.define("ECPrivateKey",function(){this.seq().obj(this.key("version").int(),this.key("privateKey").octstr(),this.key("parameters").explicit(0).objid().optional(),this.key("publicKey").explicit(1).bitstr().optional())});function pxe(r){return hxe.encode({version:1,privateKey:r,parameters:[1,2,840,10045,3,1,7]},"pem",{label:"EC PRIVATE KEY"})}function mxe(){let r=lxe.createECDH("prime256v1");r.generateKeys();let e=r.getPublicKey(),t=r.getPrivateKey();if(t.length<32){let n=Buffer.alloc(32-t.length);n.fill(0),t=Buffer.concat([n,t])}if(e.length<65){let n=Buffer.alloc(65-e.length);n.fill(0),e=Buffer.concat([n,e])}return{publicKey:e.toString("base64url"),privateKey:t.toString("base64url")}}function S$(r){if(!r)throw new Error("No subject set in vapidDetails.subject.");if(typeof r!="string"||r.length===0)throw new Error("The subject value must be a string containing an https: URL or mailto: address. "+r);let e=null;try{e=new w$(r)}catch{throw new Error("Vapid subject is not a valid URL. "+r)}if(!["https:","mailto:"].includes(e.protocol))throw new Error("Vapid subject is not an https: or mailto: URL. "+r);e.hostname==="localhost"&&console.warn("Vapid subject points to a localhost web URI, which is unsupported by Apple's push notification server and will result in a BadJwtToken error when sending notifications.")}function _$(r){if(!r)throw new Error("No key set vapidDetails.publicKey");if(typeof r!="string")throw new Error("Vapid public key is must be a URL safe Base 64 encoded string.");if(!b$.validate(r))throw new Error('Vapid public key must be a URL safe Base 64 (without "=")');if(r=Buffer.from(r,"base64url"),r.length!==65)throw new Error("Vapid public key should be 65 bytes long when decoded.")}function x$(r){if(!r)throw new Error("No key set in vapidDetails.privateKey");if(typeof r!="string")throw new Error("Vapid private key must be a URL safe Base 64 encoded string.");if(!b$.validate(r))throw new Error('Vapid private key must be a URL safe Base 64 (without "=")');if(r=Buffer.from(r,"base64url"),r.length!==32)throw new Error("Vapid private key should be 32 bytes long when decoded.")}function qC(r){let e=new Date;return e.setSeconds(e.getSeconds()+r),Math.floor(e.getTime()/1e3)}function E$(r){if(!Number.isInteger(r))throw new Error("`expiration` value must be a number");if(r<0)throw new Error("`expiration` must be a positive integer");let e=qC(dxe);if(r>=e)throw new Error("`expiration` value is greater than maximum of 24 hours")}function gxe(r,e,t,n,i,s){if(!r)throw new Error("No audience could be generated for VAPID.");if(typeof r!="string"||r.length===0)throw new Error("The audience value must be a string containing the origin of a push service. "+r);try{new w$(r)}catch{throw new Error("VAPID audience is not a url. "+r)}S$(e),_$(t),x$(n),n=Buffer.from(n,"base64url"),s?E$(s):s=qC(fxe);let o={typ:"JWT",alg:"ES256"},a={aud:r,exp:s,sub:e},u=cxe.sign({header:o,payload:a,privateKey:pxe(n)});if(i===v$.supportedContentEncodings.AES_128_GCM)return{Authorization:"vapid t="+u+", k="+t};if(i===v$.supportedContentEncodings.AES_GCM)return{Authorization:"WebPush "+u,"Crypto-Key":"p256ecdsa="+t};throw new Error("Unsupported encoding type specified.")}O$.exports={generateVAPIDKeys:mxe,getFutureExpirationTimestamp:qC,getVapidHeaders:gxe,validateSubject:S$,validatePublicKey:_$,validatePrivateKey:x$,validateExpiration:E$}});var I$=E(Zp=>{Zp.version="1.0.0";Zp.encode=function(e){return e.toString("base64").replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")};Zp.decode=function(e){return e+=Array(5-e.length%4).join("="),e=e.replace(/\-/g,"+").replace(/\_/g,"/"),new Buffer(e,"base64")};Zp.validate=function(e){return/^[A-Za-z0-9\-_]+$/.test(e)}});var T$=E((z3e,C$)=>{C$.exports=I$()});var V$=E((H3e,F$)=>{"use strict";var fw=require("crypto"),k$=T$(),P$="aes-128-gcm",dw={aes128gcm:1,aesgcm:2,aesgcm128:1},ic=16,lo=16,yxe=12,R$=32,Xp="encrypt",em="decrypt",Nt;process.env.ECE_KEYLOG==="1"?Nt=function(r,e){return console.warn(r+" ["+e.length+"]: "+k$.encode(e)),e}:Nt=function(r,e){return e};function cw(r){return typeof r=="string"?k$.decode(r):r}function L$(r,e){var t=fw.createHmac("sha256",r);return t.update(e),t.digest()}function D$(r,e){return Nt("salt",r),Nt("ikm",e),Nt("extract",L$(r,e))}function VC(r,e,t){Nt("prk",r),Nt("info",e);var n=new Buffer(0),i=new Buffer(0);e=new Buffer(e,"ascii");for(var s=0,o=new Buffer(1);n.length<t;)o.writeUIntBE(++s,0,1),i=L$(r,Buffer.concat([i,e,o])),n=Buffer.concat([n,i]);return Nt("expand",n.slice(0,t))}function N$(r,e,t,n){return VC(D$(r,e),t,n)}function BC(r,e){var t=Buffer.concat([new Buffer("Content-Encoding: "+r+"\0","ascii"),e]);return Nt("info "+r,t),t}function A$(r){var e=Buffer.concat([new Buffer(2),r]);return e.writeUIntBE(r.length,0,2),e}function vxe(r,e){var t=r.privateKey,n,i;if(e===Xp)n=t.getPublicKey(),i=r.dh;else if(e===em)n=r.dh,i=t.getPublicKey();else throw new Error("Unknown mode only "+Xp+" and "+em+" supported");return{secret:t.computeSecret(r.dh),context:Buffer.concat([Buffer.from(r.keylabel,"ascii"),Buffer.from([0]),A$(i),A$(n)])}}function M$(r,e){var t={secret:null,context:new Buffer(0)};if(r.key){if(t.secret=r.key,t.secret.length!==lo)throw new Error("An explicit key must be "+lo+" bytes")}else r.dh?t=vxe(r,e):typeof r.keyid!==void 0&&(t.secret=r.keymap[r.keyid]);if(!t.secret)throw new Error("Unable to determine key");return Nt("secret",t.secret),Nt("context",t.context),r.authSecret&&(t.secret=N$(r.authSecret,t.secret,BC("auth",new Buffer(0)),R$),Nt("authsecret",t.secret)),t}function wxe(r,e){if(!r.authSecret)throw new Error("No authentication secret for webpush");Nt("authsecret",r.authSecret);var t,n,i;if(e===Xp)n=r.privateKey.getPublicKey(),t=i=r.dh;else if(e===em)t=n=r.keyid,i=r.privateKey.getPublicKey();else throw new Error("Unknown mode only "+Xp+" and "+em+" supported");return Nt("remote pubkey",t),Nt("sender pubkey",n),Nt("receiver pubkey",i),Nt("secret dh",N$(r.authSecret,r.privateKey.computeSecret(t),Buffer.concat([Buffer.from("WebPush: info\0"),i,n]),R$))}function bxe(r,e){if(r.key){if(r.key.length!==lo)throw new Error("An explicit key must be "+lo+" bytes");return Nt("secret key",r.key)}if(!r.privateKey){var t=r.keymap&&r.keymap[r.keyid];if(!t)throw new Error('No saved key (keyid: "'+r.keyid+'")');return t}return wxe(r,e)}function j$(r,e){if(!r.salt)throw new Error("must include a salt parameter for "+r.version);var t,n,i;if(r.version==="aesgcm128")t="Content-Encoding: aesgcm128",n="Content-Encoding: nonce",i=M$(r,e).secret;else if(r.version==="aesgcm"){var s=M$(r,e);t=BC("aesgcm",s.context),n=BC("nonce",s.context),i=s.secret}else if(r.version==="aes128gcm")t=Buffer.from("Content-Encoding: aes128gcm\0"),n=Buffer.from("Content-Encoding: nonce\0"),i=bxe(r,e);else throw new Error("Unable to set context for mode "+params.version);var o=D$(r.salt,i),a={key:VC(o,t,lo),nonce:VC(o,n,yxe)};return Nt("key",a.key),Nt("nonce base",a.nonce),a}function K$(r){var e={};e.version=r.version||"aes128gcm",e.rs=parseInt(r.rs,10),isNaN(e.rs)&&(e.rs=4096);var t=dw[e.version];if(e.version==="aes128gcm"&&(t+=ic),e.rs<=t)throw new Error("The rs parameter has to be greater than "+t);if(r.salt&&(e.salt=cw(r.salt),e.salt.length!==lo))throw new Error("The salt parameter must be "+lo+" bytes");return e.keyid=r.keyid,r.key?e.key=cw(r.key):(e.privateKey=r.privateKey,e.privateKey||(e.keymap=r.keymap),e.version!=="aes128gcm"&&(e.keylabel=r.keylabel||"P-256"),r.dh&&(e.dh=cw(r.dh))),r.authSecret&&(e.authSecret=cw(r.authSecret)),e}function q$(r,e){var t=new Buffer(r),n=t.readUIntBE(t.length-6,6),i=((n^e)&16777215)+((n/16777216^e/16777216)&16777215)*16777216;return t.writeUIntBE(i,t.length-6,6),Nt("nonce"+e,t),t}function Sxe(r,e){var t=r.readUIntBE(20,1);return e.salt=r.slice(0,lo),e.rs=r.readUIntBE(lo,4),e.keyid=r.slice(21,21+t),21+t}function _xe(r,e){var t=dw[e],n=r.readUIntBE(0,t);if(n+t>r.length)throw new Error("padding exceeds block size");Nt("padding",r.slice(0,t+n));var i=new Buffer(n);if(i.fill(0),i.compare(r.slice(t,t+n))!==0)throw new Error("invalid padding");return r.slice(t+n)}function xxe(r,e){for(var t=r.length-1;t>=0;){if(r[t]){if(e){if(r[t]!==2)throw new Error("last record needs to start padding with a 2")}else if(r[t]!==1)throw new Error("last record needs to start padding with a 2");return r.slice(0,t)}--t}throw new Error("all zero plaintext")}function Exe(r,e,t,n,i){Nt("decrypt",t);var s=q$(r.nonce,e),o=fw.createDecipheriv(P$,r.key,s);o.setAuthTag(t.slice(t.length-ic));var a=o.update(t.slice(0,t.length-ic));return a=Buffer.concat([a,o.final()]),Nt("decrypted",a),n.version!=="aes128gcm"?_xe(a,n.version):xxe(a,i)}function Oxe(r,e){var t=K$(e);if(t.version==="aes128gcm"){var n=Sxe(r,t);r=r.slice(n)}var i=j$(t,em),s=0,o=new Buffer(0),a=t.rs;t.version!=="aes128gcm"&&(a+=ic);for(var u=0;s<r.length;++u){var c=s+a;if(t.version!=="aes128gcm"&&c===r.length)throw new Error("Truncated payload");if(c=Math.min(c,r.length),c-s<=ic)throw new Error("Invalid block: too small at "+u);var d=Exe(i,u,r.slice(s,c),t,c>=r.length);o=Buffer.concat([o,d]),s=c}return o}function Ixe(r,e,t,n,i,s){Nt("encrypt",t),n=n||0;var o=q$(r.nonce,e),a=fw.createCipheriv(P$,r.key,o),u=[],c=dw[i.version],d=new Buffer(n+c);if(d.fill(0),i.version!=="aes128gcm"){if(d.writeUIntBE(n,0,c),Nt("padding",d),u.push(a.update(d)),u.push(a.update(t)),!s&&d.length+t.length<i.rs)throw new Error("Unable to pad to record size")}else u.push(a.update(t)),d.writeUIntBE(s?2:1,0,1),Nt("padding",d),u.push(a.update(d));a.final();var h=a.getAuthTag();if(h.length!==ic)throw new Error("invalid tag generated");return u.push(h),Nt("encrypted",Buffer.concat(u))}function Cxe(r){var e=new Buffer(5),t=Buffer.from(r.keyid||[]);if(t.length>255)throw new Error("keyid is too large");return e.writeUIntBE(r.rs,0,4),e.writeUIntBE(t.length,4,1),Buffer.concat([r.salt,e,t])}function Txe(r,e){if(!Buffer.isBuffer(r))throw new Error("buffer argument must be a Buffer");var t=K$(e);t.salt||(t.salt=fw.randomBytes(lo));var n;t.version==="aes128gcm"?(t.privateKey&&!t.keyid&&(t.keyid=t.privateKey.getPublicKey()),n=Cxe(t)):n=new Buffer(0);var i=j$(t,Xp),s=0,o=dw[t.version],a=o;t.version==="aes128gcm"&&(a+=ic);for(var u=isNaN(parseInt(e.pad,10))?0:parseInt(e.pad,10),c=0,d=!1;!d;){var h=Math.min(t.rs-a-1,u);t.version!=="aes128gcm"&&(h=Math.min((1<<o*8)-1,h)),u>0&&h===0&&++h,u-=h;var p=s+t.rs-a-h;t.version!=="aes128gcm"?d=p>r.length:d=p>=r.length,d=d&&u<=0;var m=Ixe(i,c,r.slice(s,p),h,t,d);n=Buffer.concat([n,m]),s=p,++c}return n}F$.exports={decrypt:Oxe,encrypt:Txe}});var UC=E((Y3e,U$)=>{"use strict";var B$=require("crypto"),Axe=V$(),Mxe=function(r,e,t,n){if(!r)throw new Error("No user public key provided for encryption.");if(typeof r!="string")throw new Error("The subscription p256dh value must be a string.");if(Buffer.from(r,"base64url").length!==65)throw new Error("The subscription p256dh value should be 65 bytes long.");if(!e)throw new Error("No user auth provided for encryption.");if(typeof e!="string")throw new Error("The subscription auth key must be a string.");if(Buffer.from(e,"base64url").length<16)throw new Error("The subscription auth key should be at least 16 bytes long");if(typeof t!="string"&&!Buffer.isBuffer(t))throw new Error("Payload must be either a string or a Node Buffer.");(typeof t=="string"||t instanceof String)&&(t=Buffer.from(t));let i=B$.createECDH("prime256v1"),s=i.generateKeys(),o=B$.randomBytes(16).toString("base64url"),a=Axe.encrypt(t,{version:n,dh:r,privateKey:i,salt:o,authSecret:e});return{localPublicKey:s,salt:o,cipherText:a}};U$.exports={encrypt:Mxe}});var GC=E((J3e,$$)=>{"use strict";function G$(r,e,t,n,i){Error.captureStackTrace(this,this.constructor),this.name=this.constructor.name,this.message=r,this.statusCode=e,this.headers=t,this.body=n,this.endpoint=i}require("util").inherits(G$,Error);$$.exports=G$});var H$=E(li=>{"use strict";var kxe=li&&li.__createBinding||(Object.create?function(r,e,t,n){n===void 0&&(n=t);var i=Object.getOwnPropertyDescriptor(e,t);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[t]}}),Object.defineProperty(r,n,i)}:function(r,e,t,n){n===void 0&&(n=t),r[n]=e[t]}),Pxe=li&&li.__setModuleDefault||(Object.create?function(r,e){Object.defineProperty(r,"default",{enumerable:!0,value:e})}:function(r,e){r.default=e}),W$=li&&li.__importStar||function(r){if(r&&r.__esModule)return r;var e={};if(r!=null)for(var t in r)t!=="default"&&Object.prototype.hasOwnProperty.call(r,t)&&kxe(e,r,t);return Pxe(e,r),e};Object.defineProperty(li,"__esModule",{value:!0});li.req=li.json=li.toBuffer=void 0;var Rxe=W$(require("http")),Lxe=W$(require("https"));async function z$(r){let e=0,t=[];for await(let n of r)e+=n.length,t.push(n);return Buffer.concat(t,e)}li.toBuffer=z$;async function Dxe(r){let t=(await z$(r)).toString("utf8");try{return JSON.parse(t)}catch(n){let i=n;throw i.message+=` (input: ${t})`,i}}li.json=Dxe;function Nxe(r,e={}){let n=((typeof r=="string"?r:r.href).startsWith("https:")?Lxe:Rxe).request(r,e),i=new Promise((s,o)=>{n.once("response",s).once("error",o).end()});return n.then=i.then.bind(i),n}li.req=Nxe});var Q$=E(Di=>{"use strict";var J$=Di&&Di.__createBinding||(Object.create?function(r,e,t,n){n===void 0&&(n=t);var i=Object.getOwnPropertyDescriptor(e,t);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[t]}}),Object.defineProperty(r,n,i)}:function(r,e,t,n){n===void 0&&(n=t),r[n]=e[t]}),jxe=Di&&Di.__setModuleDefault||(Object.create?function(r,e){Object.defineProperty(r,"default",{enumerable:!0,value:e})}:function(r,e){r.default=e}),Kxe=Di&&Di.__importStar||function(r){if(r&&r.__esModule)return r;var e={};if(r!=null)for(var t in r)t!=="default"&&Object.prototype.hasOwnProperty.call(r,t)&&J$(e,r,t);return jxe(e,r),e},qxe=Di&&Di.__exportStar||function(r,e){for(var t in r)t!=="default"&&!Object.prototype.hasOwnProperty.call(e,t)&&J$(e,r,t)};Object.defineProperty(Di,"__esModule",{value:!0});Di.Agent=void 0;var Y$=Kxe(require("http"));qxe(H$(),Di);var uo=Symbol("AgentBaseInternalState"),$C=class extends Y$.Agent{constructor(e){super(e),this[uo]={}}isSecureEndpoint(e){if(e){if(typeof e.secureEndpoint=="boolean")return e.secureEndpoint;if(typeof e.protocol=="string")return e.protocol==="https:"}let{stack:t}=new Error;return typeof t!="string"?!1:t.split(`
`).some(n=>n.indexOf("(https.js:")!==-1||n.indexOf("node:https:")!==-1)}createSocket(e,t,n){let i={...t,secureEndpoint:this.isSecureEndpoint(t)};Promise.resolve().then(()=>this.connect(e,i)).then(s=>{if(s instanceof Y$.Agent)return s.addRequest(e,i);this[uo].currentSocket=s,super.createSocket(e,t,n)},n)}createConnection(){let e=this[uo].currentSocket;if(this[uo].currentSocket=void 0,!e)throw new Error("No socket was returned in the `connect()` function");return e}get defaultPort(){return this[uo].defaultPort??(this.protocol==="https:"?443:80)}set defaultPort(e){this[uo]&&(this[uo].defaultPort=e)}get protocol(){return this[uo].protocol??(this.isSecureEndpoint()?"https:":"http:")}set protocol(e){this[uo]&&(this[uo].protocol=e)}};Di.Agent=$C});var Z$=E(gd=>{"use strict";var Fxe=gd&&gd.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(gd,"__esModule",{value:!0});gd.parseProxyResponse=void 0;var Vxe=Fxe(j0()),hw=(0,Vxe.default)("https-proxy-agent:parse-proxy-response");function Bxe(r){return new Promise((e,t)=>{let n=0,i=[];function s(){let d=r.read();d?c(d):r.once("readable",s)}function o(){r.removeListener("end",a),r.removeListener("error",u),r.removeListener("readable",s)}function a(){o(),hw("onend"),t(new Error("Proxy connection ended before receiving CONNECT response"))}function u(d){o(),hw("onerror %o",d),t(d)}function c(d){i.push(d),n+=d.length;let h=Buffer.concat(i,n);if(h.indexOf(`\r
\r
`)===-1){hw("have not received end of HTTP headers yet..."),s();return}let m=h.toString("ascii").split(`\r
`),y=m.shift();if(!y)return r.destroy(),t(new Error("No header received from proxy CONNECT response"));let _=y.split(" "),O=+_[1],x=_.slice(2).join(" "),A={};for(let P of m){if(!P)continue;let q=P.indexOf(":");if(q===-1)return r.destroy(),t(new Error(`Invalid header from proxy CONNECT response: "${P}"`));let F=P.slice(0,q).toLowerCase(),z=P.slice(q+1).trimStart(),B=A[F];typeof B=="string"?A[F]=[B,z]:Array.isArray(B)?B.push(z):A[F]=z}hw("got proxy server response: %o %o",y,A),o(),e({connect:{statusCode:O,statusText:x,headers:A},buffered:h})}r.on("error",u),r.on("end",a),s()})}gd.parseProxyResponse=Bxe});var nW=E(fs=>{"use strict";var Uxe=fs&&fs.__createBinding||(Object.create?function(r,e,t,n){n===void 0&&(n=t);var i=Object.getOwnPropertyDescriptor(e,t);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[t]}}),Object.defineProperty(r,n,i)}:function(r,e,t,n){n===void 0&&(n=t),r[n]=e[t]}),Gxe=fs&&fs.__setModuleDefault||(Object.create?function(r,e){Object.defineProperty(r,"default",{enumerable:!0,value:e})}:function(r,e){r.default=e}),tW=fs&&fs.__importStar||function(r){if(r&&r.__esModule)return r;var e={};if(r!=null)for(var t in r)t!=="default"&&Object.prototype.hasOwnProperty.call(r,t)&&Uxe(e,r,t);return Gxe(e,r),e},rW=fs&&fs.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(fs,"__esModule",{value:!0});fs.HttpsProxyAgent=void 0;var pw=tW(require("net")),X$=tW(require("tls")),$xe=rW(require("assert")),Wxe=rW(j0()),zxe=Q$(),Hxe=Z$(),tm=(0,Wxe.default)("https-proxy-agent"),mw=class extends zxe.Agent{constructor(e,t){super(t),this.options={path:void 0},this.proxy=typeof e=="string"?new URL(e):e,this.proxyHeaders=t?.headers??{},tm("Creating new HttpsProxyAgent instance: %o",this.proxy.href);let n=(this.proxy.hostname||this.proxy.host).replace(/^\[|\]$/g,""),i=this.proxy.port?parseInt(this.proxy.port,10):this.proxy.protocol==="https:"?443:80;this.connectOpts={ALPNProtocols:["http/1.1"],...t?eW(t,"headers"):null,host:n,port:i}}async connect(e,t){let{proxy:n}=this;if(!t.host)throw new TypeError('No "host" provided');let i;n.protocol==="https:"?(tm("Creating `tls.Socket`: %o",this.connectOpts),i=X$.connect(this.connectOpts)):(tm("Creating `net.Socket`: %o",this.connectOpts),i=pw.connect(this.connectOpts));let s=typeof this.proxyHeaders=="function"?this.proxyHeaders():{...this.proxyHeaders},o=pw.isIPv6(t.host)?`[${t.host}]`:t.host,a=`CONNECT ${o}:${t.port} HTTP/1.1\r
`;if(n.username||n.password){let p=`${decodeURIComponent(n.username)}:${decodeURIComponent(n.password)}`;s["Proxy-Authorization"]=`Basic ${Buffer.from(p).toString("base64")}`}s.Host=`${o}:${t.port}`,s["Proxy-Connection"]||(s["Proxy-Connection"]=this.keepAlive?"Keep-Alive":"close");for(let p of Object.keys(s))a+=`${p}: ${s[p]}\r
`;let u=(0,Hxe.parseProxyResponse)(i);i.write(`${a}\r
`);let{connect:c,buffered:d}=await u;if(e.emit("proxyConnect",c),this.emit("proxyConnect",c,e),c.statusCode===200){if(e.once("socket",Yxe),t.secureEndpoint){tm("Upgrading socket connection to TLS");let p=t.servername||t.host;return X$.connect({...eW(t,"host","path","port"),socket:i,servername:pw.isIP(p)?void 0:p})}return i}i.destroy();let h=new pw.Socket({writable:!1});return h.readable=!0,e.once("socket",p=>{tm("Replaying proxy buffer for failed request"),(0,$xe.default)(p.listenerCount("data")>0),p.push(d),p.push(null)}),h}};mw.protocols=["http","https"];fs.HttpsProxyAgent=mw;function Yxe(r){r.resume()}function eW(r,...e){let t={},n;for(n in r)e.includes(n)||(t[n]=r[n]);return t}});var lW=E((tNe,aW)=>{"use strict";var sW=require("url"),oW=require("https"),Jxe=GC(),gw=FC(),Qxe=UC(),Ni=uw(),Zxe=KC(),iW=2419200,WC="",zC;function rm(){}rm.prototype.setGCMAPIKey=function(r){if(r===null){WC=null;return}if(typeof r>"u"||typeof r!="string"||r.length===0)throw new Error("The GCM API Key should be a non-empty string or null.");WC=r};rm.prototype.setVapidDetails=function(r,e,t){if(arguments.length===1&&arguments[0]===null){zC=null;return}gw.validateSubject(r),gw.validatePublicKey(e),gw.validatePrivateKey(t),zC={subject:r,publicKey:e,privateKey:t}};rm.prototype.generateRequestDetails=function(r,e,t){if(!r||!r.endpoint)throw new Error("You must pass in a subscription with at least an endpoint.");if(typeof r.endpoint!="string"||r.endpoint.length===0)throw new Error("The subscription endpoint must be a string with a valid URL.");if(e&&(typeof r!="object"||!r.keys||!r.keys.p256dh||!r.keys.auth))throw new Error("To send a message with a payload, the subscription must have 'auth' and 'p256dh' keys.");let n=WC,i=zC,s=iW,o={},a=Ni.supportedContentEncodings.AES_128_GCM,u=Ni.supportedUrgency.NORMAL,c,d,h,p;if(t){let x=["headers","gcmAPIKey","vapidDetails","TTL","contentEncoding","urgency","topic","proxy","agent","timeout"],A=Object.keys(t);for(let P=0;P<A.length;P+=1){let q=A[P];if(!x.includes(q))throw new Error("'"+q+"' is an invalid option. The valid options are ['"+x.join("', '")+"'].")}if(t.headers){o=t.headers;let P=Object.keys(o).filter(function(q){return typeof t[q]<"u"});if(P.length>0)throw new Error("Duplicated headers defined ["+P.join(",")+"]. Please either define the header in thetop level options OR in the 'headers' key.")}if(t.gcmAPIKey&&(n=t.gcmAPIKey),t.vapidDetails!==void 0&&(i=t.vapidDetails),t.TTL!==void 0&&(s=Number(t.TTL),s<0))throw new Error("TTL should be a number and should be at least 0");if(t.contentEncoding)if(t.contentEncoding===Ni.supportedContentEncodings.AES_128_GCM||t.contentEncoding===Ni.supportedContentEncodings.AES_GCM)a=t.contentEncoding;else throw new Error("Unsupported content encoding specified.");if(t.urgency)if(t.urgency===Ni.supportedUrgency.VERY_LOW||t.urgency===Ni.supportedUrgency.LOW||t.urgency===Ni.supportedUrgency.NORMAL||t.urgency===Ni.supportedUrgency.HIGH)u=t.urgency;else throw new Error("Unsupported urgency specified.");if(t.topic){if(!Zxe.validate(t.topic))throw new Error("Unsupported characters set use the URL or filename-safe Base64 characters set");if(t.topic.length>32)throw new Error("use maximum of 32 characters from the URL or filename-safe Base64 characters set");c=t.topic}t.proxy&&(typeof t.proxy=="string"||typeof t.proxy.host=="string"?d=t.proxy:console.warn("Attempt to use proxy option, but invalid type it should be a string or proxy options object.")),t.agent&&(t.agent instanceof oW.Agent?(d&&console.warn("Agent option will be ignored because proxy option is defined."),h=t.agent):console.warn("Wrong type for the agent option, it should be an instance of https.Agent.")),typeof t.timeout=="number"&&(p=t.timeout)}typeof s>"u"&&(s=iW);let m={method:"POST",headers:{TTL:s}};Object.keys(o).forEach(function(x){m.headers[x]=o[x]});let y=null;if(e){let x=Qxe.encrypt(r.keys.p256dh,r.keys.auth,e,a);m.headers["Content-Length"]=x.cipherText.length,m.headers["Content-Type"]="application/octet-stream",a===Ni.supportedContentEncodings.AES_128_GCM?m.headers["Content-Encoding"]=Ni.supportedContentEncodings.AES_128_GCM:a===Ni.supportedContentEncodings.AES_GCM&&(m.headers["Content-Encoding"]=Ni.supportedContentEncodings.AES_GCM,m.headers.Encryption="salt="+x.salt,m.headers["Crypto-Key"]="dh="+x.localPublicKey.toString("base64url")),y=x.cipherText}else m.headers["Content-Length"]=0;let _=r.endpoint.startsWith("https://android.googleapis.com/gcm/send"),O=r.endpoint.startsWith("https://fcm.googleapis.com/fcm/send");if(_)n?m.headers.Authorization="key="+n:console.warn("Attempt to send push notification to GCM endpoint, but no GCM key is defined. Please use setGCMApiKey() or add 'gcmAPIKey' as an option.");else if(i){let x=sW.parse(r.endpoint),A=x.protocol+"//"+x.host,P=gw.getVapidHeaders(A,i.subject,i.publicKey,i.privateKey,a);m.headers.Authorization=P.Authorization,a===Ni.supportedContentEncodings.AES_GCM&&(m.headers["Crypto-Key"]?m.headers["Crypto-Key"]+=";"+P["Crypto-Key"]:m.headers["Crypto-Key"]=P["Crypto-Key"])}else O&&n&&(m.headers.Authorization="key="+n);return m.headers.Urgency=u,c&&(m.headers.Topic=c),m.body=y,m.endpoint=r.endpoint,d&&(m.proxy=d),h&&(m.agent=h),p&&(m.timeout=p),m};rm.prototype.sendNotification=function(r,e,t){let n;try{n=this.generateRequestDetails(r,e,t)}catch(i){return Promise.reject(i)}return new Promise(function(i,s){let o={},a=sW.parse(n.endpoint);if(o.hostname=a.hostname,o.port=a.port,o.path=a.path,o.headers=n.headers,o.method=n.method,n.timeout&&(o.timeout=n.timeout),n.agent&&(o.agent=n.agent),n.proxy){let{HttpsProxyAgent:c}=nW();o.agent=new c(n.proxy)}let u=oW.request(o,function(c){let d="";c.on("data",function(h){d+=h}),c.on("end",function(){c.statusCode<200||c.statusCode>299?s(new Jxe("Received unexpected response code",c.statusCode,c.headers,d,n.endpoint)):i({statusCode:c.statusCode,body:d,headers:c.headers})})});n.timeout&&u.on("timeout",function(){u.destroy(new Error("Socket timeout"))}),u.on("error",function(c){s(c)}),n.body&&u.write(n.body),u.end()})};aW.exports=rm});var fW=E((rNe,cW)=>{"use strict";var uW=FC(),Xxe=UC(),eEe=lW(),tEe=GC(),rEe=uw(),nm=new eEe;cW.exports={WebPushError:tEe,supportedContentEncodings:rEe.supportedContentEncodings,encrypt:Xxe.encrypt,getVapidHeaders:uW.getVapidHeaders,generateVAPIDKeys:uW.generateVAPIDKeys,setGCMAPIKey:nm.setGCMAPIKey,setVapidDetails:nm.setVapidDetails,generateRequestDetails:nm.generateRequestDetails,sendNotification:nm.sendNotification.bind(nm)}});var wW=E((ANe,lEe)=>{lEe.exports={name:"systeminformation",version:"5.21.15",description:"Advanced, lightweight system and OS information library",license:"MIT",author:"Sebastian Hildebrandt <hildebrandt@plus-innovations.com> (https://plus-innovations.com)",homepage:"https://systeminformation.io",main:"./lib/index.js",bin:{systeminformation:"lib/cli.js"},types:"./lib/index.d.ts",scripts:{test:"node ./test/test.js"},files:["lib/"],keywords:["system information","sysinfo","monitor","monitoring","os","linux","osx","windows","freebsd","openbsd","netbsd","cpu","cpuload","physical cores","logical cores","processor","cores","threads","socket type","memory","file system","fsstats","diskio","block devices","netstats","network","network interfaces","network connections","network stats","iface","printer","processes","users","internet","battery","docker","docker stats","docker processes","graphics","graphic card","graphic controller","gpu","display","smart","disk layout","usb","audio","bluetooth","wifi","wifinetworks","virtual box","virtualbox","vm","backend","hardware","BIOS","chassis"],repository:{type:"git",url:"https://github.com/sebhildebrandt/systeminformation.git"},funding:{type:"Buy me a coffee",url:"https://www.buymeacoffee.com/systeminfo"},os:["darwin","linux","win32","freebsd","openbsd","netbsd","sunos","android"],engines:{node:">=8.0.0"}}});var zr=E(qe=>{"use strict";var dl=require("os"),fo=require("fs"),uEe=require("path"),nT=require("child_process").spawn,cEe=require("child_process").exec,vd=require("child_process").execSync,vw=require("util"),lc=process.platform,iT=lc==="linux"||lc==="android",xW=lc==="darwin",sT=lc==="win32",EW=lc==="freebsd",OW=lc==="openbsd",IW=lc==="netbsd",QC=0,oc="",qs="",fl=null,hl=null,CW=process.env.WINDIR||"C:\\Windows",pn,yd="",sm=[],oT=!1,bW="$OutputEncoding = [System.Console]::OutputEncoding = [System.Console]::InputEncoding = [System.Text.Encoding]::UTF8 ; ",XC="--###START###--",SW="--ERROR--",yw="--###ENDCMD###--",eT="--##ID##--",wd={windowsHide:!0,maxBuffer:1024*2e4,encoding:"UTF-8",env:vw._extend({},process.env,{LANG:"en_US.UTF-8"})};function fEe(r){let e=parseInt(r,10);return isNaN(e)&&(e=0),e}var tT=new String().replace,rT=new String().toLowerCase,TW=new String().toString,AW=new String().substr,dEe=new String().trim,hEe=new String().startsWith,MW=Math.min;function pEe(r){return r&&{}.toString.call(r)==="[object Function]"}function mEe(r){let e=[],t={};for(let n=0;n<r.length;n++){let i=Object.keys(r[n]);i.sort(function(o,a){return o-a});let s="";for(let o=0;o<i.length;o++)s+=JSON.stringify(i[o]),s+=JSON.stringify(r[n][i[o]]);({}).hasOwnProperty.call(t,s)||(e.push(r[n]),t[s]=!0)}return e}function gEe(r,e){return r.sort(function(t,n){let i="",s="";return e.forEach(function(o){i=i+t[o],s=s+n[o]}),i<s?-1:i>s?1:0})}function yEe(){return QC===0&&(QC=dl.cpus().length),QC}function ac(r,e,t,n,i){t=t||":",e=e.toLowerCase(),n=n||!1,i=i||!1;let s="";return r.some(o=>{let a=o.toLowerCase().replace(/\t/g,"");if(n&&(a=a.trim()),a.startsWith(e)&&(!i||a.match(e+t)||a.match(e+" "+t))){let u=n?o.trim().split(t):o.split(t);if(u.length>=2)return u.shift(),s=u.join(t).trim(),!0}}),s}function vEe(r,e){return e=e||16,r.replace(/\\x([0-9A-Fa-f]{2})/g,function(){return String.fromCharCode(parseInt(arguments[1],e))})}function wEe(r){let e="",t=0;return r.split("").forEach(n=>{n>="0"&&n<="9"?t===1&&t++:(t===0&&t++,t===1&&(e+=n))}),e}function bEe(r,e){e=e||"",r=r.toUpperCase();let t=0,n=0,i=wEe(r),s=r.split(i);if(s.length>=2){s[2]&&(s[1]+=s[2]);let o=s[1]&&s[1].toLowerCase().indexOf("pm")>-1||s[1].toLowerCase().indexOf("p.m.")>-1||s[1].toLowerCase().indexOf("p. m.")>-1||s[1].toLowerCase().indexOf("n")>-1||s[1].toLowerCase().indexOf("ch")>-1||s[1].toLowerCase().indexOf("\xF6s")>-1||e&&s[1].toLowerCase().indexOf(e)>-1;return t=parseInt(s[0],10),n=parseInt(s[1],10),t=o&&t<12?t+12:t,("0"+t).substr(-2)+":"+("0"+n).substr(-2)}}function SEe(r,e){let t={date:"",time:""};e=e||{};let n=(e.dateFormat||"").toLowerCase(),i=e.pmDesignator||"",s=r.split(" ");if(s[0]){if(s[0].indexOf("/")>=0){let o=s[0].split("/");o.length===3&&(o[0].length===4?t.date=o[0]+"-"+("0"+o[1]).substr(-2)+"-"+("0"+o[2]).substr(-2):o[2].length===2?(n.indexOf("/d/")>-1||n.indexOf("/dd/")>-1,t.date="20"+o[2]+"-"+("0"+o[1]).substr(-2)+"-"+("0"+o[0]).substr(-2)):(r.toLowerCase().indexOf("pm")>-1||r.toLowerCase().indexOf("p.m.")>-1||r.toLowerCase().indexOf("p. m.")>-1||r.toLowerCase().indexOf("am")>-1||r.toLowerCase().indexOf("a.m.")>-1||r.toLowerCase().indexOf("a. m.")>-1||n.indexOf("/d/")>-1||n.indexOf("/dd/")>-1)&&n.indexOf("dd/")!==0?t.date=o[2]+"-"+("0"+o[0]).substr(-2)+"-"+("0"+o[1]).substr(-2):t.date=o[2]+"-"+("0"+o[1]).substr(-2)+"-"+("0"+o[0]).substr(-2))}if(s[0].indexOf(".")>=0){let o=s[0].split(".");o.length===3&&(n.indexOf(".d.")>-1||n.indexOf(".dd.")>-1?t.date=o[2]+"-"+("0"+o[0]).substr(-2)+"-"+("0"+o[1]).substr(-2):t.date=o[2]+"-"+("0"+o[1]).substr(-2)+"-"+("0"+o[0]).substr(-2))}if(s[0].indexOf("-")>=0){let o=s[0].split("-");o.length===3&&(t.date=o[0]+"-"+("0"+o[1]).substr(-2)+"-"+("0"+o[2]).substr(-2))}}if(s[1]){s.shift();let o=s.join(" ");t.time=bEe(o,i)}return t}function _Ee(r,e){let t=e>0,n=1,i=0,s=0,o=[];for(let u=0;u<r.length;u++)n<=e?(/\s/.test(r[u])&&!t&&(s=u-1,o.push({from:i,to:s+1,cap:r.substring(i,s+1)}),i=s+2,n++),t=r[u]===" "):(!/\s/.test(r[u])&&t&&(s=u-1,i<s&&o.push({from:i,to:s,cap:r.substring(i,s)}),i=s+1,n++),t=r[u]===" ");s=5e3,o.push({from:i,to:s,cap:r.substring(i,s)});let a=o.length;for(let u=0;u<a;u++)o[u].cap.replace(/\s/g,"").length===0&&u+1<a&&(o[u].to=o[u+1].to,o[u].cap=o[u].cap+o[u+1].cap,o.splice(u+1,1),a=a-1);return o}function xEe(r,e,t){for(let n=0;n<r.length;n++)if(r[n][e]===t)return n;return-1}function kW(){if(dl.type()==="Windows_NT"&&!oc&&(oc=CW+"\\system32\\wbem\\wmic.exe",!fo.existsSync(oc)))try{let r=vd("WHERE WMIC",wd).toString().split(`\r
`);r&&r.length?oc=r[0]:oc="wmic"}catch{oc="wmic"}return oc}function EEe(r){return new Promise(e=>{process.nextTick(()=>{try{PW(kW()+" "+r).then(t=>{e(t,"")})}catch(t){e("",t)}})})}function OEe(){return sT?`"${process.env.VBOX_INSTALL_PATH||process.env.VBOX_MSI_INSTALL_PATH}\\VBoxManage.exe"`:"vboxmanage"}function ZC(r){let e="",t,n="";if(r.indexOf(XC)>=0){t=r.split(XC);let s=t[1].split(eT);e=s[0],s.length>1&&(r=s.slice(1).join(eT))}r.indexOf(yw)>=0&&(t=r.split(yw),n=t[0]);let i=-1;for(let s=0;s<sm.length;s++)sm[s].id===e&&(i=s,sm[s].callback(n));i>=0&&sm.splice(i,1)}function IEe(){pn||(pn=nT("powershell.exe",["-NoProfile","-NoLogo","-InputFormat","Text","-NoExit","-Command","-"],{stdio:"pipe",windowsHide:!0,maxBuffer:1024*2e4,encoding:"UTF-8",env:vw._extend({},process.env,{LANG:"en_US.UTF-8"})}),pn&&pn.pid&&(oT=!0,pn.stdout.on("data",function(r){yd=yd+r.toString("utf8"),r.indexOf(yw)>=0&&(ZC(yd),yd="")}),pn.stderr.on("data",function(){ZC(yd+SW)}),pn.on("error",function(){ZC(yd+SW)}),pn.on("close",function(){pn.kill()})))}function CEe(){try{pn&&(pn.stdin.write("exit"+dl.EOL),pn.stdin.end(),oT=!1)}catch{pn&&pn.kill()}pn=null}function PW(r){if(oT){let e=Math.random().toString(36).substring(2,12);return new Promise(t=>{process.nextTick(()=>{function n(i){t(i)}sm.push({id:e,cmd:r,callback:n,start:new Date});try{pn&&pn.pid&&pn.stdin.write(bW+"echo "+XC+e+eT+"; "+dl.EOL+r+dl.EOL+"echo "+yw+dl.EOL)}catch{t("")}})})}else{let e="";return new Promise(t=>{process.nextTick(()=>{try{let n=nT("powershell.exe",["-NoProfile","-NoLogo","-InputFormat","Text","-NoExit","-ExecutionPolicy","Unrestricted","-Command","-"],{stdio:"pipe",windowsHide:!0,maxBuffer:2048e4,encoding:"UTF-8",env:vw._extend({},process.env,{LANG:"en_US.UTF-8"})});if(n&&!n.pid&&n.on("error",function(){t(e)}),n&&n.pid){n.stdout.on("data",function(i){e=e+i.toString("utf8")}),n.stderr.on("data",function(){n.kill(),t(e)}),n.on("close",function(){n.kill(),t(e)}),n.on("error",function(){n.kill(),t(e)});try{n.stdin.write(bW+r+dl.EOL),n.stdin.write("exit"+dl.EOL),n.stdin.end()}catch{n.kill(),t(e)}}else t(e)}catch{t(e)}})})}}function TEe(r,e,t){let n="";return t=t||{},new Promise(i=>{process.nextTick(()=>{try{let s=nT(r,e,t);s&&!s.pid&&s.on("error",function(){i(n)}),s&&s.pid?(s.stdout.on("data",function(o){n+=o.toString()}),s.on("close",function(){s.kill(),i(n)}),s.on("error",function(){s.kill(),i(n)})):i(n)}catch{i(n)}})})}function AEe(){if(sT){if(!qs)try{let t=vd("chcp",wd).toString().split(`\r
`)[0].split(":");qs=t.length>1?t[1].replace(".","").trim():""}catch{qs="437"}return qs}if(iT||xW||EW||OW||IW){if(!qs)try{let t=vd("echo $LANG").toString().split(`\r
`)[0].split(".");qs=t.length>1?t[1].trim():"",qs||(qs="UTF-8")}catch{qs="UTF-8"}return qs}}function MEe(){if(fl!==null)return fl;if(fl=!1,sT)try{let r=vd("WHERE smartctl 2>nul",wd).toString().split(`\r
`);r&&r.length?fl=r[0].indexOf(":\\")>=0:fl=!1}catch{fl=!1}if(iT||xW||EW||OW||IW)try{fl=vd("which smartctl 2>/dev/null",wd).toString().split(`\r
`).length>0}catch{vw.noop()}return fl}function kEe(){let r=["BCM2708","BCM2709","BCM2710","BCM2711","BCM2712","BCM2835","BCM2836","BCM2837","BCM2837B0"],e=[];if(hl!==null)e=hl;else try{e=fo.readFileSync("/proc/cpuinfo",{encoding:"utf8"}).toString().split(`
`),hl=e}catch{return!1}let t=ac(e,"hardware");return t&&r.indexOf(t)>-1}function PEe(){let r=[];try{r=fo.readFileSync("/etc/os-release",{encoding:"utf8"}).toString().split(`
`)}catch{return!1}let e=ac(r,"id","=");return e&&e.indexOf("raspbian")>-1}function REe(r,e,t){t||(t=e,e=wd);let n="chcp 65001 > nul && cmd /C "+r+" && chcp "+qs+" > nul";cEe(n,e,function(i,s){t(i,s)})}function LEe(){let r=fo.existsSync("/Library/Developer/CommandLineTools/usr/bin/"),e=fo.existsSync("/Applications/Xcode.app/Contents/Developer/Tools"),t=fo.existsSync("/Library/Developer/Xcode/");return r||t||e}function DEe(){let r=process.hrtime();return!Array.isArray(r)||r.length!==2?0:+r[0]*1e9+ +r[1]}function NEe(r,e){e=e||"";let t=[];return r.forEach(n=>{n.startsWith(e)&&t.indexOf(n)===-1&&t.push(n)}),t.length}function jEe(r,e){e=e||"";let t=[];return r.forEach(n=>{n.startsWith(e)&&t.push(n)}),t.length}function KEe(r,e){typeof e>"u"&&(e=!1);let t=r||"",n="",i=MW(t.length,2e3);for(let s=0;s<=i;s++)t[s]===void 0||t[s]===">"||t[s]==="<"||t[s]==="*"||t[s]==="?"||t[s]==="["||t[s]==="]"||t[s]==="|"||t[s]==="\u02DA"||t[s]==="$"||t[s]===";"||t[s]==="&"||t[s]==="]"||t[s]==="#"||t[s]==="\\"||t[s]==="	"||t[s]===`
`||t[s]==="\r"||t[s]==="'"||t[s]==="`"||t[s]==='"'||t[s].length>1||e&&t[s]==="("||e&&t[s]===")"||e&&t[s]==="@"||e&&t[s]===" "||e&&t[s]=="{"||e&&t[s]==";"||e&&t[s]=="}"||(n=n+t[s]);return n}function qEe(){let r="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ",e=!0,t="";t.__proto__.replace=tT,t.__proto__.toLowerCase=rT,t.__proto__.toString=TW,t.__proto__.substr=AW,e=e||r.length!==62;let n=Date.now();if(typeof n=="number"&&n>16e11){let i=n%100+15;for(let c=0;c<i;c++){let d=Math.random()*61.99999999+1,h=parseInt(Math.floor(d).toString(),10),p=parseInt(d.toString().split(".")[0],10),m=Math.random()*61.99999999+1,y=parseInt(Math.floor(m).toString(),10),_=parseInt(m.toString().split(".")[0],10);e=e&&d!==m,e=e&&h===p&&y===_,t+=r[h-1]}e=e&&t.length===i;let s=Math.random()*i*.9999999999,o=t.substr(0,s)+" "+t.substr(s,2e3);o.__proto__.replace=tT;let a=o.replace(/ /g,"");e=e&&t===a,s=Math.random()*i*.9999999999,o=t.substr(0,s)+"{"+t.substr(s,2e3),a=o.replace(/{/g,""),e=e&&t===a,s=Math.random()*i*.9999999999,o=t.substr(0,s)+"*"+t.substr(s,2e3),a=o.replace(/\*/g,""),e=e&&t===a,s=Math.random()*i*.9999999999,o=t.substr(0,s)+"$"+t.substr(s,2e3),a=o.replace(/\$/g,""),e=e&&t===a;let u=t.toLowerCase();e=e&&u.length===i&&u[i-1]&&!u[i];for(let c=0;c<i;c++){let d=t[c];d.__proto__.toLowerCase=rT;let h=u?u[c]:"",p=d.toLowerCase();e=e&&p[0]===h&&p[0]&&!p[1]}}return!e}function FEe(r){return("00000000"+parseInt(r,16).toString(2)).substr(-8)}function VEe(r){let e=fo.lstatSync,t=fo.readdirSync,n=uEe.join;function i(c){return e(c).isDirectory()}function s(c){return e(c).isFile()}function o(c){return t(c).map(function(d){return n(c,d)}).filter(i)}function a(c){return t(c).map(function(d){return n(c,d)}).filter(s)}function u(c){try{return o(c).map(function(p){return u(p)}).reduce(function(p,m){return p.concat(m)},[]).concat(a(c))}catch{return[]}}return fo.existsSync(r)?u(r):[]}function RW(r){hl===null&&(hl=r);let e={"0002":{type:"B",revision:"1.0",memory:256,manufacturer:"Egoman",processor:"BCM2835"},"0003":{type:"B",revision:"1.0",memory:256,manufacturer:"Egoman",processor:"BCM2835"},"0004":{type:"B",revision:"2.0",memory:256,manufacturer:"Sony UK",processor:"BCM2835"},"0005":{type:"B",revision:"2.0",memory:256,manufacturer:"Qisda",processor:"BCM2835"},"0006":{type:"B",revision:"2.0",memory:256,manufacturer:"Egoman",processor:"BCM2835"},"0007":{type:"A",revision:"2.0",memory:256,manufacturer:"Egoman",processor:"BCM2835"},"0008":{type:"A",revision:"2.0",memory:256,manufacturer:"Sony UK",processor:"BCM2835"},"0009":{type:"A",revision:"2.0",memory:256,manufacturer:"Qisda",processor:"BCM2835"},"000d":{type:"B",revision:"2.0",memory:512,manufacturer:"Egoman",processor:"BCM2835"},"000e":{type:"B",revision:"2.0",memory:512,manufacturer:"Sony UK",processor:"BCM2835"},"000f":{type:"B",revision:"2.0",memory:512,manufacturer:"Egoman",processor:"BCM2835"},"0010":{type:"B+",revision:"1.2",memory:512,manufacturer:"Sony UK",processor:"BCM2835"},"0011":{type:"CM1",revision:"1.0",memory:512,manufacturer:"Sony UK",processor:"BCM2835"},"0012":{type:"A+",revision:"1.1",memory:256,manufacturer:"Sony UK",processor:"BCM2835"},"0013":{type:"B+",revision:"1.2",memory:512,manufacturer:"Embest",processor:"BCM2835"},"0014":{type:"CM1",revision:"1.0",memory:512,manufacturer:"Embest",processor:"BCM2835"},"0015":{type:"A+",revision:"1.1",memory:256,manufacturer:"512MB	Embest",processor:"BCM2835"}},t=["BCM2835","BCM2836","BCM2837","BCM2711","BCM2712"],n=["Sony UK","Egoman","Embest","Sony Japan","Embest","Stadium"],i={"00":"A","01":"B","02":"A+","03":"B+","04":"2B","05":"Alpha (early prototype)","06":"CM1","08":"3B","09":"Zero","0a":"CM3","0c":"Zero W","0d":"3B+","0e":"3A+","0f":"Internal use only",10:"CM3+",11:"4B",12:"Zero 2 W",13:"400",14:"CM4",15:"CM4S",17:"5B"},s=ac(r,"revision",":",!0),o=ac(r,"model:",":",!0),a=ac(r,"serial",":",!0),u={};if({}.hasOwnProperty.call(e,s))u={model:o,serial:a,revisionCode:s,memory:e[s].memory,manufacturer:e[s].manufacturer,processor:e[s].processor,type:e[s].type,revision:e[s].revision};else{let c=("00000000"+ac(r,"revision",":",!0).toLowerCase()).substr(-8),d=parseInt(FEe(c.substr(2,1)).substr(5,3),2)||0,h=n[parseInt(c.substr(3,1),10)],p=t[parseInt(c.substr(4,1),10)],m=c.substr(5,2);u={model:o,serial:a,revisionCode:s,memory:256*Math.pow(2,d),manufacturer:h,processor:p,type:{}.hasOwnProperty.call(i,m)?i[m]:"",revision:"1."+c.substr(7,1)}}return u}function BEe(){let r=null;if(hl!==null)r=hl;else try{r=fo.readFileSync("/proc/cpuinfo",{encoding:"utf8"}).toString().split(`
`),hl=r}catch{return!1}let e=RW(r);return e.type==="4B"||e.type==="CM4"||e.type==="CM4S"||e.type==="400"?"VideoCore VI":e.type==="5B"?"VideoCore VII":"VideoCore IV"}function UEe(r){let e=r.map(function(i){return new Promise(function(s){let o=new Array(2);i.then(function(a){o[0]=a}).catch(function(a){o[1]=a}).then(function(){s(o)})})}),t=[],n=[];return Promise.all(e).then(function(i){return i.forEach(function(s){s[1]?(t.push(s[1]),n.push(null)):(t.push(null),n.push(s[0]))}),{errors:t,results:n}})}function GEe(r){return function(){let e=Array.prototype.slice.call(arguments);return new Promise(function(t,n){e.push(function(i,s){i?n(i):t(s)}),r.apply(null,e)})}}function $Ee(r){return function(){let e=Array.prototype.slice.call(arguments);return new Promise(function(t){e.push(function(n,i){t(i)}),r.apply(null,e)})}}function WEe(){let r="";if(iT)try{r=vd("uname -v").toString()}catch{r=""}return r}function zEe(r){let e=["array","dict","key","string","integer","date","real","data","boolean","arrayEmpty"],t="<plist version",n=r.indexOf(t),i=r.length;for(;r[n]!==">"&&n<i;)n++;let s=0,o=!1,a=!1,u=!1,c=[{tagStart:"",tagEnd:"",tagContent:"",key:"",data:null}],d="",h=r[n];for(;n<i;)d=h,n+1<i&&(h=r[n+1]),d==="<"?(a=!1,h==="/"?u=!0:c[s].tagStart?(c[s].tagContent="",c[s].data||(c[s].data=c[s].tagStart==="array"?[]:{}),s++,c.push({tagStart:"",tagEnd:"",tagContent:"",key:null,data:null}),o=!0,a=!1):o||(o=!0)):d===">"?(c[s].tagStart==="true/"&&(o=!1,u=!0,c[s].tagStart="",c[s].tagEnd="/boolean",c[s].data=!0),c[s].tagStart==="false/"&&(o=!1,u=!0,c[s].tagStart="",c[s].tagEnd="/boolean",c[s].data=!1),c[s].tagStart==="array/"&&(o=!1,u=!0,c[s].tagStart="",c[s].tagEnd="/arrayEmpty",c[s].data=[]),a&&(a=!1),o&&(o=!1,a=!0,c[s].tagStart==="array"&&(c[s].data=[]),c[s].tagStart==="dict"&&(c[s].data={})),u&&(u=!1,c[s].tagEnd&&e.indexOf(c[s].tagEnd.substr(1))>=0&&(c[s].tagEnd==="/dict"||c[s].tagEnd==="/array"?(s>1&&c[s-2].tagStart==="array"&&c[s-2].data.push(c[s-1].data),s>1&&c[s-2].tagStart==="dict"&&(c[s-2].data[c[s-1].key]=c[s-1].data),s--,c.pop(),c[s].tagContent="",c[s].tagStart="",c[s].tagEnd=""):(c[s].tagEnd==="/key"&&c[s].tagContent?c[s].key=c[s].tagContent:(c[s].tagEnd==="/real"&&c[s].tagContent&&(c[s].data=parseFloat(c[s].tagContent)||0),c[s].tagEnd==="/integer"&&c[s].tagContent&&(c[s].data=parseInt(c[s].tagContent)||0),c[s].tagEnd==="/string"&&c[s].tagContent&&(c[s].data=c[s].tagContent||""),c[s].tagEnd==="/boolean"&&(c[s].data=c[s].tagContent||!1),c[s].tagEnd==="/arrayEmpty"&&(c[s].data=c[s].tagContent||[]),s>0&&c[s-1].tagStart==="array"&&c[s-1].data.push(c[s].data),s>0&&c[s-1].tagStart==="dict"&&(c[s-1].data[c[s].key]=c[s].data)),c[s].tagContent="",c[s].tagStart="",c[s].tagEnd="")),c[s].tagEnd="",o=!1,a=!1)):(o&&(c[s].tagStart+=d),u&&(c[s].tagEnd+=d),a&&(c[s].tagContent+=d)),n++;return c[0].data}function _W(r){return typeof r=="string"&&!isNaN(r)&&!isNaN(parseFloat(r))}function HEe(r){let e=r.split(`
`);for(let n=0;n<e.length;n++){if(e[n].indexOf(" = ")>=0){let i=e[n].split(" = ");if(i[0]=i[0].trim(),i[0].startsWith('"')||(i[0]='"'+i[0]+'"'),i[1]=i[1].trim(),i[1].indexOf('"')===-1&&i[1].endsWith(";")){let s=i[1].substring(0,i[1].length-1);_W(s)||(i[1]=`"${s}";`)}if(i[1].indexOf('"')>=0&&i[1].endsWith(";")){let s=i[1].substring(0,i[1].length-1).replace(/"/g,"");_W(s)&&(i[1]=`${s};`)}e[n]=i.join(" : ")}e[n]=e[n].replace(/\(/g,"[").replace(/\)/g,"]").replace(/;/g,",").trim(),e[n].startsWith("}")&&e[n-1]&&e[n-1].endsWith(",")&&(e[n-1]=e[n-1].substring(0,e[n-1].length-1))}r=e.join("");let t={};try{t=JSON.parse(r)}catch{}return t}function YEe(r,e){let t=0,n=r.split("."),i=e.split(".");return n[0]<i[0]?t=1:n[0]>i[0]?t=-1:n[0]===i[0]&&n.length>=2&&i.length>=2&&(n[1]<i[1]?t=1:n[1]>i[1]?t=-1:n[1]===i[1]&&(n.length>=3&&i.length>=3?n[2]<i[2]?t=1:n[2]>i[2]&&(t=-1):i.length>=3&&(t=1))),t}function JEe(){}qe.toInt=fEe;qe.execOptsWin=wd;qe.getCodepage=AEe;qe.execWin=REe;qe.isFunction=pEe;qe.unique=mEe;qe.sortByKey=gEe;qe.cores=yEe;qe.getValue=ac;qe.decodeEscapeSequence=vEe;qe.parseDateTime=SEe;qe.parseHead=_Ee;qe.findObjectByKey=xEe;qe.getWmic=kW;qe.wmic=EEe;qe.darwinXcodeExists=LEe;qe.getVboxmanage=OEe;qe.powerShell=PW;qe.powerShellStart=IEe;qe.powerShellRelease=CEe;qe.execSafe=TEe;qe.nanoSeconds=DEe;qe.countUniqueLines=NEe;qe.countLines=jEe;qe.noop=JEe;qe.isRaspberry=kEe;qe.isRaspbian=PEe;qe.sanitizeShellString=KEe;qe.isPrototypePolluted=qEe;qe.decodePiCpuinfo=RW;qe.getRpiGpu=BEe;qe.promiseAll=UEe;qe.promisify=GEe;qe.promisifySave=$Ee;qe.smartMonToolsInstalled=MEe;qe.linuxVersion=WEe;qe.plistParser=zEe;qe.plistReader=HEe;qe.stringReplace=tT;qe.stringToLower=rT;qe.stringToString=TW;qe.stringSubstr=AW;qe.stringTrim=dEe;qe.stringStartWith=hEe;qe.mathMin=MW;qe.WINDIR=CW;qe.getFilesInPath=VEe;qe.semverCompare=YEe});var LW=E(um=>{"use strict";var bw=require("fs"),uc=require("os"),re=zr(),Sd=require("child_process").exec,bd=require("child_process").execSync,ww=re.promisify(require("child_process").exec),pl=process.platform,Sw=pl==="linux"||pl==="android",_w=pl==="darwin",xw=pl==="win32",om=pl==="freebsd",am=pl==="openbsd",lm=pl==="netbsd",Ew=pl==="sunos";function QEe(r){return new Promise(e=>{process.nextTick(()=>{let t={manufacturer:"",model:"Computer",version:"",serial:"-",uuid:"-",sku:"-",virtual:!1};if((Sw||om||am||lm)&&Sd("export LC_ALL=C; dmidecode -t system 2>/dev/null; unset LC_ALL",function(n,i){let s=i.toString().split(`
`);t.manufacturer=re.getValue(s,"manufacturer"),t.model=re.getValue(s,"product name"),t.version=re.getValue(s,"version"),t.serial=re.getValue(s,"serial number"),t.uuid=re.getValue(s,"uuid").toLowerCase(),t.sku=re.getValue(s,"sku number");let o=`echo -n "product_name: "; cat /sys/devices/virtual/dmi/id/product_name 2>/dev/null; echo;
            echo -n "product_serial: "; cat /sys/devices/virtual/dmi/id/product_serial 2>/dev/null; echo;
            echo -n "product_uuid: "; cat /sys/devices/virtual/dmi/id/product_uuid 2>/dev/null; echo;
            echo -n "product_version: "; cat /sys/devices/virtual/dmi/id/product_version 2>/dev/null; echo;
            echo -n "sys_vendor: "; cat /sys/devices/virtual/dmi/id/sys_vendor 2>/dev/null; echo;`;try{s=bd(o).toString().split(`
`),t.manufacturer=t.manufacturer===""?re.getValue(s,"sys_vendor"):t.manufacturer,t.model=t.model===""?re.getValue(s,"product_name"):t.model,t.version=t.version===""?re.getValue(s,"product_version"):t.version,t.serial=t.serial===""?re.getValue(s,"product_serial"):t.serial,t.uuid=t.uuid===""?re.getValue(s,"product_uuid").toLowerCase():t.uuid}catch{re.noop()}if((!t.serial||t.serial.toLowerCase().indexOf("o.e.m.")!==-1)&&(t.serial="-"),(!t.manufacturer||t.manufacturer.toLowerCase().indexOf("o.e.m.")!==-1)&&(t.manufacturer=""),(!t.model||t.model.toLowerCase().indexOf("o.e.m.")!==-1)&&(t.model="Computer"),(!t.version||t.version.toLowerCase().indexOf("o.e.m.")!==-1)&&(t.version=""),(!t.sku||t.sku.toLowerCase().indexOf("o.e.m.")!==-1)&&(t.sku="-"),t.model.toLowerCase()==="virtualbox"||t.model.toLowerCase()==="kvm"||t.model.toLowerCase()==="virtual machine"||t.model.toLowerCase()==="bochs"||t.model.toLowerCase().startsWith("vmware")||t.model.toLowerCase().startsWith("droplet"))switch(t.virtual=!0,t.model.toLowerCase()){case"virtualbox":t.virtualHost="VirtualBox";break;case"vmware":t.virtualHost="VMware";break;case"kvm":t.virtualHost="KVM";break;case"bochs":t.virtualHost="bochs";break}if(t.manufacturer.toLowerCase().startsWith("vmware")||t.manufacturer.toLowerCase()==="xen")switch(t.virtual=!0,t.manufacturer.toLowerCase()){case"vmware":t.virtualHost="VMware";break;case"xen":t.virtualHost="Xen";break}if(!t.virtual)try{let a=bd("ls -1 /dev/disk/by-id/ 2>/dev/null").toString();a.indexOf("_QEMU_")>=0&&(t.virtual=!0,t.virtualHost="QEMU"),a.indexOf("_VBOX_")>=0&&(t.virtual=!0,t.virtualHost="VirtualBox")}catch{re.noop()}if(!t.virtual&&(uc.release().toLowerCase().indexOf("microsoft")>=0||uc.release().toLowerCase().endsWith("wsl2"))){let a=parseFloat(uc.release().toLowerCase());t.virtual=!0,t.manufacturer="Microsoft",t.model="WSL",t.version=a<4.19?"1":"2"}if((om||am||lm)&&!t.virtualHost)try{let u=bd("dmidecode -t 4").toString().split(`
`);switch(re.getValue(u,"manufacturer",":",!0).toLowerCase()){case"virtualbox":t.virtualHost="VirtualBox";break;case"vmware":t.virtualHost="VMware";break;case"kvm":t.virtualHost="KVM";break;case"bochs":t.virtualHost="bochs";break}}catch{re.noop()}(bw.existsSync("/.dockerenv")||bw.existsSync("/.dockerinit"))&&(t.model="Docker Container");try{let a=bd('dmesg 2>/dev/null | grep -iE "virtual|hypervisor" | grep -iE "vmware|qemu|kvm|xen" | grep -viE "Nested Virtualization|/virtual/"');a.toString().split(`
`).length>0&&(t.model==="Computer"&&(t.model="Virtual machine"),t.virtual=!0,a.toString().toLowerCase().indexOf("vmware")>=0&&!t.virtualHost&&(t.virtualHost="VMware"),a.toString().toLowerCase().indexOf("qemu")>=0&&!t.virtualHost&&(t.virtualHost="QEMU"),a.toString().toLowerCase().indexOf("xen")>=0&&!t.virtualHost&&(t.virtualHost="Xen"),a.toString().toLowerCase().indexOf("kvm")>=0&&!t.virtualHost&&(t.virtualHost="KVM"))}catch{re.noop()}t.manufacturer===""&&t.model==="Computer"&&t.version===""?bw.readFile("/proc/cpuinfo",function(a,u){if(!a){let c=u.toString().split(`
`);t.model=re.getValue(c,"hardware",":",!0).toUpperCase(),t.version=re.getValue(c,"revision",":",!0).toLowerCase(),t.serial=re.getValue(c,"serial",":",!0);let d=re.getValue(c,"model:",":",!0);if((t.model==="BCM2835"||t.model==="BCM2708"||t.model==="BCM2709"||t.model==="BCM2710"||t.model==="BCM2711"||t.model==="BCM2836"||t.model==="BCM2837")&&d.toLowerCase().indexOf("raspberry")>=0){let h=re.decodePiCpuinfo(c);t.model=h.model,t.version=h.revisionCode,t.manufacturer="Raspberry Pi Foundation",t.raspberry={manufacturer:h.manufacturer,processor:h.processor,type:h.type,revision:h.revision}}}r&&r(t),e(t)}):(r&&r(t),e(t))}),_w&&Sd("ioreg -c IOPlatformExpertDevice -d 2",function(n,i){if(!n){let s=i.toString().replace(/[<>"]/g,"").split(`
`);t.manufacturer=re.getValue(s,"manufacturer","=",!0),t.model=re.getValue(s,"model","=",!0,!0),t.version=re.getValue(s,"version","=",!0),t.serial=re.getValue(s,"ioplatformserialnumber","=",!0),t.uuid=re.getValue(s,"ioplatformuuid","=",!0).toLowerCase(),t.sku=re.getValue(s,"board-id","=",!0)}r&&r(t),e(t)}),Ew&&(r&&r(t),e(t)),xw)try{re.powerShell("Get-CimInstance Win32_ComputerSystemProduct | select Name,Vendor,Version,IdentifyingNumber,UUID | fl").then((n,i)=>{if(i)r&&r(t),e(t);else{let s=n.split(`\r
`);t.manufacturer=re.getValue(s,"vendor",":"),t.model=re.getValue(s,"name",":"),t.version=re.getValue(s,"version",":"),t.serial=re.getValue(s,"identifyingnumber",":"),t.uuid=re.getValue(s,"uuid",":").toLowerCase();let o=t.model.toLowerCase();(o==="virtualbox"||o==="kvm"||o==="virtual machine"||o==="bochs"||o.startsWith("vmware")||o.startsWith("qemu")||o.startsWith("parallels"))&&(t.virtual=!0,o.startsWith("virtualbox")&&(t.virtualHost="VirtualBox"),o.startsWith("vmware")&&(t.virtualHost="VMware"),o.startsWith("kvm")&&(t.virtualHost="KVM"),o.startsWith("bochs")&&(t.virtualHost="bochs"),o.startsWith("qemu")&&(t.virtualHost="KVM"),o.startsWith("parallels")&&(t.virtualHost="Parallels"));let a=t.manufacturer.toLowerCase();(a.startsWith("vmware")||a.startsWith("qemu")||a==="xen"||a.startsWith("parallels"))&&(t.virtual=!0,a.startsWith("vmware")&&(t.virtualHost="VMware"),a.startsWith("xen")&&(t.virtualHost="Xen"),a.startsWith("qemu")&&(t.virtualHost="KVM"),a.startsWith("parallels")&&(t.virtualHost="Parallels")),re.powerShell('Get-CimInstance MS_Systeminformation -Namespace "root/wmi" | select systemsku | fl ').then((u,c)=>{if(!c){let d=u.split(`\r
`);t.sku=re.getValue(d,"systemsku",":")}t.virtual?(r&&r(t),e(t)):re.powerShell("Get-CimInstance Win32_bios | select Version, SerialNumber, SMBIOSBIOSVersion").then((d,h)=>{if(h)r&&r(t),e(t);else{let p=d.toString();(p.indexOf("VRTUAL")>=0||p.indexOf("A M I ")>=0||p.indexOf("VirtualBox")>=0||p.indexOf("VMWare")>=0||p.indexOf("Xen")>=0||p.indexOf("Parallels")>=0)&&(t.virtual=!0,p.indexOf("VirtualBox")>=0&&!t.virtualHost&&(t.virtualHost="VirtualBox"),p.indexOf("VMware")>=0&&!t.virtualHost&&(t.virtualHost="VMware"),p.indexOf("Xen")>=0&&!t.virtualHost&&(t.virtualHost="Xen"),p.indexOf("VRTUAL")>=0&&!t.virtualHost&&(t.virtualHost="Hyper-V"),p.indexOf("A M I")>=0&&!t.virtualHost&&(t.virtualHost="Virtual PC"),p.indexOf("Parallels")>=0&&!t.virtualHost&&(t.virtualHost="Parallels")),r&&r(t),e(t)}})})}})}catch{r&&r(t),e(t)}})})}um.system=QEe;function Hn(r){let e=r.toLowerCase();return e.indexOf("o.e.m.")===-1&&e.indexOf("default string")===-1&&e!=="default"&&r||""}function ZEe(r){return new Promise(e=>{process.nextTick(()=>{let t={vendor:"",version:"",releaseDate:"",revision:""},n="";if((Sw||om||am||lm)&&(process.arch==="arm"?n="cat /proc/cpuinfo | grep Serial":n="export LC_ALL=C; dmidecode -t bios 2>/dev/null; unset LC_ALL",Sd(n,function(i,s){let o=s.toString().split(`
`);t.vendor=re.getValue(o,"Vendor"),t.version=re.getValue(o,"Version");let a=re.getValue(o,"Release Date");t.releaseDate=re.parseDateTime(a).date,t.revision=re.getValue(o,"BIOS Revision"),t.serial=re.getValue(o,"SerialNumber");let u=re.getValue(o,"Currently Installed Language").split("|")[0];if(u&&(t.language=u),o.length&&s.toString().indexOf("Characteristics:")>=0){let d=[];o.forEach(h=>{if(h.indexOf(" is supported")>=0){let p=h.split(" is supported")[0].trim();d.push(p)}}),t.features=d}let c=`echo -n "bios_date: "; cat /sys/devices/virtual/dmi/id/bios_date 2>/dev/null; echo;
            echo -n "bios_vendor: "; cat /sys/devices/virtual/dmi/id/bios_vendor 2>/dev/null; echo;
            echo -n "bios_version: "; cat /sys/devices/virtual/dmi/id/bios_version 2>/dev/null; echo;`;try{o=bd(c).toString().split(`
`),t.vendor=t.vendor?t.vendor:re.getValue(o,"bios_vendor"),t.version=t.version?t.version:re.getValue(o,"bios_version"),a=re.getValue(o,"bios_date"),t.releaseDate=t.releaseDate?t.releaseDate:re.parseDateTime(a).date}catch{re.noop()}r&&r(t),e(t)})),_w&&(t.vendor="Apple Inc.",Sd("system_profiler SPHardwareDataType -json",function(i,s){try{let o=JSON.parse(s.toString());if(o&&o.SPHardwareDataType&&o.SPHardwareDataType.length){let a=o.SPHardwareDataType[0].boot_rom_version;a=a?a.split("(")[0].trim():null,t.version=a}}catch{re.noop()}r&&r(t),e(t)})),Ew&&(t.vendor="Sun Microsystems",r&&r(t),e(t)),xw)try{re.powerShell('Get-CimInstance Win32_bios | select Description,Version,Manufacturer,@{n="ReleaseDate";e={$_.ReleaseDate.ToString("yyyy-MM-dd")}},BuildNumber,SerialNumber,SMBIOSBIOSVersion | fl').then((i,s)=>{if(!s){let o=i.toString().split(`\r
`),a=re.getValue(o,"description",":"),u=re.getValue(o,"SMBIOSBIOSVersion",":");a.indexOf(" Version ")!==-1?(t.vendor=a.split(" Version ")[0].trim(),t.version=a.split(" Version ")[1].trim()):a.indexOf(" Ver: ")!==-1?(t.vendor=re.getValue(o,"manufacturer",":"),t.version=a.split(" Ver: ")[1].trim()):(t.vendor=re.getValue(o,"manufacturer",":"),t.version=u||re.getValue(o,"version",":")),t.releaseDate=re.getValue(o,"releasedate",":"),t.revision=re.getValue(o,"buildnumber",":"),t.serial=Hn(re.getValue(o,"serialnumber",":"))}r&&r(t),e(t)})}catch{r&&r(t),e(t)}})})}um.bios=ZEe;function XEe(r){return new Promise(e=>{process.nextTick(()=>{let t={manufacturer:"",model:"",version:"",serial:"-",assetTag:"-",memMax:null,memSlots:null},n="";if(Sw||om||am||lm){process.arch==="arm"?n="cat /proc/cpuinfo | grep Serial":n="export LC_ALL=C; dmidecode -t 2 2>/dev/null; unset LC_ALL";let i=[];i.push(ww(n)),i.push(ww("export LC_ALL=C; dmidecode -t memory 2>/dev/null")),re.promiseAll(i).then(s=>{let o=s.results[0]?s.results[0].toString().split(`
`):[""];t.manufacturer=re.getValue(o,"Manufacturer"),t.model=re.getValue(o,"Product Name"),t.version=re.getValue(o,"Version"),t.serial=re.getValue(o,"Serial Number"),t.assetTag=re.getValue(o,"Asset Tag");let a=`echo -n "board_asset_tag: "; cat /sys/devices/virtual/dmi/id/board_asset_tag 2>/dev/null; echo;
            echo -n "board_name: "; cat /sys/devices/virtual/dmi/id/board_name 2>/dev/null; echo;
            echo -n "board_serial: "; cat /sys/devices/virtual/dmi/id/board_serial 2>/dev/null; echo;
            echo -n "board_vendor: "; cat /sys/devices/virtual/dmi/id/board_vendor 2>/dev/null; echo;
            echo -n "board_version: "; cat /sys/devices/virtual/dmi/id/board_version 2>/dev/null; echo;`;try{o=bd(a).toString().split(`
`),t.manufacturer=t.manufacturer?t.manufacturer:re.getValue(o,"board_vendor"),t.model=t.model?t.model:re.getValue(o,"board_name"),t.version=t.version?t.version:re.getValue(o,"board_version"),t.serial=t.serial?t.serial:re.getValue(o,"board_serial"),t.assetTag=t.assetTag?t.assetTag:re.getValue(o,"board_asset_tag")}catch{re.noop()}t.serial.toLowerCase().indexOf("o.e.m.")!==-1&&(t.serial="-"),t.assetTag.toLowerCase().indexOf("o.e.m.")!==-1&&(t.assetTag="-"),o=s.results[1]?s.results[1].toString().split(`
`):[""],t.memMax=re.toInt(re.getValue(o,"Maximum Capacity"))*1024*1024*1024||null,t.memSlots=re.toInt(re.getValue(o,"Number Of Devices"))||null;let u="";try{u=bw.readFileSync("/proc/cpuinfo").toString().split(`
`)}catch{re.noop()}if(u&&re.getValue(u,"hardware").startsWith("BCM")){let d=re.decodePiCpuinfo(u);t.manufacturer=d.manufacturer,t.model="Raspberry Pi",t.serial=d.serial,t.version=d.type+" - "+d.revision,t.memMax=uc.totalmem(),t.memSlots=0}r&&r(t),e(t)})}if(_w){let i=[];i.push(ww("ioreg -c IOPlatformExpertDevice -d 2")),i.push(ww("system_profiler SPMemoryDataType")),re.promiseAll(i).then(s=>{let o=s.results[0]?s.results[0].toString().replace(/[<>"]/g,"").split(`
`):[""];t.manufacturer=re.getValue(o,"manufacturer","=",!0),t.model=re.getValue(o,"model","=",!0),t.version=re.getValue(o,"version","=",!0),t.serial=re.getValue(o,"ioplatformserialnumber","=",!0),t.assetTag=re.getValue(o,"board-id","=",!0);let a=s.results[1]?s.results[1].toString().split("        BANK "):[""];a.length===1&&(a=s.results[1]?s.results[1].toString().split("        DIMM"):[""]),a.shift(),t.memSlots=a.length,uc.arch()==="arm64"&&(t.memSlots=0,t.memMax=uc.totalmem()),r&&r(t),e(t)})}if(Ew&&(r&&r(t),e(t)),xw)try{let i=[],s=parseInt(uc.release())>=10,o=s?"MaxCapacityEx":"MaxCapacity";i.push(re.powerShell("Get-CimInstance Win32_baseboard | select Model,Manufacturer,Product,Version,SerialNumber,PartNumber,SKU | fl")),i.push(re.powerShell(`Get-CimInstance Win32_physicalmemoryarray | select ${o}, MemoryDevices | fl`)),re.promiseAll(i).then(a=>{let u=a.results[0]?a.results[0].toString().split(`\r
`):[""];t.manufacturer=Hn(re.getValue(u,"manufacturer",":")),t.model=Hn(re.getValue(u,"model",":")),t.model||(t.model=Hn(re.getValue(u,"product",":"))),t.version=Hn(re.getValue(u,"version",":")),t.serial=Hn(re.getValue(u,"serialnumber",":")),t.assetTag=Hn(re.getValue(u,"partnumber",":")),t.assetTag||(t.assetTag=Hn(re.getValue(u,"sku",":"))),u=a.results[1]?a.results[1].toString().split(`\r
`):[""],t.memMax=re.toInt(re.getValue(u,o,":"))*(s?1024:1)||null,t.memSlots=re.toInt(re.getValue(u,"MemoryDevices",":"))||null,r&&r(t),e(t)})}catch{r&&r(t),e(t)}})})}um.baseboard=XEe;function e2e(r){let e=["Other","Unknown","Desktop","Low Profile Desktop","Pizza Box","Mini Tower","Tower","Portable","Laptop","Notebook","Hand Held","Docking Station","All in One","Sub Notebook","Space-Saving","Lunch Box","Main System Chassis","Expansion Chassis","SubChassis","Bus Expansion Chassis","Peripheral Chassis","Storage Chassis","Rack Mount Chassis","Sealed-Case PC","Multi-System Chassis","Compact PCI","Advanced TCA","Blade","Blade Enclosure","Tablet","Convertible","Detachable","IoT Gateway ","Embedded PC","Mini PC","Stick PC"];return new Promise(t=>{process.nextTick(()=>{let n={manufacturer:"",model:"",type:"",version:"",serial:"-",assetTag:"-",sku:""};if((Sw||om||am||lm)&&Sd(`echo -n "chassis_asset_tag: "; cat /sys/devices/virtual/dmi/id/chassis_asset_tag 2>/dev/null; echo;
            echo -n "chassis_serial: "; cat /sys/devices/virtual/dmi/id/chassis_serial 2>/dev/null; echo;
            echo -n "chassis_type: "; cat /sys/devices/virtual/dmi/id/chassis_type 2>/dev/null; echo;
            echo -n "chassis_vendor: "; cat /sys/devices/virtual/dmi/id/chassis_vendor 2>/dev/null; echo;
            echo -n "chassis_version: "; cat /sys/devices/virtual/dmi/id/chassis_version 2>/dev/null; echo;`,function(s,o){let a=o.toString().split(`
`);n.manufacturer=re.getValue(a,"chassis_vendor");let u=parseInt(re.getValue(a,"chassis_type").replace(/\D/g,""));n.type=u&&!isNaN(u)&&u<e.length?e[u-1]:"",n.version=re.getValue(a,"chassis_version"),n.serial=re.getValue(a,"chassis_serial"),n.assetTag=re.getValue(a,"chassis_asset_tag"),n.manufacturer.toLowerCase().indexOf("o.e.m.")!==-1&&(n.manufacturer="-"),n.version.toLowerCase().indexOf("o.e.m.")!==-1&&(n.version="-"),n.serial.toLowerCase().indexOf("o.e.m.")!==-1&&(n.serial="-"),n.assetTag.toLowerCase().indexOf("o.e.m.")!==-1&&(n.assetTag="-"),r&&r(n),t(n)}),_w&&Sd("ioreg -c IOPlatformExpertDevice -d 2",function(i,s){if(!i){let o=s.toString().replace(/[<>"]/g,"").split(`
`);n.manufacturer=re.getValue(o,"manufacturer","=",!0),n.model=re.getValue(o,"model","=",!0),n.version=re.getValue(o,"version","=",!0),n.serial=re.getValue(o,"ioplatformserialnumber","=",!0),n.assetTag=re.getValue(o,"board-id","=",!0)}r&&r(n),t(n)}),Ew&&(r&&r(n),t(n)),xw)try{re.powerShell("Get-CimInstance Win32_SystemEnclosure | select Model,Manufacturer,ChassisTypes,Version,SerialNumber,PartNumber,SKU,SMBIOSAssetTag | fl").then((i,s)=>{if(!s){let o=i.toString().split(`\r
`);n.manufacturer=Hn(re.getValue(o,"manufacturer",":")),n.model=Hn(re.getValue(o,"model",":"));let a=parseInt(re.getValue(o,"ChassisTypes",":").replace(/\D/g,""));n.type=a&&!isNaN(a)&&a<e.length?e[a-1]:"",n.version=Hn(re.getValue(o,"version",":")),n.serial=Hn(re.getValue(o,"serialnumber",":")),n.assetTag=Hn(re.getValue(o,"partnumber",":")),n.assetTag||(n.assetTag=Hn(re.getValue(o,"SMBIOSAssetTag",":"))),n.sku=Hn(re.getValue(o,"sku",":"))}r&&r(n),t(n)})}catch{r&&r(n),t(n)}})})}um.chassis=e2e});var NW=E(_d=>{"use strict";var ho=require("os"),hs=require("fs"),Me=zr(),De=require("child_process").exec,fm=require("child_process").execSync,Vs=process.platform,dm=Vs==="linux"||Vs==="android",Fs=Vs==="darwin",ps=Vs==="win32",aT=Vs==="freebsd",lT=Vs==="openbsd",uT=Vs==="netbsd",t2e=Vs==="sunos";function r2e(){let r=new Date().toString().split(" ");return{current:Date.now(),uptime:ho.uptime(),timezone:r.length>=7?r[5]:"",timezoneName:Intl?Intl.DateTimeFormat().resolvedOptions().timeZone:r.length>=7?r.slice(6).join(" ").replace(/\(/g,"").replace(/\)/g,""):""}}_d.time=r2e;function cm(r){r=r||"",r=r.toLowerCase();let e=Vs;return ps?e="windows":r.indexOf("mac os")!==-1?e="apple":r.indexOf("arch")!==-1?e="arch":r.indexOf("centos")!==-1?e="centos":r.indexOf("coreos")!==-1?e="coreos":r.indexOf("debian")!==-1?e="debian":r.indexOf("deepin")!==-1?e="deepin":r.indexOf("elementary")!==-1?e="elementary":r.indexOf("fedora")!==-1?e="fedora":r.indexOf("gentoo")!==-1?e="gentoo":r.indexOf("mageia")!==-1?e="mageia":r.indexOf("mandriva")!==-1?e="mandriva":r.indexOf("manjaro")!==-1?e="manjaro":r.indexOf("mint")!==-1?e="mint":r.indexOf("mx")!==-1?e="mx":r.indexOf("openbsd")!==-1?e="openbsd":r.indexOf("freebsd")!==-1?e="freebsd":r.indexOf("opensuse")!==-1?e="opensuse":r.indexOf("pclinuxos")!==-1?e="pclinuxos":r.indexOf("puppy")!==-1?e="puppy":r.indexOf("raspbian")!==-1?e="raspbian":r.indexOf("reactos")!==-1?e="reactos":r.indexOf("redhat")!==-1?e="redhat":r.indexOf("slackware")!==-1?e="slackware":r.indexOf("sugar")!==-1?e="sugar":r.indexOf("steam")!==-1?e="steam":r.indexOf("suse")!==-1?e="suse":r.indexOf("mate")!==-1?e="ubuntu-mate":r.indexOf("lubuntu")!==-1?e="lubuntu":r.indexOf("xubuntu")!==-1?e="xubuntu":r.indexOf("ubuntu")!==-1?e="ubuntu":r.indexOf("solaris")!==-1?e="solaris":r.indexOf("tails")!==-1?e="tails":r.indexOf("feren")!==-1?e="ferenos":r.indexOf("robolinux")!==-1?e="robolinux":dm&&r&&(e=r.toLowerCase().trim().replace(/\s+/g,"-")),e}function n2e(){let r=ho.hostname;if(dm||Fs)try{let e=fm("hostnamectl --json short 2>/dev/null");r=JSON.parse(e.toString()).StaticHostname}catch{try{r=fm("hostname -f 2>/dev/null").toString().split(ho.EOL)[0]}catch{Me.noop()}}if(aT||lT||uT)try{r=fm("hostname 2>/dev/null").toString().split(ho.EOL)[0]}catch{Me.noop()}if(ps)try{r=fm("echo %COMPUTERNAME%.%USERDNSDOMAIN%",Me.execOptsWin).toString().replace(".%USERDNSDOMAIN%","").split(ho.EOL)[0]}catch{Me.noop()}return r}function i2e(r){return new Promise(e=>{process.nextTick(()=>{let t={platform:Vs==="win32"?"Windows":Vs,distro:"unknown",release:"unknown",codename:"",kernel:ho.release(),arch:ho.arch(),hostname:ho.hostname(),fqdn:n2e(),codepage:"",logofile:"",serial:"",build:"",servicepack:"",uefi:!1};if(dm&&De("cat /etc/*-release; cat /usr/lib/os-release; cat /etc/openwrt_release",function(n,i){let s={};i.toString().split(`
`).forEach(function(c){c.indexOf("=")!==-1&&(s[c.split("=")[0].trim().toUpperCase()]=c.split("=")[1].trim())});let a=(s.VERSION||"").replace(/"/g,""),u=(s.DISTRIB_CODENAME||s.VERSION_CODENAME||"").replace(/"/g,"");a.indexOf("(")>=0&&(u=a.split("(")[1].replace(/[()]/g,"").trim(),a=a.split("(")[0].trim()),t.distro=(s.DISTRIB_ID||s.NAME||"unknown").replace(/"/g,""),t.logofile=cm(t.distro),t.release=(a||s.DISTRIB_RELEASE||s.VERSION_ID||"unknown").replace(/"/g,""),t.codename=u,t.codepage=Me.getCodepage(),t.build=(s.BUILD_ID||"").replace(/"/g,"").trim(),s2e().then(c=>{t.uefi=c,DW().then(d=>{t.serial=d.os,r&&r(t),e(t)})})}),(aT||lT||uT)&&De("sysctl kern.ostype kern.osrelease kern.osrevision kern.hostuuid machdep.bootmethod kern.geom.confxml",function(n,i){let s=i.toString().split(`
`),o=Me.getValue(s,"kern.ostype"),a=cm(o),u=Me.getValue(s,"kern.osrelease").split("-")[0],c=Me.getValue(s,"kern.uuid"),d=Me.getValue(s,"machdep.bootmethod"),h=i.toString().indexOf("<type>efi</type>")>=0,p=d?d.toLowerCase().indexOf("uefi")>=0:h||null;t.distro=o||t.distro,t.logofile=a||t.logofile,t.release=u||t.release,t.serial=c||t.serial,t.codename="",t.codepage=Me.getCodepage(),t.uefi=p||null,r&&r(t),e(t)}),Fs&&De("sw_vers; sysctl kern.ostype kern.osrelease kern.osrevision kern.uuid",function(n,i){let s=i.toString().split(`
`);t.serial=Me.getValue(s,"kern.uuid"),t.distro=Me.getValue(s,"ProductName"),t.release=(Me.getValue(s,"ProductVersion",":",!0,!0)+" "+Me.getValue(s,"ProductVersionExtra",":",!0,!0)).trim(),t.build=Me.getValue(s,"BuildVersion"),t.logofile=cm(t.distro),t.codename="macOS",t.codename=t.release.indexOf("10.4")>-1?"Mac OS X Tiger":t.codename,t.codename=t.release.indexOf("10.5")>-1?"Mac OS X Leopard":t.codename,t.codename=t.release.indexOf("10.6")>-1?"Mac OS X Snow Leopard":t.codename,t.codename=t.release.indexOf("10.7")>-1?"Mac OS X Lion":t.codename,t.codename=t.release.indexOf("10.8")>-1?"OS X Mountain Lion":t.codename,t.codename=t.release.indexOf("10.9")>-1?"OS X Mavericks":t.codename,t.codename=t.release.indexOf("10.10")>-1?"OS X Yosemite":t.codename,t.codename=t.release.indexOf("10.11")>-1?"OS X El Capitan":t.codename,t.codename=t.release.indexOf("10.12")>-1?"macOS Sierra":t.codename,t.codename=t.release.indexOf("10.13")>-1?"macOS High Sierra":t.codename,t.codename=t.release.indexOf("10.14")>-1?"macOS Mojave":t.codename,t.codename=t.release.indexOf("10.15")>-1?"macOS Catalina":t.codename,t.codename=t.release.startsWith("11.")?"macOS Big Sur":t.codename,t.codename=t.release.startsWith("12.")?"macOS Monterey":t.codename,t.codename=t.release.startsWith("13.")?"macOS Ventura":t.codename,t.codename=t.release.startsWith("14.")?"macOS Sonoma":t.codename,t.uefi=!0,t.codepage=Me.getCodepage(),r&&r(t),e(t)}),t2e&&(t.release=t.kernel,De("uname -o",function(n,i){let s=i.toString().split(`
`);t.distro=s[0],t.logofile=cm(t.distro),r&&r(t),e(t)})),ps){t.logofile=cm(),t.release=t.kernel;try{let n=[];n.push(Me.powerShell("Get-CimInstance Win32_OperatingSystem | select Caption,SerialNumber,BuildNumber,ServicePackMajorVersion,ServicePackMinorVersion | fl")),n.push(Me.powerShell("(Get-CimInstance Win32_ComputerSystem).HypervisorPresent")),n.push(Me.powerShell("Add-Type -AssemblyName System.Windows.Forms; [System.Windows.Forms.SystemInformation]::TerminalServerSession")),Me.promiseAll(n).then(i=>{let s=i.results[0]?i.results[0].toString().split(`\r
`):[""];t.distro=Me.getValue(s,"Caption",":").trim(),t.serial=Me.getValue(s,"SerialNumber",":").trim(),t.build=Me.getValue(s,"BuildNumber",":").trim(),t.servicepack=Me.getValue(s,"ServicePackMajorVersion",":").trim()+"."+Me.getValue(s,"ServicePackMinorVersion",":").trim(),t.codepage=Me.getCodepage();let o=i.results[1]?i.results[1].toString().toLowerCase():"";t.hypervisor=o.indexOf("true")!==-1;let a=i.results[2]?i.results[2].toString():"";t.remoteSession=a.toString().toLowerCase().indexOf("true")>=0,o2e().then(u=>{t.uefi=u,r&&r(t),e(t)})})}catch{r&&r(t),e(t)}}})})}_d.osInfo=i2e;function s2e(){return new Promise(r=>{process.nextTick(()=>{hs.stat("/sys/firmware/efi",function(e){if(e)De('dmesg | grep -E "EFI v"',function(t,n){if(!t){let i=n.toString().split(`
`);return r(i.length>0)}return r(!1)});else return r(!0)})})})}function o2e(){return new Promise(r=>{process.nextTick(()=>{try{De('findstr /C:"Detected boot environment" "%windir%\\Panther\\setupact.log"',Me.execOptsWin,function(e,t){if(e)De("echo %firmware_type%",Me.execOptsWin,function(n,i){if(n)return r(!1);{let s=i.toString()||"";return r(s.toLowerCase().indexOf("efi")>=0)}});else{let n=t.toString().split(`
\r`)[0];return r(n.toLowerCase().indexOf("efi")>=0)}})}catch{return r(!1)}})})}function a2e(r,e){let t={kernel:ho.release(),openssl:"",systemOpenssl:"",systemOpensslLib:"",node:process.versions.node,v8:process.versions.v8,npm:"",yarn:"",pm2:"",gulp:"",grunt:"",git:"",tsc:"",mysql:"",redis:"",mongodb:"",apache:"",nginx:"",php:"",docker:"",postfix:"",postgresql:"",perl:"",python:"",python3:"",pip:"",pip3:"",java:"",gcc:"",virtualbox:"",bash:"",zsh:"",fish:"",powershell:"",dotnet:""};function n(i){if(i==="*")return{versions:t,counter:30};if(!Array.isArray(i)){i=i.trim().toLowerCase().replace(/,+/g,"|").replace(/ /g,"|"),i=i.split("|");let s={versions:{},counter:0};return i.forEach(o=>{if(o)for(let a in t)({}).hasOwnProperty.call(t,a)&&a.toLowerCase()===o.toLowerCase()&&!{}.hasOwnProperty.call(s.versions,a)&&(s.versions[a]=t[a],a==="openssl"&&(s.versions.systemOpenssl="",s.versions.systemOpensslLib=""),s.versions[a]||s.counter++)}),s}}return new Promise(i=>{process.nextTick(()=>{if(Me.isFunction(r)&&!e)e=r,r="*";else if(r=r||"*",typeof r!="string")return e&&e({}),i({});let s=n(r),o=s.counter,a=function(){return function(){--o===0&&(e&&e(s.versions),i(s.versions))}}(),u="";try{if({}.hasOwnProperty.call(s.versions,"openssl")&&(s.versions.openssl=process.versions.openssl,De("openssl version",function(c,d){if(!c){let p=d.toString().split(`
`)[0].trim().split(" ");s.versions.systemOpenssl=p.length>0?p[1]:p[0],s.versions.systemOpensslLib=p.length>0?p[0]:"openssl"}a()})),{}.hasOwnProperty.call(s.versions,"npm")&&De("npm -v",function(c,d){c||(s.versions.npm=d.toString().split(`
`)[0]),a()}),{}.hasOwnProperty.call(s.versions,"pm2")&&(u="pm2",ps&&(u+=".cmd"),De(`${u} -v`,function(c,d){if(!c){let h=d.toString().split(`
`)[0].trim();h.startsWith("[PM2]")||(s.versions.pm2=h)}a()})),{}.hasOwnProperty.call(s.versions,"yarn")&&De("yarn --version",function(c,d){c||(s.versions.yarn=d.toString().split(`
`)[0]),a()}),{}.hasOwnProperty.call(s.versions,"gulp")&&(u="gulp",ps&&(u+=".cmd"),De(`${u} --version`,function(c,d){if(!c){let h=d.toString().split(`
`)[0]||"";s.versions.gulp=(h.toLowerCase().split("version")[1]||"").trim()}a()})),{}.hasOwnProperty.call(s.versions,"tsc")&&(u="tsc",ps&&(u+=".cmd"),De(`${u} --version`,function(c,d){if(!c){let h=d.toString().split(`
`)[0]||"";s.versions.tsc=(h.toLowerCase().split("version")[1]||"").trim()}a()})),{}.hasOwnProperty.call(s.versions,"grunt")&&(u="grunt",ps&&(u+=".cmd"),De(`${u} --version`,function(c,d){if(!c){let h=d.toString().split(`
`)[0]||"";s.versions.grunt=(h.toLowerCase().split("cli v")[1]||"").trim()}a()})),{}.hasOwnProperty.call(s.versions,"git"))if(Fs){let c=hs.existsSync("/usr/local/Cellar/git")||hs.existsSync("/opt/homebrew/bin/git");Me.darwinXcodeExists()||c?De("git --version",function(d,h){if(!d){let p=h.toString().split(`
`)[0]||"";p=(p.toLowerCase().split("version")[1]||"").trim(),s.versions.git=(p.split(" ")[0]||"").trim()}a()}):a()}else De("git --version",function(c,d){if(!c){let h=d.toString().split(`
`)[0]||"";h=(h.toLowerCase().split("version")[1]||"").trim(),s.versions.git=(h.split(" ")[0]||"").trim()}a()});if({}.hasOwnProperty.call(s.versions,"apache")&&De("apachectl -v 2>&1",function(c,d){if(!c){let h=(d.toString().split(`
`)[0]||"").split(":");s.versions.apache=h.length>1?h[1].replace("Apache","").replace("/","").split("(")[0].trim():""}a()}),{}.hasOwnProperty.call(s.versions,"nginx")&&De("nginx -v 2>&1",function(c,d){if(!c){let h=d.toString().split(`
`)[0]||"";s.versions.nginx=(h.toLowerCase().split("/")[1]||"").trim()}a()}),{}.hasOwnProperty.call(s.versions,"mysql")&&De("mysql -V",function(c,d){if(!c){let h=d.toString().split(`
`)[0]||"";if(h=h.toLowerCase(),h.indexOf(",")>-1){h=(h.split(",")[0]||"").trim();let p=h.split(" ");s.versions.mysql=(p[p.length-1]||"").trim()}else h.indexOf(" ver ")>-1&&(h=h.split(" ver ")[1],s.versions.mysql=h.split(" ")[0])}a()}),{}.hasOwnProperty.call(s.versions,"php")&&De("php -v",function(c,d){if(!c){let p=(d.toString().split(`
`)[0]||"").split("(");p[0].indexOf("-")&&(p=p[0].split("-")),s.versions.php=p[0].replace(/[^0-9.]/g,"")}a()}),{}.hasOwnProperty.call(s.versions,"redis")&&De("redis-server --version",function(c,d){if(!c){let p=(d.toString().split(`
`)[0]||"").split(" ");s.versions.redis=Me.getValue(p,"v","=",!0)}a()}),{}.hasOwnProperty.call(s.versions,"docker")&&De("docker --version",function(c,d){if(!c){let p=(d.toString().split(`
`)[0]||"").split(" ");s.versions.docker=p.length>2&&p[2].endsWith(",")?p[2].slice(0,-1):""}a()}),{}.hasOwnProperty.call(s.versions,"postfix")&&De("postconf -d | grep mail_version",function(c,d){if(!c){let h=d.toString().split(`
`)||[];s.versions.postfix=Me.getValue(h,"mail_version","=",!0)}a()}),{}.hasOwnProperty.call(s.versions,"mongodb")&&De("mongod --version",function(c,d){if(!c){let h=d.toString().split(`
`)[0]||"";s.versions.mongodb=(h.toLowerCase().split(",")[0]||"").replace(/[^0-9.]/g,"")}a()}),{}.hasOwnProperty.call(s.versions,"postgresql")&&(dm?De("locate bin/postgres",function(c,d){if(c)De("psql -V",function(h,p){if(!h){let m=p.toString().split(`
`)[0].split(" ")||[];s.versions.postgresql=m.length?m[m.length-1]:"",s.versions.postgresql=s.versions.postgresql.split("-")[0]}a()});else{let h=d.toString().split(`
`).sort();h.length?De(h[h.length-1]+" -V",function(p,m){if(!p){let y=m.toString().split(`
`)[0].split(" ")||[];s.versions.postgresql=y.length?y[y.length-1]:""}a()}):a()}}):ps?Me.powerShell("Get-CimInstance Win32_Service | select caption | fl").then(c=>{c.split(/\n\s*\n/).forEach(h=>{if(h.trim()!==""){let p=h.trim().split(`\r
`),m=Me.getValue(p,"caption",":",!0).toLowerCase();if(m.indexOf("postgresql")>-1){let y=m.split(" server ");y.length>1&&(s.versions.postgresql=y[1])}}}),a()}):De("postgres -V",function(c,d){if(!c){let h=d.toString().split(`
`)[0].split(" ")||[];s.versions.postgresql=h.length?h[h.length-1]:""}a()})),{}.hasOwnProperty.call(s.versions,"perl")&&De("perl -v",function(c,d){if(!c){let h=d.toString().split(`
`)||"";for(;h.length>0&&h[0].trim()==="";)h.shift();h.length>0&&(s.versions.perl=h[0].split("(").pop().split(")")[0].replace("v",""))}a()}),{}.hasOwnProperty.call(s.versions,"python"))if(Fs)try{let d=fm("sw_vers").toString().split(`
`),h=Me.getValue(d,"ProductVersion",":"),p=hs.existsSync("/usr/local/Cellar/python"),m=hs.existsSync("/opt/homebrew/bin/python");Me.darwinXcodeExists()&&Me.semverCompare("12.0.1",h)<0||p||m?De(p?"/usr/local/Cellar/python -V 2>&1":m?"/opt/homebrew/bin/python -V 2>&1":"python -V 2>&1",function(_,O){if(!_){let x=O.toString().split(`
`)[0]||"";s.versions.python=x.toLowerCase().replace("python","").trim()}a()}):a()}catch{a()}else De("python -V 2>&1",function(c,d){if(!c){let h=d.toString().split(`
`)[0]||"";s.versions.python=h.toLowerCase().replace("python","").trim()}a()});if({}.hasOwnProperty.call(s.versions,"python3"))if(Fs){let c=hs.existsSync("/usr/local/Cellar/python3")||hs.existsSync("/opt/homebrew/bin/python3");Me.darwinXcodeExists()||c?De("python3 -V 2>&1",function(d,h){if(!d){let p=h.toString().split(`
`)[0]||"";s.versions.python3=p.toLowerCase().replace("python","").trim()}a()}):a()}else De("python3 -V 2>&1",function(c,d){if(!c){let h=d.toString().split(`
`)[0]||"";s.versions.python3=h.toLowerCase().replace("python","").trim()}a()});if({}.hasOwnProperty.call(s.versions,"pip"))if(Fs){let c=hs.existsSync("/usr/local/Cellar/pip")||hs.existsSync("/opt/homebrew/bin/pip");Me.darwinXcodeExists()||c?De("pip -V 2>&1",function(d,h){if(!d){let m=(h.toString().split(`
`)[0]||"").split(" ");s.versions.pip=m.length>=2?m[1]:""}a()}):a()}else De("pip -V 2>&1",function(c,d){if(!c){let p=(d.toString().split(`
`)[0]||"").split(" ");s.versions.pip=p.length>=2?p[1]:""}a()});if({}.hasOwnProperty.call(s.versions,"pip3"))if(Fs){let c=hs.existsSync("/usr/local/Cellar/pip3")||hs.existsSync("/opt/homebrew/bin/pip3");Me.darwinXcodeExists()||c?De("pip3 -V 2>&1",function(d,h){if(!d){let m=(h.toString().split(`
`)[0]||"").split(" ");s.versions.pip3=m.length>=2?m[1]:""}a()}):a()}else De("pip3 -V 2>&1",function(c,d){if(!c){let p=(d.toString().split(`
`)[0]||"").split(" ");s.versions.pip3=p.length>=2?p[1]:""}a()});({}).hasOwnProperty.call(s.versions,"java")&&(Fs?De("/usr/libexec/java_home -V 2>&1",function(c,d){!c&&d.toString().toLowerCase().indexOf("no java runtime")===-1?De("java -version 2>&1",function(h,p){if(!h){let y=(p.toString().split(`
`)[0]||"").split('"');s.versions.java=y.length===3?y[1].trim():""}a()}):a()}):De("java -version 2>&1",function(c,d){if(!c){let p=(d.toString().split(`
`)[0]||"").split('"');s.versions.java=p.length===3?p[1].trim():""}a()})),{}.hasOwnProperty.call(s.versions,"gcc")&&(Fs&&Me.darwinXcodeExists()||!Fs?De("gcc -dumpversion",function(c,d){c||(s.versions.gcc=d.toString().split(`
`)[0].trim()||""),s.versions.gcc.indexOf(".")>-1?a():De("gcc --version",function(h,p){if(!h){let m=p.toString().split(`
`)[0].trim();if(m.indexOf("gcc")>-1&&m.indexOf(")")>-1){let y=m.split(")");s.versions.gcc=y[1].trim()||s.versions.gcc}}a()})}):a()),{}.hasOwnProperty.call(s.versions,"virtualbox")&&De(Me.getVboxmanage()+" -v 2>&1",function(c,d){if(!c){let p=(d.toString().split(`
`)[0]||"").split("r");s.versions.virtualbox=p[0]}a()}),{}.hasOwnProperty.call(s.versions,"bash")&&De("bash --version",function(c,d){if(!c){let p=d.toString().split(`
`)[0].split(" version ");p.length>1&&(s.versions.bash=p[1].split(" ")[0].split("(")[0])}a()}),{}.hasOwnProperty.call(s.versions,"zsh")&&De("zsh --version",function(c,d){if(!c){let p=d.toString().split(`
`)[0].split("zsh ");p.length>1&&(s.versions.zsh=p[1].split(" ")[0])}a()}),{}.hasOwnProperty.call(s.versions,"fish")&&De("fish --version",function(c,d){if(!c){let p=d.toString().split(`
`)[0].split(" version ");p.length>1&&(s.versions.fish=p[1].split(" ")[0])}a()}),{}.hasOwnProperty.call(s.versions,"powershell")&&(ps?Me.powerShell("$PSVersionTable").then(c=>{let d=c.toString().split(`
`).map(h=>h.replace(/ +/g," ").replace(/ +/g,":"));s.versions.powershell=Me.getValue(d,"psversion"),a()}):a()),{}.hasOwnProperty.call(s.versions,"dotnet")&&(ps?Me.powerShell('gci "HKLM:\\SOFTWARE\\Microsoft\\NET Framework Setup\\NDP" -recurse | gp -name Version,Release -EA 0 | where { $_.PSChildName -match "^(?!S)\\p{L}"} | select PSChildName, Version, Release').then(c=>{let d=c.toString().split(`\r
`),h="";d.forEach(p=>{p=p.replace(/ +/g," ");let m=p.split(" ");h=h||(m[0].toLowerCase().startsWith("client")&&m.length>2||m[0].toLowerCase().startsWith("full")&&m.length>2?m[1].trim():"")}),s.versions.dotnet=h.trim(),a()}):a())}catch{e&&e(s.versions),i(s.versions)}})})}_d.versions=a2e;function l2e(r){return new Promise(e=>{process.nextTick(()=>{if(ps)e("cmd");else{let t="";De("echo $SHELL",function(n,i){n||(t=i.toString().split(`
`)[0]),r&&r(t),e(t)})}})})}_d.shell=l2e;function u2e(){let r=[];try{let e=ho.networkInterfaces();for(let t in e)({}).hasOwnProperty.call(e,t)&&e[t].forEach(function(n){if(n&&n.mac&&n.mac!=="00:00:00:00:00:00"){let i=n.mac.toLowerCase();r.indexOf(i)===-1&&r.push(i)}});r=r.sort(function(t,n){return t<n?-1:t>n?1:0})}catch{r.push("00:00:00:00:00:00")}return r}function DW(r){return new Promise(e=>{process.nextTick(()=>{let t={os:"",hardware:"",macs:u2e()},n;if(Fs&&De("system_profiler SPHardwareDataType -json",function(i,s){if(!i)try{let o=JSON.parse(s.toString());if(o.SPHardwareDataType&&o.SPHardwareDataType.length>0){let a=o.SPHardwareDataType[0];t.os=a.platform_UUID.toLowerCase(),t.hardware=a.serial_number}}catch{Me.noop()}r&&r(t),e(t)}),dm&&De(`echo -n "os: "; cat /var/lib/dbus/machine-id 2> /dev/null; echo;
echo -n "os: "; cat /etc/machine-id 2> /dev/null; echo;
echo -n "hardware: "; cat /sys/class/dmi/id/product_uuid 2> /dev/null; echo;`,function(s,o){let a=o.toString().split(`
`);if(t.os=Me.getValue(a,"os").toLowerCase(),t.hardware=Me.getValue(a,"hardware").toLowerCase(),!t.hardware){let u=hs.readFileSync("/proc/cpuinfo",{encoding:"utf8"}).toString().split(`
`),c=Me.getValue(u,"serial");t.hardware=c||""}r&&r(t),e(t)}),(aT||lT||uT)&&De("sysctl -i kern.hostid kern.hostuuid",function(i,s){let o=s.toString().split(`
`);t.os=Me.getValue(o,"kern.hostid",":").toLowerCase(),t.hardware=Me.getValue(o,"kern.hostuuid",":").toLowerCase(),t.os.indexOf("unknown")>=0&&(t.os=""),t.hardware.indexOf("unknown")>=0&&(t.hardware=""),r&&r(t),e(t)}),ps){let i="%windir%\\System32";process.arch==="ia32"&&Object.prototype.hasOwnProperty.call(process.env,"PROCESSOR_ARCHITEW6432")&&(i="%windir%\\sysnative\\cmd.exe /c %windir%\\System32"),Me.powerShell("Get-CimInstance Win32_ComputerSystemProduct | select UUID | fl").then(s=>{let o=s.split(`\r
`);t.hardware=Me.getValue(o,"uuid",":").toLowerCase(),De(`${i}\\reg query "HKEY_LOCAL_MACHINE\\SOFTWARE\\Microsoft\\Cryptography" /v MachineGuid`,Me.execOptsWin,function(a,u){n=u.toString().split(`
\r`)[0].split("REG_SZ"),t.os=n.length>1?n[1].replace(/\r+|\n+|\s+/ig,"").toLowerCase():"",r&&r(t),e(t)})})}})})}_d.uuid=DW});var BW=E(gl=>{"use strict";var Bs=require("os"),Yn=require("child_process").exec,mT=require("child_process").execSync,Iw=require("fs"),de=zr(),ml=process.platform,hm=ml==="linux"||ml==="android",Cw=ml==="darwin",Tw=ml==="win32",Aw=ml==="freebsd",Mw=ml==="openbsd",kw=ml==="netbsd",Pw=ml==="sunos",xd=0,lt={user:0,nice:0,system:0,idle:0,irq:0,steal:0,guest:0,load:0,tick:0,ms:0,currentLoad:0,currentLoadUser:0,currentLoadSystem:0,currentLoadNice:0,currentLoadIdle:0,currentLoadIrq:0,currentLoadSteal:0,currentLoadGuest:0,rawCurrentLoad:0,rawCurrentLoadUser:0,rawCurrentLoadSystem:0,rawCurrentLoadNice:0,rawCurrentLoadIdle:0,rawCurrentLoadIrq:0,rawCurrentLoadSteal:0,rawCurrentLoadGuest:0},se=[],cT=0,fT={8346:"1.8",8347:"1.9",8350:"2.0",8354:"2.2","8356|SE":"2.4",8356:"2.3",8360:"2.5",2372:"2.1",2373:"2.1",2374:"2.2",2376:"2.3",2377:"2.3",2378:"2.4",2379:"2.4",2380:"2.5",2381:"2.5",2382:"2.6",2384:"2.7",2386:"2.8",2387:"2.8",2389:"2.9",2393:"3.1",8374:"2.2",8376:"2.3",8378:"2.4",8379:"2.4",8380:"2.5",8381:"2.5",8382:"2.6",8384:"2.7",8386:"2.8",8387:"2.8",8389:"2.9",8393:"3.1","2419EE":"1.8","2423HE":"2.0","2425HE":"2.1",2427:"2.2",2431:"2.4",2435:"2.6","2439SE":"2.8","8425HE":"2.1",8431:"2.4",8435:"2.6","8439SE":"2.8",4122:"2.2",4130:"2.6","4162EE":"1.7","4164EE":"1.8","4170HE":"2.1","4174HE":"2.3","4176HE":"2.4",4180:"2.6",4184:"2.8","6124HE":"1.8","6128HE":"2.0","6132HE":"2.2",6128:"2.0",6134:"2.3",6136:"2.4",6140:"2.6","6164HE":"1.7","6166HE":"1.8",6168:"1.9",6172:"2.1",6174:"2.2",6176:"2.3","6176SE":"2.3","6180SE":"2.5",3250:"2.5",3260:"2.7",3280:"2.4",4226:"2.7",4228:"2.8",4230:"2.9",4234:"3.1",4238:"3.3",4240:"3.4",4256:"1.6",4274:"2.5",4276:"2.6",4280:"2.8",4284:"3.0",6204:"3.3",6212:"2.6",6220:"3.0",6234:"2.4",6238:"2.6","6262HE":"1.6",6272:"2.1",6274:"2.2",6276:"2.3",6278:"2.4","6282SE":"2.6","6284SE":"2.7",6308:"3.5",6320:"2.8",6328:"3.2","6338P":"2.3",6344:"2.6",6348:"2.8",6366:"1.8","6370P":"2.0",6376:"2.3",6378:"2.4",6380:"2.5",6386:"2.8","FX|4100":"3.6","FX|4120":"3.9","FX|4130":"3.8","FX|4150":"3.8","FX|4170":"4.2","FX|6100":"3.3","FX|6120":"3.6","FX|6130":"3.6","FX|6200":"3.8","FX|8100":"2.8","FX|8120":"3.1","FX|8140":"3.2","FX|8150":"3.6","FX|8170":"3.9","FX|4300":"3.8","FX|4320":"4.0","FX|4350":"4.2","FX|6300":"3.5","FX|6350":"3.9","FX|8300":"3.3","FX|8310":"3.4","FX|8320":"3.5","FX|8350":"4.0","FX|8370":"4.0","FX|9370":"4.4","FX|9590":"4.7","FX|8320E":"3.2","FX|8370E":"3.3",1200:"3.1","Pro 1200":"3.1","1300X":"3.5","Pro 1300":"3.5",1400:"3.2","1500X":"3.5","Pro 1500":"3.5",1600:"3.2","1600X":"3.6","Pro 1600":"3.2",1700:"3.0","Pro 1700":"3.0","1700X":"3.4","Pro 1700X":"3.4","1800X":"3.6","1900X":"3.8",1920:"3.2","1920X":"3.5","1950X":"3.4","200GE":"3.2","Pro 200GE":"3.2","220GE":"3.4","240GE":"3.5","3000G":"3.5","300GE":"3.4","3050GE":"3.4","2200G":"3.5","Pro 2200G":"3.5","2200GE":"3.2","Pro 2200GE":"3.2","2400G":"3.6","Pro 2400G":"3.6","2400GE":"3.2","Pro 2400GE":"3.2","Pro 200U":"2.3","300U":"2.4","2200U":"2.5","3200U":"2.6","2300U":"2.0","Pro 2300U":"2.0","2500U":"2.0","Pro 2500U":"2.2","2600H":"3.2","2700U":"2.0","Pro 2700U":"2.2","2800H":"3.3",7351:"2.4","7351P":"2.4",7401:"2.0","7401P":"2.0","7551P":"2.0",7551:"2.0",7251:"2.1",7261:"2.5",7281:"2.1",7301:"2.2",7371:"3.1",7451:"2.3",7501:"2.0",7571:"2.2",7601:"2.2",V1500B:"2.2",V1780B:"3.35",V1202B:"2.3",V1404I:"2.0",V1605B:"2.0",V1756B:"3.25",V1807B:"3.35",3101:"2.1",3151:"2.7",3201:"1.5",3251:"2.5",3255:"2.5",3301:"2.0",3351:"1.9",3401:"1.85",3451:"2.15","1200|AF":"3.1","2300X":"3.5","2500X":"3.6",2600:"3.4","2600E":"3.1","1600|AF":"3.2","2600X":"3.6",2700:"3.2","2700E":"2.8","Pro 2700":"3.2","2700X":"3.7","Pro 2700X":"3.6","2920X":"3.5","2950X":"3.5","2970WX":"3.0","2990WX":"3.0","Pro 300GE":"3.4","Pro 3125GE":"3.4","3150G":"3.5","Pro 3150G":"3.5","3150GE":"3.3","Pro 3150GE":"3.3","3200G":"3.6","Pro 3200G":"3.6","3200GE":"3.3","Pro 3200GE":"3.3","3350G":"3.6","Pro 3350G":"3.6","3350GE":"3.3","Pro 3350GE":"3.3","3400G":"3.7","Pro 3400G":"3.7","3400GE":"3.3","Pro 3400GE":"3.3","3300U":"2.1","PRO 3300U":"2.1","3450U":"2.1","3500U":"2.1","PRO 3500U":"2.1","3500C":"2.1","3550H":"2.1","3580U":"2.1","3700U":"2.3","PRO 3700U":"2.3","3700C":"2.3","3750H":"2.3","3780U":"2.3",3100:"3.6","3300X":"3.8",3500:"3.6","3500X":"3.6",3600:"3.6","Pro 3600":"3.6","3600X":"3.8","3600XT":"3.8","Pro 3700":"3.6","3700X":"3.6","3800X":"3.9","3800XT":"3.9",3900:"3.1","Pro 3900":"3.1","3900X":"3.8","3900XT":"3.8","3950X":"3.5","3960X":"3.8","3970X":"3.7","3990X":"2.9","3945WX":"4.0","3955WX":"3.9","3975WX":"3.5","3995WX":"2.7","4300GE":"3.5","Pro 4300GE":"3.5","4300G":"3.8","Pro 4300G":"3.8","4600GE":"3.3","Pro 4650GE":"3.3","4600G":"3.7","Pro 4650G":"3.7","4700GE":"3.1","Pro 4750GE":"3.1","4700G":"3.6","Pro 4750G":"3.6","4300U":"2.7","4450U":"2.5","Pro 4450U":"2.5","4500U":"2.3","4600U":"2.1","PRO 4650U":"2.1","4680U":"2.1","4600HS":"3.0","4600H":"3.0","4700U":"2.0","PRO 4750U":"1.7","4800U":"1.8","4800HS":"2.9","4800H":"2.9","4900HS":"3.0","4900H":"3.3","5300U":"2.6","5500U":"2.1","5700U":"1.8","7232P":"3.1","7302P":"3.0","7402P":"2.8","7502P":"2.5","7702P":"2.0",7252:"3.1",7262:"3.2",7272:"2.9",7282:"2.8",7302:"3.0",7352:"2.3",7402:"2.8",7452:"2.35",7502:"2.5",7532:"2.4",7542:"2.9",7552:"2.2",7642:"2.3",7662:"2.0",7702:"2.0",7742:"2.25","7H12":"2.6","7F32":"3.7","7F52":"3.5","7F72":"3.2","7773X":"2.2",7763:"2.45",7713:"2.0","7713P":"2.0",7663:"2.0",7643:"2.3","7573X":"2.8","75F3":"2.95",7543:"2.8","7543P":"2.8",7513:"2.6","7473X":"2.8",7453:"2.75","74F3":"3.2",7443:"2.85","7443P":"2.85",7413:"2.65","7373X":"3.05","73F3":"3.5",7343:"3.2",7313:"3.0","7313P":"3.0","72F3":"3.7","5600X":"3.7","5800X":"3.8","5900X":"3.7","5950X":"3.4","5945WX":"4.1","5955WX":"4.0","5965WX":"3.8","5975WX":"3.6","5995WX":"2.7","7960X":"4.2","7970X":"4.0","7980X":"3.2","7965WX":"4.2","7975WX":"4.0","7985WX":"3.2","7995WX":"2.5",9754:"2.25","9754S":"2.25",9734:"2.2","9684X":"2.55","9384X":"3.1","9184X":"3.55","9654P":"2.4",9654:"2.4",9634:"2.25","9554P":"3.1",9554:"3.1",9534:"2.45","9474F":"3.6","9454P":"2.75",9454:"2.75","9374F":"3.85","9354P":"3.25",9354:"3.25",9334:"2.7","9274F":"4.05",9254:"2.9",9224:"2.5","9174F":"4.1",9124:"3.0"},jW={1:"Other",2:"Unknown",3:"Daughter Board",4:"ZIF Socket",5:"Replacement/Piggy Back",6:"None",7:"LIF Socket",8:"Slot 1",9:"Slot 2",10:"370 Pin Socket",11:"Slot A",12:"Slot M",13:"423",14:"A (Socket 462)",15:"478",16:"754",17:"940",18:"939",19:"mPGA604",20:"LGA771",21:"LGA775",22:"S1",23:"AM2",24:"F (1207)",25:"LGA1366",26:"G34",27:"AM3",28:"C32",29:"LGA1156",30:"LGA1567",31:"PGA988A",32:"BGA1288",33:"rPGA988B",34:"BGA1023",35:"BGA1224",36:"LGA1155",37:"LGA1356",38:"LGA2011",39:"FS1",40:"FS2",41:"FM1",42:"FM2",43:"LGA2011-3",44:"LGA1356-3",45:"LGA1150",46:"BGA1168",47:"BGA1234",48:"BGA1364",49:"AM4",50:"LGA1151",51:"BGA1356",52:"BGA1440",53:"BGA1515",54:"LGA3647-1",55:"SP3",56:"SP3r2",57:"LGA2066",58:"BGA1392",59:"BGA1510",60:"BGA1528",61:"LGA4189",62:"LGA1200",63:"LGA4677",64:"LGA1700",65:"BGA1744",66:"BGA1781",67:"BGA1211",68:"BGA2422",69:"LGA1211",70:"LGA2422",71:"LGA5773",72:"BGA5773"},KW={LGA1150:"i7-5775C i3-4340 i3-4170 G3250 i3-4160T i3-4160 E3-1231 G3258 G3240 i7-4790S i7-4790K i7-4790 i5-4690K i5-4690 i5-4590T i5-4590S i5-4590 i5-4460 i3-4360 i3-4150 G1820 G3420 G3220 i7-4771 i5-4440 i3-4330 i3-4130T i3-4130 E3-1230 i7-4770S i7-4770K i7-4770 i5-4670K i5-4670 i5-4570T i5-4570S i5-4570 i5-4430",LGA1151:"i9-9900KS E-2288G E-2224 G5420 i9-9900T i9-9900 i7-9700T i7-9700F i7-9700E i7-9700 i5-9600 i5-9500T i5-9500F i5-9500 i5-9400T i3-9350K i3-9300 i3-9100T i3-9100F i3-9100 G4930 i9-9900KF i7-9700KF i5-9600KF i5-9400F i5-9400 i3-9350KF i9-9900K i7-9700K i5-9600K G5500 G5400 i7-8700T i7-8086K i5-8600 i5-8500T i5-8500 i5-8400T i3-8300 i3-8100T G4900 i7-8700K i7-8700 i5-8600K i5-8400 i3-8350K i3-8100 E3-1270 G4600 G4560 i7-7700T i7-7700K i7-7700 i5-7600K i5-7600 i5-7500T i5-7500 i5-7400 i3-7350K i3-7300 i3-7100T i3-7100 G3930 G3900 G4400 i7-6700T i7-6700K i7-6700 i5-6600K i5-6600 i5-6500T i5-6500 i5-6400T i5-6400 i3-6300 i3-6100T i3-6100 E3-1270 E3-1270 T4500 T4400",1155:"G440 G460 G465 G470 G530T G540T G550T G1610T G1620T G530 G540 G1610 G550 G1620 G555 G1630 i3-2100T i3-2120T i3-3220T i3-3240T i3-3250T i3-2100 i3-2105 i3-2102 i3-3210 i3-3220 i3-2125 i3-2120 i3-3225 i3-2130 i3-3245 i3-3240 i3-3250 i5-3570T i5-2500T i5-2400S i5-2405S i5-2390T i5-3330S i5-2500S i5-3335S i5-2300 i5-3450S i5-3340S i5-3470S i5-3475S i5-3470T i5-2310 i5-3550S i5-2320 i5-3330 i5-3350P i5-3450 i5-2400 i5-3340 i5-3570S i5-2380P i5-2450P i5-3470 i5-2500K i5-3550 i5-2500 i5-3570 i5-3570K i5-2550K i7-3770T i7-2600S i7-3770S i7-2600K i7-2600 i7-3770 i7-3770K i7-2700K G620T G630T G640T G2020T G645T G2100T G2030T G622 G860T G620 G632 G2120T G630 G640 G2010 G840 G2020 G850 G645 G2030 G860 G2120 G870 G2130 G2140 E3-1220L E3-1220L E3-1260L E3-1265L E3-1220 E3-1225 E3-1220 E3-1235 E3-1225 E3-1230 E3-1230 E3-1240 E3-1245 E3-1270 E3-1275 E3-1240 E3-1245 E3-1270 E3-1280 E3-1275 E3-1290 E3-1280 E3-1290"};function c2e(r){let e="";for(let t in KW)KW[t].split(" ").forEach(i=>{r.indexOf(i)>=0&&(e=t)});return e}function hT(r){let e=r;return r=r.toLowerCase(),r.indexOf("intel")>=0&&(e="Intel"),r.indexOf("amd")>=0&&(e="AMD"),r.indexOf("qemu")>=0&&(e="QEMU"),r.indexOf("hygon")>=0&&(e="Hygon"),r.indexOf("centaur")>=0&&(e="WinChip/Via"),r.indexOf("vmware")>=0&&(e="VMware"),r.indexOf("Xen")>=0&&(e="Xen Hypervisor"),r.indexOf("tcg")>=0&&(e="QEMU"),r.indexOf("apple")>=0&&(e="Apple"),e}function Ow(r){r.brand=r.brand.replace(/\(R\)+/g,"\xAE").replace(/\s+/g," ").trim(),r.brand=r.brand.replace(/\(TM\)+/g,"\u2122").replace(/\s+/g," ").trim(),r.brand=r.brand.replace(/\(C\)+/g,"\xA9").replace(/\s+/g," ").trim(),r.brand=r.brand.replace(/CPU+/g,"").replace(/\s+/g," ").trim(),r.manufacturer=hT(r.brand);let e=r.brand.split(" ");return e.shift(),r.brand=e.join(" "),r}function dT(r){let e="0";for(let t in fT)if({}.hasOwnProperty.call(fT,t)){let n=t.split("|"),i=0;n.forEach(s=>{r.indexOf(s)>-1&&i++}),i===n.length&&(e=fT[t])}return parseFloat(e)}function f2e(){return new Promise(r=>{process.nextTick(()=>{let e="unknown",t={manufacturer:e,brand:e,vendor:"",family:"",model:"",stepping:"",revision:"",voltage:"",speed:0,speedMin:0,speedMax:0,governor:"",cores:de.cores(),physicalCores:de.cores(),performanceCores:de.cores(),efficiencyCores:0,processors:1,socket:"",flags:"",virtualization:!1,cache:{}};qW().then(n=>{if(t.flags=n,t.virtualization=n.indexOf("vmx")>-1||n.indexOf("svm")>-1,Cw&&Yn("sysctl machdep.cpu hw.cpufrequency_max hw.cpufrequency_min hw.packages hw.physicalcpu_max hw.ncpu hw.tbfrequency hw.cpufamily hw.cpusubfamily",function(i,s){let o=s.toString().split(`
`),u=de.getValue(o,"machdep.cpu.brand_string").split("@");t.brand=u[0].trim();let c=u[1]?u[1].trim():"0";t.speed=parseFloat(c.replace(/GHz+/g,""));let d=de.getValue(o,"hw.tbfrequency")/1e9;d=d<.1?d*100:d,t.speed=t.speed===0?d:t.speed,xd=t.speed,t=Ow(t),t.speedMin=de.getValue(o,"hw.cpufrequency_min")?de.getValue(o,"hw.cpufrequency_min")/1e9:t.speed,t.speedMax=de.getValue(o,"hw.cpufrequency_max")?de.getValue(o,"hw.cpufrequency_max")/1e9:t.speed,t.vendor=de.getValue(o,"machdep.cpu.vendor")||"Apple",t.family=de.getValue(o,"machdep.cpu.family")||de.getValue(o,"hw.cpufamily"),t.model=de.getValue(o,"machdep.cpu.model"),t.stepping=de.getValue(o,"machdep.cpu.stepping")||de.getValue(o,"hw.cpusubfamily"),t.virtualization=!0;let h=de.getValue(o,"hw.packages"),p=de.getValue(o,"hw.physicalcpu_max"),m=de.getValue(o,"hw.ncpu");if(Bs.arch()==="arm64"){t.socket="SOC";try{let y=mT("ioreg -c IOPlatformDevice -d 3 -r | grep cluster-type").toString().split(`
`),_=y.filter(x=>x.indexOf('"E"')>=0).length,O=y.filter(x=>x.indexOf('"P"')>=0).length;t.efficiencyCores=_,t.performanceCores=O}catch{de.noop()}}h&&(t.processors=parseInt(h)||1),p&&m&&(t.cores=parseInt(m)||de.cores(),t.physicalCores=parseInt(p)||de.cores()),FW().then(y=>{t.cache=y,r(t)})}),hm){let i="",s=[];Bs.cpus()[0]&&Bs.cpus()[0].model&&(i=Bs.cpus()[0].model),Yn('export LC_ALL=C; lscpu; echo -n "Governor: "; cat /sys/devices/system/cpu/cpu0/cpufreq/scaling_governor 2>/dev/null; echo; unset LC_ALL',function(o,a){o||(s=a.toString().split(`
`)),i=de.getValue(s,"model name")||i;let u=i.split("@");if(t.brand=u[0].trim(),t.speed=u[1]?parseFloat(u[1].trim()):0,t.speed===0&&(t.brand.indexOf("AMD")>-1||t.brand.toLowerCase().indexOf("ryzen")>-1)&&(t.speed=dT(t.brand)),t.speed===0){let _=pT();_.avg!==0&&(t.speed=_.avg)}xd=t.speed,t.speedMin=Math.round(parseFloat(de.getValue(s,"cpu min mhz").replace(/,/g,"."))/10)/100,t.speedMax=Math.round(parseFloat(de.getValue(s,"cpu max mhz").replace(/,/g,"."))/10)/100,t=Ow(t),t.vendor=hT(de.getValue(s,"vendor id")),t.family=de.getValue(s,"cpu family"),t.model=de.getValue(s,"model:"),t.stepping=de.getValue(s,"stepping"),t.revision=de.getValue(s,"cpu revision"),t.cache.l1d=de.getValue(s,"l1d cache"),t.cache.l1d&&(t.cache.l1d=parseInt(t.cache.l1d)*(t.cache.l1d.indexOf("M")!==-1?1024*1024:t.cache.l1d.indexOf("K")!==-1?1024:1)),t.cache.l1i=de.getValue(s,"l1i cache"),t.cache.l1i&&(t.cache.l1i=parseInt(t.cache.l1i)*(t.cache.l1i.indexOf("M")!==-1?1024*1024:t.cache.l1i.indexOf("K")!==-1?1024:1)),t.cache.l2=de.getValue(s,"l2 cache"),t.cache.l2&&(t.cache.l2=parseInt(t.cache.l2)*(t.cache.l2.indexOf("M")!==-1?1024*1024:t.cache.l2.indexOf("K")!==-1?1024:1)),t.cache.l3=de.getValue(s,"l3 cache"),t.cache.l3&&(t.cache.l3=parseInt(t.cache.l3)*(t.cache.l3.indexOf("M")!==-1?1024*1024:t.cache.l3.indexOf("K")!==-1?1024:1));let c=de.getValue(s,"thread(s) per core")||"1",d=de.getValue(s,"socket(s)")||"1",h=parseInt(c,10),p=parseInt(d,10)||1,m=parseInt(de.getValue(s,"core(s) per socket"),10);if(t.physicalCores=m?m*p:t.cores/h,t.performanceCores=h>1?t.cores-t.physicalCores:t.cores,t.efficiencyCores=h>1?t.cores-h*t.performanceCores:0,t.processors=p,t.governor=de.getValue(s,"governor")||"",t.vendor==="ARM"){let _=Iw.readFileSync("/proc/cpuinfo").toString().split(`
`),O=de.decodePiCpuinfo(_);O.model.toLowerCase().indexOf("raspberry")>=0&&(t.family=t.manufacturer,t.manufacturer=O.manufacturer,t.brand=O.processor,t.revision=O.revisionCode,t.socket="SOC")}let y=[];Yn('export LC_ALL=C; dmidecode \u2013t 4 2>/dev/null | grep "Upgrade: Socket"; unset LC_ALL',function(_,O){y=O.toString().split(`
`),y&&y.length&&(t.socket=de.getValue(y,"Upgrade").replace("Socket","").trim()||t.socket),r(t)})})}if(Aw||Mw||kw){let i="",s=[];Bs.cpus()[0]&&Bs.cpus()[0].model&&(i=Bs.cpus()[0].model),Yn("export LC_ALL=C; dmidecode -t 4; dmidecode -t 7 unset LC_ALL",function(o,a){let u=[];if(!o){let m=a.toString().split("# dmidecode"),y=m.length>1?m[1]:"";u=m.length>2?m[2].split("Cache Information"):[],s=y.split(`
`)}if(t.brand=i.split("@")[0].trim(),t.speed=i.split("@")[1]?parseFloat(i.split("@")[1].trim()):0,t.speed===0&&(t.brand.indexOf("AMD")>-1||t.brand.toLowerCase().indexOf("ryzen")>-1)&&(t.speed=dT(t.brand)),t.speed===0){let m=pT();m.avg!==0&&(t.speed=m.avg)}xd=t.speed,t.speedMin=t.speed,t.speedMax=Math.round(parseFloat(de.getValue(s,"max speed").replace(/Mhz/g,""))/10)/100,t=Ow(t),t.vendor=hT(de.getValue(s,"manufacturer"));let c=de.getValue(s,"signature");c=c.split(",");for(let m=0;m<c.length;m++)c[m]=c[m].trim();t.family=de.getValue(c,"Family"," ",!0),t.model=de.getValue(c,"Model"," ",!0),t.stepping=de.getValue(c,"Stepping"," ",!0),t.revision="";let d=parseFloat(de.getValue(s,"voltage"));t.voltage=isNaN(d)?"":d.toFixed(2);for(let m=0;m<u.length;m++){s=u[m].split(`
`);let y=de.getValue(s,"Socket Designation").toLowerCase().replace(" ","-").split("-");y=y.length?y[0]:"";let _=de.getValue(s,"Installed Size").split(" "),O=parseInt(_[0],10),x=_.length>1?_[1]:"kb";O=O*(x==="kb"?1024:x==="mb"?1024*1024:x==="gb"?1024*1024*1024:1),y&&(y==="l1"?(t.cache[y+"d"]=O/2,t.cache[y+"i"]=O/2):t.cache[y]=O)}t.socket=de.getValue(s,"Upgrade").replace("Socket","").trim();let h=de.getValue(s,"thread count").trim(),p=de.getValue(s,"core count").trim();p&&h&&(t.cores=parseInt(h,10),t.physicalCores=parseInt(p,10)),r(t)})}if(Pw&&r(t),Tw)try{let i=[];i.push(de.powerShell("Get-CimInstance Win32_processor | select Name, Revision, L2CacheSize, L3CacheSize, Manufacturer, MaxClockSpeed, Description, UpgradeMethod, Caption, NumberOfLogicalProcessors, NumberOfCores | fl")),i.push(de.powerShell("Get-CimInstance Win32_CacheMemory | select CacheType,InstalledSize,Level | fl")),i.push(de.powerShell("(Get-CimInstance Win32_ComputerSystem).HypervisorPresent")),Promise.all(i).then(s=>{let o=s[0].split(`\r
`),a=de.getValue(o,"name",":")||"";a.indexOf("@")>=0?(t.brand=a.split("@")[0].trim(),t.speed=a.split("@")[1]?parseFloat(a.split("@")[1].trim()):0,xd=t.speed):(t.brand=a.trim(),t.speed=0),t=Ow(t),t.revision=de.getValue(o,"revision",":"),t.vendor=de.getValue(o,"manufacturer",":"),t.speedMax=Math.round(parseFloat(de.getValue(o,"maxclockspeed",":").replace(/,/g,"."))/10)/100,t.speed===0&&(t.brand.indexOf("AMD")>-1||t.brand.toLowerCase().indexOf("ryzen")>-1)&&(t.speed=dT(t.brand)),t.speed===0&&(t.speed=t.speedMax),t.speedMin=t.speed;let u=de.getValue(o,"description",":").split(" ");for(let _=0;_<u.length;_++)u[_].toLowerCase().startsWith("family")&&_+1<u.length&&u[_+1]&&(t.family=u[_+1]),u[_].toLowerCase().startsWith("model")&&_+1<u.length&&u[_+1]&&(t.model=u[_+1]),u[_].toLowerCase().startsWith("stepping")&&_+1<u.length&&u[_+1]&&(t.stepping=u[_+1]);let c=de.getValue(o,"UpgradeMethod",":");jW[c]&&(t.socket=jW[c]);let d=c2e(a);d&&(t.socket=d);let h=de.countLines(o,"Caption"),p=de.getValue(o,"NumberOfLogicalProcessors",":"),m=de.getValue(o,"NumberOfCores",":");h&&(t.processors=parseInt(h)||1),m&&p&&(t.cores=parseInt(p)||de.cores(),t.physicalCores=parseInt(m)||de.cores()),h>1&&(t.cores=t.cores*h,t.physicalCores=t.physicalCores*h),t.cache=VW(s[0],s[1]);let y=s[2]?s[2].toString().toLowerCase():"";t.virtualization=y.indexOf("true")!==-1,r(t)})}catch{r(t)}})})})}function d2e(r){return new Promise(e=>{process.nextTick(()=>{f2e().then(t=>{r&&r(t),e(t)})})})}gl.cpu=d2e;function pT(){let r=Bs.cpus(),e=999999999,t=0,n=0,i=[];if(r&&r.length){for(let s in r)if({}.hasOwnProperty.call(r,s)){let o=r[s].speed>100?(r[s].speed+1)/1e3:r[s].speed/10;n=n+o,o>t&&(t=o),o<e&&(e=o),i.push(parseFloat(o.toFixed(2)))}return n=n/r.length,{min:parseFloat(e.toFixed(2)),max:parseFloat(t.toFixed(2)),avg:parseFloat(n.toFixed(2)),cores:i}}else return{min:0,max:0,avg:0,cores:i}}function h2e(r){return new Promise(e=>{process.nextTick(()=>{let t=pT();if(t.avg===0&&xd!==0){let n=parseFloat(xd);t={min:n,max:n,avg:n,cores:[]}}r&&r(t),e(t)})})}gl.cpuCurrentSpeed=h2e;function p2e(r){return new Promise(e=>{process.nextTick(()=>{let t={main:null,cores:[],max:null,socket:[],chipset:null};if(hm){try{let s=mT('cat /sys/class/thermal/thermal_zone*/type  2>/dev/null; echo "-----"; cat /sys/class/thermal/thermal_zone*/temp 2>/dev/null;').toString().split(`-----
`);if(s.length===2){let o=s[0].split(`
`),a=s[1].split(`
`);for(let u=0;u<o.length;u++){let c=o[u].trim();c.startsWith("acpi")&&a[u]&&t.socket.push(Math.round(parseInt(a[u],10)/100)/10),c.startsWith("pch")&&a[u]&&(t.chipset=Math.round(parseInt(a[u],10)/100)/10)}}}catch{de.noop()}let n='for mon in /sys/class/hwmon/hwmon*; do for label in "$mon"/temp*_label; do if [ -f $label ]; then value=${label%_*}_input; echo $(cat "$label")___$(cat "$value"); fi; done; done;';try{Yn(n,function(i,s){s=s.toString();let o=s.toLowerCase().indexOf("tdie");o!==-1&&(s=s.substring(o));let a=s.split(`
`),u=0;if(a.forEach(c=>{let d=c.split("___"),h=d[0],p=d.length>1&&d[1]?d[1]:"0";p&&h&&h.toLowerCase()==="tctl"&&(u=t.main=Math.round(parseInt(p,10)/100)/10),p&&(h===void 0||h&&h.toLowerCase().startsWith("core"))?t.cores.push(Math.round(parseInt(p,10)/100)/10):p&&h&&t.main===null&&(h.toLowerCase().indexOf("package")>=0||h.toLowerCase().indexOf("physical")>=0||h.toLowerCase()==="tccd1")&&(t.main=Math.round(parseInt(p,10)/100)/10)}),u&&t.main===null&&(t.main=u),t.cores.length>0){t.main===null&&(t.main=Math.round(t.cores.reduce((d,h)=>d+h,0)/t.cores.length));let c=Math.max.apply(Math,t.cores);t.max=c>t.main?c:t.main}if(t.main!==null){t.max===null&&(t.max=t.main),r&&r(t),e(t);return}Yn("sensors",function(c,d){if(!c){let h=d.toString().split(`
`),p=null,m=!0,y="";if(h.forEach(function(_){_.trim()===""?m=!0:m&&(_.trim().toLowerCase().startsWith("acpi")&&(y="acpi"),_.trim().toLowerCase().startsWith("pch")&&(y="pch"),_.trim().toLowerCase().startsWith("core")&&(y="core"),m=!1);let O=/[+-]([^°]*)/g,x=_.match(O),A=_.split(":")[0].toUpperCase();y==="acpi"?A.indexOf("TEMP")!==-1&&t.socket.push(parseFloat(x)):y==="pch"&&A.indexOf("TEMP")!==-1&&!t.chipset&&(t.chipset=parseFloat(x)),(A.indexOf("PHYSICAL")!==-1||A.indexOf("PACKAGE")!==-1)&&(t.main=parseFloat(x)),A.indexOf("CORE ")!==-1&&t.cores.push(parseFloat(x)),A.indexOf("TDIE")!==-1&&p===null&&(p=parseFloat(x))}),t.cores.length>0){t.main=Math.round(t.cores.reduce((O,x)=>O+x,0)/t.cores.length);let _=Math.max.apply(Math,t.cores);t.max=_>t.main?_:t.main}else t.main===null&&p!==null&&(t.main=p,t.max=p);if(t.main!==null||t.max!==null){r&&r(t),e(t);return}}Iw.stat("/sys/class/thermal/thermal_zone0/temp",function(h){h===null?Iw.readFile("/sys/class/thermal/thermal_zone0/temp",function(p,m){if(!p){let y=m.toString().split(`
`);y.length>0&&(t.main=parseFloat(y[0])/1e3,t.max=t.main)}r&&r(t),e(t)}):Yn("/opt/vc/bin/vcgencmd measure_temp",function(p,m){if(!p){let y=m.toString().split(`
`);y.length>0&&y[0].indexOf("=")&&(t.main=parseFloat(y[0].split("=")[1]),t.max=t.main)}r&&r(t),e(t)})})})})}catch{r&&r(t),e(t)}}if((Aw||Mw||kw)&&Yn("sysctl dev.cpu | grep temp",function(n,i){if(!n){let s=i.toString().split(`
`),o=0;s.forEach(function(a){let u=a.split(":");if(u.length>1){let c=parseFloat(u[1].replace(",","."));c>t.max&&(t.max=c),o=o+c,t.cores.push(c)}}),t.cores.length&&(t.main=Math.round(o/t.cores.length*100)/100)}r&&r(t),e(t)}),Cw){let n=null;try{n=require("osx-temperature-sensor")}catch{n=null}if(n&&(t=n.cpuTemperature(),t.main&&(t.main=Math.round(t.main*100)/100),t.max&&(t.max=Math.round(t.max*100)/100),t.cores&&t.cores.length))for(let i=0;i<t.cores.length;i++)t.cores[i]=Math.round(t.cores[i]*100)/100;r&&r(t),e(t)}if(Pw&&(r&&r(t),e(t)),Tw)try{de.powerShell('Get-CimInstance MSAcpi_ThermalZoneTemperature -Namespace "root/wmi" | Select CurrentTemperature').then((n,i)=>{if(!i){let s=0;n.split(`\r
`).filter(a=>a.trim()!=="").filter((a,u)=>u>0).forEach(function(a){let u=(parseInt(a,10)-2732)/10;isNaN(u)||(s=s+u,u>t.max&&(t.max=u),t.cores.push(u))}),t.cores.length&&(t.main=s/t.cores.length)}r&&r(t),e(t)})}catch{r&&r(t),e(t)}})})}gl.cpuTemperature=p2e;function qW(r){return new Promise(e=>{process.nextTick(()=>{let t="";if(Tw)try{Yn('reg query "HKEY_LOCAL_MACHINE\\HARDWARE\\DESCRIPTION\\System\\CentralProcessor\\0" /v FeatureSet',de.execOptsWin,function(n,i){if(!n){let s=i.split("0x").pop().trim(),o=parseInt(s,16).toString(2),a="0".repeat(32-o.length)+o,u=["fpu","vme","de","pse","tsc","msr","pae","mce","cx8","apic","","sep","mtrr","pge","mca","cmov","pat","pse-36","psn","clfsh","","ds","acpi","mmx","fxsr","sse","sse2","ss","htt","tm","ia64","pbe"];for(let c=0;c<u.length;c++)a[c]==="1"&&u[c]!==""&&(t+=" "+u[c]);t=t.trim().toLowerCase()}r&&r(t),e(t)})}catch{r&&r(t),e(t)}if(hm)try{Yn("export LC_ALL=C; lscpu; unset LC_ALL",function(n,i){n||i.toString().split(`
`).forEach(function(o){o.split(":")[0].toUpperCase().indexOf("FLAGS")!==-1&&(t=o.split(":")[1].trim().toLowerCase())}),t?(r&&r(t),e(t)):Iw.readFile("/proc/cpuinfo",function(s,o){if(!s){let a=o.toString().split(`
`);t=de.getValue(a,"features",":",!0).toLowerCase()}r&&r(t),e(t)})})}catch{r&&r(t),e(t)}(Aw||Mw||kw)&&Yn("export LC_ALL=C; dmidecode -t 4 2>/dev/null; unset LC_ALL",function(n,i){let s=[];if(!n){let o=i.toString().split("	Flags:");(o.length>1?o[1].split("	Version:")[0].split(`
`):[]).forEach(function(u){let c=(u.indexOf("(")?u.split("(")[0].toLowerCase():"").trim().replace(/\t/g,"");c&&s.push(c)})}t=s.join(" ").trim().toLowerCase(),r&&r(t),e(t)}),Cw&&Yn("sysctl machdep.cpu.features",function(n,i){if(!n){let s=i.toString().split(`
`);s.length>0&&s[0].indexOf("machdep.cpu.features:")!==-1&&(t=s[0].split(":")[1].trim().toLowerCase())}r&&r(t),e(t)}),Pw&&(r&&r(t),e(t))})})}gl.cpuFlags=qW;function FW(r){return new Promise(e=>{process.nextTick(()=>{let t={l1d:null,l1i:null,l2:null,l3:null};if(hm)try{Yn("export LC_ALL=C; lscpu; unset LC_ALL",function(n,i){n||i.toString().split(`
`).forEach(function(o){let a=o.split(":");a[0].toUpperCase().indexOf("L1D CACHE")!==-1&&(t.l1d=parseInt(a[1].trim())*(a[1].indexOf("M")!==-1?1024*1024:a[1].indexOf("K")!==-1?1024:1)),a[0].toUpperCase().indexOf("L1I CACHE")!==-1&&(t.l1i=parseInt(a[1].trim())*(a[1].indexOf("M")!==-1?1024*1024:a[1].indexOf("K")!==-1?1024:1)),a[0].toUpperCase().indexOf("L2 CACHE")!==-1&&(t.l2=parseInt(a[1].trim())*(a[1].indexOf("M")!==-1?1024*1024:a[1].indexOf("K")!==-1?1024:1)),a[0].toUpperCase().indexOf("L3 CACHE")!==-1&&(t.l3=parseInt(a[1].trim())*(a[1].indexOf("M")!==-1?1024*1024:a[1].indexOf("K")!==-1?1024:1))}),r&&r(t),e(t)})}catch{r&&r(t),e(t)}if((Aw||Mw||kw)&&Yn("export LC_ALL=C; dmidecode -t 7 2>/dev/null; unset LC_ALL",function(n,i){let s=[];n||(s=i.toString().split("Cache Information"),s.shift());for(let o=0;o<s.length;o++){let a=s[o].split(`
`),u=de.getValue(a,"Socket Designation").toLowerCase().replace(" ","-").split("-");u=u.length?u[0]:"";let c=de.getValue(a,"Installed Size").split(" "),d=parseInt(c[0],10),h=c.length>1?c[1]:"kb";d=d*(h==="kb"?1024:h==="mb"?1024*1024:h==="gb"?1024*1024*1024:1),u&&(u==="l1"?(t.cache[u+"d"]=d/2,t.cache[u+"i"]=d/2):t.cache[u]=d)}r&&r(t),e(t)}),Cw&&Yn("sysctl hw.l1icachesize hw.l1dcachesize hw.l2cachesize hw.l3cachesize",function(n,i){n||i.toString().split(`
`).forEach(function(o){let a=o.split(":");a[0].toLowerCase().indexOf("hw.l1icachesize")!==-1&&(t.l1d=parseInt(a[1].trim())*(a[1].indexOf("K")!==-1?1024:1)),a[0].toLowerCase().indexOf("hw.l1dcachesize")!==-1&&(t.l1i=parseInt(a[1].trim())*(a[1].indexOf("K")!==-1?1024:1)),a[0].toLowerCase().indexOf("hw.l2cachesize")!==-1&&(t.l2=parseInt(a[1].trim())*(a[1].indexOf("K")!==-1?1024:1)),a[0].toLowerCase().indexOf("hw.l3cachesize")!==-1&&(t.l3=parseInt(a[1].trim())*(a[1].indexOf("K")!==-1?1024:1))}),r&&r(t),e(t)}),Pw&&(r&&r(t),e(t)),Tw)try{let n=[];n.push(de.powerShell("Get-CimInstance Win32_processor | select L2CacheSize, L3CacheSize | fl")),n.push(de.powerShell("Get-CimInstance Win32_CacheMemory | select CacheType,InstalledSize,Level | fl")),Promise.all(n).then(i=>{t=VW(i[0],i[1]),r&&r(t),e(t)})}catch{r&&r(t),e(t)}})})}function VW(r,e){let t={l1d:null,l1i:null,l2:null,l3:null},n=r.split(`\r
`);t.l1d=0,t.l1i=0,t.l2=de.getValue(n,"l2cachesize",":"),t.l3=de.getValue(n,"l3cachesize",":"),t.l2?t.l2=parseInt(t.l2,10)*1024:t.l2=0,t.l3?t.l3=parseInt(t.l3,10)*1024:t.l3=0;let i=e.split(/\n\s*\n/),s=0,o=0,a=0;return i.forEach(function(u){let c=u.split(`\r
`),d=de.getValue(c,"CacheType"),h=de.getValue(c,"Level"),p=de.getValue(c,"InstalledSize");h==="3"&&d==="3"&&(t.l1i=t.l1i+parseInt(p,10)*1024),h==="3"&&d==="4"&&(t.l1d=t.l1d+parseInt(p,10)*1024),h==="3"&&d==="5"&&(s=parseInt(p,10)/2,o=parseInt(p,10)/2),h==="4"&&d==="5"&&(a=a+parseInt(p,10)*1024)}),!t.l1i&&!t.l1d&&(t.l1i=s,t.l1d=o),a&&(t.l2=a),t}gl.cpuCache=FW;function m2e(){return new Promise(r=>{process.nextTick(()=>{let e=Bs.loadavg().map(function(s){return s/de.cores()}),t=parseFloat(Math.max.apply(Math,e).toFixed(2)),n={};if(Date.now()-lt.ms>=200){lt.ms=Date.now();let s=Bs.cpus().map(function(x){return x.times.steal=0,x.times.guest=0,x}),o=0,a=0,u=0,c=0,d=0,h=0,p=0,m=[];if(cT=s&&s.length?s.length:0,hm)try{let x=mT("cat /proc/stat 2>/dev/null | grep cpu").toString().split(`
`);if(x.length>1&&(x.shift(),x.length===s.length))for(let A=0;A<x.length;A++){let P=x[A].split(" ");if(P.length>=10){let q=parseFloat(P[8])||0,F=parseFloat(P[9])||0;s[A].times.steal=q,s[A].times.guest=F}}}catch{de.noop()}for(let x=0;x<cT;x++){let A=s[x].times;o+=A.user,a+=A.sys,u+=A.nice,d+=A.idle,c+=A.irq,h+=A.steal||0,p+=A.guest||0;let P=se&&se[x]&&se[x].totalTick?se[x].totalTick:0,q=se&&se[x]&&se[x].totalLoad?se[x].totalLoad:0,F=se&&se[x]&&se[x].user?se[x].user:0,z=se&&se[x]&&se[x].sys?se[x].sys:0,B=se&&se[x]&&se[x].nice?se[x].nice:0,G=se&&se[x]&&se[x].idle?se[x].idle:0,H=se&&se[x]&&se[x].irq?se[x].irq:0,N=se&&se[x]&&se[x].steal?se[x].steal:0,v=se&&se[x]&&se[x].guest?se[x].guest:0;se[x]=A,se[x].totalTick=se[x].user+se[x].sys+se[x].nice+se[x].irq+se[x].steal+se[x].guest+se[x].idle,se[x].totalLoad=se[x].user+se[x].sys+se[x].nice+se[x].irq+se[x].steal+se[x].guest,se[x].currentTick=se[x].totalTick-P,se[x].load=se[x].totalLoad-q,se[x].loadUser=se[x].user-F,se[x].loadSystem=se[x].sys-z,se[x].loadNice=se[x].nice-B,se[x].loadIdle=se[x].idle-G,se[x].loadIrq=se[x].irq-H,se[x].loadSteal=se[x].steal-N,se[x].loadGuest=se[x].guest-v,m[x]={},m[x].load=se[x].load/se[x].currentTick*100,m[x].loadUser=se[x].loadUser/se[x].currentTick*100,m[x].loadSystem=se[x].loadSystem/se[x].currentTick*100,m[x].loadNice=se[x].loadNice/se[x].currentTick*100,m[x].loadIdle=se[x].loadIdle/se[x].currentTick*100,m[x].loadIrq=se[x].loadIrq/se[x].currentTick*100,m[x].loadSteal=se[x].loadSteal/se[x].currentTick*100,m[x].loadGuest=se[x].loadGuest/se[x].currentTick*100,m[x].rawLoad=se[x].load,m[x].rawLoadUser=se[x].loadUser,m[x].rawLoadSystem=se[x].loadSystem,m[x].rawLoadNice=se[x].loadNice,m[x].rawLoadIdle=se[x].loadIdle,m[x].rawLoadIrq=se[x].loadIrq,m[x].rawLoadSteal=se[x].loadSteal,m[x].rawLoadGuest=se[x].loadGuest}let y=o+a+u+c+h+p+d,_=o+a+u+c+h+p,O=y-lt.tick;n={avgLoad:t,currentLoad:(_-lt.load)/O*100,currentLoadUser:(o-lt.user)/O*100,currentLoadSystem:(a-lt.system)/O*100,currentLoadNice:(u-lt.nice)/O*100,currentLoadIdle:(d-lt.idle)/O*100,currentLoadIrq:(c-lt.irq)/O*100,currentLoadSteal:(h-lt.steal)/O*100,currentLoadGuest:(p-lt.guest)/O*100,rawCurrentLoad:_-lt.load,rawCurrentLoadUser:o-lt.user,rawCurrentLoadSystem:a-lt.system,rawCurrentLoadNice:u-lt.nice,rawCurrentLoadIdle:d-lt.idle,rawCurrentLoadIrq:c-lt.irq,rawCurrentLoadSteal:h-lt.steal,rawCurrentLoadGuest:p-lt.guest,cpus:m},lt={user:o,nice:u,system:a,idle:d,irq:c,steal:h,guest:p,tick:y,load:_,ms:lt.ms,currentLoad:n.currentLoad,currentLoadUser:n.currentLoadUser,currentLoadSystem:n.currentLoadSystem,currentLoadNice:n.currentLoadNice,currentLoadIdle:n.currentLoadIdle,currentLoadIrq:n.currentLoadIrq,currentLoadSteal:n.currentLoadSteal,currentLoadGuest:n.currentLoadGuest,rawCurrentLoad:n.rawCurrentLoad,rawCurrentLoadUser:n.rawCurrentLoadUser,rawCurrentLoadSystem:n.rawCurrentLoadSystem,rawCurrentLoadNice:n.rawCurrentLoadNice,rawCurrentLoadIdle:n.rawCurrentLoadIdle,rawCurrentLoadIrq:n.rawCurrentLoadIrq,rawCurrentLoadSteal:n.rawCurrentLoadSteal,rawCurrentLoadGuest:n.rawCurrentLoadGuest}}else{let s=[];for(let o=0;o<cT;o++)s[o]={},s[o].load=se[o].load/se[o].currentTick*100,s[o].loadUser=se[o].loadUser/se[o].currentTick*100,s[o].loadSystem=se[o].loadSystem/se[o].currentTick*100,s[o].loadNice=se[o].loadNice/se[o].currentTick*100,s[o].loadIdle=se[o].loadIdle/se[o].currentTick*100,s[o].loadIrq=se[o].loadIrq/se[o].currentTick*100,s[o].rawLoad=se[o].load,s[o].rawLoadUser=se[o].loadUser,s[o].rawLoadSystem=se[o].loadSystem,s[o].rawLoadNice=se[o].loadNice,s[o].rawLoadIdle=se[o].loadIdle,s[o].rawLoadIrq=se[o].loadIrq,s[o].rawLoadSteal=se[o].loadSteal,s[o].rawLoadGuest=se[o].loadGuest;n={avgLoad:t,currentLoad:lt.currentLoad,currentLoadUser:lt.currentLoadUser,currentLoadSystem:lt.currentLoadSystem,currentLoadNice:lt.currentLoadNice,currentLoadIdle:lt.currentLoadIdle,currentLoadIrq:lt.currentLoadIrq,currentLoadSteal:lt.currentLoadSteal,currentLoadGuest:lt.currentLoadGuest,rawCurrentLoad:lt.rawCurrentLoad,rawCurrentLoadUser:lt.rawCurrentLoadUser,rawCurrentLoadSystem:lt.rawCurrentLoadSystem,rawCurrentLoadNice:lt.rawCurrentLoadNice,rawCurrentLoadIdle:lt.rawCurrentLoadIdle,rawCurrentLoadIrq:lt.rawCurrentLoadIrq,rawCurrentLoadSteal:lt.rawCurrentLoadSteal,rawCurrentLoadGuest:lt.rawCurrentLoadGuest,cpus:s}}r(n)})})}function g2e(r){return new Promise(e=>{process.nextTick(()=>{m2e().then(t=>{r&&r(t),e(t)})})})}gl.currentLoad=g2e;function y2e(){return new Promise(r=>{process.nextTick(()=>{let e=Bs.cpus(),t=0,n=0,i=0,s=0,o=0,a=0;if(e&&e.length){for(let c=0,d=e.length;c<d;c++){let h=e[c].times;t+=h.user,n+=h.sys,i+=h.nice,s+=h.irq,o+=h.idle}let u=o+s+i+n+t;a=(u-o)/u*100}r(a)})})}function v2e(r){return new Promise(e=>{process.nextTick(()=>{y2e().then(t=>{r&&r(t),e(t)})})})}gl.fullLoad=v2e});var ZW=E(gT=>{"use strict";var po=require("os"),pm=require("child_process").exec,Rw=require("child_process").execSync,ye=zr(),w2e=require("fs"),yl=process.platform,$W=yl==="linux"||yl==="android",WW=yl==="darwin",zW=yl==="win32",HW=yl==="freebsd",YW=yl==="openbsd",JW=yl==="netbsd",QW=yl==="sunos",UW={"0x014F":"Transcend Information","0x2C00":"Micron Technology Inc.","0x802C":"Micron Technology Inc.","0x80AD":"Hynix Semiconductor Inc.","0x80CE":"Samsung Electronics Inc.","0xAD00":"Hynix Semiconductor Inc.","0xCE00":"Samsung Electronics Inc.","0x02FE":"Elpida","0x5105":"Qimonda AG i. In.","0x8551":"Qimonda AG i. In.","0x859B":"Crucial","0x04CD":"G-Skill"},GW={"017A":"Apacer","0198":"HyperX","029E":"Corsair","04CB":"A-DATA","04CD":"G-Skill","059B":"Crucial","00CE":"Samsung",1315:"Crutial","014F":"Transcend Information","2C00":"Micron Technology Inc.","802C":"Micron Technology Inc.","80AD":"Hynix Semiconductor Inc.","80CE":"Samsung Electronics Inc.",AD00:"Hynix Semiconductor Inc.",CE00:"Samsung Electronics Inc.","02FE":"Elpida",5105:"Qimonda AG i. In.",8551:"Qimonda AG i. In.","859B":"Crucial"};function b2e(r){return new Promise(e=>{process.nextTick(()=>{let t={total:po.totalmem(),free:po.freemem(),used:po.totalmem()-po.freemem(),active:po.totalmem()-po.freemem(),available:po.freemem(),buffers:0,cached:0,slab:0,buffcache:0,swaptotal:0,swapused:0,swapfree:0,writeback:null,dirty:null};if($W)try{w2e.readFile("/proc/meminfo",function(n,i){if(!n){let s=i.toString().split(`
`);t.total=parseInt(ye.getValue(s,"memtotal"),10),t.total=t.total?t.total*1024:po.totalmem(),t.free=parseInt(ye.getValue(s,"memfree"),10),t.free=t.free?t.free*1024:po.freemem(),t.used=t.total-t.free,t.buffers=parseInt(ye.getValue(s,"buffers"),10),t.buffers=t.buffers?t.buffers*1024:0,t.cached=parseInt(ye.getValue(s,"cached"),10),t.cached=t.cached?t.cached*1024:0,t.slab=parseInt(ye.getValue(s,"slab"),10),t.slab=t.slab?t.slab*1024:0,t.buffcache=t.buffers+t.cached+t.slab;let o=parseInt(ye.getValue(s,"memavailable"),10);t.available=o?o*1024:t.free+t.buffcache,t.active=t.total-t.available,t.swaptotal=parseInt(ye.getValue(s,"swaptotal"),10),t.swaptotal=t.swaptotal?t.swaptotal*1024:0,t.swapfree=parseInt(ye.getValue(s,"swapfree"),10),t.swapfree=t.swapfree?t.swapfree*1024:0,t.swapused=t.swaptotal-t.swapfree,t.writeback=parseInt(ye.getValue(s,"writeback"),10),t.writeback=t.writeback?t.writeback*1024:0,t.dirty=parseInt(ye.getValue(s,"dirty"),10),t.dirty=t.dirty?t.dirty*1024:0}r&&r(t),e(t)})}catch{r&&r(t),e(t)}if(HW||YW||JW)try{pm("/sbin/sysctl hw.realmem hw.physmem vm.stats.vm.v_page_count vm.stats.vm.v_wire_count vm.stats.vm.v_active_count vm.stats.vm.v_inactive_count vm.stats.vm.v_cache_count vm.stats.vm.v_free_count vm.stats.vm.v_page_size",function(n,i){if(!n){let s=i.toString().split(`
`),o=parseInt(ye.getValue(s,"vm.stats.vm.v_page_size"),10),a=parseInt(ye.getValue(s,"vm.stats.vm.v_inactive_count"),10)*o,u=parseInt(ye.getValue(s,"vm.stats.vm.v_cache_count"),10)*o;t.total=parseInt(ye.getValue(s,"hw.realmem"),10),isNaN(t.total)&&(t.total=parseInt(ye.getValue(s,"hw.physmem"),10)),t.free=parseInt(ye.getValue(s,"vm.stats.vm.v_free_count"),10)*o,t.buffcache=a+u,t.available=t.buffcache+t.free,t.active=t.total-t.free-t.buffcache,t.swaptotal=0,t.swapfree=0,t.swapused=0}r&&r(t),e(t)})}catch{r&&r(t),e(t)}if(QW&&(r&&r(t),e(t)),WW){let n=4096;try{n=ye.toInt(Rw("sysctl -n vm.pagesize").toString())||n}catch{ye.noop()}try{pm('vm_stat 2>/dev/null | grep "Pages active"',function(i,s){if(!i){let o=s.toString().split(`
`);t.active=parseInt(o[0].split(":")[1],10)*n,t.buffcache=t.used-t.active,t.available=t.free+t.buffcache}pm("sysctl -n vm.swapusage 2>/dev/null",function(o,a){if(!o){let u=a.toString().split(`
`);u.length>0&&u[0].replace(/,/g,".").replace(/M/g,"").trim().split("  ").forEach(h=>{h.toLowerCase().indexOf("total")!==-1&&(t.swaptotal=parseFloat(h.split("=")[1].trim())*1024*1024),h.toLowerCase().indexOf("used")!==-1&&(t.swapused=parseFloat(h.split("=")[1].trim())*1024*1024),h.toLowerCase().indexOf("free")!==-1&&(t.swapfree=parseFloat(h.split("=")[1].trim())*1024*1024)})}r&&r(t),e(t)})})}catch{r&&r(t),e(t)}}if(zW){let n=0,i=0;try{ye.powerShell("Get-CimInstance Win32_PageFileUsage | Select AllocatedBaseSize, CurrentUsage").then((s,o)=>{o||s.split(`\r
`).filter(u=>u.trim()!=="").filter((u,c)=>c>0).forEach(function(u){u!==""&&(u=u.trim().split(/\s\s+/),n=n+(parseInt(u[0],10)||0),i=i+(parseInt(u[1],10)||0))}),t.swaptotal=n*1024*1024,t.swapused=i*1024*1024,t.swapfree=t.swaptotal-t.swapused,r&&r(t),e(t)})}catch{r&&r(t),e(t)}}})})}gT.mem=b2e;function S2e(r){function e(n){return{}.hasOwnProperty.call(UW,n)?UW[n]:n}function t(n){let i=n.replace("0x","").toUpperCase();return i.length===4&&{}.hasOwnProperty.call(GW,i)?GW[i]:n}return new Promise(n=>{process.nextTick(()=>{let i=[];if(($W||HW||YW||JW)&&pm('export LC_ALL=C; dmidecode -t memory 2>/dev/null | grep -iE "Size:|Type|Speed|Manufacturer|Form Factor|Locator|Memory Device|Serial Number|Voltage|Part Number"; unset LC_ALL',function(s,o){if(!s){let a=o.toString().split("Memory Device");a.shift(),a.forEach(function(u){let c=u.split(`
`),d=ye.getValue(c,"Size"),h=d.indexOf("GB")>=0?parseInt(d,10)*1024*1024*1024:parseInt(d,10)*1024*1024,p=ye.getValue(c,"Bank Locator");if(p.toLowerCase().indexOf("bad")>=0&&(p=""),parseInt(ye.getValue(c,"Size"),10)>0){let m=ye.toInt(ye.getValue(c,"Total Width")),y=ye.toInt(ye.getValue(c,"Data Width"));i.push({size:h,bank:p,type:ye.getValue(c,"Type:"),ecc:y&&m?m>y:!1,clockSpeed:ye.getValue(c,"Configured Clock Speed:")?parseInt(ye.getValue(c,"Configured Clock Speed:"),10):ye.getValue(c,"Speed:")?parseInt(ye.getValue(c,"Speed:"),10):null,formFactor:ye.getValue(c,"Form Factor:"),manufacturer:t(ye.getValue(c,"Manufacturer:")),partNum:ye.getValue(c,"Part Number:"),serialNum:ye.getValue(c,"Serial Number:"),voltageConfigured:parseFloat(ye.getValue(c,"Configured Voltage:"))||null,voltageMin:parseFloat(ye.getValue(c,"Minimum Voltage:"))||null,voltageMax:parseFloat(ye.getValue(c,"Maximum Voltage:"))||null})}else i.push({size:0,bank:p,type:"Empty",ecc:null,clockSpeed:0,formFactor:ye.getValue(c,"Form Factor:"),partNum:"",serialNum:"",voltageConfigured:null,voltageMin:null,voltageMax:null})})}if(!i.length){i.push({size:po.totalmem(),bank:"",type:"",ecc:null,clockSpeed:0,formFactor:"",partNum:"",serialNum:"",voltageConfigured:null,voltageMin:null,voltageMax:null});try{let a=Rw("cat /proc/cpuinfo 2>/dev/null"),u=a.toString().split(`
`),c=ye.getValue(u,"hardware",":",!0).toUpperCase(),d=ye.getValue(u,"revision",":",!0).toLowerCase();if(c==="BCM2835"||c==="BCM2708"||c==="BCM2709"||c==="BCM2835"||c==="BCM2837"){let h={0:400,1:450,2:450,3:3200};i[0].type="LPDDR2",i[0].type=d&&d[2]&&d[2]==="3"?"LPDDR4":i[0].type,i[0].ecc=!1,i[0].clockSpeed=d&&d[2]&&h[d[2]]||400,i[0].clockSpeed=d&&d[4]&&d[4]==="d"?500:i[0].clockSpeed,i[0].formFactor="SoC",a=Rw("vcgencmd get_config sdram_freq 2>/dev/null"),u=a.toString().split(`
`);let p=parseInt(ye.getValue(u,"sdram_freq","=",!0),10)||0;p&&(i[0].clockSpeed=p),a=Rw("vcgencmd measure_volts sdram_p 2>/dev/null"),u=a.toString().split(`
`);let m=parseFloat(ye.getValue(u,"volt","=",!0))||0;m&&(i[0].voltageConfigured=m,i[0].voltageMin=m,i[0].voltageMax=m)}}catch{ye.noop()}}r&&r(i),n(i)}),WW&&pm("system_profiler SPMemoryDataType",function(s,o){if(!s){let a=o.toString().split(`
`),u=ye.getValue(a,"ecc",":",!0).toLowerCase(),c=o.toString().split("        BANK "),d=!0;c.length===1&&(c=o.toString().split("        DIMM"),d=!1),c.shift(),c.forEach(function(h){let p=h.split(`
`),m=(d?"BANK ":"DIMM")+p[0].trim().split("/")[0],y=parseInt(ye.getValue(p,"          Size"));y?i.push({size:y*1024*1024*1024,bank:m,type:ye.getValue(p,"          Type:"),ecc:u?u==="enabled":null,clockSpeed:parseInt(ye.getValue(p,"          Speed:"),10),formFactor:"",manufacturer:e(ye.getValue(p,"          Manufacturer:")),partNum:ye.getValue(p,"          Part Number:"),serialNum:ye.getValue(p,"          Serial Number:"),voltageConfigured:null,voltageMin:null,voltageMax:null}):i.push({size:0,bank:m,type:"Empty",ecc:null,clockSpeed:0,formFactor:"",manufacturer:"",partNum:"",serialNum:"",voltageConfigured:null,voltageMin:null,voltageMax:null})})}if(!i.length){let a=o.toString().split(`
`),u=parseInt(ye.getValue(a,"      Memory:")),c=ye.getValue(a,"      Type:");u&&c&&i.push({size:u*1024*1024*1024,bank:"0",type:c,ecc:!1,clockSpeed:0,formFactor:"",manufacturer:"Apple",partNum:"",serialNum:"",voltageConfigured:null,voltageMin:null,voltageMax:null})}r&&r(i),n(i)}),QW&&(r&&r(i),n(i)),zW){let s="Unknown|Other|DRAM|Synchronous DRAM|Cache DRAM|EDO|EDRAM|VRAM|SRAM|RAM|ROM|FLASH|EEPROM|FEPROM|EPROM|CDRAM|3DRAM|SDRAM|SGRAM|RDRAM|DDR|DDR2|DDR2 FB-DIMM|Reserved|DDR3|FBD2|DDR4|LPDDR|LPDDR2|LPDDR3|LPDDR4|Logical non-volatile device|HBM|HBM2|DDR5|LPDDR5".split("|"),o="Unknown|Other|SIP|DIP|ZIP|SOJ|Proprietary|SIMM|DIMM|TSOP|PGA|RIMM|SODIMM|SRIMM|SMD|SSMP|QFP|TQFP|SOIC|LCC|PLCC|BGA|FPBGA|LGA".split("|");try{ye.powerShell("Get-CimInstance Win32_PhysicalMemory | select DataWidth,TotalWidth,Capacity,BankLabel,MemoryType,SMBIOSMemoryType,ConfiguredClockSpeed,FormFactor,Manufacturer,PartNumber,SerialNumber,ConfiguredVoltage,MinVoltage,MaxVoltage | fl").then((a,u)=>{if(!u){let c=a.toString().split(/\n\s*\n/);c.shift(),c.forEach(function(d){let h=d.split(`\r
`),p=ye.toInt(ye.getValue(h,"DataWidth",":")),m=ye.toInt(ye.getValue(h,"TotalWidth",":")),y=parseInt(ye.getValue(h,"Capacity",":"),10)||0;y&&i.push({size:y,bank:ye.getValue(h,"BankLabel",":"),type:s[parseInt(ye.getValue(h,"MemoryType",":"),10)||parseInt(ye.getValue(h,"SMBIOSMemoryType",":"),10)],ecc:p&&m?m>p:!1,clockSpeed:parseInt(ye.getValue(h,"ConfiguredClockSpeed",":"),10)||parseInt(ye.getValue(h,"Speed",":"),10)||0,formFactor:o[parseInt(ye.getValue(h,"FormFactor",":"),10)||0],manufacturer:ye.getValue(h,"Manufacturer",":"),partNum:ye.getValue(h,"PartNumber",":"),serialNum:ye.getValue(h,"SerialNumber",":"),voltageConfigured:(parseInt(ye.getValue(h,"ConfiguredVoltage",":"),10)||0)/1e3,voltageMin:(parseInt(ye.getValue(h,"MinVoltage",":"),10)||0)/1e3,voltageMax:(parseInt(ye.getValue(h,"MaxVoltage",":"),10)||0)/1e3})})}r&&r(i),n(i)})}catch{r&&r(i),n(i)}}})})}gT.memLayout=S2e});var t9=E((DNe,e9)=>{"use strict";var XW=require("child_process").exec,Ed=require("fs"),ze=zr(),vl=process.platform,_2e=vl==="linux"||vl==="android",x2e=vl==="darwin",E2e=vl==="win32",O2e=vl==="freebsd",I2e=vl==="openbsd",C2e=vl==="netbsd",T2e=vl==="sunos";function A2e(r,e,t){let n={},i=ze.getValue(r,"BatteryStatus",":").trim();if(i>=0){let s=i?parseInt(i):0;n.status=s,n.hasBattery=!0,n.maxCapacity=t||parseInt(ze.getValue(r,"DesignCapacity",":")||0),n.designedCapacity=parseInt(ze.getValue(r,"DesignCapacity",":")||e),n.voltage=parseInt(ze.getValue(r,"DesignVoltage",":")||0)/1e3,n.capacityUnit="mWh",n.percent=parseInt(ze.getValue(r,"EstimatedChargeRemaining",":")||0),n.currentCapacity=parseInt(n.maxCapacity*n.percent/100),n.isCharging=s>=6&&s<=9||s===11||s!==3&&s!==1&&n.percent<100,n.acConnected=n.isCharging||s===2,n.model=ze.getValue(r,"DeviceID",":")}else n.status=-1;return n}e9.exports=function(r){return new Promise(e=>{process.nextTick(()=>{let t={hasBattery:!1,cycleCount:0,isCharging:!1,designedCapacity:0,maxCapacity:0,currentCapacity:0,voltage:0,capacityUnit:"",percent:0,timeRemaining:null,acConnected:!0,type:"",model:"",manufacturer:"",serial:""};if(_2e){let n="";Ed.existsSync("/sys/class/power_supply/BAT1/uevent")?n="/sys/class/power_supply/BAT1/":Ed.existsSync("/sys/class/power_supply/BAT0/uevent")&&(n="/sys/class/power_supply/BAT0/");let i=!1,s="";Ed.existsSync("/sys/class/power_supply/AC/online")?s="/sys/class/power_supply/AC/online":Ed.existsSync("/sys/class/power_supply/AC0/online")&&(s="/sys/class/power_supply/AC0/online"),s&&(i=Ed.readFileSync(s).toString().trim()==="1"),n?Ed.readFile(n+"uevent",function(o,a){if(o)r&&r(t),e(t);else{let u=a.toString().split(`
`);t.isCharging=ze.getValue(u,"POWER_SUPPLY_STATUS","=").toLowerCase()==="charging",t.acConnected=i||t.isCharging,t.voltage=parseInt("0"+ze.getValue(u,"POWER_SUPPLY_VOLTAGE_NOW","="),10)/1e6,t.capacityUnit=t.voltage?"mWh":"mAh",t.cycleCount=parseInt("0"+ze.getValue(u,"POWER_SUPPLY_CYCLE_COUNT","="),10),t.maxCapacity=Math.round(parseInt("0"+ze.getValue(u,"POWER_SUPPLY_CHARGE_FULL","=",!0,!0),10)/1e3*(t.voltage||1));let c=parseInt("0"+ze.getValue(u,"POWER_SUPPLY_VOLTAGE_MIN_DESIGN","="),10)/1e6;t.designedCapacity=Math.round(parseInt("0"+ze.getValue(u,"POWER_SUPPLY_CHARGE_FULL_DESIGN","=",!0,!0),10)/1e3*(c||t.voltage||1)),t.currentCapacity=Math.round(parseInt("0"+ze.getValue(u,"POWER_SUPPLY_CHARGE_NOW","="),10)/1e3*(t.voltage||1)),t.maxCapacity||(t.maxCapacity=parseInt("0"+ze.getValue(u,"POWER_SUPPLY_ENERGY_FULL","=",!0,!0),10)/1e3,t.designedCapacity=parseInt("0"+ze.getValue(u,"POWER_SUPPLY_ENERGY_FULL_DESIGN","=",!0,!0),10)/1e3|t.maxCapacity,t.currentCapacity=parseInt("0"+ze.getValue(u,"POWER_SUPPLY_ENERGY_NOW","="),10)/1e3);let d=ze.getValue(u,"POWER_SUPPLY_CAPACITY","="),h=parseInt("0"+ze.getValue(u,"POWER_SUPPLY_ENERGY_NOW","="),10),p=parseInt("0"+ze.getValue(u,"POWER_SUPPLY_POWER_NOW","="),10),m=parseInt("0"+ze.getValue(u,"POWER_SUPPLY_CURRENT_NOW","="),10),y=parseInt("0"+ze.getValue(u,"POWER_SUPPLY_CHARGE_NOW","="),10);t.percent=parseInt("0"+d,10),t.maxCapacity&&t.currentCapacity&&(t.hasBattery=!0,d||(t.percent=100*t.currentCapacity/t.maxCapacity)),t.isCharging&&(t.hasBattery=!0),h&&p?t.timeRemaining=Math.floor(h/p*60):m&&y?t.timeRemaining=Math.floor(y/m*60):m&&t.currentCapacity&&(t.timeRemaining=Math.floor(t.currentCapacity/m*60)),t.type=ze.getValue(u,"POWER_SUPPLY_TECHNOLOGY","="),t.model=ze.getValue(u,"POWER_SUPPLY_MODEL_NAME","="),t.manufacturer=ze.getValue(u,"POWER_SUPPLY_MANUFACTURER","="),t.serial=ze.getValue(u,"POWER_SUPPLY_SERIAL_NUMBER","="),r&&r(t),e(t)}}):(r&&r(t),e(t))}if((O2e||I2e||C2e)&&XW("sysctl -i hw.acpi.battery hw.acpi.acline",function(n,i){let s=i.toString().split(`
`),o=parseInt("0"+ze.getValue(s,"hw.acpi.battery.units"),10),a=parseInt("0"+ze.getValue(s,"hw.acpi.battery.life"),10);t.hasBattery=o>0,t.cycleCount=null,t.isCharging=ze.getValue(s,"hw.acpi.acline")!=="1",t.acConnected=t.isCharging,t.maxCapacity=null,t.currentCapacity=null,t.capacityUnit="unknown",t.percent=o?a:null,r&&r(t),e(t)}),x2e&&XW('ioreg -n AppleSmartBattery -r | egrep "CycleCount|IsCharging|DesignCapacity|MaxCapacity|CurrentCapacity|BatterySerialNumber|TimeRemaining|Voltage"; pmset -g batt | grep %',function(n,i){if(i){let s=i.toString().replace(/ +/g,"").replace(/"+/g,"").replace(/-/g,"").split(`
`);t.cycleCount=parseInt("0"+ze.getValue(s,"cyclecount","="),10),t.voltage=parseInt("0"+ze.getValue(s,"voltage","="),10)/1e3,t.capacityUnit=t.voltage?"mWh":"mAh",t.maxCapacity=Math.round(parseInt("0"+ze.getValue(s,"applerawmaxcapacity","="),10)*(t.voltage||1)),t.currentCapacity=Math.round(parseInt("0"+ze.getValue(s,"applerawcurrentcapacity","="),10)*(t.voltage||1)),t.designedCapacity=Math.round(parseInt("0"+ze.getValue(s,"DesignCapacity","="),10)*(t.voltage||1)),t.manufacturer="Apple",t.serial=ze.getValue(s,"BatterySerialNumber","=");let o=null,u=ze.getValue(s,"internal","Battery").split(";");if(u&&u[0]){let c=u[0].split("	");c&&c[1]&&(o=parseFloat(c[1].trim().replace(/%/g,"")))}u&&u[1]?(t.isCharging=u[1].trim()==="charging",t.acConnected=u[1].trim()!=="discharging"):(t.isCharging=ze.getValue(s,"ischarging","=").toLowerCase()==="yes",t.acConnected=t.isCharging),t.maxCapacity&&t.currentCapacity&&(t.hasBattery=!0,t.type="Li-ion",t.percent=o!==null?o:Math.round(100*t.currentCapacity/t.maxCapacity),t.isCharging||(t.timeRemaining=parseInt("0"+ze.getValue(s,"TimeRemaining","="),10)))}r&&r(t),e(t)}),T2e&&(r&&r(t),e(t)),E2e)try{let n=[];n.push(ze.powerShell("Get-CimInstance Win32_Battery | select BatteryStatus, DesignCapacity, DesignVoltage, EstimatedChargeRemaining, DeviceID | fl")),n.push(ze.powerShell("(Get-CimInstance -Class BatteryStaticData -Namespace ROOT/WMI).DesignedCapacity")),n.push(ze.powerShell("(Get-CimInstance -Class BatteryFullChargedCapacity -Namespace ROOT/WMI).FullChargedCapacity")),ze.promiseAll(n).then(i=>{if(i){let s=i.results[0].split(/\n\s*\n/),o=[],a=d=>/\S/.test(d);for(let d=0;d<s.length;d++)a(s[d])&&(!o.length||!a(s[d-1]))&&o.push([]),a(s[d])&&o[o.length-1].push(s[d]);let u=i.results[1].split(`\r
`).filter(d=>d),c=i.results[2].split(`\r
`).filter(d=>d);if(o.length){let d=!1,h=[];for(let p=0;p<o.length;p++){let m=o[p][0].split(`\r
`),y=u&&u.length>=p+1&&u[p]?ze.toInt(u[p]):0,_=c&&c.length>=p+1&&c[p]?ze.toInt(c[p]):0,O=A2e(m,y,_);!d&&O.status>0&&O.status!==10?(t.hasBattery=O.hasBattery,t.maxCapacity=O.maxCapacity,t.designedCapacity=O.designedCapacity,t.voltage=O.voltage,t.capacityUnit=O.capacityUnit,t.percent=O.percent,t.currentCapacity=O.currentCapacity,t.isCharging=O.isCharging,t.acConnected=O.acConnected,t.model=O.model,d=!0):O.status!==-1&&h.push({hasBattery:O.hasBattery,maxCapacity:O.maxCapacity,designedCapacity:O.designedCapacity,voltage:O.voltage,capacityUnit:O.capacityUnit,percent:O.percent,currentCapacity:O.currentCapacity,isCharging:O.isCharging,timeRemaining:null,acConnected:O.acConnected,model:O.model,type:"",manufacturer:"",serial:""})}!d&&h.length&&(t=h[0],h.shift()),h.length&&(t.additionalBatteries=h)}}r&&r(t),e(t)})}catch{r&&r(t),e(t)}})})}});var o9=E(s9=>{"use strict";var Lw=require("fs"),Od=require("child_process").exec,yT=require("child_process").execSync,we=zr(),wl=process.platform,mm="",vT=wl==="linux"||wl==="android",M2e=wl==="darwin",r9=wl==="win32",k2e=wl==="freebsd",P2e=wl==="openbsd",R2e=wl==="netbsd",L2e=wl==="sunos",gm=0,ym=0,Dw=0,Nw=0,n9={"-2":"UNINITIALIZED","-1":"OTHER",0:"HD15",1:"SVIDEO",2:"Composite video",3:"Component video",4:"DVI",5:"HDMI",6:"LVDS",8:"D_JPN",9:"SDI",10:"DP",11:"DP embedded",12:"UDI",13:"UDI embedded",14:"SDTVDONGLE",15:"MIRACAST","2147483648":"INTERNAL"};function i9(r){let e=[{pattern:"^LG.+",manufacturer:"LG"},{pattern:"^BENQ.+",manufacturer:"BenQ"},{pattern:"^ASUS.+",manufacturer:"Asus"},{pattern:"^DELL.+",manufacturer:"Dell"},{pattern:"^SAMSUNG.+",manufacturer:"Samsung"},{pattern:"^VIEWSON.+",manufacturer:"ViewSonic"},{pattern:"^SONY.+",manufacturer:"Sony"},{pattern:"^ACER.+",manufacturer:"Acer"},{pattern:"^AOC.+",manufacturer:"AOC Monitors"},{pattern:"^HP.+",manufacturer:"HP"},{pattern:"^EIZO.?",manufacturer:"Eizo"},{pattern:"^PHILIPS.?",manufacturer:"Philips"},{pattern:"^IIYAMA.?",manufacturer:"Iiyama"},{pattern:"^SHARP.?",manufacturer:"Sharp"},{pattern:"^NEC.?",manufacturer:"NEC"},{pattern:"^LENOVO.?",manufacturer:"Lenovo"},{pattern:"COMPAQ.?",manufacturer:"Compaq"},{pattern:"APPLE.?",manufacturer:"Apple"},{pattern:"INTEL.?",manufacturer:"Intel"},{pattern:"AMD.?",manufacturer:"AMD"},{pattern:"NVIDIA.?",manufacturer:"NVDIA"}],t="";return r&&(r=r.toUpperCase(),e.forEach(n=>{RegExp(n.pattern).test(r)&&(t=n.manufacturer)})),t}function D2e(r){return{610:"Apple","1e6d":"LG","10ac":"DELL","4dd9":"Sony","38a3":"NEC"}[r]||""}function N2e(r){let e="";return r=(r||"").toLowerCase(),r.indexOf("apple")>=0?e="0x05ac":r.indexOf("nvidia")>=0?e="0x10de":r.indexOf("intel")>=0?e="0x8086":(r.indexOf("ati")>=0||r.indexOf("amd")>=0)&&(e="0x1002"),e}function j2e(r){return{spdisplays_mtlgpufamilymac1:"mac1",spdisplays_mtlgpufamilymac2:"mac2",spdisplays_mtlgpufamilyapple1:"apple1",spdisplays_mtlgpufamilyapple2:"apple2",spdisplays_mtlgpufamilyapple3:"apple3",spdisplays_mtlgpufamilyapple4:"apple4",spdisplays_mtlgpufamilyapple5:"apple5",spdisplays_mtlgpufamilyapple6:"apple6",spdisplays_mtlgpufamilyapple7:"apple7",spdisplays_metalfeaturesetfamily11:"family1_v1",spdisplays_metalfeaturesetfamily12:"family1_v2",spdisplays_metalfeaturesetfamily13:"family1_v3",spdisplays_metalfeaturesetfamily14:"family1_v4",spdisplays_metalfeaturesetfamily21:"family2_v1"}[r]||""}function K2e(r){function e(p){let m={controllers:[],displays:[]};try{return p.forEach(function(y){let _=(y.sppci_bus||"").indexOf("builtin")>-1?"Built-In":(y.sppci_bus||"").indexOf("pcie")>-1?"PCIe":"",O=(parseInt(y.spdisplays_vram||"",10)||0)*((y.spdisplays_vram||"").indexOf("GB")>-1?1024:1),x=(parseInt(y.spdisplays_vram_shared||"",10)||0)*((y.spdisplays_vram_shared||"").indexOf("GB")>-1?1024:1),A=j2e(y.spdisplays_metal||y.spdisplays_metalfamily||"");m.controllers.push({vendor:i9(y.spdisplays_vendor||"")||y.spdisplays_vendor||"",model:y.sppci_model||"",bus:_,vramDynamic:_==="Built-In",vram:O||x||null,deviceId:y["spdisplays_device-id"]||"",vendorId:y["spdisplays_vendor-id"]||N2e((y.spdisplays_vendor||"")+(y.sppci_model||"")),external:y.sppci_device_type==="spdisplays_egpu",cores:y.sppci_cores||null,metalVersion:A}),y.spdisplays_ndrvs&&y.spdisplays_ndrvs.length&&y.spdisplays_ndrvs.forEach(function(P){let q=P.spdisplays_connection_type||"",F=(P._spdisplays_resolution||"").split("@"),z=F[0].split("x"),B=(P._spdisplays_pixels||"").split("x"),G=P.spdisplays_depth||"",H=P["_spdisplays_display-serial-number"]||P["_spdisplays_display-serial-number2"]||null;m.displays.push({vendor:D2e(P["_spdisplays_display-vendor-id"]||"")||i9(P._name||""),vendorId:P["_spdisplays_display-vendor-id"]||"",model:P._name||"",productionYear:P["_spdisplays_display-year"]||null,serial:H!=="0"?H:null,displayId:P._spdisplays_displayID||null,main:P.spdisplays_main?P.spdisplays_main==="spdisplays_yes":!1,builtin:(P.spdisplays_display_type||"").indexOf("built-in")>-1,connection:q.indexOf("_internal")>-1?"Internal":q.indexOf("_displayport")>-1?"Display Port":q.indexOf("_hdmi")>-1?"HDMI":null,sizeX:null,sizeY:null,pixelDepth:G==="CGSThirtyBitColor"?30:G==="CGSThirtytwoBitColor"?32:G==="CGSTwentyfourBitColor"?24:null,resolutionX:B.length>1?parseInt(B[0],10):null,resolutionY:B.length>1?parseInt(B[1],10):null,currentResX:z.length>1?parseInt(z[0],10):null,currentResY:z.length>1?parseInt(z[1],10):null,positionX:0,positionY:0,currentRefreshRate:F.length>1?parseInt(F[1],10):null})})}),m}catch{return m}}function t(p){let m=[],y={vendor:"",subVendor:"",model:"",bus:"",busAddress:"",vram:null,vramDynamic:!1,pciID:""},_=!1,O=[];try{O=yT('export LC_ALL=C; dmidecode -t 9 2>/dev/null; unset LC_ALL | grep "Bus Address: "').toString().split(`
`);for(let A=0;A<O.length;A++)O[A]=O[A].replace("Bus Address:","").replace("0000:","").trim();O=O.filter(function(A){return A!=null&&A})}catch{we.noop()}let x=1;return p.forEach(A=>{let P="";if(x<p.length&&p[x]&&(P=p[x],P.indexOf(":")>0&&(P=P.split(":")[1])),A.trim()!==""){if(A[0]!==" "&&A[0]!=="	"){let q=O.indexOf(A.split(" ")[0])>=0,F=A.toLowerCase().indexOf(" vga "),z=A.toLowerCase().indexOf("3d controller");if(F!==-1||z!==-1){z!==-1&&F===-1&&(F=z),(y.vendor||y.model||y.bus||y.vram!==null||y.vramDynamic)&&(m.push(y),y={vendor:"",model:"",bus:"",busAddress:"",vram:null,vramDynamic:!1});let B=A.split(" ")[0];/[\da-fA-F]{2}:[\da-fA-F]{2}\.[\da-fA-F]/.test(B)&&(y.busAddress=B),_=!0;let G=A.search(/\[[0-9a-f]{4}:[0-9a-f]{4}]|$/),H=A.substr(F,G-F).split(":");if(y.busAddress=A.substr(0,F).trim(),H.length>1&&(H[1]=H[1].trim(),H[1].toLowerCase().indexOf("corporation")>=0?(y.vendor=H[1].substr(0,H[1].toLowerCase().indexOf("corporation")+11).trim(),y.model=H[1].substr(H[1].toLowerCase().indexOf("corporation")+11,200).split("(")[0].trim(),y.bus=O.length>0&&q?"PCIe":"Onboard",y.vram=null,y.vramDynamic=!1):H[1].toLowerCase().indexOf(" inc.")>=0?((H[1].match(/]/g)||[]).length>1?(y.vendor=H[1].substr(0,H[1].toLowerCase().indexOf("]")+1).trim(),y.model=H[1].substr(H[1].toLowerCase().indexOf("]")+1,200).trim().split("(")[0].trim()):(y.vendor=H[1].substr(0,H[1].toLowerCase().indexOf(" inc.")+5).trim(),y.model=H[1].substr(H[1].toLowerCase().indexOf(" inc.")+5,200).trim().split("(")[0].trim()),y.bus=O.length>0&&q?"PCIe":"Onboard",y.vram=null,y.vramDynamic=!1):H[1].toLowerCase().indexOf(" ltd.")>=0&&((H[1].match(/]/g)||[]).length>1?(y.vendor=H[1].substr(0,H[1].toLowerCase().indexOf("]")+1).trim(),y.model=H[1].substr(H[1].toLowerCase().indexOf("]")+1,200).trim().split("(")[0].trim()):(y.vendor=H[1].substr(0,H[1].toLowerCase().indexOf(" ltd.")+5).trim(),y.model=H[1].substr(H[1].toLowerCase().indexOf(" ltd.")+5,200).trim().split("(")[0].trim())),y.model&&P.indexOf(y.model)!==-1)){let N=P.split(y.model)[0].trim();N&&(y.subVendor=N)}}else _=!1}if(_){let q=A.split(":");if(q.length>1&&q[0].replace(/ +/g,"").toLowerCase().indexOf("devicename")!==-1&&q[1].toLowerCase().indexOf("onboard")!==-1&&(y.bus="Onboard"),q.length>1&&q[0].replace(/ +/g,"").toLowerCase().indexOf("region")!==-1&&q[1].toLowerCase().indexOf("memory")!==-1){let F=q[1].split("=");F.length>1&&(y.vram=parseInt(F[1]))}}}x++}),(y.vendor||y.model||y.bus||y.busAddress||y.vram!==null||y.vramDynamic)&&m.push(y),m}function n(p,m){let y=/\[([^\]]+)\]\s+(\w+)\s+(.*)/,_=m.reduce((O,x)=>{let A=y.exec(x.trim());return A&&(O[A[1]]||(O[A[1]]={}),O[A[1]][A[2]]=A[3]),O},{});for(let O in _){let x=_[O];if(x.CL_DEVICE_TYPE==="CL_DEVICE_TYPE_GPU"){let A;if(x.CL_DEVICE_TOPOLOGY_AMD){let P=x.CL_DEVICE_TOPOLOGY_AMD.match(/[a-zA-Z0-9]+:\d+\.\d+/);P&&(A=P[0])}else if(x.CL_DEVICE_PCI_BUS_ID_NV&&x.CL_DEVICE_PCI_SLOT_ID_NV){let P=parseInt(x.CL_DEVICE_PCI_BUS_ID_NV),q=parseInt(x.CL_DEVICE_PCI_SLOT_ID_NV);if(!isNaN(P)&&!isNaN(q)){let F=P&255,z=q>>3&255,B=q&7;A=`${F.toString().padStart(2,"0")}:${z.toString().padStart(2,"0")}.${B}`}}if(A){let P=p.find(F=>F.busAddress===A);P||(P={vendor:"",model:"",bus:"",busAddress:A,vram:null,vramDynamic:!1},p.push(P)),P.vendor=x.CL_DEVICE_VENDOR,x.CL_DEVICE_BOARD_NAME_AMD?P.model=x.CL_DEVICE_BOARD_NAME_AMD:P.model=x.CL_DEVICE_NAME;let q=parseInt(x.CL_DEVICE_GLOBAL_MEM_SIZE);isNaN(q)||(P.vram=Math.round(q/1024/1024))}}}return p}function i(){if(mm)return mm;if(r9)try{let p=we.WINDIR+"\\System32\\DriverStore\\FileRepository",y=Lw.readdirSync(p).filter(_=>Lw.readdirSync([p,_].join("/")).includes("nvidia-smi.exe")).reduce((_,O)=>{let x=Lw.statSync([p,_,"nvidia-smi.exe"].join("/")),A=Lw.statSync([p,O,"nvidia-smi.exe"].join("/"));return x.ctimeMs>A.ctimeMs?_:O});y&&(mm=[p,y,"nvidia-smi.exe"].join("/"))}catch{we.noop()}else vT&&(mm="nvidia-smi");return mm}function s(p){let m=i();if(p=p||we.execOptsWin,m){let y="--query-gpu=driver_version,pci.sub_device_id,name,pci.bus_id,fan.speed,memory.total,memory.used,memory.free,utilization.gpu,utilization.memory,temperature.gpu,temperature.memory,power.draw,power.limit,clocks.gr,clocks.mem --format=csv,noheader,nounits",_=m+" "+y+(vT?"  2>/dev/null":"");try{return yT(_,p).toString()}catch{we.noop()}}return""}function o(){function p(O){return[null,void 0].includes(O)?O:parseFloat(O)}let m=s();if(!m)return[];let _=m.split(`
`).filter(Boolean).map(O=>{let x=O.split(", ").map(A=>A.includes("N/A")?void 0:A);return x.length===16?{driverVersion:x[0],subDeviceId:x[1],name:x[2],pciBus:x[3],fanSpeed:p(x[4]),memoryTotal:p(x[5]),memoryUsed:p(x[6]),memoryFree:p(x[7]),utilizationGpu:p(x[8]),utilizationMemory:p(x[9]),temperatureGpu:p(x[10]),temperatureMemory:p(x[11]),powerDraw:p(x[12]),powerLimit:p(x[13]),clockCore:p(x[14]),clockMemory:p(x[15])}:{}});return _=_.filter(O=>"pciBus"in O),_}function a(p,m){return m.driverVersion&&(p.driverVersion=m.driverVersion),m.subDeviceId&&(p.subDeviceId=m.subDeviceId),m.name&&(p.name=m.name),m.pciBus&&(p.pciBus=m.pciBus),m.fanSpeed&&(p.fanSpeed=m.fanSpeed),m.memoryTotal&&(p.memoryTotal=m.memoryTotal,p.vram=m.memoryTotal,p.vramDynamic=!1),m.memoryUsed&&(p.memoryUsed=m.memoryUsed),m.memoryFree&&(p.memoryFree=m.memoryFree),m.utilizationGpu&&(p.utilizationGpu=m.utilizationGpu),m.utilizationMemory&&(p.utilizationMemory=m.utilizationMemory),m.temperatureGpu&&(p.temperatureGpu=m.temperatureGpu),m.temperatureMemory&&(p.temperatureMemory=m.temperatureMemory),m.powerDraw&&(p.powerDraw=m.powerDraw),m.powerLimit&&(p.powerLimit=m.powerLimit),m.clockCore&&(p.clockCore=m.clockCore),m.clockMemory&&(p.clockMemory=m.clockMemory),p}function u(p){let m={vendor:"",model:"",deviceName:"",main:!1,builtin:!1,connection:"",sizeX:null,sizeY:null,pixelDepth:null,resolutionX:null,resolutionY:null,currentResX:null,currentResY:null,positionX:0,positionY:0,currentRefreshRate:null},y=108;if(p.substr(y,6)==="000000"&&(y+=36),p.substr(y,6)==="000000"&&(y+=36),p.substr(y,6)==="000000"&&(y+=36),p.substr(y,6)==="000000"&&(y+=36),m.resolutionX=parseInt("0x0"+p.substr(y+8,1)+p.substr(y+4,2)),m.resolutionY=parseInt("0x0"+p.substr(y+14,1)+p.substr(y+10,2)),m.sizeX=parseInt("0x0"+p.substr(y+28,1)+p.substr(y+24,2)),m.sizeY=parseInt("0x0"+p.substr(y+29,1)+p.substr(y+26,2)),y=p.indexOf("000000fc00"),y>=0){let _=p.substr(y+10,26);_.indexOf("0a")!==-1&&(_=_.substr(0,_.indexOf("0a")));try{_.length>2&&(m.model=_.match(/.{1,2}/g).map(function(O){return String.fromCharCode(parseInt(O,16))}).join(""))}catch{we.noop()}}else m.model="";return m}function c(p,m){let y=[],_={vendor:"",model:"",deviceName:"",main:!1,builtin:!1,connection:"",sizeX:null,sizeY:null,pixelDepth:null,resolutionX:null,resolutionY:null,currentResX:null,currentResY:null,positionX:0,positionY:0,currentRefreshRate:null},O=!1,x=!1,A="",P=0;for(let q=1;q<p.length;q++)if(p[q].trim()!==""){if(p[q][0]!==" "&&p[q][0]!=="	"&&p[q].toLowerCase().indexOf(" connected ")!==-1){(_.model||_.main||_.builtin||_.connection||_.sizeX!==null||_.pixelDepth!==null||_.resolutionX!==null)&&(y.push(_),_={vendor:"",model:"",main:!1,builtin:!1,connection:"",sizeX:null,sizeY:null,pixelDepth:null,resolutionX:null,resolutionY:null,currentResX:null,currentResY:null,positionX:0,positionY:0,currentRefreshRate:null});let F=p[q].split(" ");_.connection=F[0],_.main=p[q].toLowerCase().indexOf(" primary ")>=0,_.builtin=F[0].toLowerCase().indexOf("edp")>=0}if(O)if(p[q].search(/\S|$/)>P)A+=p[q].toLowerCase().trim();else{let F=u(A);_.vendor=F.vendor,_.model=F.model,_.resolutionX=F.resolutionX,_.resolutionY=F.resolutionY,_.sizeX=F.sizeX,_.sizeY=F.sizeY,_.pixelDepth=m,O=!1}if(p[q].toLowerCase().indexOf("edid:")>=0&&(O=!0,P=p[q].search(/\S|$/)),p[q].toLowerCase().indexOf("*current")>=0){let F=p[q].split("(");if(F&&F.length>1&&F[0].indexOf("x")>=0){let z=F[0].trim().split("x");_.currentResX=we.toInt(z[0]),_.currentResY=we.toInt(z[1])}x=!0}if(x&&p[q].toLowerCase().indexOf("clock")>=0&&p[q].toLowerCase().indexOf("hz")>=0&&p[q].toLowerCase().indexOf("v: height")>=0){let F=p[q].split("clock");F&&F.length>1&&F[1].toLowerCase().indexOf("hz")>=0&&(_.currentRefreshRate=we.toInt(F[1])),x=!1}}return(_.model||_.main||_.builtin||_.connection||_.sizeX!==null||_.pixelDepth!==null||_.resolutionX!==null)&&y.push(_),y}return new Promise(p=>{process.nextTick(()=>{let m={controllers:[],displays:[]};if(M2e&&Od("system_profiler -xml -detailLevel full SPDisplaysDataType",function(_,O){if(!_){try{let x=O.toString();m=e(we.plistParser(x)[0]._items)}catch{we.noop()}try{O=yT('defaults read /Library/Preferences/com.apple.windowserver.plist 2>/dev/null;defaults read /Library/Preferences/com.apple.windowserver.displays.plist 2>/dev/null; echo ""',{maxBuffer:1024*2e4});let x=(O||"").toString(),A=we.plistReader(x);if(A.DisplayAnyUserSets&&A.DisplayAnyUserSets.Configs&&A.DisplayAnyUserSets.Configs[0]&&A.DisplayAnyUserSets.Configs[0].DisplayConfig){let P=A.DisplayAnyUserSets.Configs[0].DisplayConfig,q=0;P.forEach(F=>{F.CurrentInfo&&F.CurrentInfo.OriginX!==void 0&&m.displays&&m.displays[q]&&(m.displays[q].positionX=F.CurrentInfo.OriginX),F.CurrentInfo&&F.CurrentInfo.OriginY!==void 0&&m.displays&&m.displays[q]&&(m.displays[q].positionY=F.CurrentInfo.OriginY),q++})}if(A.DisplayAnyUserSets&&A.DisplayAnyUserSets.length>0&&A.DisplayAnyUserSets[0].length>0&&A.DisplayAnyUserSets[0][0].DisplayID){let P=A.DisplayAnyUserSets[0],q=0;P.forEach(F=>{"OriginX"in F&&m.displays&&m.displays[q]&&(m.displays[q].positionX=F.OriginX),"OriginY"in F&&m.displays&&m.displays[q]&&(m.displays[q].positionY=F.OriginY),F.Mode&&F.Mode.BitsPerPixel!==void 0&&m.displays&&m.displays[q]&&(m.displays[q].pixelDepth=F.Mode.BitsPerPixel),q++})}}catch{we.noop()}}r&&r(m),p(m)}),vT&&(we.isRaspberry()&&we.isRaspbian()?Od(`fbset -s | grep 'mode "'; vcgencmd get_mem gpu; tvservice -s; tvservice -n;`,function(_,O){let x=O.toString().split(`
`);if(x.length>3&&x[0].indexOf('mode "')>=-1&&x[2].indexOf("0x12000a")>-1){let A=x[0].replace("mode","").replace(/"/g,"").trim().split("x");A.length===2&&m.displays.push({vendor:"",model:we.getValue(x,"device_name","="),main:!0,builtin:!1,connection:"HDMI",sizeX:null,sizeY:null,pixelDepth:null,resolutionX:parseInt(A[0],10),resolutionY:parseInt(A[1],10),currentResX:null,currentResY:null,positionX:0,positionY:0,currentRefreshRate:null})}x.length>1&&O.toString().indexOf("gpu=")>=-1&&m.controllers.push({vendor:"Broadcom",model:we.getRpiGpu(),bus:"",vram:we.getValue(x,"gpu","=").replace("M",""),vramDynamic:!0}),r&&r(m),p(m)}):Od("lspci -vvv  2>/dev/null",function(_,O){if(!_){let A=O.toString().split(`
`);m.controllers=t(A);let P=o();m.controllers=m.controllers.map(q=>a(q,P.find(F=>F.pciBus.toLowerCase().endsWith(q.busAddress.toLowerCase()))||{}))}Od("clinfo --raw",function(A,P){if(!A){let F=P.toString().split(`
`);m.controllers=n(m.controllers,F)}Od("xdpyinfo 2>/dev/null | grep 'depth of root window' | awk '{ print $5 }'",function(F,z){let B=0;if(!F){let H=z.toString().split(`
`);B=parseInt(H[0])||0}Od("xrandr --verbose 2>/dev/null",function(H,N){if(!H){let v=N.toString().split(`
`);m.displays=c(v,B)}r&&r(m),p(m)})})})})),(k2e||P2e||R2e)&&(r&&r(null),p(null)),L2e&&(r&&r(null),p(null)),r9)try{let y=[];y.push(we.powerShell("Get-CimInstance win32_VideoController | fl *")),y.push(we.powerShell('gp "HKLM:\\SYSTEM\\ControlSet001\\Control\\Class\\{4d36e968-e325-11ce-bfc1-08002be10318}\\*" -ErrorAction SilentlyContinue | where MatchingDeviceId $null -NE | select MatchingDeviceId,HardwareInformation.qwMemorySize | fl')),y.push(we.powerShell("Get-CimInstance win32_desktopmonitor | fl *")),y.push(we.powerShell("Get-CimInstance -Namespace root\\wmi -ClassName WmiMonitorBasicDisplayParams | fl")),y.push(we.powerShell("Add-Type -AssemblyName System.Windows.Forms; [System.Windows.Forms.Screen]::AllScreens")),y.push(we.powerShell("Get-CimInstance -Namespace root\\wmi -ClassName WmiMonitorConnectionParams | fl")),y.push(we.powerShell('gwmi WmiMonitorID -Namespace root\\wmi | ForEach-Object {(($_.ManufacturerName -notmatch 0 | foreach {[char]$_}) -join "") + "|" + (($_.ProductCodeID -notmatch 0 | foreach {[char]$_}) -join "") + "|" + (($_.UserFriendlyName -notmatch 0 | foreach {[char]$_}) -join "") + "|" + (($_.SerialNumberID -notmatch 0 | foreach {[char]$_}) -join "") + "|" + $_.InstanceName}'));let _=o();Promise.all(y).then(O=>{let x=O[0].replace(/\r/g,"").split(/\n\s*\n/),A=O[1].replace(/\r/g,"").split(/\n\s*\n/);m.controllers=d(x,A),m.controllers=m.controllers.map(H=>H.vendor.toLowerCase()==="nvidia"?a(H,_.find(N=>{let v=(H.subDeviceId||"").toLowerCase(),w=N.subDeviceId.split("x"),I=w.length>1?w[1].toLowerCase():w[0].toLowerCase(),T=Math.abs(v.length-I.length);if(v.length>I.length)for(let k=0;k<T;k++)I="0"+I;else if(v.length<I.length)for(let k=0;k<T;k++)v="0"+v;return v===I})||{}):H);let P=O[2].replace(/\r/g,"").split(/\n\s*\n/);P[0].trim()===""&&P.shift(),P.length&&P[P.length-1].trim()===""&&P.pop();let q=O[3].replace(/\r/g,"").split("Active ");q.shift();let F=O[4].replace(/\r/g,"").split("BitsPerPixel ");F.shift();let z=O[5].replace(/\r/g,"").split(/\n\s*\n/);z.shift();let B=O[6].replace(/\r/g,"").split(/\n/),G=[];B.forEach(H=>{let N=H.split("|");N.length===5&&G.push({vendor:N[0],code:N[1],model:N[2],serial:N[3],instanceId:N[4]})}),m.displays=h(F,q,P,z,G),m.displays.length===1&&(gm&&(m.displays[0].resolutionX=gm,m.displays[0].currentResX||(m.displays[0].currentResX=gm)),ym&&(m.displays[0].resolutionY=ym,m.displays[0].currentResY===0&&(m.displays[0].currentResY=ym)),Dw&&(m.displays[0].pixelDepth=Dw)),m.displays=m.displays.map(H=>(Nw&&!H.currentRefreshRate&&(H.currentRefreshRate=Nw),H)),r&&r(m),p(m)}).catch(()=>{r&&r(m),p(m)})}catch{r&&r(m),p(m)}})});function d(p,m){let y={};for(let O in m)if({}.hasOwnProperty.call(m,O)&&m[O].trim()!==""){let x=m[O].trim().split(`
`),A=we.getValue(x,"MatchingDeviceId").match(/PCI\\(VEN_[0-9A-F]{4})&(DEV_[0-9A-F]{4})(?:&(SUBSYS_[0-9A-F]{8}))?(?:&(REV_[0-9A-F]{2}))?/i);if(A){let P=parseInt(we.getValue(x,"HardwareInformation.qwMemorySize"));if(!isNaN(P)){let q=A[1].toUpperCase()+"&"+A[2].toUpperCase();A[3]&&(q+="&"+A[3].toUpperCase()),A[4]&&(q+="&"+A[4].toUpperCase()),y[q]=P}}}let _=[];for(let O in p)if({}.hasOwnProperty.call(p,O)&&p[O].trim()!==""){let x=p[O].trim().split(`
`),A=we.getValue(x,"PNPDeviceID",":").match(/PCI\\(VEN_[0-9A-F]{4})&(DEV_[0-9A-F]{4})(?:&(SUBSYS_[0-9A-F]{8}))?(?:&(REV_[0-9A-F]{2}))?/i),P=null,q=null;if(A){if(P=A[3]||"",P&&(P=P.split("_")[1]),q==null&&A[3]&&A[4]){let F=A[1].toUpperCase()+"&"+A[2].toUpperCase()+"&"+A[3].toUpperCase()+"&"+A[4].toUpperCase();({}).hasOwnProperty.call(y,F)&&(q=y[F])}if(q==null&&A[3]){let F=A[1].toUpperCase()+"&"+A[2].toUpperCase()+"&"+A[3].toUpperCase();({}).hasOwnProperty.call(y,F)&&(q=y[F])}if(q==null&&A[4]){let F=A[1].toUpperCase()+"&"+A[2].toUpperCase()+"&"+A[4].toUpperCase();({}).hasOwnProperty.call(y,F)&&(q=y[F])}if(q==null){let F=A[1].toUpperCase()+"&"+A[2].toUpperCase();({}).hasOwnProperty.call(y,F)&&(q=y[F])}}_.push({vendor:we.getValue(x,"AdapterCompatibility",":"),model:we.getValue(x,"name",":"),bus:we.getValue(x,"PNPDeviceID",":").startsWith("PCI")?"PCI":"",vram:(q??we.toInt(we.getValue(x,"AdapterRAM",":")))/1024/1024,vramDynamic:we.getValue(x,"VideoMemoryType",":")==="2",subDeviceId:P}),gm=we.toInt(we.getValue(x,"CurrentHorizontalResolution",":"))||gm,ym=we.toInt(we.getValue(x,"CurrentVerticalResolution",":"))||ym,Nw=we.toInt(we.getValue(x,"CurrentRefreshRate",":"))||Nw,Dw=we.toInt(we.getValue(x,"CurrentBitsPerPixel",":"))||Dw}return _}function h(p,m,y,_,O){let x=[],A="",P="",q="",F=0,z=0;if(y&&y.length){let B=y[0].split(`
`);A=we.getValue(B,"MonitorManufacturer",":"),P=we.getValue(B,"Name",":"),q=we.getValue(B,"PNPDeviceID",":").replace(/&amp;/g,"&").toLowerCase(),F=we.toInt(we.getValue(B,"ScreenWidth",":")),z=we.toInt(we.getValue(B,"ScreenHeight",":"))}for(let B=0;B<p.length;B++)if(p[B].trim()!==""){p[B]="BitsPerPixel "+p[B],m[B]="Active "+m[B],(_.length===0||_[B]===void 0)&&(_[B]="Unknown");let G=p[B].split(`
`),H=m[B].split(`
`),N=_[B].split(`
`),v=we.getValue(G,"BitsPerPixel"),w=we.getValue(G,"Bounds").replace("{","").replace("}","").replace(/=/g,":").split(","),I=we.getValue(G,"Primary"),T=we.getValue(H,"MaxHorizontalImageSize"),k=we.getValue(H,"MaxVerticalImageSize"),M=we.getValue(H,"InstanceName").toLowerCase(),K=we.getValue(N,"VideoOutputTechnology"),L=we.getValue(G,"DeviceName"),b="",R="";O.forEach(X=>{X.instanceId.toLowerCase().startsWith(M)&&A.startsWith("(")&&P.startsWith("PnP")&&(b=X.vendor,R=X.model)}),x.push({vendor:M.startsWith(q)&&b===""?A:b,model:M.startsWith(q)&&R===""?P:R,deviceName:L,main:I.toLowerCase()==="true",builtin:K==="2147483648",connection:K&&n9[K]?n9[K]:"",resolutionX:we.toInt(we.getValue(w,"Width",":")),resolutionY:we.toInt(we.getValue(w,"Height",":")),sizeX:T?parseInt(T,10):null,sizeY:k?parseInt(k,10):null,pixelDepth:v,currentResX:we.toInt(we.getValue(w,"Width",":")),currentResY:we.toInt(we.getValue(w,"Height",":")),positionX:we.toInt(we.getValue(w,"X",":")),positionY:we.toInt(we.getValue(w,"Y",":"))})}return p.length===0&&x.push({vendor:A,model:P,main:!0,sizeX:null,sizeY:null,resolutionX:F,resolutionY:z,pixelDepth:null,currentResX:F,currentResY:z,positionX:0,positionY:0}),x}}s9.graphics=K2e});var f9=E(cc=>{"use strict";var ae=zr(),a9=require("fs"),Rn=require("child_process").exec,bl=require("child_process").execSync,q2e=ae.promisifySave(require("child_process").exec),_l=process.platform,ms=_l==="linux"||_l==="android",Sl=_l==="darwin",Id=_l==="win32",gs=_l==="freebsd",ys=_l==="openbsd",vs=_l==="netbsd",Cd=_l==="sunos",vt={},Re={};function F2e(r,e){ae.isFunction(r)&&(e=r,r="");let t=[],n=[];function i(u){if(!u.startsWith("/"))return"NFS";let c=u.split("/"),d=c[c.length-1],h=t.filter(p=>p.indexOf(d)>=0);return h.length===1&&h[0].indexOf("APFS")>=0?"APFS":"HFS"}function s(u){let c=["rootfs","unionfs","squashfs","cramfs","initrd","initramfs","devtmpfs","tmpfs","udev","devfs","specfs","type","appimaged"],d=!1;return c.forEach(h=>{u.toLowerCase().indexOf(h)>=0&&(d=!0)}),d}function o(u){let c=u.toString().split(`
`);if(c.shift(),u.toString().toLowerCase().indexOf("filesystem")){let d=0;for(let h=0;h<c.length;h++)c[h]&&c[h].toLowerCase().startsWith("filesystem")&&(d=h);for(let h=0;h<d;h++)c.shift()}return c}function a(u){let c=[];return u.forEach(function(d){if(d!==""&&(d=d.replace(/ +/g," ").split(" "),d&&(d[0].startsWith("/")||d[6]&&d[6]==="/"||d[0].indexOf("/")>0||d[0].indexOf(":")===1||!Sl&&!s(d[1])))){let h=d[0],p=ms||gs||ys||vs?d[1]:i(d[0]),m=parseInt(ms||gs||ys||vs?d[2]:d[1])*1024,y=parseInt(ms||gs||ys||vs?d[3]:d[2])*1024,_=parseInt(ms||gs||ys||vs?d[4]:d[3])*1024,O=parseFloat((100*(y/(y+_))).toFixed(2)),x=n&&Object.keys(n).length>0?n[h]||!1:null;d.splice(0,ms||gs||ys||vs?6:5);let A=d.join(" ");c.find(P=>P.fs===h&&P.type===p)||c.push({fs:h,type:p,size:m,used:y,available:_,use:O,mount:A,rw:x})}}),c}return new Promise(u=>{process.nextTick(()=>{let c=[];if(ms||gs||ys||vs||Sl){let d="";if(t=[],n={},Sl){d="df -kP";try{t=bl("diskutil list").toString().split(`
`).filter(h=>!h.startsWith("/")&&h.indexOf(":")>0),bl("mount").toString().split(`
`).filter(h=>h.startsWith("/")).forEach(h=>{n[h.split(" ")[0]]=h.toLowerCase().indexOf("read-only")===-1})}catch{ae.noop()}}if(ms)try{d="export LC_ALL=C; df -lkPTx squashfs; unset LC_ALL",bl("cat /proc/mounts 2>/dev/null").toString().split(`
`).filter(h=>h.startsWith("/")).forEach(h=>{n[h.split(" ")[0]]=n[h.split(" ")[0]]||!1,h.toLowerCase().indexOf("/snap/")===-1&&(n[h.split(" ")[0]]=h.toLowerCase().indexOf("rw,")>=0||h.toLowerCase().indexOf(" rw ")>=0)})}catch{ae.noop()}if(gs||ys||vs)try{d="df -lkPT",bl("mount").toString().split(`
`).forEach(h=>{n[h.split(" ")[0]]=h.toLowerCase().indexOf("read-only")===-1})}catch{ae.noop()}Rn(d,{maxBuffer:1024*1024},function(h,p){let m=o(p);c=a(m),r&&(c=c.filter(y=>y.fs.toLowerCase().indexOf(r.toLowerCase())>=0||y.mount.toLowerCase().indexOf(r.toLowerCase())>=0)),(!h||c.length)&&p.toString().trim()!==""?(e&&e(c),u(c)):Rn("df -kPT",{maxBuffer:1024*1024},function(y,_){if(!y){let O=o(_);c=a(O)}e&&e(c),u(c)})})}if(Cd&&(e&&e(c),u(c)),Id)try{let d=`Get-WmiObject Win32_logicaldisk | select Access,Caption,FileSystem,FreeSpace,Size ${r?"| where -property Caption -eq "+r:""} | fl`;ae.powerShell(d).then((h,p)=>{p||h.toString().split(/\n\s*\n/).forEach(function(y){let _=y.split(`\r
`),O=ae.toInt(ae.getValue(_,"size",":")),x=ae.toInt(ae.getValue(_,"freespace",":")),A=ae.getValue(_,"caption",":"),P=ae.getValue(_,"access",":"),q=P?ae.toInt(P)!==1:null;O&&c.push({fs:A,type:ae.getValue(_,"filesystem",":"),size:O,used:O-x,available:x,use:parseFloat((100*(O-x)/O).toFixed(2)),mount:A,rw:q})}),e&&e(c),u(c)})}catch{e&&e(c),u(c)}})})}cc.fsSize=F2e;function V2e(r){return new Promise(e=>{process.nextTick(()=>{let t={max:null,allocated:null,available:null};(gs||ys||vs||Sl)&&Rn("sysctl -i kern.maxfiles kern.num_files kern.open_files",{maxBuffer:1024*1024},function(i,s){if(!i){let o=s.toString().split(`
`);t.max=parseInt(ae.getValue(o,"kern.maxfiles",":"),10),t.allocated=parseInt(ae.getValue(o,"kern.num_files",":"),10)||parseInt(ae.getValue(o,"kern.open_files",":"),10),t.available=t.max-t.allocated}r&&r(t),e(t)}),ms&&a9.readFile("/proc/sys/fs/file-nr",function(n,i){if(n)a9.readFile("/proc/sys/fs/file-max",function(s,o){if(!s){let a=o.toString().split(`
`);a[0]&&(t.max=parseInt(a[0],10))}r&&r(t),e(t)});else{let s=i.toString().split(`
`);if(s[0]){let o=s[0].replace(/\s+/g," ").split(" ");o.length===3&&(t.allocated=parseInt(o[0],10),t.available=parseInt(o[1],10),t.max=parseInt(o[2],10),t.available||(t.available=t.max-t.allocated))}r&&r(t),e(t)}}),Cd&&(r&&r(null),e(null)),Id&&(r&&r(null),e(null))})})}cc.fsOpenFiles=V2e;function B2e(r){return parseInt(r.substr(r.indexOf(" (")+2,r.indexOf(" Bytes)")-10))}function U2e(r){let e=[],t=0;return r.forEach(n=>{if(n.length>0)if(n[0]==="*")t++;else{let i=n.split(":");i.length>1&&(e[t]||(e[t]={name:"",identifier:"",type:"disk",fsType:"",mount:"",size:0,physical:"HDD",uuid:"",label:"",model:"",serial:"",removable:!1,protocol:"",group:"",device:""}),i[0]=i[0].trim().toUpperCase().replace(/ +/g,""),i[1]=i[1].trim(),i[0]==="DEVICEIDENTIFIER"&&(e[t].identifier=i[1]),i[0]==="DEVICENODE"&&(e[t].name=i[1]),i[0]==="VOLUMENAME"&&i[1].indexOf("Not applicable")===-1&&(e[t].label=i[1]),i[0]==="PROTOCOL"&&(e[t].protocol=i[1]),i[0]==="DISKSIZE"&&(e[t].size=B2e(i[1])),i[0]==="FILESYSTEMPERSONALITY"&&(e[t].fsType=i[1]),i[0]==="MOUNTPOINT"&&(e[t].mount=i[1]),i[0]==="VOLUMEUUID"&&(e[t].uuid=i[1]),i[0]==="READ-ONLYMEDIA"&&i[1]==="Yes"&&(e[t].physical="CD/DVD"),i[0]==="SOLIDSTATE"&&i[1]==="Yes"&&(e[t].physical="SSD"),i[0]==="VIRTUAL"&&(e[t].type="virtual"),i[0]==="REMOVABLEMEDIA"&&(e[t].removable=i[1]==="Removable"),i[0]==="PARTITIONTYPE"&&(e[t].type="part"),i[0]==="DEVICE/MEDIANAME"&&(e[t].model=i[1]))}}),e}function wT(r){let e=[];return r.filter(t=>t!=="").forEach(t=>{try{t=decodeURIComponent(t.replace(/\\x/g,"%")),t=t.replace(/\\/g,"\\\\");let n=JSON.parse(t);e.push({name:n.name,type:n.type,fsType:n.fsType,mount:n.mountpoint,size:parseInt(n.size),physical:n.type==="disk"?n.rota==="0"?"SSD":"HDD":n.type==="rom"?"CD/DVD":"",uuid:n.uuid,label:n.label,model:(n.model||"").trim(),serial:n.serial,removable:n.rm==="1",protocol:n.tran,group:n.group||""})}catch{ae.noop()}}),e=ae.unique(e),e=ae.sortByKey(e,["type","name"]),e}function G2e(r){let e=ae.getValue(r,"md_level","="),t=ae.getValue(r,"md_name","="),n=ae.getValue(r,"md_uuid","="),i=[];return r.forEach(s=>{s.toLowerCase().startsWith("md_device_dev")&&s.toLowerCase().indexOf("/dev/")>0&&i.push(s.split("/dev/")[1])}),{raid:e,label:t,uuid:n,members:i}}function l9(r){let e=r;try{r.forEach(t=>{if(t.type.startsWith("raid")){let n=bl(`mdadm --export --detail /dev/${t.name}`).toString().split(`
`),i=G2e(n);t.label=i.label,t.uuid=i.uuid,i.members&&i.members.length&&i.raid===t.type&&(e=e.map(s=>(s.fsType==="linux_raid_member"&&i.members.indexOf(s.name)>=0&&(s.group=t.name),s)))}})}catch{ae.noop()}return e}function $2e(r){let e=[];return r.forEach(t=>{t.type.startsWith("disk")&&e.push(t.name)}),e}function W2e(r){let e=r;try{let t=$2e(r);e=e.map(n=>((n.type.startsWith("part")||n.type.startsWith("disk"))&&t.forEach(i=>{n.name.startsWith(i)&&(n.device="/dev/"+i)}),n))}catch{ae.noop()}return e}function z2e(r){let e=[];return r.forEach(t=>{if(t.type.startsWith("disk")&&e.push({name:t.name,model:t.model,device:t.name}),t.type.startsWith("virtual")){let n="";e.forEach(i=>{i.model===t.model&&(n=i.device)}),n&&e.push({name:t.name,model:t.model,device:n})}}),e}function H2e(r){let e=r;try{let t=z2e(r);e=e.map(n=>((n.type.startsWith("part")||n.type.startsWith("disk")||n.type.startsWith("virtual"))&&t.forEach(i=>{n.name.startsWith(i.name)&&(n.device=i.device)}),n))}catch{ae.noop()}return e}function Y2e(r){let e=[];return r.forEach(t=>{let n=t.split(`\r
`),i=ae.getValue(n,"DeviceID",":"),s=t.split("@{DeviceID=");s.length>1&&(s=s.slice(1),s.forEach(o=>{e.push({name:o.split(";")[0].toUpperCase(),device:i})}))}),e}function J2e(r,e){let t=Y2e(e);return r.map(n=>{let i=t.filter(s=>s.name===n.name.toUpperCase());return i.length>0&&(n.device=i[0].device),n}),r}function bT(r){return r.toString().replace(/NAME=/g,'{"name":').replace(/FSTYPE=/g,',"fsType":').replace(/TYPE=/g,',"type":').replace(/SIZE=/g,',"size":').replace(/MOUNTPOINT=/g,',"mountpoint":').replace(/UUID=/g,',"uuid":').replace(/ROTA=/g,',"rota":').replace(/RO=/g,',"ro":').replace(/RM=/g,',"rm":').replace(/TRAN=/g,',"tran":').replace(/SERIAL=/g,',"serial":').replace(/LABEL=/g,',"label":').replace(/MODEL=/g,',"model":').replace(/OWNER=/g,',"owner":').replace(/GROUP=/g,',"group":').replace(/\n/g,`}
`)}function Q2e(r){return new Promise(e=>{process.nextTick(()=>{let t=[];if(ms&&Rn("lsblk -bPo NAME,TYPE,SIZE,FSTYPE,MOUNTPOINT,UUID,ROTA,RO,RM,TRAN,SERIAL,LABEL,MODEL,OWNER 2>/dev/null",{maxBuffer:1024*1024},function(n,i){if(n)Rn("lsblk -bPo NAME,TYPE,SIZE,FSTYPE,MOUNTPOINT,UUID,ROTA,RO,RM,LABEL,MODEL,OWNER 2>/dev/null",{maxBuffer:1024*1024},function(s,o){if(!s){let a=bT(o).split(`
`);t=wT(a),t=l9(t)}r&&r(t),e(t)});else{let s=bT(i).split(`
`);t=wT(s),t=l9(t),t=W2e(t),r&&r(t),e(t)}}),Sl&&Rn("diskutil info -all",{maxBuffer:1024*1024},function(n,i){if(!n){let s=i.toString().split(`
`);t=U2e(s),t=H2e(t)}r&&r(t),e(t)}),Cd&&(r&&r(t),e(t)),Id){let n=["Unknown","NoRoot","Removable","Local","Network","CD/DVD","RAM"];try{let i=[];i.push(ae.powerShell("Get-CimInstance -ClassName Win32_LogicalDisk | select Caption,DriveType,Name,FileSystem,Size,VolumeSerialNumber,VolumeName | fl")),i.push(ae.powerShell("Get-WmiObject -Class Win32_diskdrive | Select-Object -Property PNPDeviceId,DeviceID, Model, Size, @{L='Partitions'; E={$_.GetRelated('Win32_DiskPartition').GetRelated('Win32_LogicalDisk') | Select-Object -Property DeviceID, VolumeName, Size, FreeSpace}} | fl")),ae.promiseAll(i).then(s=>{let o=s.results[0].toString().split(/\n\s*\n/),a=s.results[1].toString().split(/\n\s*\n/);o.forEach(function(u){let c=u.split(`\r
`),d=ae.getValue(c,"drivetype",":");d&&t.push({name:ae.getValue(c,"name",":"),identifier:ae.getValue(c,"caption",":"),type:"disk",fsType:ae.getValue(c,"filesystem",":").toLowerCase(),mount:ae.getValue(c,"caption",":"),size:ae.getValue(c,"size",":"),physical:d>=0&&d<=6?n[d]:n[0],uuid:ae.getValue(c,"volumeserialnumber",":"),label:ae.getValue(c,"volumename",":"),model:"",serial:ae.getValue(c,"volumeserialnumber",":"),removable:d==="2",protocol:"",group:"",device:""})}),t=J2e(t,a),r&&r(t),e(t)})}catch{r&&r(t),e(t)}}(gs||ys||vs)&&(r&&r(null),e(null))})})}cc.blockDevices=Q2e;function u9(r,e){let t={rx:0,wx:0,tx:0,rx_sec:null,wx_sec:null,tx_sec:null,ms:0};return vt&&vt.ms?(t.rx=r,t.wx=e,t.tx=t.rx+t.wx,t.ms=Date.now()-vt.ms,t.rx_sec=(t.rx-vt.bytes_read)/(t.ms/1e3),t.wx_sec=(t.wx-vt.bytes_write)/(t.ms/1e3),t.tx_sec=t.rx_sec+t.wx_sec,vt.rx_sec=t.rx_sec,vt.wx_sec=t.wx_sec,vt.tx_sec=t.tx_sec,vt.bytes_read=t.rx,vt.bytes_write=t.wx,vt.bytes_overall=t.rx+t.wx,vt.ms=Date.now(),vt.last_ms=t.ms):(t.rx=r,t.wx=e,t.tx=t.rx+t.wx,vt.rx_sec=null,vt.wx_sec=null,vt.tx_sec=null,vt.bytes_read=t.rx,vt.bytes_write=t.wx,vt.bytes_overall=t.rx+t.wx,vt.ms=Date.now(),vt.last_ms=0),t}function Z2e(r){return new Promise(e=>{process.nextTick(()=>{if(Id||gs||ys||vs||Cd)return e(null);let t={rx:0,wx:0,tx:0,rx_sec:null,wx_sec:null,tx_sec:null,ms:0},n=0,i=0;vt&&!vt.ms||vt&&vt.ms&&Date.now()-vt.ms>=500?(ms&&Rn("lsblk -r 2>/dev/null | grep /",{maxBuffer:1024*1024},function(s,o){if(s)r&&r(t),e(t);else{let a=o.toString().split(`
`),u=[];a.forEach(function(d){d!==""&&(d=d.trim().split(" "),u.indexOf(d[0])===-1&&u.push(d[0]))});let c=u.join("|");Rn('cat /proc/diskstats | egrep "'+c+'"',{maxBuffer:1024*1024},function(d,h){d||(h.toString().split(`
`).forEach(function(m){m=m.trim(),m!==""&&(m=m.replace(/ +/g," ").split(" "),n+=parseInt(m[5])*512,i+=parseInt(m[9])*512)}),t=u9(n,i)),r&&r(t),e(t)})}}),Sl&&Rn(`ioreg -c IOBlockStorageDriver -k Statistics -r -w0 | sed -n "/IOBlockStorageDriver/,/Statistics/p" | grep "Statistics" | tr -cd "01234567890,
"`,{maxBuffer:1024*1024},function(s,o){s||(o.toString().split(`
`).forEach(function(u){u=u.trim(),u!==""&&(u=u.split(","),n+=parseInt(u[2]),i+=parseInt(u[9]))}),t=u9(n,i)),r&&r(t),e(t)})):(t.ms=vt.last_ms,t.rx=vt.bytes_read,t.wx=vt.bytes_write,t.tx=vt.bytes_read+vt.bytes_write,t.rx_sec=vt.rx_sec,t.wx_sec=vt.wx_sec,t.tx_sec=vt.tx_sec,r&&r(t),e(t))})})}cc.fsStats=Z2e;function c9(r,e,t,n,i){let s={rIO:0,wIO:0,tIO:0,rIO_sec:null,wIO_sec:null,tIO_sec:null,rWaitTime:0,wWaitTime:0,tWaitTime:0,rWaitPercent:null,wWaitPercent:null,tWaitPercent:null,ms:0};return Re&&Re.ms?(s.rIO=r,s.wIO=e,s.tIO=r+e,s.ms=Date.now()-Re.ms,s.rIO_sec=(s.rIO-Re.rIO)/(s.ms/1e3),s.wIO_sec=(s.wIO-Re.wIO)/(s.ms/1e3),s.tIO_sec=s.rIO_sec+s.wIO_sec,s.rWaitTime=t,s.wWaitTime=n,s.tWaitTime=i,s.rWaitPercent=(s.rWaitTime-Re.rWaitTime)*100/s.ms,s.wWaitPercent=(s.wWaitTime-Re.wWaitTime)*100/s.ms,s.tWaitPercent=(s.tWaitTime-Re.tWaitTime)*100/s.ms,Re.rIO=r,Re.wIO=e,Re.rIO_sec=s.rIO_sec,Re.wIO_sec=s.wIO_sec,Re.tIO_sec=s.tIO_sec,Re.rWaitTime=t,Re.wWaitTime=n,Re.tWaitTime=i,Re.rWaitPercent=s.rWaitPercent,Re.wWaitPercent=s.wWaitPercent,Re.tWaitPercent=s.tWaitPercent,Re.last_ms=s.ms,Re.ms=Date.now()):(s.rIO=r,s.wIO=e,s.tIO=r+e,s.rWaitTime=t,s.wWaitTime=n,s.tWaitTime=i,Re.rIO=r,Re.wIO=e,Re.rIO_sec=null,Re.wIO_sec=null,Re.tIO_sec=null,Re.rWaitTime=t,Re.wWaitTime=n,Re.tWaitTime=i,Re.rWaitPercent=null,Re.wWaitPercent=null,Re.tWaitPercent=null,Re.last_ms=0,Re.ms=Date.now()),s}function X2e(r){return new Promise(e=>{process.nextTick(()=>{if(Id||Cd)return e(null);let t={rIO:0,wIO:0,tIO:0,rIO_sec:null,wIO_sec:null,tIO_sec:null,rWaitTime:0,wWaitTime:0,tWaitTime:0,rWaitPercent:null,wWaitPercent:null,tWaitPercent:null,ms:0},n=0,i=0,s=0,o=0,a=0;Re&&!Re.ms||Re&&Re.ms&&Date.now()-Re.ms>=500?((ms||gs||ys||vs)&&Rn('for mount in `lsblk 2>/dev/null | grep " disk " | sed "s/[\u2502\u2514\u2500\u251C]//g" | awk \'{$1=$1};1\' | cut -d " " -f 1 | sort -u`; do cat /sys/block/$mount/stat | sed -r "s/ +/;/g" | sed -r "s/^;//"; done',{maxBuffer:1024*1024},function(c,d){c?(r&&r(t),e(t)):(d.split(`
`).forEach(function(p){if(!p)return;let m=p.split(";");n+=parseInt(m[0]),i+=parseInt(m[4]),s+=parseInt(m[3]),o+=parseInt(m[7]),a+=parseInt(m[10])}),t=c9(n,i,s,o,a),r&&r(t),e(t))}),Sl&&Rn(`ioreg -c IOBlockStorageDriver -k Statistics -r -w0 | sed -n "/IOBlockStorageDriver/,/Statistics/p" | grep "Statistics" | tr -cd "01234567890,
"`,{maxBuffer:1024*1024},function(u,c){u||(c.toString().split(`
`).forEach(function(h){h=h.trim(),h!==""&&(h=h.split(","),n+=parseInt(h[10]),i+=parseInt(h[0]))}),t=c9(n,i,s,o,a)),r&&r(t),e(t)})):(t.rIO=Re.rIO,t.wIO=Re.wIO,t.tIO=Re.rIO+Re.wIO,t.ms=Re.last_ms,t.rIO_sec=Re.rIO_sec,t.wIO_sec=Re.wIO_sec,t.tIO_sec=Re.tIO_sec,t.rWaitTime=Re.rWaitTime,t.wWaitTime=Re.wWaitTime,t.tWaitTime=Re.tWaitTime,t.rWaitPercent=Re.rWaitPercent,t.wWaitPercent=Re.wWaitPercent,t.tWaitPercent=Re.tWaitPercent,r&&r(t),e(t))})})}cc.disksIO=X2e;function eOe(r){function e(t){let n=[{pattern:"WESTERN.*",manufacturer:"Western Digital"},{pattern:"^WDC.*",manufacturer:"Western Digital"},{pattern:"WD.*",manufacturer:"Western Digital"},{pattern:"TOSHIBA.*",manufacturer:"Toshiba"},{pattern:"HITACHI.*",manufacturer:"Hitachi"},{pattern:"^IC.*",manufacturer:"Hitachi"},{pattern:"^HTS.*",manufacturer:"Hitachi"},{pattern:"SANDISK.*",manufacturer:"SanDisk"},{pattern:"KINGSTON.*",manufacturer:"Kingston Technology"},{pattern:"^SONY.*",manufacturer:"Sony"},{pattern:"TRANSCEND.*",manufacturer:"Transcend"},{pattern:"SAMSUNG.*",manufacturer:"Samsung"},{pattern:"^ST(?!I\\ ).*",manufacturer:"Seagate"},{pattern:"^STI\\ .*",manufacturer:"SimpleTech"},{pattern:"^D...-.*",manufacturer:"IBM"},{pattern:"^IBM.*",manufacturer:"IBM"},{pattern:"^FUJITSU.*",manufacturer:"Fujitsu"},{pattern:"^MP.*",manufacturer:"Fujitsu"},{pattern:"^MK.*",manufacturer:"Toshiba"},{pattern:"MAXTO.*",manufacturer:"Maxtor"},{pattern:"PIONEER.*",manufacturer:"Pioneer"},{pattern:"PHILIPS.*",manufacturer:"Philips"},{pattern:"QUANTUM.*",manufacturer:"Quantum Technology"},{pattern:"FIREBALL.*",manufacturer:"Quantum Technology"},{pattern:"^VBOX.*",manufacturer:"VirtualBox"},{pattern:"CORSAIR.*",manufacturer:"Corsair Components"},{pattern:"CRUCIAL.*",manufacturer:"Crucial"},{pattern:"ECM.*",manufacturer:"ECM"},{pattern:"INTEL.*",manufacturer:"INTEL"},{pattern:"EVO.*",manufacturer:"Samsung"},{pattern:"APPLE.*",manufacturer:"Apple"}],i="";return t&&(t=t.toUpperCase(),n.forEach(s=>{RegExp(s.pattern).test(t)&&(i=s.manufacturer)})),i}return new Promise(t=>{process.nextTick(()=>{let n=o=>{for(let a=0;a<o.length;a++)delete o[a].BSDName;r&&r(o),t(o)},i=[],s="";if(ms){let o="";Rn("export LC_ALL=C; lsblk -ablJO 2>/dev/null; unset LC_ALL",{maxBuffer:1024*1024},function(a,u){if(!a)try{let c=u.toString().trim(),d=[];try{let h=JSON.parse(c);h&&{}.hasOwnProperty.call(h,"blockdevices")&&(d=h.blockdevices.filter(p=>p.type==="disk"&&p.size>0&&(p.model!==null||p.mountpoint===null&&p.label===null&&p.fstype===null&&p.parttype===null&&p.path&&p.path.indexOf("/ram")!==0&&p.path.indexOf("/loop")!==0&&p["disc-max"]&&p["disc-max"]!==0)))}catch{try{let p=bl("export LC_ALL=C; lsblk -bPo NAME,TYPE,SIZE,FSTYPE,MOUNTPOINT,UUID,ROTA,RO,RM,LABEL,MODEL,OWNER,GROUP 2>/dev/null; unset LC_ALL").toString(),m=bT(p).split(`
`);d=wT(m).filter(_=>_.type==="disk"&&_.size>0&&(_.model!==null&&_.model!==""||_.mount===""&&_.label===""&&_.fsType===""))}catch{ae.noop()}}d.forEach(h=>{let p="",m="/dev/"+h.name,y=h.name;try{p=bl("cat /sys/block/"+y+"/queue/rotational 2>/dev/null").toString().split(`
`)[0]}catch{ae.noop()}let _=h.tran?h.tran.toUpperCase().trim():"";_==="NVME"&&(p="2",_="PCIe"),i.push({device:m,type:p==="0"?"SSD":p==="1"?"HD":p==="2"?"NVMe":h.model&&h.model.indexOf("SSD")>-1?"SSD":h.model&&h.model.indexOf("NVM")>-1?"NVMe":"HD",name:h.model||"",vendor:e(h.model)||(h.vendor?h.vendor.trim():""),size:h.size||0,bytesPerSector:null,totalCylinders:null,totalHeads:null,totalSectors:null,totalTracks:null,tracksPerCylinder:null,sectorsPerTrack:null,firmwareRevision:h.rev?h.rev.trim():"",serialNum:h.serial?h.serial.trim():"",interfaceType:_,smartStatus:"unknown",temperature:null,BSDName:m}),s+=`printf "
${m}|"; smartctl -H ${m} | grep overall;`,o+=`${o?'printf ",";':""}smartctl -a -j ${m};`})}catch{ae.noop()}o?Rn(o,{maxBuffer:1024*1024},function(c,d){try{JSON.parse(`[${d}]`).forEach(p=>{let m=p.smartctl.argv[p.smartctl.argv.length-1];for(let y=0;y<i.length;y++)i[y].BSDName===m&&(i[y].smartStatus=p.smart_status.passed?"Ok":p.smart_status.passed===!1?"Predicted Failure":"unknown",p.temperature&&p.temperature.current&&(i[y].temperature=p.temperature.current),i[y].smartData=p)}),n(i)}catch{s?(s=s+`printf "
"`,Rn(s,{maxBuffer:1024*1024},function(p,m){m.toString().split(`
`).forEach(_=>{if(_){let O=_.split("|");if(O.length===2){let x=O[0];O[1]=O[1].trim();let A=O[1].split(":");if(A.length===2){A[1]=A[1].trim();let P=A[1].toLowerCase();for(let q=0;q<i.length;q++)i[q].BSDName===x&&(i[q].smartStatus=P==="passed"?"Ok":P==="failed!"?"Predicted Failure":"unknown")}}}}),n(i)})):n(i)}}):n(i)})}if((gs||ys||vs)&&(r&&r(i),t(i)),Cd&&(r&&r(i),t(i)),Sl&&Rn("system_profiler SPSerialATADataType SPNVMeDataType SPUSBDataType",{maxBuffer:1024*1024},function(o,a){if(!o){let u=a.toString().split(`
`),c=[],d=[],h=[],p="SATA";u.forEach(m=>{m==="NVMExpress:"?p="NVMe":m==="USB:"?p="USB":m==="SATA/SATA Express:"?p="SATA":p==="SATA"?c.push(m):p==="NVMe"?d.push(m):p==="USB"&&h.push(m)});try{let m=c.join(`
`).split(" Physical Interconnect: ");m.shift(),m.forEach(function(y){y="InterfaceType: "+y;let _=y.split(`
`),O=ae.getValue(_,"Medium Type",":",!0).trim(),x=ae.getValue(_,"capacity",":",!0).trim(),A=ae.getValue(_,"BSD Name",":",!0).trim();if(x){let P=0;if(x.indexOf("(")>=0&&(P=parseInt(x.match(/\(([^)]+)\)/)[1].replace(/\./g,"").replace(/,/g,"").replace(/\s/g,""))),P||(P=parseInt(x)),P){let q=ae.getValue(_,"S.M.A.R.T. status",":",!0).trim().toLowerCase();i.push({device:A,type:O.startsWith("Solid")?"SSD":"HD",name:ae.getValue(_,"Model",":",!0).trim(),vendor:e(ae.getValue(_,"Model",":",!0).trim())||ae.getValue(_,"Manufacturer",":",!0),size:P,bytesPerSector:null,totalCylinders:null,totalHeads:null,totalSectors:null,totalTracks:null,tracksPerCylinder:null,sectorsPerTrack:null,firmwareRevision:ae.getValue(_,"Revision",":",!0).trim(),serialNum:ae.getValue(_,"Serial Number",":",!0).trim(),interfaceType:ae.getValue(_,"InterfaceType",":",!0).trim(),smartStatus:q==="verified"?"OK":q||"unknown",temperature:null,BSDName:A}),s=s+`printf "
`+A+'|"; diskutil info /dev/'+A+" | grep SMART;"}}})}catch{ae.noop()}try{let m=d.join(`
`).split(`

          Capacity:`);m.shift(),m.forEach(function(y){y="!Capacity: "+y;let _=y.split(`
`),O=ae.getValue(_,"link width",":",!0).trim(),x=ae.getValue(_,"!capacity",":",!0).trim(),A=ae.getValue(_,"BSD Name",":",!0).trim();if(x){let P=0;if(x.indexOf("(")>=0&&(P=parseInt(x.match(/\(([^)]+)\)/)[1].replace(/\./g,"").replace(/,/g,"").replace(/\s/g,""))),P||(P=parseInt(x)),P){let q=ae.getValue(_,"S.M.A.R.T. status",":",!0).trim().toLowerCase();i.push({device:A,type:"NVMe",name:ae.getValue(_,"Model",":",!0).trim(),vendor:e(ae.getValue(_,"Model",":",!0).trim()),size:P,bytesPerSector:null,totalCylinders:null,totalHeads:null,totalSectors:null,totalTracks:null,tracksPerCylinder:null,sectorsPerTrack:null,firmwareRevision:ae.getValue(_,"Revision",":",!0).trim(),serialNum:ae.getValue(_,"Serial Number",":",!0).trim(),interfaceType:("PCIe "+O).trim(),smartStatus:q==="verified"?"OK":q||"unknown",temperature:null,BSDName:A}),s=s+`printf "
`+A+'|"; diskutil info /dev/'+A+" | grep SMART;"}}})}catch{ae.noop()}try{let m=h.join(`
`).replaceAll(`Media:
 `,"Model:").split(`

          Product ID:`);m.shift(),m.forEach(function(y){let _=y.split(`
`),O=ae.getValue(_,"Capacity",":",!0).trim(),x=ae.getValue(_,"BSD Name",":",!0).trim();if(O){let A=0;if(O.indexOf("(")>=0&&(A=parseInt(O.match(/\(([^)]+)\)/)[1].replace(/\./g,"").replace(/,/g,"").replace(/\s/g,""))),A||(A=parseInt(O)),A){let P=ae.getValue(_,"S.M.A.R.T. status",":",!0).trim().toLowerCase();i.push({device:x,type:"USB",name:ae.getValue(_,"Model",":",!0).trim().replaceAll(":",""),vendor:e(ae.getValue(_,"Model",":",!0).trim()),size:A,bytesPerSector:null,totalCylinders:null,totalHeads:null,totalSectors:null,totalTracks:null,tracksPerCylinder:null,sectorsPerTrack:null,firmwareRevision:ae.getValue(_,"Revision",":",!0).trim(),serialNum:ae.getValue(_,"Serial Number",":",!0).trim(),interfaceType:"USB",smartStatus:P==="verified"?"OK":P||"unknown",temperature:null,BSDName:x}),s=s+`printf "
`+x+'|"; diskutil info /dev/'+x+" | grep SMART;"}}})}catch{ae.noop()}if(s)s=s+`printf "
"`,Rn(s,{maxBuffer:1024*1024},function(m,y){y.toString().split(`
`).forEach(O=>{if(O){let x=O.split("|");if(x.length===2){let A=x[0];x[1]=x[1].trim();let P=x[1].split(":");if(P.length===2){P[1]=P[1].trim();let q=P[1].toLowerCase();for(let F=0;F<i.length;F++)i[F].BSDName===A&&(i[F].smartStatus=q==="not supported"?"not supported":q==="verified"?"Ok":q==="failing"?"Predicted Failure":"unknown")}}}});for(let O=0;O<i.length;O++)delete i[O].BSDName;r&&r(i),t(i)});else{for(let m=0;m<i.length;m++)delete i[m].BSDName;r&&r(i),t(i)}}}),Id)try{let o=[];if(o.push(ae.powerShell("Get-CimInstance Win32_DiskDrive | select Caption,Size,Status,PNPDeviceId,DeviceId,BytesPerSector,TotalCylinders,TotalHeads,TotalSectors,TotalTracks,TracksPerCylinder,SectorsPerTrack,FirmwareRevision,SerialNumber,InterfaceType | fl")),o.push(ae.powerShell("Get-PhysicalDisk | select BusType,MediaType,FriendlyName,Model,SerialNumber,Size | fl")),ae.smartMonToolsInstalled())try{let a=JSON.parse(bl("smartctl --scan -j").toString());a&&a.devices&&a.devices.length>0&&a.devices.forEach(u=>{o.push(q2e(`smartctl -j -a ${u.name}`,ae.execOptsWin))})}catch{ae.noop()}ae.promiseAll(o).then(a=>{let u=a.results[0].toString().split(/\n\s*\n/);u.forEach(function(c){let d=c.split(`\r
`),h=ae.getValue(d,"Size",":").trim(),p=ae.getValue(d,"Status",":").trim().toLowerCase();h&&i.push({device:ae.getValue(d,"DeviceId",":"),type:c.indexOf("SSD")>-1?"SSD":"HD",name:ae.getValue(d,"Caption",":"),vendor:e(ae.getValue(d,"Caption",":",!0).trim()),size:parseInt(h),bytesPerSector:parseInt(ae.getValue(d,"BytesPerSector",":")),totalCylinders:parseInt(ae.getValue(d,"TotalCylinders",":")),totalHeads:parseInt(ae.getValue(d,"TotalHeads",":")),totalSectors:parseInt(ae.getValue(d,"TotalSectors",":")),totalTracks:parseInt(ae.getValue(d,"TotalTracks",":")),tracksPerCylinder:parseInt(ae.getValue(d,"TracksPerCylinder",":")),sectorsPerTrack:parseInt(ae.getValue(d,"SectorsPerTrack",":")),firmwareRevision:ae.getValue(d,"FirmwareRevision",":").trim(),serialNum:ae.getValue(d,"SerialNumber",":").trim(),interfaceType:ae.getValue(d,"InterfaceType",":").trim(),smartStatus:p==="ok"?"Ok":p==="degraded"?"Degraded":p==="pred fail"?"Predicted Failure":"Unknown",temperature:null})}),u=a.results[1].split(/\n\s*\n/),u.forEach(function(c){let d=c.split(`\r
`),h=ae.getValue(d,"SerialNumber",":").trim(),p=ae.getValue(d,"FriendlyName",":").trim().replace("Msft ","Microsoft"),m=ae.getValue(d,"Size",":").trim(),y=ae.getValue(d,"Model",":").trim(),_=ae.getValue(d,"BusType",":").trim(),O=ae.getValue(d,"MediaType",":").trim();if((O==="3"||O==="HDD")&&(O="HD"),O==="4"&&(O="SSD"),O==="5"&&(O="SCM"),O==="Unspecified"&&(y.toLowerCase().indexOf("virtual")>-1||y.toLowerCase().indexOf("vbox")>-1)&&(O="Virtual"),m){let x=ae.findObjectByKey(i,"serialNum",h);(x===-1||h==="")&&(x=ae.findObjectByKey(i,"name",p)),x!=-1&&(i[x].type=O,i[x].interfaceType=_)}}),a.results.shift(),a.results.shift(),a.results.length&&a.results.forEach(c=>{try{let d=JSON.parse(c);if(d.serial_number){let h=d.serial_number,p=ae.findObjectByKey(i,"serialNum",h);p!=-1&&(i[p].smartStatus=d.smart_status&&d.smart_status.passed?"Ok":d.smart_status&&d.smart_status.passed===!1?"Predicted Failure":"unknown",d.temperature&&d.temperature.current&&(i[p].temperature=d.temperature.current),i[p].smartData=d)}}catch{ae.noop()}}),r&&r(i),t(i)})}catch{r&&r(i),t(i)}})})}cc.diskLayout=eOe});var w9=E(hc=>{"use strict";var Kw=require("os"),ji=require("child_process").exec,Hr=require("child_process").execSync,tOe=require("fs"),_e=zr(),xl=process.platform,ea=xl==="linux"||xl==="android",ta=xl==="darwin",vm=xl==="win32",El=xl==="freebsd",Ol=xl==="openbsd",Il=xl==="netbsd",d9=xl==="sunos",mt={},h9="",Td={},p9=[],Ad=[],Md={},fc;function dc(){let r="",e="";try{let t=Kw.networkInterfaces(),n=9999;for(let i in t)({}).hasOwnProperty.call(t,i)&&t[i].forEach(function(s){s&&s.internal===!1&&(e=e||i,s.scopeid&&s.scopeid<n&&(r=i,n=s.scopeid))});if(r=r||e||"",vm){let i="";if(Hr("netstat -r",_e.execOptsWin).toString().split(Kw.EOL).forEach(u=>{if(u=u.replace(/\s+/g," ").trim(),u.indexOf("0.0.0.0 0.0.0.0")>-1&&!/[a-zA-Z]/.test(u)){let c=u.split(" ");c.length>=5&&(i=c[c.length-2])}}),i)for(let u in t)({}).hasOwnProperty.call(t,u)&&t[u].forEach(function(c){c&&c.address&&c.address===i&&(r=u)})}if(ea){let o=Hr("ip route 2> /dev/null | grep default").toString().split(`
`)[0].split(/\s+/);o[0]==="none"&&o[5]?r=o[5]:o[4]&&(r=o[4]),r.indexOf(":")>-1&&(r=r.split(":")[1].trim())}if(ta||El||Ol||Il||d9){let i="";ea&&(i="ip route 2> /dev/null | grep default | awk '{print $5}'"),ta&&(i="route -n get default 2>/dev/null | grep interface: | awk '{print $2}'"),(El||Ol||Il||d9)&&(i="route get 0.0.0.0 | grep interface:"),r=Hr(i).toString().split(`
`)[0],r.indexOf(":")>-1&&(r=r.split(":")[1].trim())}}catch{_e.noop()}return r&&(h9=r),h9}hc.getDefaultNetworkInterface=dc;function m9(){let r="",e="",t={};if(ea||El||Ol||Il){if(typeof fc>"u")try{let n=Hr("which ip").toString().split(`
`);n.length&&n[0].indexOf(":")===-1&&n[0].indexOf("/")===0?fc=n[0]:fc=""}catch{fc=""}try{let n="export LC_ALL=C; "+(fc?fc+" link show up":"/sbin/ifconfig")+"; unset LC_ALL",s=Hr(n).toString().split(`
`);for(let o=0;o<s.length;o++)if(s[o]&&s[o][0]!==" "){if(fc){let a=s[o+1].trim().split(" ");a[0]==="link/ether"&&(r=s[o].split(" ")[1],r=r.slice(0,r.length-1),e=a[1])}else r=s[o].split(" ")[0],e=s[o].split("HWaddr ")[1];r&&e&&(t[r]=e.trim(),r="",e="")}}catch{_e.noop()}}if(ta)try{let s=Hr("/sbin/ifconfig").toString().split(`
`);for(let o=0;o<s.length;o++)s[o]&&s[o][0]!=="	"&&s[o].indexOf(":")>0?r=s[o].split(":")[0]:s[o].indexOf("	ether ")===0&&(e=s[o].split("	ether ")[1],r&&e&&(t[r]=e.trim(),r="",e=""))}catch{_e.noop()}return t}function rOe(r){return new Promise(e=>{process.nextTick(()=>{let t=dc();r&&r(t),e(t)})})}hc.networkInterfaceDefault=rOe;function nOe(r,e){let t=[];for(let n in r)if({}.hasOwnProperty.call(r,n)&&r[n].trim()!==""){let i=r[n].trim().split(`\r
`),s=e&&e[n]?e[n].trim().split(`\r
`):[],o=_e.getValue(i,"NetEnabled",":"),a=_e.getValue(i,"AdapterTypeID",":")==="9"?"wireless":"wired",u=_e.getValue(i,"Name",":").replace(/\]/g,")").replace(/\[/g,"("),c=_e.getValue(i,"NetConnectionID",":").replace(/\]/g,")").replace(/\[/g,"(");if((u.toLowerCase().indexOf("wi-fi")>=0||u.toLowerCase().indexOf("wireless")>=0)&&(a="wireless"),o!==""){let d=parseInt(_e.getValue(i,"speed",":").trim(),10)/1e6;t.push({mac:_e.getValue(i,"MACAddress",":").toLowerCase(),dhcp:_e.getValue(s,"dhcpEnabled",":").toLowerCase()==="true",name:u,iface:c,netEnabled:o==="TRUE",speed:isNaN(d)?null:d,operstate:_e.getValue(i,"NetConnectionStatus",":")==="2"?"up":"down",type:a})}}return t}function iOe(){return new Promise(r=>{process.nextTick(()=>{let e="Get-CimInstance Win32_NetworkAdapter | fl *; echo '#-#-#-#';";e+="Get-CimInstance Win32_NetworkAdapterConfiguration | fl DHCPEnabled";try{_e.powerShell(e).then(t=>{t=t.split("#-#-#-#");let n=(t[0]||"").split(/\n\s*\n/),i=(t[1]||"").split(/\n\s*\n/);r(nOe(n,i))})}catch{r([])}})})}function sOe(){let r={},e={primaryDNS:"",exitCode:0,ifaces:[]};try{return Hr("ipconfig /all",_e.execOptsWin).split(`\r
\r
`).forEach((i,s)=>{if(s==1){let o=i.split(`\r
`).filter(u=>u.toUpperCase().includes("DNS")),a=o[0].substring(o[0].lastIndexOf(":")+1);e.primaryDNS=a.trim(),e.primaryDNS||(e.primaryDNS="Not defined")}if(s>1)if(s%2==0){let o=i.substring(i.lastIndexOf(" ")+1).replace(":","");r.name=o}else{let o=i.split(`\r
`).filter(u=>u.toUpperCase().includes("DNS")),a=o[0].substring(o[0].lastIndexOf(":")+1);r.dnsSuffix=a.trim(),e.ifaces.push(r),r={}}}),e}catch{return{primaryDNS:"",exitCode:0,ifaces:[]}}}function oOe(r,e){let t="",n=e+".";try{let i=r.filter(s=>n.includes(s.name+".")).map(s=>s.dnsSuffix);return i[0]&&(t=i[0]),t||(t=""),t}catch{return"Unknown"}}function aOe(){try{return Hr("netsh lan show profiles",_e.execOptsWin).split(`\r
Profile on interface`)}catch(r){return r.status===1&&r.stdout.includes("AutoConfig")?"Disabled":[]}}function lOe(r){try{return Hr(`netsh wlan show  interface name="${r}" | findstr "SSID"`,_e.execOptsWin).split(`\r
`).shift().split(":").pop()}catch{return"Unknown"}}function uOe(r,e,t){let n={state:"Unknown",protocol:"Unknown"};if(t==="Disabled")return n.state="Disabled",n.protocol="Not defined",n;if(r=="wired"&&t.length>0)try{let s=t.find(a=>a.includes(e+`\r
`)).split(`\r
`),o=s.find(a=>a.includes("802.1x"));if(o.includes("Disabled"))n.state="Disabled",n.protocol="Not defined";else if(o.includes("Enabled")){let a=s.find(u=>u.includes("EAP"));n.protocol=a.split(":").pop(),n.state="Enabled"}}catch{return n}else if(r=="wireless"){let i="",s="";try{let o=lOe(e);o!=="Unknown"&&(i=Hr(`netsh wlan show profiles "${o}" | findstr "802.1X"`,_e.execOptsWin),s=Hr(`netsh wlan show profiles "${o}" | findstr "EAP"`,_e.execOptsWin)),i.includes(":")&&s.includes(":")&&(n.state=i.split(":").pop(),n.protocol=s.split(":").pop())}catch(o){return o.status===1&&o.stdout.includes("AutoConfig")&&(n.state="Disabled",n.protocol="Not defined"),n}}return n}function g9(r){let e=[],t=[];return r.forEach(function(n){!n.startsWith("	")&&!n.startsWith(" ")&&t.length&&(e.push(t),t=[]),t.push(n)}),t.length&&e.push(t),e}function cOe(r){let e=[];return r.forEach(t=>{let n={iface:"",mtu:null,mac:"",ip6:"",ip4:"",speed:null,type:"",operstate:"",duplex:"",internal:!1},i=t[0];n.iface=i.split(":")[0].trim();let s=i.split("> mtu");n.mtu=s.length>1?parseInt(s[1],10):null,isNaN(n.mtu)&&(n.mtu=null),n.internal=s[0].toLowerCase().indexOf("loopback")>-1,t.forEach(u=>{u.trim().startsWith("ether ")&&(n.mac=u.split("ether ")[1].toLowerCase().trim()),u.trim().startsWith("inet6 ")&&!n.ip6&&(n.ip6=u.split("inet6 ")[1].toLowerCase().split("%")[0].split(" ")[0]),u.trim().startsWith("inet ")&&!n.ip4&&(n.ip4=u.split("inet ")[1].toLowerCase().split(" ")[0])});let o=_e.getValue(t,"link rate");n.speed=o?parseFloat(o):null,n.speed===null?(o=_e.getValue(t,"uplink rate"),n.speed=o?parseFloat(o):null,n.speed!==null&&o.toLowerCase().indexOf("gbps")>=0&&(n.speed=n.speed*1e3)):o.toLowerCase().indexOf("gbps")>=0&&(n.speed=n.speed*1e3),n.type=_e.getValue(t,"type").toLowerCase().indexOf("wi-fi")>-1?"wireless":"wired";let a=_e.getValue(t,"status").toLowerCase();n.operstate=a==="active"?"up":a==="inactive"?"down":"unknown",n.duplex=_e.getValue(t,"media").toLowerCase().indexOf("half-duplex")>-1?"half":"full",(n.ip6||n.ip4||n.mac)&&e.push(n)}),e}function fOe(){let r="/sbin/ifconfig -v";try{let e=Hr(r,{maxBuffer:2048e4}).toString().split(`
`),t=g9(e);return cOe(t)}catch{return[]}}function dOe(r){let e=`nmcli device status 2>/dev/null | grep ${r}`;try{let s=Hr(e).toString().replace(/\s+/g," ").trim().split(" ").slice(3).join(" ");return s!="--"?s:""}catch{return""}}function y9(r){let e=[];try{let t=`cat ${r} 2> /dev/null | grep 'iface\\|source'`;Hr(t,{maxBuffer:1024*2e4}).toString().split(`
`).forEach(i=>{let s=i.replace(/\s+/g," ").trim().split(" ");if(s.length>=4&&i.toLowerCase().indexOf(" inet ")>=0&&i.toLowerCase().indexOf("dhcp")>=0&&e.push(s[1]),i.toLowerCase().includes("source")){let o=i.split(" ")[1];e=e.concat(y9(o))}})}catch{_e.noop()}return e}function hOe(){let r="ip a 2> /dev/null",e=[];try{let t=Hr(r,{maxBuffer:2048e4}).toString().split(`
`),n=g9(t);e=pOe(n)}catch{_e.noop()}try{e=y9("/etc/network/interfaces")}catch{_e.noop()}return e}function pOe(r){let e=[];return r&&r.length&&r.forEach(t=>{if(t&&t.length&&t[0].split(":").length>2){for(let i of t)if(i.indexOf(" inet ")>=0&&i.indexOf(" dynamic ")>=0){let s=i.split(" "),o=s[s.length-1].trim();e.push(o);break}}}),e}function mOe(r,e,t){let n=!1;if(e){let i=`nmcli connection show "${e}" 2>/dev/null | grep ipv4.method;`;try{switch(Hr(i).toString().replace(/\s+/g," ").trim().split(" ").slice(1).toString()){case"auto":n=!0;break;default:n=!1;break}return n}catch{return t.indexOf(r)>=0}}else return t.indexOf(r)>=0}function gOe(r){let e=!1,t=`ipconfig getpacket "${r}" 2>/dev/null | grep lease_time;`;try{let n=Hr(t).toString().split(`
`);n.length&&n[0].startsWith("lease_time")&&(e=!0)}catch{_e.noop()}return e}function yOe(r){if(r){let e=`nmcli connection show "${r}" 2>/dev/null | grep ipv4.dns-search;`;try{let i=Hr(e).toString().replace(/\s+/g," ").trim().split(" ").slice(1).toString();return i=="--"?"Not defined":i}catch{return"Unknown"}}else return"Unknown"}function vOe(r){if(r){let e=`nmcli connection show "${r}" 2>/dev/null | grep 802-1x.eap;`;try{let i=Hr(e).toString().replace(/\s+/g," ").trim().split(" ").slice(1).toString();return i=="--"?"":i}catch{return"Not defined"}}else return"Not defined"}function wOe(r){return r?r=="Not defined"?"Disabled":"Enabled":"Unknown"}function ST(r,e,t){let n=["00:00:00:00:00:00","00:03:FF","00:05:69","00:0C:29","00:0F:4B","00:13:07","00:13:BE","00:15:5d","00:16:3E","00:1C:42","00:21:F6","00:24:0B","00:50:56","00:A0:B1","00:E0:C8","08:00:27","0A:00:27","18:92:2C","16:DF:49","3C:F3:92","54:52:00","FC:15:97"];return t?n.filter(i=>t.toUpperCase().toUpperCase().startsWith(i.substring(0,t.length))).length>0||r.toLowerCase().indexOf(" virtual ")>-1||e.toLowerCase().indexOf(" virtual ")>-1||r.toLowerCase().indexOf("vethernet ")>-1||e.toLowerCase().indexOf("vethernet ")>-1||r.toLowerCase().startsWith("veth")||e.toLowerCase().startsWith("veth")||r.toLowerCase().startsWith("vboxnet")||e.toLowerCase().startsWith("vboxnet"):!1}function _T(r,e,t){return typeof r=="string"&&(t=r,e=!0,r=null),typeof r=="boolean"&&(e=r,r=null,t=""),typeof e>"u"&&(e=!0),t=t||"",t=""+t,new Promise(n=>{process.nextTick(()=>{let i=Kw.networkInterfaces(),s=[],o=[],a=[],u=[];if(ta||El||Ol||Il)if(JSON.stringify(i)===JSON.stringify(Td)&&!e)s=Ad,r&&r(s),n(s);else{let c=dc();Td=JSON.parse(JSON.stringify(i)),o=fOe(),o.forEach(d=>{({}).hasOwnProperty.call(i,d.iface)&&i[d.iface].forEach(function(y){(y.family==="IPv4"||y.family===4)&&(d.ip4subnet=y.netmask),(y.family==="IPv6"||y.family===6)&&(d.ip6subnet=y.netmask)});let h="",p=_e.isPrototypePolluted()?"---":_e.sanitizeShellString(d.iface),m=_e.mathMin(p.length,2e3);for(let y=0;y<=m;y++)p[y]!==void 0&&(h=h+p[y]);s.push({iface:d.iface,ifaceName:d.iface,default:d.iface===c,ip4:d.ip4,ip4subnet:d.ip4subnet||"",ip6:d.ip6,ip6subnet:d.ip6subnet||"",mac:d.mac,internal:d.internal,virtual:d.internal?!1:ST(d.iface,d.iface,d.mac),operstate:d.operstate,type:d.type,duplex:d.duplex,mtu:d.mtu,speed:d.speed,dhcp:gOe(h),dnsSuffix:"",ieee8021xAuth:"",ieee8021xState:"",carrierChanges:0})}),Ad=s,t.toLowerCase().indexOf("default")>=0&&(s=s.filter(d=>d.default),s.length>0?s=s[0]:s=[]),r&&r(s),n(s)}if(ea)if(JSON.stringify(i)===JSON.stringify(Td)&&!e)s=Ad,r&&r(s),n(s);else{Td=JSON.parse(JSON.stringify(i)),p9=hOe();let c=dc();for(let d in i){let h="",p="",m="",y="",_="",O="",x="",A=null,P=0,q=!1,F="",z="",B="",G="";if({}.hasOwnProperty.call(i,d)){let H=d;i[d].forEach(function(X){(X.family==="IPv4"||X.family===4)&&(h=X.address,p=X.netmask),(X.family==="IPv6"||X.family===6)&&(!m||m.match(/^fe80::/i))&&(m=X.address,y=X.netmask),_=X.mac;let fe=parseInt(process.versions.node.split("."),10);_.indexOf("00:00:0")>-1&&(ea||ta)&&!X.internal&&fe>=8&&fe<=11&&(Object.keys(Md).length===0&&(Md=m9()),_=Md[d]||"")});let N=d.split(":")[0].trim().toLowerCase(),v="",w=_e.isPrototypePolluted()?"---":_e.sanitizeShellString(N),I=_e.mathMin(w.length,2e3);for(let X=0;X<=I;X++)w[X]!==void 0&&(v=v+w[X]);let T=`echo -n "addr_assign_type: "; cat /sys/class/net/${v}/addr_assign_type 2>/dev/null; echo;
            echo -n "address: "; cat /sys/class/net/${v}/address 2>/dev/null; echo;
            echo -n "addr_len: "; cat /sys/class/net/${v}/addr_len 2>/dev/null; echo;
            echo -n "broadcast: "; cat /sys/class/net/${v}/broadcast 2>/dev/null; echo;
            echo -n "carrier: "; cat /sys/class/net/${v}/carrier 2>/dev/null; echo;
            echo -n "carrier_changes: "; cat /sys/class/net/${v}/carrier_changes 2>/dev/null; echo;
            echo -n "dev_id: "; cat /sys/class/net/${v}/dev_id 2>/dev/null; echo;
            echo -n "dev_port: "; cat /sys/class/net/${v}/dev_port 2>/dev/null; echo;
            echo -n "dormant: "; cat /sys/class/net/${v}/dormant 2>/dev/null; echo;
            echo -n "duplex: "; cat /sys/class/net/${v}/duplex 2>/dev/null; echo;
            echo -n "flags: "; cat /sys/class/net/${v}/flags 2>/dev/null; echo;
            echo -n "gro_flush_timeout: "; cat /sys/class/net/${v}/gro_flush_timeout 2>/dev/null; echo;
            echo -n "ifalias: "; cat /sys/class/net/${v}/ifalias 2>/dev/null; echo;
            echo -n "ifindex: "; cat /sys/class/net/${v}/ifindex 2>/dev/null; echo;
            echo -n "iflink: "; cat /sys/class/net/${v}/iflink 2>/dev/null; echo;
            echo -n "link_mode: "; cat /sys/class/net/${v}/link_mode 2>/dev/null; echo;
            echo -n "mtu: "; cat /sys/class/net/${v}/mtu 2>/dev/null; echo;
            echo -n "netdev_group: "; cat /sys/class/net/${v}/netdev_group 2>/dev/null; echo;
            echo -n "operstate: "; cat /sys/class/net/${v}/operstate 2>/dev/null; echo;
            echo -n "proto_down: "; cat /sys/class/net/${v}/proto_down 2>/dev/null; echo;
            echo -n "speed: "; cat /sys/class/net/${v}/speed 2>/dev/null; echo;
            echo -n "tx_queue_len: "; cat /sys/class/net/${v}/tx_queue_len 2>/dev/null; echo;
            echo -n "type: "; cat /sys/class/net/${v}/type 2>/dev/null; echo;
            echo -n "wireless: "; cat /proc/net/wireless 2>/dev/null | grep ${v}; echo;
            echo -n "wirelessspeed: "; iw dev ${v} link 2>&1 | grep bitrate; echo;`,k=[];try{k=Hr(T).toString().split(`
`);let X=dOe(v);q=mOe(v,X,p9),F=yOe(X),z=vOe(X),B=wOe(z)}catch{_e.noop()}O=_e.getValue(k,"duplex"),O=O.startsWith("cat")?"":O,x=parseInt(_e.getValue(k,"mtu"),10);let M=parseInt(_e.getValue(k,"speed"),10);A=isNaN(M)?null:M;let K=_e.getValue(k,"wirelessspeed").split("tx bitrate: ");A===null&&K.length===2&&(M=parseFloat(K[1]),A=isNaN(M)?null:M),P=parseInt(_e.getValue(k,"carrier_changes"),10);let L=_e.getValue(k,"operstate");G=L==="up"?_e.getValue(k,"wireless").trim()?"wireless":"wired":"unknown",(v==="lo"||v.startsWith("bond"))&&(G="virtual");let b=i[d]&&i[d][0]?i[d][0].internal:!1;(d.toLowerCase().indexOf("loopback")>-1||H.toLowerCase().indexOf("loopback")>-1)&&(b=!0);let R=b?!1:ST(d,H,_);s.push({iface:v,ifaceName:H,default:N===c,ip4:h,ip4subnet:p,ip6:m,ip6subnet:y,mac:_,internal:b,virtual:R,operstate:L,type:G,duplex:O,mtu:x,speed:A,dhcp:q,dnsSuffix:F,ieee8021xAuth:z,ieee8021xState:B,carrierChanges:P})}}Ad=s,t.toLowerCase().indexOf("default")>=0&&(s=s.filter(d=>d.default),s.length>0?s=s[0]:s=[]),r&&r(s),n(s)}if(vm)if(JSON.stringify(i)===JSON.stringify(Td)&&!e)s=Ad,r&&r(s),n(s);else{Td=JSON.parse(JSON.stringify(i));let c=dc();iOe().then(function(d){d.forEach(h=>{let p=!1;Object.keys(i).forEach(m=>{p||i[m].forEach(y=>{Object.keys(y).indexOf("mac")>=0&&(p=y.mac===h.mac)})}),p||(i[h.name]=[{mac:h.mac}])}),u=aOe(),a=sOe();for(let h in i){let p="",m=_e.isPrototypePolluted()?"---":_e.sanitizeShellString(h),y=_e.mathMin(m.length,2e3);for(let k=0;k<=y;k++)m[k]!==void 0&&(p=p+m[k]);let _=h,O="",x="",A="",P="",q="",F="",z="",B=null,G=0,H="down",N=!1,v="",w="",I="",T="";if({}.hasOwnProperty.call(i,h)){let k=h;i[h].forEach(function(R){(R.family==="IPv4"||R.family===4)&&(O=R.address,x=R.netmask),(R.family==="IPv6"||R.family===6)&&(!A||A.match(/^fe80::/i))&&(A=R.address,P=R.netmask),q=R.mac;let X=parseInt(process.versions.node.split("."),10);q.indexOf("00:00:0")>-1&&(ea||ta)&&!R.internal&&X>=8&&X<=11&&(Object.keys(Md).length===0&&(Md=m9()),q=Md[h]||"")}),v=oOe(a.ifaces,p);let M=!1;d.forEach(R=>{R.mac===q&&!M&&(_=R.iface||_,k=R.name,N=R.dhcp,H=R.operstate,B=R.speed,T=R.type,M=!0)}),(h.toLowerCase().indexOf("wlan")>=0||k.toLowerCase().indexOf("wlan")>=0||k.toLowerCase().indexOf("802.11n")>=0||k.toLowerCase().indexOf("wireless")>=0||k.toLowerCase().indexOf("wi-fi")>=0||k.toLowerCase().indexOf("wifi")>=0)&&(T="wireless");let K=uOe(T,p,u);w=K.protocol,I=K.state;let L=i[h]&&i[h][0]?i[h][0].internal:!1;(h.toLowerCase().indexOf("loopback")>-1||k.toLowerCase().indexOf("loopback")>-1)&&(L=!0);let b=L?!1:ST(h,k,q);s.push({iface:_,ifaceName:k,default:_===c,ip4:O,ip4subnet:x,ip6:A,ip6subnet:P,mac:q,internal:L,virtual:b,operstate:H,type:T,duplex:F,mtu:z,speed:B,dhcp:N,dnsSuffix:v,ieee8021xAuth:w,ieee8021xState:I,carrierChanges:G})}}Ad=s,t.toLowerCase().indexOf("default")>=0&&(s=s.filter(h=>h.default),s.length>0?s=s[0]:s=[]),r&&r(s),n(s)})}})})}hc.networkInterfaces=_T;function jw(r,e,t,n,i,s,o,a){let u={iface:r,operstate:n,rx_bytes:e,rx_dropped:i,rx_errors:s,tx_bytes:t,tx_dropped:o,tx_errors:a,rx_sec:null,tx_sec:null,ms:0};return mt[r]&&mt[r].ms?(u.ms=Date.now()-mt[r].ms,u.rx_sec=e-mt[r].rx_bytes>=0?(e-mt[r].rx_bytes)/(u.ms/1e3):0,u.tx_sec=t-mt[r].tx_bytes>=0?(t-mt[r].tx_bytes)/(u.ms/1e3):0,mt[r].rx_bytes=e,mt[r].tx_bytes=t,mt[r].rx_sec=u.rx_sec,mt[r].tx_sec=u.tx_sec,mt[r].ms=Date.now(),mt[r].last_ms=u.ms,mt[r].operstate=n):(mt[r]||(mt[r]={}),mt[r].rx_bytes=e,mt[r].tx_bytes=t,mt[r].rx_sec=null,mt[r].tx_sec=null,mt[r].ms=Date.now(),mt[r].last_ms=0,mt[r].operstate=n),u}function v9(r,e){let t=[];return new Promise(n=>{process.nextTick(()=>{if(_e.isFunction(r)&&!e)e=r,t=[dc()];else{if(typeof r!="string"&&r!==void 0)return e&&e([]),n([]);r=r||dc(),r.__proto__.toLowerCase=_e.stringToLower,r.__proto__.replace=_e.stringReplace,r.__proto__.trim=_e.stringTrim,r=r.trim().toLowerCase().replace(/,+/g,"|"),t=r.split("|")}let i=[],s=[];if(t.length&&t[0].trim()==="*")t=[],_T(!1).then(o=>{for(let a of o)t.push(a.iface);v9(t.join(",")).then(a=>{e&&e(a),n(a)})});else{for(let o of t)s.push(bOe(o.trim()));s.length?Promise.all(s).then(o=>{e&&e(o),n(o)}):(e&&e(i),n(i))}})})}function bOe(r){function e(t){let n=[];for(let i in t)if({}.hasOwnProperty.call(t,i)&&t[i].trim()!==""){let s=t[i].trim().split(`\r
`);n.push({name:_e.getValue(s,"Name",":").replace(/[()[\] ]+/g,"").replace(/#|\//g,"_").toLowerCase(),rx_bytes:parseInt(_e.getValue(s,"BytesReceivedPersec",":"),10),rx_errors:parseInt(_e.getValue(s,"PacketsReceivedErrors",":"),10),rx_dropped:parseInt(_e.getValue(s,"PacketsReceivedDiscarded",":"),10),tx_bytes:parseInt(_e.getValue(s,"BytesSentPersec",":"),10),tx_errors:parseInt(_e.getValue(s,"PacketsOutboundErrors",":"),10),tx_dropped:parseInt(_e.getValue(s,"PacketsOutboundDiscarded",":"),10)})}return n}return new Promise(t=>{process.nextTick(()=>{let n="",i=_e.isPrototypePolluted()?"---":_e.sanitizeShellString(r),s=_e.mathMin(i.length,2e3);for(let x=0;x<=s;x++)i[x]!==void 0&&(n=n+i[x]);let o={iface:n,operstate:"unknown",rx_bytes:0,rx_dropped:0,rx_errors:0,tx_bytes:0,tx_dropped:0,tx_errors:0,rx_sec:null,tx_sec:null,ms:0},a="unknown",u=0,c=0,d=0,h=0,p=0,m=0,y,_,O;if(!mt[n]||mt[n]&&!mt[n].ms||mt[n]&&mt[n].ms&&Date.now()-mt[n].ms>=500){if(ea&&(tOe.existsSync("/sys/class/net/"+n)?(y="cat /sys/class/net/"+n+"/operstate; cat /sys/class/net/"+n+"/statistics/rx_bytes; cat /sys/class/net/"+n+"/statistics/tx_bytes; cat /sys/class/net/"+n+"/statistics/rx_dropped; cat /sys/class/net/"+n+"/statistics/rx_errors; cat /sys/class/net/"+n+"/statistics/tx_dropped; cat /sys/class/net/"+n+"/statistics/tx_errors; ",ji(y,function(x,A){x||(_=A.toString().split(`
`),a=_[0].trim(),u=parseInt(_[1],10),c=parseInt(_[2],10),d=parseInt(_[3],10),h=parseInt(_[4],10),p=parseInt(_[5],10),m=parseInt(_[6],10),o=jw(n,u,c,a,d,h,p,m)),t(o)})):t(o)),(El||Ol||Il)&&(y="netstat -ibndI "+n,ji(y,function(x,A){if(!x){_=A.toString().split(`
`);for(let P=1;P<_.length;P++){let q=_[P].replace(/ +/g," ").split(" ");q&&q[0]&&q[7]&&q[10]&&(u=u+parseInt(q[7]),q[6].trim()!=="-"&&(d=d+parseInt(q[6])),q[5].trim()!=="-"&&(h=h+parseInt(q[5])),c=c+parseInt(q[10]),q[12].trim()!=="-"&&(p=p+parseInt(q[12])),q[9].trim()!=="-"&&(m=m+parseInt(q[9])),a="up")}o=jw(n,u,c,a,d,h,p,m)}t(o)})),ta&&(y="ifconfig "+n+' | grep "status"',ji(y,function(x,A){o.operstate=(A.toString().split(":")[1]||"").trim(),o.operstate=(o.operstate||"").toLowerCase(),o.operstate=o.operstate==="active"?"up":o.operstate==="inactive"?"down":"unknown",y="netstat -bdI "+n,ji(y,function(P,q){if(!P&&(_=q.toString().split(`
`),_.length>1&&_[1].trim()!=="")){O=_[1].replace(/ +/g," ").split(" ");let F=O.length>11?1:0;u=parseInt(O[F+5]),d=parseInt(O[F+10]),h=parseInt(O[F+4]),c=parseInt(O[F+8]),p=parseInt(O[F+10]),m=parseInt(O[F+7]),o=jw(n,u,c,o.operstate,d,h,p,m)}t(o)})})),vm){let x=[],A=n;_e.powerShell("Get-CimInstance Win32_PerfRawData_Tcpip_NetworkInterface | select Name,BytesReceivedPersec,PacketsReceivedErrors,PacketsReceivedDiscarded,BytesSentPersec,PacketsOutboundErrors,PacketsOutboundDiscarded | fl").then((P,q)=>{if(!q){let F=P.toString().split(/\n\s*\n/);x=e(F)}_T(!1).then(F=>{u=0,c=0,x.forEach(z=>{F.forEach(B=>{(B.iface.toLowerCase()===n.toLowerCase()||B.mac.toLowerCase()===n.toLowerCase()||B.ip4.toLowerCase()===n.toLowerCase()||B.ip6.toLowerCase()===n.toLowerCase()||B.ifaceName.replace(/[()[\] ]+/g,"").replace(/#|\//g,"_").toLowerCase()===n.replace(/[()[\] ]+/g,"").replace("#","_").toLowerCase())&&B.ifaceName.replace(/[()[\] ]+/g,"").replace(/#|\//g,"_").toLowerCase()===z.name&&(A=B.iface,u=z.rx_bytes,d=z.rx_dropped,h=z.rx_errors,c=z.tx_bytes,p=z.tx_dropped,m=z.tx_errors,a=B.operstate)})}),u&&c&&(o=jw(A,parseInt(u),parseInt(c),a,d,h,p,m)),t(o)})})}}else o.rx_bytes=mt[n].rx_bytes,o.tx_bytes=mt[n].tx_bytes,o.rx_sec=mt[n].rx_sec,o.tx_sec=mt[n].tx_sec,o.ms=mt[n].last_ms,o.operstate=mt[n].operstate,t(o)})})}hc.networkStats=v9;function SOe(r,e){let t="";r.forEach(i=>{let s=i.split(" ");(parseInt(s[0],10)||-1)===e&&(s.shift(),t=s.join(" ").split(":")[0])}),t=t.split(" -")[0];let n=t.split("/");return n[n.length-1]}function _Oe(r){return new Promise(e=>{process.nextTick(()=>{let t=[];if(ea||El||Ol||Il){let n='export LC_ALL=C; netstat -tunap | grep "ESTABLISHED\\|SYN_SENT\\|SYN_RECV\\|FIN_WAIT1\\|FIN_WAIT2\\|TIME_WAIT\\|CLOSE\\|CLOSE_WAIT\\|LAST_ACK\\|LISTEN\\|CLOSING\\|UNKNOWN"; unset LC_ALL';(El||Ol||Il)&&(n='export LC_ALL=C; netstat -na | grep "ESTABLISHED\\|SYN_SENT\\|SYN_RECV\\|FIN_WAIT1\\|FIN_WAIT2\\|TIME_WAIT\\|CLOSE\\|CLOSE_WAIT\\|LAST_ACK\\|LISTEN\\|CLOSING\\|UNKNOWN"; unset LC_ALL'),ji(n,{maxBuffer:1024*2e4},function(i,s){let o=s.toString().split(`
`);!i&&(o.length>1||o[0]!="")?(o.forEach(function(a){if(a=a.replace(/ +/g," ").split(" "),a.length>=7){let u=a[3],c="",d=a[3].split(":");d.length>1&&(c=d[d.length-1],d.pop(),u=d.join(":"));let h=a[4],p="",m=a[4].split(":");m.length>1&&(p=m[m.length-1],m.pop(),h=m.join(":"));let y=a[5],_=a[6].split("/");y&&t.push({protocol:a[0],localAddress:u,localPort:c,peerAddress:h,peerPort:p,state:y,pid:_[0]&&_[0]!=="-"?parseInt(_[0],10):null,process:_[1]?_[1].split(" ")[0].split(":")[0]:""})}}),r&&r(t),e(t)):(n='ss -tunap | grep "ESTAB\\|SYN-SENT\\|SYN-RECV\\|FIN-WAIT1\\|FIN-WAIT2\\|TIME-WAIT\\|CLOSE\\|CLOSE-WAIT\\|LAST-ACK\\|LISTEN\\|CLOSING"',ji(n,{maxBuffer:1024*2e4},function(a,u){a||u.toString().split(`
`).forEach(function(d){if(d=d.replace(/ +/g," ").split(" "),d.length>=6){let h=d[4],p="",m=d[4].split(":");m.length>1&&(p=m[m.length-1],m.pop(),h=m.join(":"));let y=d[5],_="",O=d[5].split(":");O.length>1&&(_=O[O.length-1],O.pop(),y=O.join(":"));let x=d[1];x==="ESTAB"&&(x="ESTABLISHED"),x==="TIME-WAIT"&&(x="TIME_WAIT");let A=null,P="";if(d.length>=7&&d[6].indexOf("users:")>-1){let q=d[6].replace('users:(("',"").replace(/"/g,"").split(",");q.length>2&&(P=q[0].split(" ")[0].split(":")[0],A=parseInt(q[1],10))}x&&t.push({protocol:d[0],localAddress:h,localPort:p,peerAddress:y,peerPort:_,state:x,pid:A,process:P})}}),r&&r(t),e(t)}))})}if(ta){let n='netstat -natv | grep "tcp4\\|tcp6\\|udp4\\|udp6"',i="ESTABLISHED|SYN_SENT|SYN_RECV|FIN_WAIT1|FIN_WAIT2|TIME_WAIT|CLOSE|CLOSE_WAIT|LAST_ACK|LISTEN|CLOSING|UNKNOWN";ji(n,{maxBuffer:1024*2e4},function(s,o){s||ji("ps -axo pid,command",{maxBuffer:1024*2e4},function(a,u){let c=u.toString().split(`
`);c=c.map(h=>h.trim().replace(/ +/g," ")),o.toString().split(`
`).forEach(function(h){if(h=h.replace(/ +/g," ").split(" "),h.length>=8){let p=h[3],m="",y=h[3].split(".");y.length>1&&(m=y[y.length-1],y.pop(),p=y.join("."));let _=h[4],O="",x=h[4].split(".");x.length>1&&(O=x[x.length-1],x.pop(),_=x.join("."));let A=i.indexOf(h[5])>=0,P=A?h[5]:"UNKNOWN",q=parseInt(h[8+(A?0:-1)],10);P&&t.push({protocol:h[0],localAddress:p,localPort:m,peerAddress:_,peerPort:O,state:P,pid:q,process:SOe(c,q)})}}),r&&r(t),e(t)})})}if(vm){let n="netstat -nao";try{ji(n,_e.execOptsWin,function(i,s){i||(s.toString().split(`\r
`).forEach(function(a){if(a=a.trim().replace(/ +/g," ").split(" "),a.length>=4){let u=a[1],c="",d=a[1].split(":");d.length>1&&(c=d[d.length-1],d.pop(),u=d.join(":")),u=u.replace(/\[/g,"").replace(/\]/g,"");let h=a[2],p="",m=a[2].split(":");m.length>1&&(p=m[m.length-1],m.pop(),h=m.join(":")),h=h.replace(/\[/g,"").replace(/\]/g,"");let y=_e.toInt(a[4]),_=a[3];_==="HERGESTELLT"&&(_="ESTABLISHED"),_.startsWith("ABH")&&(_="LISTEN"),_==="SCHLIESSEN_WARTEN"&&(_="CLOSE_WAIT"),_==="WARTEND"&&(_="TIME_WAIT"),_==="SYN_GESENDET"&&(_="SYN_SENT"),_==="LISTENING"&&(_="LISTEN"),_==="SYN_RECEIVED"&&(_="SYN_RECV"),_==="FIN_WAIT_1"&&(_="FIN_WAIT1"),_==="FIN_WAIT_2"&&(_="FIN_WAIT2"),a[0].toLowerCase()!=="udp"&&_?t.push({protocol:a[0].toLowerCase(),localAddress:u,localPort:c,peerAddress:h,peerPort:p,state:_,pid:y,process:""}):a[0].toLowerCase()==="udp"&&t.push({protocol:a[0].toLowerCase(),localAddress:u,localPort:c,peerAddress:h,peerPort:p,state:"",pid:parseInt(a[3],10),process:""})}}),r&&r(t),e(t))})}catch{r&&r(t),e(t)}}})})}hc.networkConnections=_Oe;function xOe(r){return new Promise(e=>{process.nextTick(()=>{let t="";if(ea||El||Ol||Il){let n="ip route get 1";try{ji(n,{maxBuffer:1024*2e4},function(i,s){if(i)r&&r(t),e(t);else{let o=s.toString().split(`
`),u=(o&&o[0]?o[0]:"").split(" via ");u&&u[1]&&(u=u[1].split(" "),t=u[0]),r&&r(t),e(t)}})}catch{r&&r(t),e(t)}}if(ta){let n="route -n get default";try{ji(n,{maxBuffer:1024*2e4},function(i,s){if(!i){let o=s.toString().split(`
`).map(a=>a.trim());t=_e.getValue(o,"gateway")}t?(r&&r(t),e(t)):(n="netstat -rn | awk '/default/ {print $2}'",ji(n,{maxBuffer:1024*2e4},function(o,a){t=a.toString().split(`
`).map(c=>c.trim()).find(c=>/^(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$/.test(c)),r&&r(t),e(t)}))})}catch{r&&r(t),e(t)}}if(vm)try{ji("netstat -r",_e.execOptsWin,function(n,i){i.toString().split(Kw.EOL).forEach(o=>{if(o=o.replace(/\s+/g," ").trim(),o.indexOf("0.0.0.0 0.0.0.0")>-1&&!/[a-zA-Z]/.test(o)){let a=o.split(" ");a.length>=5&&a[a.length-3].indexOf(".")>-1&&(t=a[a.length-3])}}),t?(r&&r(t),e(t)):_e.powerShell("Get-CimInstance -ClassName Win32_IP4RouteTable | Where-Object { $_.Destination -eq '0.0.0.0' -and $_.Mask -eq '0.0.0.0' }").then(o=>{let a=o.toString().split(`\r
`);a.length>1&&!t&&(t=_e.getValue(a,"NextHop"),r&&r(t),e(t))})})}catch{r&&r(t),e(t)}})})}hc.networkGatewayDefault=xOe});var I9=E(Vw=>{"use strict";var wm=require("os"),qw=require("child_process").exec,Cl=require("child_process").execSync,le=zr(),Fw=process.platform,xT=Fw==="linux"||Fw==="android",ET=Fw==="darwin",OT=Fw==="win32";function S9(r){return parseFloat(r)/2-100}function _9(r){let e=2*(parseFloat(r)+100);return e<=100?e:100}var bm={1:2412,2:2417,3:2422,4:2427,5:2432,6:2437,7:2442,8:2447,9:2452,10:2457,11:2462,12:2467,13:2472,14:2484,32:5160,34:5170,36:5180,38:5190,40:5200,42:5210,44:5220,46:5230,48:5240,50:5250,52:5260,54:5270,56:5280,58:5290,60:5300,62:5310,64:5320,68:5340,96:5480,100:5500,102:5510,104:5520,106:5530,108:5540,110:5550,112:5560,114:5570,116:5580,118:5590,120:5600,122:5610,124:5620,126:5630,128:5640,132:5660,134:5670,136:5680,138:5690,140:5700,142:5710,144:5720,149:5745,151:5755,153:5765,155:5775,157:5785,159:5795,161:5805,165:5825,169:5845,173:5865,183:4915,184:4920,185:4925,187:4935,188:4940,189:4945,192:4960,196:4980};function Sm(r){return{}.hasOwnProperty.call(bm,r)?bm[r]:null}function EOe(r){let e=0;for(let t in bm)({}).hasOwnProperty.call(bm,t)&&bm[t]===r&&(e=le.toInt(t));return e}function x9(){let r=[],e="iw dev 2>/dev/null";try{let n=Cl(e).toString().split(`
`).map(i=>i.trim()).join(`
`).split(`
Interface `);return n.shift(),n.forEach(i=>{let s=i.split(`
`),o=s[0],a=le.toInt(le.getValue(s,"ifindex"," ")),u=le.getValue(s,"addr"," "),c=le.toInt(le.getValue(s,"channel"," "));r.push({id:a,iface:o,mac:u,channel:c})}),r}catch{try{let i=Cl("nmcli -t -f general,wifi-properties,wired-properties,interface-flags,capabilities,nsp device show 2>/dev/null").toString().split(`

`),s=1;return i.forEach(o=>{let a=o.split(`
`),u=le.getValue(a,"GENERAL.DEVICE"),c=le.getValue(a,"GENERAL.TYPE"),d=s++,h=le.getValue(a,"GENERAL.HWADDR"),p="";c.toLowerCase()==="wifi"&&r.push({id:d,iface:u,mac:h,channel:p})}),r}catch{return[]}}}function E9(r){let e=`nmcli -t -f general,wifi-properties,capabilities,ip4,ip6 device show ${r} 2>/dev/null`;try{let t=Cl(e).toString().split(`
`),n=le.getValue(t,"GENERAL.CONNECTION");return{iface:r,type:le.getValue(t,"GENERAL.TYPE"),vendor:le.getValue(t,"GENERAL.VENDOR"),product:le.getValue(t,"GENERAL.PRODUCT"),mac:le.getValue(t,"GENERAL.HWADDR").toLowerCase(),ssid:n!=="--"?n:null}}catch{return{}}}function OOe(r){let e=`nmcli -t --show-secrets connection show ${r} 2>/dev/null`;try{let t=Cl(e).toString().split(`
`),n=le.getValue(t,"802-11-wireless.seen-bssids").toLowerCase();return{ssid:r!=="--"?r:null,uuid:le.getValue(t,"connection.uuid"),type:le.getValue(t,"connection.type"),autoconnect:le.getValue(t,"connection.autoconnect")==="yes",security:le.getValue(t,"802-11-wireless-security.key-mgmt"),bssid:n!=="--"?n:null}}catch{return{}}}function IOe(r){if(!r)return{};let e=`wpa_cli -i ${r} status 2>&1`;try{let t=Cl(e).toString().split(`
`),n=le.toInt(le.getValue(t,"freq","="));return{ssid:le.getValue(t,"ssid","="),uuid:le.getValue(t,"uuid","="),security:le.getValue(t,"key_mgmt","="),freq:n,channel:EOe(n),bssid:le.getValue(t,"bssid","=").toLowerCase()}}catch{return{}}}function O9(){let r=[],e="nmcli -t -m multiline --fields active,ssid,bssid,mode,chan,freq,signal,security,wpa-flags,rsn-flags device wifi list 2>/dev/null";try{let n=Cl(e,{maxBuffer:2048e4}).toString().split("ACTIVE:");return n.shift(),n.forEach(i=>{i="ACTIVE:"+i;let s=i.split(wm.EOL),o=le.getValue(s,"CHAN"),a=le.getValue(s,"FREQ").toLowerCase().replace("mhz","").trim(),u=le.getValue(s,"SECURITY").replace("(","").replace(")",""),c=le.getValue(s,"WPA-FLAGS").replace("(","").replace(")",""),d=le.getValue(s,"RSN-FLAGS").replace("(","").replace(")","");r.push({ssid:le.getValue(s,"SSID"),bssid:le.getValue(s,"BSSID").toLowerCase(),mode:le.getValue(s,"MODE"),channel:o?parseInt(o,10):null,frequency:a?parseInt(a,10):null,signalLevel:S9(le.getValue(s,"SIGNAL")),quality:parseFloat(le.getValue(s,"SIGNAL")),security:u&&u!=="none"?u.split(" "):[],wpaFlags:c&&c!=="none"?c.split(" "):[],rsnFlags:d&&d!=="none"?d.split(" "):[]})}),r}catch{return[]}}function b9(r){let e=[];try{let t=Cl(`export LC_ALL=C; iwlist ${r} scan 2>&1; unset LC_ALL`).toString().split("        Cell ");return t[0].indexOf("resource busy")>=0?-1:(t.length>1&&(t.shift(),t.forEach(n=>{let i=n.split(`
`),s=le.getValue(i,"channel",":",!0),o=i&&i.length&&i[0].indexOf("Address:")>=0?i[0].split("Address:")[1].trim().toLowerCase():"",a=le.getValue(i,"mode",":",!0),u=le.getValue(i,"frequency",":",!0),d=le.getValue(i,"Quality","=",!0).toLowerCase().split("signal level="),h=d.length>1?le.toInt(d[1]):0,p=h?_9(h):0,m=le.getValue(i,"essid",":",!0),y=n.indexOf(" WPA ")>=0,_=n.indexOf("WPA2 ")>=0,O=[];y&&O.push("WPA"),_&&O.push("WPA2");let x=[],A="";i.forEach(function(P){let q=P.trim().toLowerCase();if(q.indexOf("group cipher")>=0){A&&x.push(A);let F=q.split(":");F.length>1&&(A=F[1].trim().toUpperCase())}if(q.indexOf("pairwise cipher")>=0){let F=q.split(":");F.length>1&&(F[1].indexOf("tkip")?A=A?"TKIP/"+A:"TKIP":F[1].indexOf("ccmp")?A=A?"CCMP/"+A:"CCMP":F[1].indexOf("proprietary")&&(A=A?"PROP/"+A:"PROP"))}if(q.indexOf("authentication suites")>=0){let F=q.split(":");F.length>1&&(F[1].indexOf("802.1x")?A=A?"802.1x/"+A:"802.1x":F[1].indexOf("psk")&&(A=A?"PSK/"+A:"PSK"))}}),A&&x.push(A),e.push({ssid:m,bssid:o,mode:a,channel:s?le.toInt(s):null,frequency:u?le.toInt(u.replace(".","")):null,signalLevel:h,quality:p,security:O,wpaFlags:x,rsnFlags:[]})})),e)}catch{return-1}}function COe(r){let e=[];return r&&r.forEach(function(t){let n=t.RSSI,i=[],s=[],o=t.SSID_STR||"";if(t.WPA_IE&&(i.push("WPA"),t.WPA_IE.IE_KEY_WPA_UCIPHERS&&t.WPA_IE.IE_KEY_WPA_UCIPHERS.forEach(function(a){a===0&&s.indexOf("unknown/TKIP")===-1&&s.push("unknown/TKIP"),a===2&&s.indexOf("PSK/TKIP")===-1&&s.push("PSK/TKIP"),a===4&&s.indexOf("PSK/AES")===-1&&s.push("PSK/AES")})),t.RSN_IE&&(i.push("WPA2"),t.RSN_IE.IE_KEY_RSN_UCIPHERS&&t.RSN_IE.IE_KEY_RSN_UCIPHERS.forEach(function(a){a===0&&s.indexOf("unknown/TKIP")===-1&&s.push("unknown/TKIP"),a===2&&s.indexOf("TKIP/TKIP")===-1&&s.push("TKIP/TKIP"),a===4&&s.indexOf("PSK/AES")===-1&&s.push("PSK/AES")})),t.SSID&&o==="")try{o=Buffer.from(t.SSID,"base64").toString("utf8")}catch{le.noop()}e.push({ssid:o,bssid:t.BSSID||"",mode:"",channel:t.CHANNEL,frequency:Sm(t.CHANNEL),signalLevel:n?parseInt(n,10):null,quality:_9(n),security:i,wpaFlags:s,rsnFlags:[]})}),e}function TOe(r){return new Promise(e=>{process.nextTick(()=>{let t=[];if(xT)if(t=O9(),t.length===0)try{let n=Cl("export LC_ALL=C; iwconfig 2>/dev/null; unset LC_ALL").toString().split(`

`),i="";if(n.forEach(s=>{s.indexOf("no wireless")===-1&&s.trim()!==""&&(i=s.split(" ")[0])}),i){let s="",o=le.isPrototypePolluted()?"---":le.sanitizeShellString(i,!0),a=le.mathMin(o.length,2e3);for(let c=0;c<=a;c++)o[c]!==void 0&&(s=s+o[c]);let u=b9(s);u===-1?setTimeout(function(c){let d=b9(c);d!=-1&&(t=d),r&&r(t),e(t)},4e3):(t=u,r&&r(t),e(t))}else r&&r(t),e(t)}catch{r&&r(t),e(t)}else r&&r(t),e(t);else if(ET)qw("/System/Library/PrivateFrameworks/Apple80211.framework/Versions/Current/Resources/airport -s -x",{maxBuffer:1024*4e4},function(i,s){let o=s.toString();t=COe(le.plistParser(o)),r&&r(t),e(t)});else if(OT){let n="netsh wlan show networks mode=Bssid";le.powerShell(n).then(i=>{let s=i.toString("utf8").split(wm.EOL+wm.EOL+"SSID ");s.shift(),s.forEach(o=>{let a=o.split(wm.EOL);if(a&&a.length>=8&&a[0].indexOf(":")>=0){let u=o.split(" BSSID");u.shift(),u.forEach(c=>{let d=c.split(wm.EOL),h=d[0].split(":");h.shift();let p=h.join(":").trim().toLowerCase(),m=d[3].split(":").pop().trim(),y=d[1].split(":").pop().trim();t.push({ssid:a[0].split(":").pop().trim(),bssid:p,mode:"",channel:m?parseInt(m,10):null,frequency:Sm(m),signalLevel:S9(y),quality:y?parseInt(y,10):null,security:[a[2].split(":").pop().trim()],wpaFlags:[a[3].split(":").pop().trim()],rsnFlags:[]})})}}),r&&r(t),e(t)})}else r&&r(t),e(t)})})}Vw.wifiNetworks=TOe;function AOe(r){r=r.toLowerCase();let e="";return r.indexOf("intel")>=0?e="Intel":r.indexOf("realtek")>=0?e="Realtek":r.indexOf("qualcom")>=0?e="Qualcom":r.indexOf("broadcom")>=0?e="Broadcom":r.indexOf("cavium")>=0?e="Cavium":r.indexOf("cisco")>=0?e="Cisco":r.indexOf("marvel")>=0?e="Marvel":r.indexOf("zyxel")>=0?e="Zyxel":r.indexOf("melanox")>=0?e="Melanox":r.indexOf("d-link")>=0?e="D-Link":r.indexOf("tp-link")>=0?e="TP-Link":r.indexOf("asus")>=0?e="Asus":r.indexOf("linksys")>=0&&(e="Linksys"),e}function MOe(r){return new Promise(e=>{process.nextTick(()=>{let t=[];if(xT){let n=x9(),i=O9();n.forEach(s=>{let o="",a=le.isPrototypePolluted()?"---":le.sanitizeShellString(s.iface,!0),u=le.mathMin(a.length,2e3);for(let P=0;P<=u;P++)a[P]!==void 0&&(o=o+a[P]);let c=E9(o),d=IOe(o),h=c.ssid||d.ssid,p=i.filter(P=>P.ssid===h),m="",y=le.isPrototypePolluted()?"---":le.sanitizeShellString(h,!0),_=le.mathMin(y.length,2e3);for(let P=0;P<=_;P++)y[P]!==void 0&&(m=m+y[P]);let O=OOe(m),x=p&&p.length&&p[0].channel?p[0].channel:d.channel?d.channel:null,A=p&&p.length&&p[0].bssid?p[0].bssid:d.bssid?d.bssid:null;h&&A&&t.push({id:s.id,iface:s.iface,model:c.product,ssid:h,bssid:p&&p.length&&p[0].bssid?p[0].bssid:d.bssid?d.bssid:null,channel:x,frequency:x?Sm(x):null,type:O.type?O.type:"802.11",security:O.security?O.security:d.security?d.security:null,signalLevel:p&&p.length&&p[0].signalLevel?p[0].signalLevel:null,txRate:null})}),r&&r(t),e(t)}else if(ET){let n="system_profiler SPNetworkDataType";qw(n,function(i,s){let o=s.toString().split(`

    Wi-Fi:

`);if(o.length>1){let a=o[1].split(`

`)[0].split(`
`),u=le.getValue(a,"BSD Device Name",":",!0),c=le.getValue(a,"hardware",":",!0);n="/System/Library/PrivateFrameworks/Apple80211.framework/Versions/Current/Resources/airport -I",qw(n,function(d,h){let p=h.toString().split(`
`);if(a.length>10){let m=le.getValue(p,"ssid",":",!0),y=le.getValue(p,"bssid",":",!0),_=le.getValue(p,"link auth",":",!0),O=le.getValue(p,"lastTxRate",":",!0),x=le.getValue(p,"channel",":",!0).split(",")[0],A="802.11",P=le.toInt(le.getValue(p,"agrCtlRSSI",":",!0)),q=le.toInt(le.getValue(p,"agrCtlNoise",":",!0)),F=P-q;(m||y)&&t.push({id:"Wi-Fi",iface:u,model:c,ssid:m,bssid:y,channel:le.toInt(x),frequency:x?Sm(x):null,type:A,security:_,signalLevel:F,txRate:O})}r&&r(t),e(t)})}else r&&r(t),e(t)})}else if(OT){let n="netsh wlan show interfaces";le.powerShell(n).then(function(i){let s=i.toString().split(`\r
`);for(let a=0;a<s.length;a++)s[a]=s[a].trim();let o=s.join(`\r
`).split(`:\r
\r
`);o.shift(),o.forEach(a=>{let u=a.split(`\r
`);if(u.length>=5){let c=u[0].indexOf(":")>=0?u[0].split(":")[1].trim():"",d=u[1].indexOf(":")>=0?u[1].split(":")[1].trim():"",h=u[2].indexOf(":")>=0?u[2].split(":")[1].trim():"",p=le.getValue(u,"SSID",":",!0),m=le.getValue(u,"BSSID",":",!0),y=le.getValue(u,"Signal",":",!0),_=le.getValue(u,"Radio type",":",!0)||le.getValue(u,"Type de radio",":",!0)||le.getValue(u,"Funktyp",":",!0)||null,O=le.getValue(u,"authentication",":",!0)||le.getValue(u,"Authentification",":",!0)||le.getValue(u,"Authentifizierung",":",!0)||null,x=le.getValue(u,"Channel",":",!0)||le.getValue(u,"Canal",":",!0)||le.getValue(u,"Kanal",":",!0)||null,A=le.getValue(u,"Transmit rate (mbps)",":",!0)||le.getValue(u,"Transmission (mbit/s)",":",!0)||le.getValue(u,"Empfangsrate (MBit/s)",":",!0)||null;d&&h&&p&&m&&t.push({id:h,iface:c,model:d,ssid:p,bssid:m,channel:le.toInt(x),frequency:x?Sm(x):null,type:_,security:O,signalLevel:y,txRate:le.toInt(A)||null})}}),r&&r(t),e(t)})}else r&&r(t),e(t)})})}Vw.wifiConnections=MOe;function kOe(r){return new Promise(e=>{process.nextTick(()=>{let t=[];if(xT)x9().forEach(i=>{let s=E9(i.iface);t.push({id:i.id,iface:i.iface,model:s.product?s.product:null,vendor:s.vendor?s.vendor:null,mac:i.mac})}),r&&r(t),e(t);else if(ET)qw("system_profiler SPNetworkDataType",function(i,s){let o=s.toString().split(`

    Wi-Fi:

`);if(o.length>1){let a=o[1].split(`

`)[0].split(`
`),u=le.getValue(a,"BSD Device Name",":",!0),c=le.getValue(a,"MAC Address",":",!0),d=le.getValue(a,"hardware",":",!0);t.push({id:"Wi-Fi",iface:u,model:d,vendor:"",mac:c})}r&&r(t),e(t)});else if(OT){let n="netsh wlan show interfaces";le.powerShell(n).then(function(i){let s=i.toString().split(`\r
`);for(let a=0;a<s.length;a++)s[a]=s[a].trim();let o=s.join(`\r
`).split(`:\r
\r
`);o.shift(),o.forEach(a=>{let u=a.split(`\r
`);if(u.length>=5){let c=u[0].indexOf(":")>=0?u[0].split(":")[1].trim():"",d=u[1].indexOf(":")>=0?u[1].split(":")[1].trim():"",h=u[2].indexOf(":")>=0?u[2].split(":")[1].trim():"",p=u[3].indexOf(":")>=0?u[3].split(":"):[];p.shift();let m=p.join(":").trim(),y=AOe(d);c&&d&&h&&m&&t.push({id:h,iface:c,model:d,vendor:y,mac:m})}}),r&&r(t),e(t)})}else r&&r(t),e(t)})})}Vw.wifiInterfaces=kOe});var A9=E(Gw=>{"use strict";var Uw=require("os"),POe=require("fs"),ROe=require("path"),_m=require("child_process").exec,IT=require("child_process").execSync,Ve=zr(),Tl=process.platform,ra=Tl==="linux"||Tl==="android",pc=Tl==="darwin",CT=Tl==="win32",xm=Tl==="freebsd",Em=Tl==="openbsd",Om=Tl==="netbsd",Bw=Tl==="sunos",nn={all:0,all_utime:0,all_stime:0,list:{},ms:0,result:{}},kd={all:0,all_utime:0,all_stime:0,list:{},ms:0,result:{}},ui={all:0,all_utime:0,all_stime:0,list:{},ms:0,result:{}},C9={0:"unknown",1:"other",2:"ready",3:"running",4:"blocked",5:"suspended blocked",6:"suspended ready",7:"terminated",8:"stopped",9:"growing"};function LOe(r){let e=r,t=r.replace(/ +/g," ").split(" ");return t.length===5&&(e=t[4]+"-"+("0"+("JANFEBMARAPRMAYJUNJULAUGSEPOCTNOVDEC".indexOf(t[1].toUpperCase())/3+1)).slice(-2)+"-"+("0"+t[2]).slice(-2)+" "+t[3]),e}function DOe(r){let e=new Date;e=new Date(e.getTime()-e.getTimezoneOffset()*6e4);let t=r.split("-"),n=t.length-1,i=n>0?parseInt(t[n-1]):0,s=t[n].split(":"),o=s.length===3?parseInt(s[0]||0):0,a=parseInt(s[s.length===3?1:0]||0),u=parseInt(s[s.length===3?2:1]||0),c=(((i*24+o)*60+a)*60+u)*1e3,d=new Date(e.getTime()),h=d.toISOString().substring(0,10)+" "+d.toISOString().substring(11,19);try{d=new Date(e.getTime()-c),h=d.toISOString().substring(0,10)+" "+d.toISOString().substring(11,19)}catch{Ve.noop()}return h}function NOe(r,e){return Ve.isFunction(r)&&!e&&(e=r,r=""),new Promise(t=>{process.nextTick(()=>{if(typeof r!="string")return e&&e([]),t([]);if(r){let n="";n.__proto__.toLowerCase=Ve.stringToLower,n.__proto__.replace=Ve.stringReplace,n.__proto__.trim=Ve.stringTrim;let i=Ve.sanitizeShellString(r),s=Ve.mathMin(i.length,2e3);for(let c=0;c<=s;c++)i[c]!==void 0&&(n=n+i[c]);n=n.trim().toLowerCase().replace(/, /g,"|").replace(/,+/g,"|"),n===""&&(n="*"),Ve.isPrototypePolluted()&&n!=="*"&&(n="------");let o=n.split("|"),a=[],u=[];if(ra||xm||Em||Om||pc){if((ra||xm||Em||Om)&&n==="*")try{let d=IT("systemctl --all --type=service --no-legend 2> /dev/null").toString().split(`
`);o=[];for(let h of d){let p=h.split(".service")[0];p&&h.indexOf(" not-found ")===-1&&o.push(p.trim())}n=o.join("|")}catch{try{n="";let h=IT("service --status-all 2> /dev/null").toString().split(`
`);for(let p of h){let m=p.split("]");m.length===2&&(n+=(n!==""?"|":"")+m[1].trim())}o=n.split("|")}catch{try{let p=IT("ls /etc/init.d/ -m 2> /dev/null").toString().split(`
`).join("");if(n="",p){let m=p.split(",");for(let y of m){let _=y.trim();_&&(n+=(n!==""?"|":"")+_)}o=n.split("|")}}catch{n="",o=[]}}}pc&&n==="*"&&(e&&e(a),t(a));let c=pc?["-caxo","pcpu,pmem,pid,command"]:["-axo","pcpu,pmem,pid,command"];n!==""&&o.length>0?Ve.execSafe("ps",c).then(d=>{if(d){let h=d.replace(/ +/g," ").replace(/,+/g,".").split(`
`);if(o.forEach(function(p){let m;pc?m=h.filter(function(_){return _.toLowerCase().indexOf(p)!==-1}):m=h.filter(function(_){return _.toLowerCase().indexOf(" "+p+":")!==-1||_.toLowerCase().indexOf("/"+p)!==-1});let y=[];for(let _ of m){let O=_.trim().split(" ")[2];O&&y.push(parseInt(O,10))}a.push({name:p,running:m.length>0,startmode:"",pids:y,cpu:parseFloat(m.reduce(function(_,O){return _+parseFloat(O.trim().split(" ")[0])},0).toFixed(2)),mem:parseFloat(m.reduce(function(_,O){return _+parseFloat(O.trim().split(" ")[1])},0).toFixed(2))})}),ra){let p='cat /proc/stat | grep "cpu "';for(let m in a)for(let y in a[m].pids)p+=";cat /proc/"+a[m].pids[y]+"/stat";_m(p,{maxBuffer:1024*2e4},function(m,y){let _=y.toString().split(`
`),O=TT(_.shift()),x={},A={};_.forEach(P=>{if(A=AT(P,O,kd),A.pid){let q=-1;for(let F in a)for(let z in a[F].pids)parseInt(a[F].pids[z])===parseInt(A.pid)&&(q=F);q>=0&&(a[q].cpu+=A.cpuu+A.cpus),x[A.pid]={cpuu:A.cpuu,cpus:A.cpus,utime:A.utime,stime:A.stime,cutime:A.cutime,cstime:A.cstime}}}),kd.all=O,kd.list=Object.assign({},x),kd.ms=Date.now()-kd.ms,kd.result=Object.assign({},a),e&&e(a),t(a)})}else e&&e(a),t(a)}else c=["-o","comm"],Ve.execSafe("ps",c).then(h=>{if(h){let p=h.replace(/ +/g," ").replace(/,+/g,".").split(`
`);o.forEach(function(m){let y=p.filter(function(_){return _.indexOf(m)!==-1});a.push({name:m,running:y.length>0,startmode:"",cpu:0,mem:0})}),e&&e(a),t(a)}else o.forEach(function(p){a.push({name:p,running:!1,startmode:"",cpu:0,mem:0})}),e&&e(a),t(a)})}):(e&&e(a),t(a))}if(CT)try{let c="Get-CimInstance Win32_Service";o[0]!=="*"&&(c+=' -Filter "',o.forEach(d=>{c+=`Name='${d}' or `}),c=`${c.slice(0,-4)}"`),c+=" | select Name,Caption,Started,StartMode,ProcessId | fl",Ve.powerShell(c).then((d,h)=>{h?(o.forEach(function(p){a.push({name:p,running:!1,startmode:"",cpu:0,mem:0})}),e&&e(a),t(a)):(d.split(/\n\s*\n/).forEach(m=>{if(m.trim()!==""){let y=m.trim().split(`\r
`),_=Ve.getValue(y,"Name",":",!0).toLowerCase(),O=Ve.getValue(y,"Caption",":",!0).toLowerCase(),x=Ve.getValue(y,"Started",":",!0),A=Ve.getValue(y,"StartMode",":",!0),P=Ve.getValue(y,"ProcessId",":",!0);(n==="*"||o.indexOf(_)>=0||o.indexOf(O)>=0)&&(a.push({name:_,running:x.toLowerCase()==="true",startmode:A,pids:[P],cpu:0,mem:0}),u.push(_),u.push(O))}}),n!=="*"&&o.filter(function(y){return u.indexOf(y)===-1}).forEach(function(y){a.push({name:y,running:!1,startmode:"",pids:[],cpu:0,mem:0})}),e&&e(a),t(a))})}catch{e&&e(a),t(a)}}else e&&e([]),t([])})})}Gw.services=NOe;function TT(r){let e=r.replace(/ +/g," ").split(" "),t=e.length>=2?parseInt(e[1]):0,n=e.length>=3?parseInt(e[2]):0,i=e.length>=4?parseInt(e[3]):0,s=e.length>=5?parseInt(e[4]):0,o=e.length>=6?parseInt(e[5]):0,a=e.length>=7?parseInt(e[6]):0,u=e.length>=8?parseInt(e[7]):0,c=e.length>=9?parseInt(e[8]):0,d=e.length>=10?parseInt(e[9]):0,h=e.length>=11?parseInt(e[10]):0;return t+n+i+s+o+a+u+c+d+h}function AT(r,e,t){let n=r.replace(/ +/g," ").split(")");if(n.length>=2){let i=n[1].split(" ");if(i.length>=16){let s=parseInt(n[0].split(" ")[0]),o=parseInt(i[12]),a=parseInt(i[13]),u=parseInt(i[14]),c=parseInt(i[15]),d=0,h=0;return t.all>0&&t.list[s]?(d=(o+u-t.list[s].utime-t.list[s].cutime)/(e-t.all)*100,h=(a+c-t.list[s].stime-t.list[s].cstime)/(e-t.all)*100):(d=(o+u)/e*100,h=(a+c)/e*100),{pid:s,utime:o,stime:a,cutime:u,cstime:c,cpuu:d,cpus:h}}else return{pid:0,utime:0,stime:0,cutime:0,cstime:0,cpuu:0,cpus:0}}else return{pid:0,utime:0,stime:0,cutime:0,cstime:0,cpuu:0,cpus:0}}function T9(r,e,t){let n=0,i=0;return t.all>0&&t.list[r.pid]?(n=(r.utime-t.list[r.pid].utime)/(e-t.all)*100,i=(r.stime-t.list[r.pid].stime)/(e-t.all)*100):(n=r.utime/e*100,i=r.stime/e*100),{pid:r.pid,utime:r.utime,stime:r.stime,cpuu:n>0?n:0,cpus:i>0?i:0}}function jOe(r){let e=[];function t(o){o=o||"";let a=o.split(" ")[0];if(a.substr(-1)===":"&&(a=a.substr(0,a.length-1)),a.substr(0,1)!=="["){let u=a.split("/");isNaN(parseInt(u[u.length-1]))?a=u[u.length-1]:a=u[0]}return a}function n(o){let a=0,u=0;function c(N){a=u,e[N]?u=o.substring(e[N].to+a,1e4).indexOf(" "):u=1e4}c(0);let d=parseInt(o.substring(e[0].from+a,e[0].to+u));c(1);let h=parseInt(o.substring(e[1].from+a,e[1].to+u));c(2);let p=parseFloat(o.substring(e[2].from+a,e[2].to+u).replace(/,/g,"."));c(3);let m=parseFloat(o.substring(e[3].from+a,e[3].to+u).replace(/,/g,"."));c(4);let y=parseInt(o.substring(e[4].from+a,e[4].to+u));c(5);let _=parseInt(o.substring(e[5].from+a,e[5].to+u));c(6);let O=parseInt(o.substring(e[6].from+a,e[6].to+u));c(7);let x=parseInt(o.substring(e[7].from+a,e[7].to+u))||0;c(8);let A=Bw?LOe(o.substring(e[8].from+a,e[8].to+u).trim()):DOe(o.substring(e[8].from+a,e[8].to+u).trim());c(9);let P=o.substring(e[9].from+a,e[9].to+u).trim();P=P[0]==="R"?"running":P[0]==="S"?"sleeping":P[0]==="T"?"stopped":P[0]==="W"?"paging":P[0]==="X"?"dead":P[0]==="Z"?"zombie":P[0]==="D"||P[0]==="U"?"blocked":"unknown",c(10);let q=o.substring(e[10].from+a,e[10].to+u).trim();(q==="?"||q==="??")&&(q=""),c(11);let F=o.substring(e[11].from+a,e[11].to+u).trim();c(12);let z="",B="",G="",H=o.substring(e[12].from+a,e[12].to+u).trim();if(H.substr(H.length-1)==="]"&&(H=H.slice(0,-1)),H.substr(0,1)==="[")B=H.substring(1);else{let N=H.indexOf("("),v=H.indexOf(")"),w=H.indexOf("/"),I=H.indexOf(":");if(N<v&&N<w&&w<v)B=H.split(" ")[0],B=B.replace(/:/g,"");else if(I>0&&(w===-1||w>3))B=H.split(" ")[0],B=B.replace(/:/g,"");else{let T=H.indexOf(" -"),k=H.indexOf(" /");T=T>=0?T:1e4,k=k>=0?k:1e4;let M=Math.min(T,k),K=H.substr(0,M),L=H.substr(M),b=K.lastIndexOf("/");if(b>=0&&(z=K.substr(0,b),K=K.substr(b+1)),M===1e4&&K.indexOf(" ")>-1){let R=K.split(" ");POe.existsSync(ROe.join(z,R[0]))?(B=R.shift(),G=(R.join(" ")+" "+L).trim()):(B=K.trim(),G=L.trim())}else B=K.trim(),G=L.trim()}}return{pid:d,parentPid:h,name:ra?t(B):B,cpu:p,cpuu:0,cpus:0,mem:m,priority:y,memVsz:_,memRss:O,nice:x,started:A,state:P,tty:q,user:F,command:B,params:G,path:z}}function i(o){let a=[];if(o.length>1){let u=o[0];e=Ve.parseHead(u,8),o.shift(),o.forEach(function(c){c.trim()!==""&&a.push(n(c))})}return a}function s(o){function a(d){let h=("0"+(d.getMonth()+1).toString()).slice(-2),p=d.getFullYear().toString(),m=("0"+d.getDate().toString()).slice(-2),y=("0"+d.getHours().toString()).slice(-2),_=("0"+d.getMinutes().toString()).slice(-2),O=("0"+d.getSeconds().toString()).slice(-2);return p+"-"+h+"-"+m+" "+y+":"+_+":"+O}function u(d){let h="";if(d.indexOf("d")>=0){let p=d.split("d");h=a(new Date(Date.now()-(p[0]*24+p[1]*1)*60*60*1e3))}else if(d.indexOf("h")>=0){let p=d.split("h");h=a(new Date(Date.now()-(p[0]*60+p[1]*1)*60*1e3))}else if(d.indexOf(":")>=0){let p=d.split(":");h=a(new Date(Date.now()-(p.length>1?(p[0]*60+p[1])*1e3:p[0]*1e3)))}return h}let c=[];return o.forEach(function(d){if(d.trim()!==""){d=d.trim().replace(/ +/g," ").replace(/,+/g,".");let h=d.split(" "),p=h.slice(9).join(" "),m=parseFloat((1*parseInt(h[3])*1024/Uw.totalmem()).toFixed(1)),y=u(h[5]);c.push({pid:parseInt(h[0]),parentPid:parseInt(h[1]),name:t(p),cpu:0,cpuu:0,cpus:0,mem:m,priority:0,memVsz:parseInt(h[2]),memRss:parseInt(h[3]),nice:parseInt(h[4]),started:y,state:h[6]==="R"?"running":h[6]==="S"?"sleeping":h[6]==="T"?"stopped":h[6]==="W"?"paging":h[6]==="X"?"dead":h[6]==="Z"?"zombie":h[6]==="D"||h[6]==="U"?"blocked":"unknown",tty:h[7],user:h[8],command:p})}}),c}return new Promise(o=>{process.nextTick(()=>{let a={all:0,running:0,blocked:0,sleeping:0,unknown:0,list:[]},u="";if(nn.ms&&Date.now()-nn.ms>=500||nn.ms===0)if(ra||xm||Em||Om||pc||Bw)ra&&(u="export LC_ALL=C; ps -axo pid:11,ppid:11,pcpu:6,pmem:6,pri:5,vsz:11,rss:11,ni:5,etime:30,state:5,tty:15,user:20,command; unset LC_ALL"),(xm||Em||Om)&&(u="export LC_ALL=C; ps -axo pid,ppid,pcpu,pmem,pri,vsz,rss,ni,etime,state,tty,user,command; unset LC_ALL"),pc&&(u="ps -axo pid,ppid,pcpu,pmem,pri,vsz=temp_title_1,rss=temp_title_2,nice,etime=temp_title_3,state,tty,user,command -r"),Bw&&(u="ps -Ao pid,ppid,pcpu,pmem,pri,vsz,rss,nice,stime,s,tty,user,comm"),_m(u,{maxBuffer:1024*2e4},function(c,d){!c&&d.toString().trim()?(a.list=i(d.toString().split(`
`)).slice(),a.all=a.list.length,a.running=a.list.filter(function(h){return h.state==="running"}).length,a.blocked=a.list.filter(function(h){return h.state==="blocked"}).length,a.sleeping=a.list.filter(function(h){return h.state==="sleeping"}).length,ra?(u='cat /proc/stat | grep "cpu "',a.list.forEach(h=>{u+=";cat /proc/"+h.pid+"/stat"}),_m(u,{maxBuffer:1024*2e4},function(h,p){let m=p.toString().split(`
`),y=TT(m.shift()),_={},O={};m.forEach(x=>{if(O=AT(x,y,nn),O.pid){let A=a.list.map(function(P){return P.pid}).indexOf(O.pid);A>=0&&(a.list[A].cpu=O.cpuu+O.cpus,a.list[A].cpuu=O.cpuu,a.list[A].cpus=O.cpus),_[O.pid]={cpuu:O.cpuu,cpus:O.cpus,utime:O.utime,stime:O.stime,cutime:O.cutime,cstime:O.cstime}}}),nn.all=y,nn.list=Object.assign({},_),nn.ms=Date.now()-nn.ms,nn.result=Object.assign({},a),r&&r(a),o(a)})):(r&&r(a),o(a))):(u="ps -o pid,ppid,vsz,rss,nice,etime,stat,tty,user,comm",Bw&&(u="ps -o pid,ppid,vsz,rss,nice,etime,s,tty,user,comm"),_m(u,{maxBuffer:1024*2e4},function(h,p){if(h)r&&r(a),o(a);else{let m=p.toString().split(`
`);m.shift(),a.list=s(m).slice(),a.all=a.list.length,a.running=a.list.filter(function(y){return y.state==="running"}).length,a.blocked=a.list.filter(function(y){return y.state==="blocked"}).length,a.sleeping=a.list.filter(function(y){return y.state==="sleeping"}).length,r&&r(a),o(a)}}))});else if(CT)try{Ve.powerShell('Get-CimInstance Win32_Process | select-Object ProcessId,ParentProcessId,ExecutionState,Caption,CommandLine,ExecutablePath,UserModeTime,KernelModeTime,WorkingSetSize,Priority,PageFileUsage, @{n="CreationDate";e={$_.CreationDate.ToString("yyyy-MM-dd HH:mm:ss")}} | fl').then((c,d)=>{if(!d){let h=c.split(/\n\s*\n/),p=[],m=[],y={},_=0,O=0;h.forEach(x=>{if(x.trim()!==""){let A=x.trim().split(`\r
`),P=parseInt(Ve.getValue(A,"ProcessId",":",!0),10),q=parseInt(Ve.getValue(A,"ParentProcessId",":",!0),10),F=Ve.getValue(A,"ExecutionState",":"),z=Ve.getValue(A,"Caption",":",!0),B=Ve.getValue(A,"CommandLine",":",!0),G=!1;A.forEach(I=>{G&&I.toLowerCase().startsWith(" ")?B+=" "+I.trim():G=!1,I.toLowerCase().startsWith("commandline")&&(G=!0)});let H=Ve.getValue(A,"ExecutablePath",":",!0),N=parseInt(Ve.getValue(A,"UserModeTime",":",!0),10),v=parseInt(Ve.getValue(A,"KernelModeTime",":",!0),10),w=parseInt(Ve.getValue(A,"WorkingSetSize",":",!0),10);_=_+N,O=O+v,a.all++,F||a.unknown++,F==="3"&&a.running++,(F==="4"||F==="5")&&a.blocked++,m.push({pid:P,utime:N,stime:v,cpu:0,cpuu:0,cpus:0}),p.push({pid:P,parentPid:q,name:z,cpu:0,cpuu:0,cpus:0,mem:w/Uw.totalmem()*100,priority:parseInt(Ve.getValue(A,"Priority",":",!0),10),memVsz:parseInt(Ve.getValue(A,"PageFileUsage",":",!0),10),memRss:Math.floor(parseInt(Ve.getValue(A,"WorkingSetSize",":",!0),10)/1024),nice:0,started:Ve.getValue(A,"CreationDate",":",!0),state:F?C9[F]:C9[0],tty:"",user:"",command:B||z,path:H,params:""})}}),a.sleeping=a.all-a.running-a.blocked-a.unknown,a.list=p,m.forEach(x=>{let A=T9(x,_+O,nn),P=a.list.map(function(q){return q.pid}).indexOf(A.pid);P>=0&&(a.list[P].cpu=A.cpuu+A.cpus,a.list[P].cpuu=A.cpuu,a.list[P].cpus=A.cpus),y[A.pid]={cpuu:A.cpuu,cpus:A.cpus,utime:A.utime,stime:A.stime}}),nn.all=_+O,nn.all_utime=_,nn.all_stime=O,nn.list=Object.assign({},y),nn.ms=Date.now()-nn.ms,nn.result=Object.assign({},a)}r&&r(a),o(a)})}catch{r&&r(a),o(a)}else r&&r(a),o(a);else r&&r(nn.result),o(nn.result)})})}Gw.processes=jOe;function KOe(r,e){return Ve.isFunction(r)&&!e&&(e=r,r=""),new Promise(t=>{process.nextTick(()=>{if(r=r||"",typeof r!="string")return e&&e([]),t([]);let n="";n.__proto__.toLowerCase=Ve.stringToLower,n.__proto__.replace=Ve.stringReplace,n.__proto__.trim=Ve.stringTrim;let i=Ve.sanitizeShellString(r),s=Ve.mathMin(i.length,2e3);for(let c=0;c<=s;c++)i[c]!==void 0&&(n=n+i[c]);n=n.trim().toLowerCase().replace(/, /g,"|").replace(/,+/g,"|"),n===""&&(n="*"),Ve.isPrototypePolluted()&&n!=="*"&&(n="------");let o=n.split("|"),a=[];if((Ve.isPrototypePolluted()?"":Ve.sanitizeShellString(r))&&o.length&&o[0]!=="------"){if(CT)try{Ve.powerShell("Get-CimInstance Win32_Process | select ProcessId,Caption,UserModeTime,KernelModeTime,WorkingSetSize | fl").then((c,d)=>{if(!d){let h=c.split(/\n\s*\n/),p=[],m={},y=0,_=0;h.forEach(O=>{if(O.trim()!==""){let x=O.trim().split(`\r
`),A=parseInt(Ve.getValue(x,"ProcessId",":",!0),10),P=Ve.getValue(x,"Caption",":",!0),q=parseInt(Ve.getValue(x,"UserModeTime",":",!0),10),F=parseInt(Ve.getValue(x,"KernelModeTime",":",!0),10),z=parseInt(Ve.getValue(x,"WorkingSetSize",":",!0),10);y=y+q,_=_+F,p.push({pid:A,name:P,utime:q,stime:F,cpu:0,cpuu:0,cpus:0,mem:z});let B="",G=!1;if(o.forEach(function(H){P.toLowerCase().indexOf(H.toLowerCase())>=0&&!G&&(G=!0,B=H)}),n==="*"||G){let H=!1;a.forEach(function(N){N.proc.toLowerCase()===B.toLowerCase()&&(N.pids.push(A),N.mem+=z/Uw.totalmem()*100,H=!0)}),H||a.push({proc:B,pid:A,pids:[A],cpu:0,mem:z/Uw.totalmem()*100})}}}),n!=="*"&&o.filter(function(x){return p.filter(function(A){return A.name.toLowerCase().indexOf(x)>=0}).length===0}).forEach(function(x){a.push({proc:x,pid:null,pids:[],cpu:0,mem:0})}),p.forEach(O=>{let x=T9(O,y+_,ui),A=-1;for(let P=0;P<a.length;P++)(a[P].pid===x.pid||a[P].pids.indexOf(x.pid)>=0)&&(A=P);A>=0&&(a[A].cpu+=x.cpuu+x.cpus),m[x.pid]={cpuu:x.cpuu,cpus:x.cpus,utime:x.utime,stime:x.stime}}),ui.all=y+_,ui.all_utime=y,ui.all_stime=_,ui.list=Object.assign({},m),ui.ms=Date.now()-ui.ms,ui.result=JSON.parse(JSON.stringify(a)),e&&e(a),t(a)}})}catch{e&&e(a),t(a)}if(pc||ra||xm||Em||Om){let c=["-axo","pid,ppid,pcpu,pmem,comm"];Ve.execSafe("ps",c).then(d=>{if(d){let h=[];if(d.toString().split(`
`).filter(function(m){if(n==="*")return!0;if(m.toLowerCase().indexOf("grep")!==-1)return!1;let y=!1;return o.forEach(function(_){y=y||m.toLowerCase().indexOf(_.toLowerCase())>=0}),y}).forEach(function(m){let y=m.trim().replace(/ +/g," ").split(" ");y.length>4&&h.push({name:y[4].substring(y[4].lastIndexOf("/")+1),pid:parseInt(y[0])||0,ppid:parseInt(y[1])||0,cpu:parseFloat(y[2].replace(",",".")),mem:parseFloat(y[3].replace(",","."))})}),h.forEach(function(m){let y=-1,_=!1,O="";for(let x=0;x<a.length;x++)m.name.toLowerCase().indexOf(a[x].proc.toLowerCase())>=0&&(y=x);o.forEach(function(x){m.name.toLowerCase().indexOf(x.toLowerCase())>=0&&!_&&(_=!0,O=x)}),(n==="*"||_)&&(y<0?a.push({proc:O,pid:m.pid,pids:[m.pid],cpu:m.cpu,mem:m.mem}):(m.ppid<10&&(a[y].pid=m.pid),a[y].pids.push(m.pid),a[y].cpu+=m.cpu,a[y].mem+=m.mem))}),n!=="*"&&o.filter(function(y){return h.filter(function(_){return _.name.toLowerCase().indexOf(y)>=0}).length===0}).forEach(function(y){a.push({proc:y,pid:null,pids:[],cpu:0,mem:0})}),ra){a.forEach(function(y){y.cpu=0});let m='cat /proc/stat | grep "cpu "';for(let y in a)for(let _ in a[y].pids)m+=";cat /proc/"+a[y].pids[_]+"/stat";_m(m,{maxBuffer:1024*2e4},function(y,_){let O=_.toString().split(`
`),x=TT(O.shift()),A={},P={};O.forEach(q=>{if(P=AT(q,x,ui),P.pid){let F=-1;for(let z in a)a[z].pids.indexOf(P.pid)>=0&&(F=z);F>=0&&(a[F].cpu+=P.cpuu+P.cpus),A[P.pid]={cpuu:P.cpuu,cpus:P.cpus,utime:P.utime,stime:P.stime,cutime:P.cutime,cstime:P.cstime}}}),a.forEach(function(q){q.cpu=Math.round(q.cpu*100)/100}),ui.all=x,ui.list=Object.assign({},A),ui.ms=Date.now()-ui.ms,ui.result=Object.assign({},a),e&&e(a),t(a)})}else e&&e(a),t(a)}else e&&e(a),t(a)})}}})})}Gw.processLoad=KOe});var P9=E(k9=>{"use strict";var Im=require("child_process").exec,Al=zr(),Ml=process.platform,qOe=Ml==="linux"||Ml==="android",FOe=Ml==="darwin",VOe=Ml==="win32",BOe=Ml==="freebsd",UOe=Ml==="openbsd",GOe=Ml==="netbsd",$Oe=Ml==="sunos";function M9(r,e){let t=[],n=[],i={},s=!0,o=[],a=[],u={},c=!0;return r.forEach(function(d){if(d==="---")c=!1;else{let h=d.replace(/ +/g," ").split(" ");c?n.push({user:h[0],tty:h[1],date:h[2],time:h[3],ip:h&&h.length>4?h[4].replace(/\(/g,"").replace(/\)/g,""):""}):s?(o=h,o.forEach(function(p){a.push(d.indexOf(p))}),s=!1):(i.user=d.substring(a[0],a[1]-1).trim(),i.tty=d.substring(a[1],a[2]-1).trim(),i.ip=d.substring(a[2],a[3]-1).replace(/\(/g,"").replace(/\)/g,"").trim(),i.command=d.substring(a[7],1e3).trim(),u=n.filter(function(p){return p.user.substring(0,8).trim()===i.user&&p.tty===i.tty}),u.length===1&&t.push({user:u[0].user,tty:u[0].tty,date:u[0].date,time:u[0].time,ip:u[0].ip,command:i.command}))}}),t.length===0&&e===2?n:t}function MT(r){let e=[],t=[],n={},i={},s=!0;return r.forEach(function(o){if(o==="---")s=!1;else{let a=o.replace(/ +/g," ").split(" ");s?t.push({user:a[0],tty:a[1],date:""+new Date().getFullYear()+"-"+("0"+("JANFEBMARAPRMAYJUNJULAUGSEPOCTNOVDEC".indexOf(a[2].toUpperCase())/3+1)).slice(-2)+"-"+("0"+a[3]).slice(-2),time:a[4]}):(n.user=a[0],n.tty=a[1],n.ip=a[2]!=="-"?a[2]:"",n.command=a.slice(5,1e3).join(" "),i=t.filter(function(u){return u.user===n.user&&(u.tty.substring(3,1e3)===n.tty||u.tty===n.tty)}),i.length===1&&e.push({user:i[0].user,tty:i[0].tty,date:i[0].date,time:i[0].time,ip:n.ip,command:n.command}))}}),e}function WOe(r){return new Promise(e=>{process.nextTick(()=>{let t=[];if(qOe&&Im('who --ips; echo "---"; w | tail -n +2',function(n,i){if(n)r&&r(t),e(t);else{let s=i.toString().split(`
`);t=M9(s,1),t.length===0?Im('who; echo "---"; w | tail -n +2',function(o,a){o||(s=a.toString().split(`
`),t=M9(s,2)),r&&r(t),e(t)}):(r&&r(t),e(t))}}),(BOe||UOe||GOe)&&Im('who; echo "---"; w -ih',function(n,i){if(!n){let s=i.toString().split(`
`);t=MT(s)}r&&r(t),e(t)}),$Oe&&Im('who; echo "---"; w -h',function(n,i){if(!n){let s=i.toString().split(`
`);t=MT(s)}r&&r(t),e(t)}),FOe&&Im('who; echo "---"; w -ih',function(n,i){if(!n){let s=i.toString().split(`
`);t=MT(s)}r&&r(t),e(t)}),VOe)try{let n=`Get-CimInstance Win32_LogonSession | select LogonId,@{n="StartTime";e={$_.StartTime.ToString("yyyy-MM-dd HH:mm:ss")}} | fl; echo '#-#-#-#';`;n+="Get-CimInstance Win32_LoggedOnUser | select antecedent,dependent | fl ; echo '#-#-#-#';",n+=`$process = (Get-CimInstance Win32_Process -Filter "name = 'explorer.exe'"); Invoke-CimMethod -InputObject $process[0] -MethodName GetOwner | select user, domain | fl; get-process -name explorer | select-object sessionid | fl; echo '#-#-#-#';`,n+="query user",Al.powerShell(n).then(i=>{if(i){i=i.split("#-#-#-#");let s=zOe((i[0]||"").split(/\n\s*\n/)),o=JOe((i[1]||"").split(/\n\s*\n/)),a=QOe((i[3]||"").split(`\r
`)),u=YOe((i[2]||"").split(/\n\s*\n/),a);for(let c in o)({}).hasOwnProperty.call(o,c)&&(o[c].dateTime={}.hasOwnProperty.call(s,c)?s[c]:"");u.forEach(c=>{let d="";for(let h in o)({}).hasOwnProperty.call(o,h)&&o[h].user===c.user&&(!d||d<o[h].dateTime)&&(d=o[h].dateTime);t.push({user:c.user,tty:c.tty,date:`${d.substring(0,10)}`,time:`${d.substring(11,19)}`,ip:"",command:""})})}r&&r(t),e(t)})}catch{r&&r(t),e(t)}})})}function zOe(r){let e={};return r.forEach(t=>{let n=t.split(`\r
`),i=Al.getValue(n,"LogonId"),s=Al.getValue(n,"starttime");i&&(e[i]=s)}),e}function HOe(r,e){r=r.toLowerCase(),e=e.toLowerCase();let t=0,n=r.length;e.length>n&&(n=e.length);for(let i=0;i<n;i++){let s=r[i]||"",o=e[i]||"";s===o&&t++}return n>10?t/n>.9:n>0?t/n>.8:!1}function YOe(r,e){let t=[];return r.forEach(n=>{let i=n.split(`\r
`),s=Al.getValue(i,"domain",":",!0),o=Al.getValue(i,"user",":",!0),a=Al.getValue(i,"sessionid",":",!0);if(o){let u=e.filter(c=>HOe(c.user,o));t.push({domain:s,user:o,tty:u&&u[0]&&u[0].tty?u[0].tty:a})}}),t}function JOe(r){let e={};return r.forEach(t=>{let n=t.split(`\r
`),s=Al.getValue(n,"antecedent",":",!0).split("="),o=s.length>2?s[1].split(",")[0].replace(/"/g,"").trim():"",a=s.length>2?s[2].replace(/"/g,"").replace(/\)/g,"").trim():"";s=Al.getValue(n,"dependent",":",!0).split("=");let c=s.length>1?s[1].replace(/"/g,"").replace(/\)/g,"").trim():"";c&&(e[c]={domain:a,user:o})}),e}function QOe(r){r=r.filter(i=>i);let e=[],t=r[0],n=[];if(t){let i=t[0]===" "?1:0;n.push(i-1);let s=0;for(let o=i+1;o<t.length;o++)t[o]===" "&&(t[o-1]===" "||t[o-1]===".")?s=o:s&&(n.push(s),s=0);for(let o=1;o<r.length;o++)if(r[o].trim()){let a=r[o].substring(n[0]+1,n[1]).trim()||"",u=r[o].substring(n[1]+1,n[2]-2).trim()||"";e.push({user:a,tty:u})}}return e}k9.users=WOe});var D9=E(NT=>{"use strict";var Ln=zr(),kl=process.platform,kT=kl==="linux"||kl==="android",PT=kl==="darwin",R9=kl==="win32",RT=kl==="freebsd",LT=kl==="openbsd",DT=kl==="netbsd",L9=kl==="sunos";function ZOe(r,e){return new Promise(t=>{process.nextTick(()=>{let n={url:r,ok:!1,status:404,ms:null};if(typeof r!="string")return e&&e(n),t(n);let i="",s=Ln.sanitizeShellString(r,!0),o=Ln.mathMin(s.length,2e3);for(let a=0;a<=o;a++)if(s[a]!==void 0){s[a].__proto__.toLowerCase=Ln.stringToLower;let u=s[a].toLowerCase();u&&u[0]&&!u[1]&&u[0].length===1&&(i=i+u[0])}n.url=i;try{if(i&&!Ln.isPrototypePolluted()){if(i.__proto__.startsWith=Ln.stringStartWith,i.startsWith("file:")||i.startsWith("gopher:")||i.startsWith("telnet:")||i.startsWith("mailto:")||i.startsWith("news:")||i.startsWith("nntp:"))return e&&e(n),t(n);let a=Date.now();if(kT||RT||LT||DT||PT||L9){let u=["-I","--connect-timeout","5","-m","5"];u.push(i);let c="curl";Ln.execSafe(c,u).then(d=>{let h=d.split(`
`),p=h[0]&&h[0].indexOf(" ")>=0?parseInt(h[0].split(" ")[1],10):404;n.status=p||404,n.ok=p===200||p===301||p===302||p===304,n.ms=n.ok?Date.now()-a:null,e&&e(n),t(n)})}if(R9){let u=i.startsWith("https:")?require("https"):require("http");try{u.get(i,c=>{let d=c.statusCode;n.status=d||404,n.ok=d===200||d===301||d===302||d===304,d!==200?(c.resume(),n.ms=n.ok?Date.now()-a:null,e&&e(n),t(n)):(c.on("data",()=>{}),c.on("end",()=>{n.ms=n.ok?Date.now()-a:null,e&&e(n),t(n)}))}).on("error",()=>{e&&e(n),t(n)})}catch{e&&e(n),t(n)}}}else e&&e(n),t(n)}catch{e&&e(n),t(n)}})})}NT.inetChecksite=ZOe;function XOe(r,e){return Ln.isFunction(r)&&!e&&(e=r,r=""),r=r||"8.8.8.8",new Promise(t=>{process.nextTick(()=>{if(typeof r!="string")return e&&e(null),t(null);let n="",i=(Ln.isPrototypePolluted()?"8.8.8.8":Ln.sanitizeShellString(r,!0)).trim(),s=Ln.mathMin(i.length,2e3);for(let a=0;a<=s;a++)if(i[a]!==void 0){i[a].__proto__.toLowerCase=Ln.stringToLower;let u=i[a].toLowerCase();u&&u[0]&&!u[1]&&(n=n+u[0])}if(n.__proto__.startsWith=Ln.stringStartWith,n.startsWith("file:")||n.startsWith("gopher:")||n.startsWith("telnet:")||n.startsWith("mailto:")||n.startsWith("news:")||n.startsWith("nntp:"))return e&&e(null),t(null);let o;if((kT||RT||LT||DT||PT)&&(kT&&(o=["-c","2","-w","3",n]),(RT||LT||DT)&&(o=["-c","2","-t","3",n]),PT&&(o=["-c2","-t3",n]),Ln.execSafe("ping",o).then(a=>{let u=null;if(a){let d=a.split(`
`).filter(h=>h.indexOf("rtt")>=0||h.indexOf("round-trip")>=0||h.indexOf("avg")>=0).join(`
`).split("=");if(d.length>1){let h=d[1].split("/");h.length>1&&(u=parseFloat(h[1]))}}e&&e(u),t(u)})),L9){let a=["-s","-a",n,"56","2"],u="avg";Ln.execSafe("ping",a,{timeout:3e3}).then(c=>{let d=null;if(c){let p=c.split(`
`).filter(m=>m.indexOf(u)>=0).join(`
`).split("=");if(p.length>1){let m=p[1].split("/");m.length>1&&(d=parseFloat(m[1].replace(",",".")))}}e&&e(d),t(d)})}if(R9){let a=null;try{let u=[n,"-n","1"];Ln.execSafe("ping",u,Ln.execOptsWin).then(c=>{if(c){let d=c.split(`\r
`);d.shift(),d.forEach(function(h){if((h.toLowerCase().match(/ms/g)||[]).length===3){let p=h.replace(/ +/g," ").split(" ");p.length>6&&(a=parseFloat(p[p.length-1]))}})}e&&e(a),t(a)})}catch{e&&e(a),t(a)}}})})}NT.inetLatency=XOe});var j9=E((UNe,N9)=>{"use strict";var Pl=require("net"),eIe=require("os").type()==="Windows_NT",Rl=eIe?"//./pipe/docker_engine":"/var/run/docker.sock",jT=class{getInfo(e){try{let t=Pl.createConnection({path:Rl}),n="",i;t.on("connect",()=>{t.write(`GET http:/info HTTP/1.0\r
\r
`)}),t.on("data",s=>{n=n+s.toString()}),t.on("error",()=>{t=!1,e({})}),t.on("end",()=>{let s=n.indexOf(`\r
\r
`);n=n.substring(s+4),t=!1;try{i=JSON.parse(n),e(i)}catch{e({})}})}catch{e({})}}listImages(e,t){try{let n=Pl.createConnection({path:Rl}),i="",s;n.on("connect",()=>{n.write("GET http:/images/json"+(e?"?all=1":"")+` HTTP/1.0\r
\r
`)}),n.on("data",o=>{i=i+o.toString()}),n.on("error",()=>{n=!1,t({})}),n.on("end",()=>{let o=i.indexOf(`\r
\r
`);i=i.substring(o+4),n=!1;try{s=JSON.parse(i),t(s)}catch{t({})}})}catch{t({})}}inspectImage(e,t){if(e=e||"",e)try{let n=Pl.createConnection({path:Rl}),i="",s;n.on("connect",()=>{n.write("GET http:/images/"+e+`/json?stream=0 HTTP/1.0\r
\r
`)}),n.on("data",o=>{i=i+o.toString()}),n.on("error",()=>{n=!1,t({})}),n.on("end",()=>{let o=i.indexOf(`\r
\r
`);i=i.substring(o+4),n=!1;try{s=JSON.parse(i),t(s)}catch{t({})}})}catch{t({})}else t({})}listContainers(e,t){try{let n=Pl.createConnection({path:Rl}),i="",s;n.on("connect",()=>{n.write("GET http:/containers/json"+(e?"?all=1":"")+` HTTP/1.0\r
\r
`)}),n.on("data",o=>{i=i+o.toString()}),n.on("error",()=>{n=!1,t({})}),n.on("end",()=>{let o=i.indexOf(`\r
\r
`);i=i.substring(o+4),n=!1;try{s=JSON.parse(i),t(s)}catch{t({})}})}catch{t({})}}getStats(e,t){if(e=e||"",e)try{let n=Pl.createConnection({path:Rl}),i="",s;n.on("connect",()=>{n.write("GET http:/containers/"+e+`/stats?stream=0 HTTP/1.0\r
\r
`)}),n.on("data",o=>{i=i+o.toString()}),n.on("error",()=>{n=!1,t({})}),n.on("end",()=>{let o=i.indexOf(`\r
\r
`);i=i.substring(o+4),n=!1;try{s=JSON.parse(i),t(s)}catch{t({})}})}catch{t({})}else t({})}getInspect(e,t){if(e=e||"",e)try{let n=Pl.createConnection({path:Rl}),i="",s;n.on("connect",()=>{n.write("GET http:/containers/"+e+`/json?stream=0 HTTP/1.0\r
\r
`)}),n.on("data",o=>{i=i+o.toString()}),n.on("error",()=>{n=!1,t({})}),n.on("end",()=>{let o=i.indexOf(`\r
\r
`);i=i.substring(o+4),n=!1;try{s=JSON.parse(i),t(s)}catch{t({})}})}catch{t({})}else t({})}getProcesses(e,t){if(e=e||"",e)try{let n=Pl.createConnection({path:Rl}),i="",s;n.on("connect",()=>{n.write("GET http:/containers/"+e+`/top?ps_args=-opid,ppid,pgid,vsz,time,etime,nice,ruser,user,rgroup,group,stat,rss,args HTTP/1.0\r
\r
`)}),n.on("data",o=>{i=i+o.toString()}),n.on("error",()=>{n=!1,t({})}),n.on("end",()=>{let o=i.indexOf(`\r
\r
`);i=i.substring(o+4),n=!1;try{s=JSON.parse(i),t(s)}catch{t({})}})}catch{t({})}else t({})}listVolumes(e){try{let t=Pl.createConnection({path:Rl}),n="",i;t.on("connect",()=>{t.write(`GET http:/volumes HTTP/1.0\r
\r
`)}),t.on("data",s=>{n=n+s.toString()}),t.on("error",()=>{t=!1,e({})}),t.on("end",()=>{let s=n.indexOf(`\r
\r
`);n=n.substring(s+4),t=!1;try{i=JSON.parse(n),e(i)}catch{e({})}})}catch{e({})}}};N9.exports=jT});var q9=E(Dl=>{"use strict";var Yr=zr(),Ll=j9(),tIe=process.platform,rIe=tIe==="win32",Pd={},Jt,KT=0;function nIe(r){return new Promise(e=>{process.nextTick(()=>{Jt||(Jt=new Ll);let t={};Jt.getInfo(n=>{t.id=n.ID,t.containers=n.Containers,t.containersRunning=n.ContainersRunning,t.containersPaused=n.ContainersPaused,t.containersStopped=n.ContainersStopped,t.images=n.Images,t.driver=n.Driver,t.memoryLimit=n.MemoryLimit,t.swapLimit=n.SwapLimit,t.kernelMemory=n.KernelMemory,t.cpuCfsPeriod=n.CpuCfsPeriod,t.cpuCfsQuota=n.CpuCfsQuota,t.cpuShares=n.CPUShares,t.cpuSet=n.CPUSet,t.ipv4Forwarding=n.IPv4Forwarding,t.bridgeNfIptables=n.BridgeNfIptables,t.bridgeNfIp6tables=n.BridgeNfIp6tables,t.debug=n.Debug,t.nfd=n.NFd,t.oomKillDisable=n.OomKillDisable,t.ngoroutines=n.NGoroutines,t.systemTime=n.SystemTime,t.loggingDriver=n.LoggingDriver,t.cgroupDriver=n.CgroupDriver,t.nEventsListener=n.NEventsListener,t.kernelVersion=n.KernelVersion,t.operatingSystem=n.OperatingSystem,t.osType=n.OSType,t.architecture=n.Architecture,t.ncpu=n.NCPU,t.memTotal=n.MemTotal,t.dockerRootDir=n.DockerRootDir,t.httpProxy=n.HttpProxy,t.httpsProxy=n.HttpsProxy,t.noProxy=n.NoProxy,t.name=n.Name,t.labels=n.Labels,t.experimentalBuild=n.ExperimentalBuild,t.serverVersion=n.ServerVersion,t.clusterStore=n.ClusterStore,t.clusterAdvertise=n.ClusterAdvertise,t.defaultRuntime=n.DefaultRuntime,t.liveRestoreEnabled=n.LiveRestoreEnabled,t.isolation=n.Isolation,t.initBinary=n.InitBinary,t.productLicense=n.ProductLicense,r&&r(t),e(t)})})})}Dl.dockerInfo=nIe;function iIe(r,e){Yr.isFunction(r)&&!e&&(e=r,r=!1),typeof r=="string"&&r==="true"&&(r=!0),typeof r!="boolean"&&r!==void 0&&(r=!1),r=r||!1;let t=[];return new Promise(n=>{process.nextTick(()=>{Jt||(Jt=new Ll);let i=[];Jt.listImages(r,s=>{let o={};try{o=s,o&&Object.prototype.toString.call(o)==="[object Array]"&&o.length>0?(o.forEach(function(a){a.Names&&Object.prototype.toString.call(a.Names)==="[object Array]"&&a.Names.length>0&&(a.Name=a.Names[0].replace(/^\/|\/$/g,"")),i.push(sIe(a.Id.trim(),a))}),i.length?Promise.all(i).then(a=>{e&&e(a),n(a)}):(e&&e(t),n(t))):(e&&e(t),n(t))}catch{e&&e(t),n(t)}})})})}function sIe(r,e){return new Promise(t=>{process.nextTick(()=>{if(r=r||"",typeof r!="string")return t();let n=(Yr.isPrototypePolluted()?"":Yr.sanitizeShellString(r,!0)).trim();n?(Jt||(Jt=new Ll),Jt.inspectImage(n.trim(),i=>{try{t({id:e.Id,container:i.Container,comment:i.Comment,os:i.Os,architecture:i.Architecture,parent:i.Parent,dockerVersion:i.DockerVersion,size:i.Size,sharedSize:e.SharedSize,virtualSize:i.VirtualSize,author:i.Author,created:i.Created?Math.round(new Date(i.Created).getTime()/1e3):0,containerConfig:i.ContainerConfig?i.ContainerConfig:{},graphDriver:i.GraphDriver?i.GraphDriver:{},repoDigests:i.RepoDigests?i.RepoDigests:{},repoTags:i.RepoTags?i.RepoTags:{},config:i.Config?i.Config:{},rootFS:i.RootFS?i.RootFS:{}})}catch{t()}})):t()})})}Dl.dockerImages=iIe;function qT(r,e){function t(i,s){return i.filter(a=>a.Id&&a.Id===s).length>0}Yr.isFunction(r)&&!e&&(e=r,r=!1),typeof r=="string"&&r==="true"&&(r=!0),typeof r!="boolean"&&r!==void 0&&(r=!1),r=r||!1;let n=[];return new Promise(i=>{process.nextTick(()=>{Jt||(Jt=new Ll);let s=[];Jt.listContainers(r,o=>{let a={};try{if(a=o,a&&Object.prototype.toString.call(a)==="[object Array]"&&a.length>0){for(let u in Pd)({}).hasOwnProperty.call(Pd,u)&&(t(a,u)||delete Pd[u]);a.forEach(function(u){u.Names&&Object.prototype.toString.call(u.Names)==="[object Array]"&&u.Names.length>0&&(u.Name=u.Names[0].replace(/^\/|\/$/g,"")),s.push(oIe(u.Id.trim(),u))}),s.length?Promise.all(s).then(u=>{e&&e(u),i(u)}):(e&&e(n),i(n))}else e&&e(n),i(n)}catch{for(let c in Pd)({}).hasOwnProperty.call(Pd,c)&&(t(a,c)||delete Pd[c]);e&&e(n),i(n)}})})})}function oIe(r,e){return new Promise(t=>{process.nextTick(()=>{if(r=r||"",typeof r!="string")return t();let n=(Yr.isPrototypePolluted()?"":Yr.sanitizeShellString(r,!0)).trim();n?(Jt||(Jt=new Ll),Jt.getInspect(n.trim(),i=>{try{t({id:e.Id,name:e.Name,image:e.Image,imageID:e.ImageID,command:e.Command,created:e.Created,started:i.State&&i.State.StartedAt?Math.round(new Date(i.State.StartedAt).getTime()/1e3):0,finished:i.State&&i.State.FinishedAt&&!i.State.FinishedAt.startsWith("0001-01-01")?Math.round(new Date(i.State.FinishedAt).getTime()/1e3):0,createdAt:i.Created?i.Created:"",startedAt:i.State&&i.State.StartedAt?i.State.StartedAt:"",finishedAt:i.State&&i.State.FinishedAt&&!i.State.FinishedAt.startsWith("0001-01-01")?i.State.FinishedAt:"",state:e.State,restartCount:i.RestartCount||0,platform:i.Platform||"",driver:i.Driver||"",ports:e.Ports,mounts:e.Mounts})}catch{t()}})):t()})})}Dl.dockerContainers=qT;function aIe(r,e){if(rIe){let t=Yr.nanoSeconds(),n=0;if(KT>0){let i=t-KT,s=r.cpu_usage.total_usage-e.cpu_usage.total_usage;i>0&&(n=100*s/i)}return KT=t,n}else{let t=0,n=r.cpu_usage.total_usage-e.cpu_usage.total_usage,i=r.system_cpu_usage-e.system_cpu_usage;return i>0&&n>0&&(e.online_cpus?t=n/i*e.online_cpus*100:t=n/i*r.cpu_usage.percpu_usage.length*100),t}}function lIe(r){let e,t;for(let n in r){if(!{}.hasOwnProperty.call(r,n))continue;let i=r[n];e=+i.rx_bytes,t=+i.tx_bytes}return{rx:e,wx:t}}function uIe(r){let e={r:0,w:0};return r&&r.io_service_bytes_recursive&&Object.prototype.toString.call(r.io_service_bytes_recursive)==="[object Array]"&&r.io_service_bytes_recursive.length>0&&r.io_service_bytes_recursive.forEach(function(t){t.op&&t.op.toLowerCase()==="read"&&t.value&&(e.r+=t.value),t.op&&t.op.toLowerCase()==="write"&&t.value&&(e.w+=t.value)}),e}function FT(r,e){let t=[];return new Promise(n=>{process.nextTick(()=>{if(Yr.isFunction(r)&&!e)e=r,t=["*"];else{if(r=r||"*",typeof r!="string")return e&&e([]),n([]);let o="";if(o.__proto__.toLowerCase=Yr.stringToLower,o.__proto__.replace=Yr.stringReplace,o.__proto__.trim=Yr.stringTrim,o=r,o=o.trim(),o!=="*"){o="";let a=(Yr.isPrototypePolluted()?"":Yr.sanitizeShellString(r,!0)).trim(),u=Yr.mathMin(a.length,2e3);for(let c=0;c<=u;c++)if(a[c]!==void 0){a[c].__proto__.toLowerCase=Yr.stringToLower;let d=a[c].toLowerCase();d&&d[0]&&!d[1]&&(o=o+d[0])}}o=o.trim().toLowerCase().replace(/,+/g,"|"),t=o.split("|")}let i=[],s=[];if(t.length&&t[0].trim()==="*")t=[],qT().then(o=>{for(let a of o)t.push(a.id.substring(0,12));t.length?FT(t.join(",")).then(a=>{e&&e(a),n(a)}):(e&&e(i),n(i))});else{for(let o of t)s.push(cIe(o.trim()));s.length?Promise.all(s).then(o=>{e&&e(o),n(o)}):(e&&e(i),n(i))}})})}function cIe(r){r=r||"";let e={id:r,memUsage:0,memLimit:0,memPercent:0,cpuPercent:0,pids:0,netIO:{rx:0,wx:0},blockIO:{r:0,w:0},restartCount:0,cpuStats:{},precpuStats:{},memoryStats:{},networks:{}};return new Promise(t=>{process.nextTick(()=>{r?(Jt||(Jt=new Ll),Jt.getInspect(r,n=>{try{Jt.getStats(r,i=>{try{let s=i;s.message||(i.id&&(e.id=i.id),e.memUsage=s.memory_stats&&s.memory_stats.usage?s.memory_stats.usage:0,e.memLimit=s.memory_stats&&s.memory_stats.limit?s.memory_stats.limit:0,e.memPercent=s.memory_stats&&s.memory_stats.usage&&s.memory_stats.limit?s.memory_stats.usage/s.memory_stats.limit*100:0,e.cpuPercent=s.cpu_stats&&s.precpu_stats?aIe(s.cpu_stats,s.precpu_stats):0,e.pids=s.pids_stats&&s.pids_stats.current?s.pids_stats.current:0,e.restartCount=n.RestartCount?n.RestartCount:0,s.networks&&(e.netIO=lIe(s.networks)),s.blkio_stats&&(e.blockIO=uIe(s.blkio_stats)),e.cpuStats=s.cpu_stats?s.cpu_stats:{},e.precpuStats=s.precpu_stats?s.precpu_stats:{},e.memoryStats=s.memory_stats?s.memory_stats:{},e.networks=s.networks?s.networks:{})}catch{Yr.noop()}t(e)})}catch{Yr.noop()}})):t(e)})})}Dl.dockerContainerStats=FT;function K9(r,e){let t=[];return new Promise(n=>{process.nextTick(()=>{if(r=r||"",typeof r!="string")return n(t);let i=(Yr.isPrototypePolluted()?"":Yr.sanitizeShellString(r,!0)).trim();i?(Jt||(Jt=new Ll),Jt.getProcesses(i,s=>{try{if(s&&s.Titles&&s.Processes){let o=s.Titles.map(function(F){return F.toUpperCase()}),a=o.indexOf("PID"),u=o.indexOf("PPID"),c=o.indexOf("PGID"),d=o.indexOf("VSZ"),h=o.indexOf("TIME"),p=o.indexOf("ELAPSED"),m=o.indexOf("NI"),y=o.indexOf("RUSER"),_=o.indexOf("USER"),O=o.indexOf("RGROUP"),x=o.indexOf("GROUP"),A=o.indexOf("STAT"),P=o.indexOf("RSS"),q=o.indexOf("COMMAND");s.Processes.forEach(F=>{t.push({pidHost:a>=0?F[a]:"",ppid:u>=0?F[u]:"",pgid:c>=0?F[c]:"",user:_>=0?F[_]:"",ruser:y>=0?F[y]:"",group:x>=0?F[x]:"",rgroup:O>=0?F[O]:"",stat:A>=0?F[A]:"",time:h>=0?F[h]:"",elapsed:p>=0?F[p]:"",nice:m>=0?F[m]:"",rss:P>=0?F[P]:"",vsz:d>=0?F[d]:"",command:q>=0?F[q]:""})})}}catch{Yr.noop()}e&&e(t),n(t)})):(e&&e(t),n(t))})})}Dl.dockerContainerProcesses=K9;function fIe(r){let e=[];return new Promise(t=>{process.nextTick(()=>{Jt||(Jt=new Ll),Jt.listVolumes(n=>{let i={};try{i=n,i&&i.Volumes&&Object.prototype.toString.call(i.Volumes)==="[object Array]"&&i.Volumes.length>0?(i.Volumes.forEach(function(s){e.push({name:s.Name,driver:s.Driver,labels:s.Labels,mountpoint:s.Mountpoint,options:s.Options,scope:s.Scope,created:s.CreatedAt?Math.round(new Date(s.CreatedAt).getTime()/1e3):0})}),r&&r(e),t(e)):(r&&r(e),t(e))}catch{r&&r(e),t(e)}})})})}Dl.dockerVolumes=fIe;function dIe(r){return new Promise(e=>{process.nextTick(()=>{qT(!0).then(t=>{if(t&&Object.prototype.toString.call(t)==="[object Array]"&&t.length>0){let n=t.length;t.forEach(function(i){FT(i.id).then(s=>{i.memUsage=s[0].memUsage,i.memLimit=s[0].memLimit,i.memPercent=s[0].memPercent,i.cpuPercent=s[0].cpuPercent,i.pids=s[0].pids,i.netIO=s[0].netIO,i.blockIO=s[0].blockIO,i.cpuStats=s[0].cpuStats,i.precpuStats=s[0].precpuStats,i.memoryStats=s[0].memoryStats,i.networks=s[0].networks,K9(i.id).then(o=>{i.processes=o,n-=1,n===0&&(r&&r(t),e(t))})})})}else r&&r(t),e(t)})})})}Dl.dockerAll=dIe});var V9=E(F9=>{"use strict";var VT=require("os"),hIe=require("child_process").exec,gt=zr();function pIe(r){let e=[];return new Promise(t=>{process.nextTick(()=>{try{hIe(gt.getVboxmanage()+" list vms --long",function(n,i){let s=(VT.EOL+i.toString()).split(VT.EOL+"Name:");s.shift(),s.forEach(o=>{let a=("Name:"+o).split(VT.EOL),u=gt.getValue(a,"State"),c=u.startsWith("running"),d=c?u.replace("running (since ","").replace(")","").trim():"",h=0;try{if(c){let y=new Date(d),_=y.getTimezoneOffset();h=Math.round((Date.now()-Date.parse(y))/1e3)+_*60}}catch{gt.noop()}let p=c?"":u.replace("powered off (since","").replace(")","").trim(),m=0;try{if(!c){let y=new Date(p),_=y.getTimezoneOffset();m=Math.round((Date.now()-Date.parse(y))/1e3)+_*60}}catch{gt.noop()}e.push({id:gt.getValue(a,"UUID"),name:gt.getValue(a,"Name"),running:c,started:d,runningSince:h,stopped:p,stoppedSince:m,guestOS:gt.getValue(a,"Guest OS"),hardwareUUID:gt.getValue(a,"Hardware UUID"),memory:parseInt(gt.getValue(a,"Memory size","     "),10),vram:parseInt(gt.getValue(a,"VRAM size"),10),cpus:parseInt(gt.getValue(a,"Number of CPUs"),10),cpuExepCap:gt.getValue(a,"CPU exec cap"),cpuProfile:gt.getValue(a,"CPUProfile"),chipset:gt.getValue(a,"Chipset"),firmware:gt.getValue(a,"Firmware"),pageFusion:gt.getValue(a,"Page Fusion")==="enabled",configFile:gt.getValue(a,"Config file"),snapshotFolder:gt.getValue(a,"Snapshot folder"),logFolder:gt.getValue(a,"Log folder"),hpet:gt.getValue(a,"HPET")==="enabled",pae:gt.getValue(a,"PAE")==="enabled",longMode:gt.getValue(a,"Long Mode")==="enabled",tripleFaultReset:gt.getValue(a,"Triple Fault Reset")==="enabled",apic:gt.getValue(a,"APIC")==="enabled",x2Apic:gt.getValue(a,"X2APIC")==="enabled",acpi:gt.getValue(a,"ACPI")==="enabled",ioApic:gt.getValue(a,"IOAPIC")==="enabled",biosApicMode:gt.getValue(a,"BIOS APIC mode"),bootMenuMode:gt.getValue(a,"Boot menu mode"),bootDevice1:gt.getValue(a,"Boot Device 1"),bootDevice2:gt.getValue(a,"Boot Device 2"),bootDevice3:gt.getValue(a,"Boot Device 3"),bootDevice4:gt.getValue(a,"Boot Device 4"),timeOffset:gt.getValue(a,"Time offset"),rtc:gt.getValue(a,"RTC")})}),r&&r(e),t(e)})}catch{r&&r(e),t(e)}})})}F9.vboxInfo=pIe});var $9=E(G9=>{"use strict";var BT=require("child_process").exec,mn=zr(),Nl=process.platform,B9=Nl==="linux"||Nl==="android",mIe=Nl==="darwin",gIe=Nl==="win32",yIe=Nl==="freebsd",vIe=Nl==="openbsd",wIe=Nl==="netbsd",bIe=Nl==="sunos",U9={1:"Other",2:"Unknown",3:"Idle",4:"Printing",5:"Warmup",6:"Stopped Printing",7:"Offline"};function SIe(r){let e={};if(r&&r.length&&r[0].indexOf(" CUPS v")>0){let t=r[0].split(" CUPS v");e.cupsVersion=t[1]}return e}function _Ie(r){let e={},t=mn.getValue(r,"PrinterId"," ");return e.id=t?parseInt(t,10):null,e.name=mn.getValue(r,"Info"," "),e.model=r.length>0&&r[0]?r[0].split(" ")[0]:"",e.uri=mn.getValue(r,"DeviceURI"," "),e.uuid=mn.getValue(r,"UUID"," "),e.status=mn.getValue(r,"State"," "),e.local=mn.getValue(r,"Location"," ").toLowerCase().startsWith("local"),e.default=null,e.shared=mn.getValue(r,"Shared"," ").toLowerCase().startsWith("yes"),e}function xIe(r,e){let t={};return t.id=e,t.name=mn.getValue(r,"Description",":",!0),t.model=r.length>0&&r[0]?r[0].split(" ")[0]:"",t.uri=null,t.uuid=null,t.status=r.length>0&&r[0]?r[0].indexOf(" idle")>0?"idle":r[0].indexOf(" printing")>0?"printing":"unknown":null,t.local=mn.getValue(r,"Location",":",!0).toLowerCase().startsWith("local"),t.default=null,t.shared=mn.getValue(r,"Shared"," ").toLowerCase().startsWith("yes"),t}function EIe(r,e){let t={},n=r.uri.split("/");return t.id=e,t.name=r._name,t.model=n.length?n[n.length-1]:"",t.uri=r.uri,t.uuid=null,t.status=r.status,t.local=r.printserver==="local",t.default=r.default==="yes",t.shared=r.shared==="yes",t}function OIe(r,e){let t={},n=parseInt(mn.getValue(r,"PrinterStatus",":"),10);return t.id=e,t.name=mn.getValue(r,"name",":"),t.model=mn.getValue(r,"DriverName",":"),t.uri=null,t.uuid=null,t.status=U9[n]?U9[n]:null,t.local=mn.getValue(r,"Local",":").toUpperCase()==="TRUE",t.default=mn.getValue(r,"Default",":").toUpperCase()==="TRUE",t.shared=mn.getValue(r,"Shared",":").toUpperCase()==="TRUE",t}function IIe(r){return new Promise(e=>{process.nextTick(()=>{let t=[];if(B9||yIe||vIe||wIe){let n="cat /etc/cups/printers.conf 2>/dev/null";BT(n,function(i,s){if(!i){let o=s.toString().split("<Printer "),a=SIe(o[0]);for(let u=1;u<o.length;u++){let c=_Ie(o[u].split(`
`));c.name&&(c.engine="CUPS",c.engineVersion=a.cupsVersion,t.push(c))}}t.length===0&&B9?(n="export LC_ALL=C; lpstat -lp 2>/dev/null; unset LC_ALL",BT(n,function(o,a){let u=(`
`+a.toString()).split(`
printer `);for(let c=1;c<u.length;c++){let d=xIe(u[c].split(`
`),c);t.push(d)}}),r&&r(t),e(t)):(r&&r(t),e(t))})}mIe&&BT("system_profiler SPPrintersDataType -json",function(i,s){if(!i)try{let o=JSON.parse(s.toString());if(o.SPPrintersDataType&&o.SPPrintersDataType.length)for(let a=0;a<o.SPPrintersDataType.length;a++){let u=EIe(o.SPPrintersDataType[a],a);t.push(u)}}catch{mn.noop()}r&&r(t),e(t)}),gIe&&mn.powerShell("Get-CimInstance Win32_Printer | select PrinterStatus,Name,DriverName,Local,Default,Shared | fl").then((n,i)=>{if(!i){let s=n.toString().split(/\n\s*\n/);for(let o=0;o<s.length;o++){let a=OIe(s[o].split(`
`),o);(a.name||a.model)&&t.push(a)}}r&&r(t),e(t)}),bIe&&e(null)})})}G9.printer=IIe});var H9=E(z9=>{"use strict";var W9=require("child_process").exec,Us=zr(),jl=process.platform,CIe=jl==="linux"||jl==="android",TIe=jl==="darwin",AIe=jl==="win32",MIe=jl==="freebsd",kIe=jl==="openbsd",PIe=jl==="netbsd",RIe=jl==="sunos";function LIe(r,e){let t=r,n=(e+" "+r).toLowerCase();return n.indexOf("camera")>=0?t="Camera":n.indexOf("hub")>=0?t="Hub":n.indexOf("keybrd")>=0||n.indexOf("keyboard")>=0?t="Keyboard":n.indexOf("mouse")>=0?t="Mouse":n.indexOf("stora")>=0?t="Storage":n.indexOf("mic")>=0?t="Microphone":(n.indexOf("headset")>=0||n.indexOf("audio")>=0)&&(t="Audio"),t}function DIe(r){let e={},t=r.split(`
`);if(t&&t.length&&t[0].indexOf("Device")>=0){let _=t[0].split(" ");e.bus=parseInt(_[0],10),_[2]?e.deviceId=parseInt(_[2],10):e.deviceId=null}else e.bus=null,e.deviceId=null;let n=Us.getValue(t,"idVendor"," ",!0).trim(),i=n.split(" ");i.shift();let s=i.join(" "),o=Us.getValue(t,"idProduct"," ",!0).trim(),a=o.split(" ");a.shift();let u=a.join(" "),d=Us.getValue(t,"bInterfaceClass"," ",!0).trim().split(" ");d.shift();let h=d.join(" "),m=Us.getValue(t,"iManufacturer"," ",!0).trim().split(" ");m.shift();let y=m.join(" ");return e.id=(n.startsWith("0x")?n.split(" ")[0].substr(2,10):"")+":"+(o.startsWith("0x")?o.split(" ")[0].substr(2,10):""),e.name=u,e.type=LIe(h,u),e.removable=null,e.vendor=s,e.manufacturer=y,e.maxPower=Us.getValue(t,"MaxPower"," ",!0),e.serialNumber=null,e}function NIe(r){let e="";return r.indexOf("camera")>=0?e="Camera":r.indexOf("touch bar")>=0?e="Touch Bar":r.indexOf("controller")>=0?e="Controller":r.indexOf("headset")>=0?e="Audio":r.indexOf("keyboard")>=0?e="Keyboard":r.indexOf("trackpad")>=0?e="Trackpad":r.indexOf("sensor")>=0?e="Sensor":r.indexOf("bthusb")>=0||r.indexOf("bth")>=0||r.indexOf("rfcomm")>=0?e="Bluetooth":r.indexOf("usbhub")>=0||r.indexOf(" hub")>=0?e="Hub":r.indexOf("mouse")>=0?e="Mouse":r.indexOf("mic")>=0?e="Microphone":r.indexOf("removable")>=0&&(e="Storage"),e}function jIe(r,e){let t={};t.id=e,r=r.replace(/ \|/g,""),r=r.trim();let n=r.split(`
`);n.shift();try{for(let o=0;o<n.length;o++){n[o]=n[o].trim(),n[o]=n[o].replace(/=/g,":"),n[o]!=="{"&&n[o]!=="}"&&n[o+1]&&n[o+1].trim()!=="}"&&(n[o]=n[o]+","),n[o]=n[o].replace(":Yes,",':"Yes",'),n[o]=n[o].replace(": Yes,",': "Yes",'),n[o]=n[o].replace(": Yes",': "Yes"'),n[o]=n[o].replace(":No,",':"No",'),n[o]=n[o].replace(": No,",': "No",'),n[o]=n[o].replace(": No",': "No"'),n[o]=n[o].replace("((","").replace("))","");let a=/<(\w+)>/.exec(n[o]);if(a){let u=a[0];n[o]=n[o].replace(u,`"${u}"`)}}let i=JSON.parse(n.join(`
`)),s=(i["Built-In"]?i["Built-In"].toLowerCase()!=="yes":!0)&&(i["non-removable"]?i["non-removable"].toLowerCase()==="no":!0);return t.bus=null,t.deviceId=null,t.id=i["USB Address"]||null,t.name=i.kUSBProductString||i["USB Product Name"]||null,t.type=NIe((i.kUSBProductString||i["USB Product Name"]||"").toLowerCase()+(s?" removable":"")),t.removable=i["non-removable"]?i["non-removable"].toLowerCase()||!1:!0,t.vendor=i.kUSBVendorString||i["USB Vendor Name"]||null,t.manufacturer=i.kUSBVendorString||i["USB Vendor Name"]||null,t.maxPower=null,t.serialNumber=i.kUSBSerialNumberString||null,t.name?t:null}catch{return null}}function KIe(r,e){let t="";return e.indexOf("storage")>=0||e.indexOf("speicher")>=0?t="Storage":r.indexOf("usbhub")>=0?t="Hub":r.indexOf("storage")>=0?t="Storage":r.indexOf("usbcontroller")>=0?t="Controller":r.indexOf("keyboard")>=0?t="Keyboard":r.indexOf("pointing")>=0?t="Mouse":r.indexOf("disk")>=0&&(t="Storage"),t}function qIe(r,e){let t=KIe(Us.getValue(r,"CreationClassName",":").toLowerCase(),Us.getValue(r,"name",":").toLowerCase());if(t){let n={};return n.bus=null,n.deviceId=Us.getValue(r,"deviceid",":"),n.id=e,n.name=Us.getValue(r,"name",":"),n.type=t,n.removable=null,n.vendor=null,n.manufacturer=Us.getValue(r,"Manufacturer",":"),n.maxPower=null,n.serialNumber=null,n}else return null}function FIe(r){return new Promise(e=>{process.nextTick(()=>{let t=[];CIe&&W9("export LC_ALL=C; lsusb -v 2>/dev/null; unset LC_ALL",{maxBuffer:1024*1024*128},function(i,s){if(!i){let o=(`

`+s.toString()).split(`

Bus `);for(let a=1;a<o.length;a++){let u=DIe(o[a]);t.push(u)}}r&&r(t),e(t)}),TIe&&W9("ioreg -p IOUSB -c AppleUSBRootHubDevice -w0 -l",{maxBuffer:1024*1024*128},function(i,s){if(!i){let o=s.toString().split(" +-o ");for(let a=1;a<o.length;a++){let u=jIe(o[a]);u&&t.push(u)}r&&r(t),e(t)}r&&r(t),e(t)}),AIe&&Us.powerShell('Get-CimInstance CIM_LogicalDevice | where { $_.Description -match "USB"} | select Name,CreationClassName,DeviceId,Manufacturer | fl').then((n,i)=>{if(!i){let s=n.toString().split(/\n\s*\n/);for(let o=0;o<s.length;o++){let a=qIe(s[o].split(`
`),o);a&&t.push(a)}}r&&r(t),e(t)}),(RIe||MIe||kIe||PIe)&&e(null)})})}z9.usb=FIe});var Q9=E(J9=>{"use strict";var Y9=require("child_process").exec,VIe=require("child_process").execSync,ci=zr(),Kl=process.platform,BIe=Kl==="linux"||Kl==="android",UIe=Kl==="darwin",GIe=Kl==="win32",$Ie=Kl==="freebsd",WIe=Kl==="openbsd",zIe=Kl==="netbsd",HIe=Kl==="sunos";function UT(r,e,t){r=r.toLowerCase();let n="";return r.indexOf("input")>=0&&(n="Microphone"),r.indexOf("display audio")>=0&&(n="Speaker"),r.indexOf("speak")>=0&&(n="Speaker"),r.indexOf("laut")>=0&&(n="Speaker"),r.indexOf("loud")>=0&&(n="Speaker"),r.indexOf("head")>=0&&(n="Headset"),r.indexOf("mic")>=0&&(n="Microphone"),r.indexOf("mikr")>=0&&(n="Microphone"),r.indexOf("phone")>=0&&(n="Phone"),r.indexOf("controll")>=0&&(n="Controller"),r.indexOf("line o")>=0&&(n="Line Out"),r.indexOf("digital o")>=0&&(n="Digital Out"),r.indexOf("smart sound technology")>=0&&(n="Digital Signal Processor"),r.indexOf("high definition audio")>=0&&(n="Sound Driver"),!n&&t?n="Speaker":!n&&e&&(n="Microphone"),n}function YIe(){let r="lspci -v 2>/dev/null",e=[];try{return VIe(r).toString().split(`

`).forEach(n=>{let i=n.split(`
`);if(i&&i.length&&i[0].toLowerCase().indexOf("audio")>=0){let s={};s.slotId=i[0].split(" ")[0],s.driver=ci.getValue(i,"Kernel driver in use",":",!0)||ci.getValue(i,"Kernel modules",":",!0),e.push(s)}}),e}catch{return e}}function JIe(r,e){let t={},n=ci.getValue(r,"Slot"),i=e.filter(function(s){return s.slotId===n});return t.id=n,t.name=ci.getValue(r,"SDevice"),t.manufacturer=ci.getValue(r,"SVendor"),t.revision=ci.getValue(r,"Rev"),t.driver=i&&i.length===1&&i[0].driver?i[0].driver:"",t.default=null,t.channel="PCIe",t.type=UT(t.name,null,null),t.in=null,t.out=null,t.status="online",t}function QIe(r){let e="";return r.indexOf("builtin")>=0&&(e="Built-In"),r.indexOf("extern")>=0&&(e="Audio-Jack"),r.indexOf("hdmi")>=0&&(e="HDMI"),r.indexOf("displayport")>=0&&(e="Display-Port"),r.indexOf("usb")>=0&&(e="USB"),r.indexOf("pci")>=0&&(e="PCIe"),e}function ZIe(r,e){let t={},n=((r.coreaudio_device_transport||"")+" "+(r._name||"")).toLowerCase();return t.id=e,t.name=r._name,t.manufacturer=r.coreaudio_device_manufacturer,t.revision=null,t.driver=null,t.default=!!r.coreaudio_default_audio_input_device||!!r.coreaudio_default_audio_output_device,t.channel=QIe(n),t.type=UT(t.name,!!r.coreaudio_device_input,!!r.coreaudio_device_output),t.in=!!r.coreaudio_device_input,t.out=!!r.coreaudio_device_output,t.status="online",t}function XIe(r){let e={},t=ci.getValue(r,"StatusInfo",":");return e.id=ci.getValue(r,"DeviceID",":"),e.name=ci.getValue(r,"name",":"),e.manufacturer=ci.getValue(r,"manufacturer",":"),e.revision=null,e.driver=null,e.default=null,e.channel=null,e.type=UT(e.name,null,null),e.in=null,e.out=null,e.status=t,e}function eCe(r){return new Promise(e=>{process.nextTick(()=>{let t=[];(BIe||$Ie||WIe||zIe)&&Y9("lspci -vmm 2>/dev/null",function(i,s){if(!i){let o=YIe();s.toString().split(`

`).forEach(u=>{let c=u.split(`
`);if(ci.getValue(c,"class",":",!0).toLowerCase().indexOf("audio")>=0){let d=JIe(c,o);t.push(d)}})}r&&r(t),e(t)}),UIe&&Y9("system_profiler SPAudioDataType -json",function(i,s){if(!i)try{let o=JSON.parse(s.toString());if(o.SPAudioDataType&&o.SPAudioDataType.length&&o.SPAudioDataType[0]&&o.SPAudioDataType[0]._items&&o.SPAudioDataType[0]._items.length)for(let a=0;a<o.SPAudioDataType[0]._items.length;a++){let u=ZIe(o.SPAudioDataType[0]._items[a],a);t.push(u)}}catch{ci.noop()}r&&r(t),e(t)}),GIe&&ci.powerShell("Get-CimInstance Win32_SoundDevice | select DeviceID,StatusInfo,Name,Manufacturer | fl").then((n,i)=>{i||n.toString().split(/\n\s*\n/).forEach(o=>{let a=o.split(`
`);ci.getValue(a,"name",":")&&t.push(XIe(a))}),r&&r(t),e(t)}),HIe&&e(null)})})}J9.audio=eCe});var X9=E(Z9=>{"use strict";var tCe=require("child_process").exec,rCe=require("child_process").execSync,nCe=require("path"),ql=zr(),iCe=require("fs"),Fl=process.platform,sCe=Fl==="linux"||Fl==="android",oCe=Fl==="darwin",aCe=Fl==="win32",lCe=Fl==="freebsd",uCe=Fl==="openbsd",cCe=Fl==="netbsd",fCe=Fl==="sunos";function $T(r){let e="";return r.indexOf("keyboard")>=0&&(e="Keyboard"),r.indexOf("mouse")>=0&&(e="Mouse"),r.indexOf("trackpad")>=0&&(e="Trackpad"),r.indexOf("speaker")>=0&&(e="Speaker"),r.indexOf("headset")>=0&&(e="Headset"),r.indexOf("phone")>=0&&(e="Phone"),r.indexOf("macbook")>=0&&(e="Computer"),r.indexOf("imac")>=0&&(e="Computer"),r.indexOf("ipad")>=0&&(e="Tablet"),r.indexOf("watch")>=0&&(e="Watch"),r.indexOf("headphone")>=0&&(e="Headset"),e}function dCe(r){let e=r.split(" ")[0];return r=r.toLowerCase(),r.indexOf("apple")>=0&&(e="Apple"),r.indexOf("ipad")>=0&&(e="Apple"),r.indexOf("imac")>=0&&(e="Apple"),r.indexOf("iphone")>=0&&(e="Apple"),r.indexOf("magic mouse")>=0&&(e="Apple"),r.indexOf("magic track")>=0&&(e="Apple"),r.indexOf("macbook")>=0&&(e="Apple"),e}function hCe(r,e,t){let n={};return n.device=null,n.name=ql.getValue(r,"name","="),n.manufacturer=null,n.macDevice=e,n.macHost=t,n.batteryPercent=null,n.type=$T(n.name.toLowerCase()),n.connected=!1,n}function GT(r,e){let t={},n=((r.device_minorClassOfDevice_string||r.device_majorClassOfDevice_string||r.device_minorType||"")+(r.device_name||"")).toLowerCase();return t.device=r.device_services||"",t.name=r.device_name||"",t.manufacturer=r.device_manufacturer||dCe(r.device_name||"")||"",t.macDevice=(r.device_addr||r.device_address||"").toLowerCase().replace(/-/g,":"),t.macHost=e,t.batteryPercent=r.device_batteryPercent||null,t.type=$T(n),t.connected=r.device_isconnected==="attrib_Yes"||!1,t}function pCe(r){let e={};return e.device=null,e.name=ql.getValue(r,"name",":"),e.manufacturer=ql.getValue(r,"manufacturer",":"),e.macDevice=null,e.macHost=null,e.batteryPercent=null,e.type=$T(e.name.toLowerCase()),e.connected=null,e}function mCe(r){return new Promise(e=>{process.nextTick(()=>{let t=[];if(sCe){ql.getFilesInPath("/var/lib/bluetooth/").forEach(i=>{let s=nCe.basename(i),o=i.split("/"),a=o.length>=6?o[o.length-2]:null,u=o.length>=7?o[o.length-3]:null;if(s==="info"){let c=iCe.readFileSync(i,{encoding:"utf8"}).split(`
`);t.push(hCe(c,a,u))}});try{let i=rCe("hcitool con").toString().toLowerCase();for(let s=0;s<t.length;s++)t[s].macDevice&&t[s].macDevice.length>10&&i.indexOf(t[s].macDevice.toLowerCase())>=0&&(t[s].connected=!0)}catch{ql.noop()}r&&r(t),e(t)}oCe&&tCe("system_profiler SPBluetoothDataType -json",function(i,s){if(!i)try{let o=JSON.parse(s.toString());if(o.SPBluetoothDataType&&o.SPBluetoothDataType.length&&o.SPBluetoothDataType[0]&&o.SPBluetoothDataType[0].device_title&&o.SPBluetoothDataType[0].device_title.length){let a=null;o.SPBluetoothDataType[0].local_device_title&&o.SPBluetoothDataType[0].local_device_title.general_address&&(a=o.SPBluetoothDataType[0].local_device_title.general_address.toLowerCase().replace(/-/g,":")),o.SPBluetoothDataType[0].device_title.forEach(u=>{let c=u,d=Object.keys(c);if(d&&d.length===1){let h=c[d[0]];h.device_name=d[0];let p=GT(h,a);t.push(p)}})}if(o.SPBluetoothDataType&&o.SPBluetoothDataType.length&&o.SPBluetoothDataType[0]&&o.SPBluetoothDataType[0].device_connected&&o.SPBluetoothDataType[0].device_connected.length){let a=o.SPBluetoothDataType[0].controller_properties&&o.SPBluetoothDataType[0].controller_properties.controller_address?o.SPBluetoothDataType[0].controller_properties.controller_address.toLowerCase().replace(/-/g,":"):null;o.SPBluetoothDataType[0].device_connected.forEach(u=>{let c=u,d=Object.keys(c);if(d&&d.length===1){let h=c[d[0]];h.device_name=d[0],h.device_isconnected="attrib_Yes";let p=GT(h,a);t.push(p)}})}if(o.SPBluetoothDataType&&o.SPBluetoothDataType.length&&o.SPBluetoothDataType[0]&&o.SPBluetoothDataType[0].device_not_connected&&o.SPBluetoothDataType[0].device_not_connected.length){let a=o.SPBluetoothDataType[0].controller_properties&&o.SPBluetoothDataType[0].controller_properties.controller_address?o.SPBluetoothDataType[0].controller_properties.controller_address.toLowerCase().replace(/-/g,":"):null;o.SPBluetoothDataType[0].device_not_connected.forEach(u=>{let c=u,d=Object.keys(c);if(d&&d.length===1){let h=c[d[0]];h.device_name=d[0],h.device_isconnected="attrib_No";let p=GT(h,a);t.push(p)}})}}catch{ql.noop()}r&&r(t),e(t)}),aCe&&ql.powerShell("Get-CimInstance Win32_PNPEntity | select PNPClass, Name, Manufacturer | fl").then((n,i)=>{i||n.toString().split(/\n\s*\n/).forEach(o=>{ql.getValue(o.split(`
`),"PNPClass",":")==="Bluetooth"&&t.push(pCe(o.split(`
`)))}),r&&r(t),e(t)}),(lCe||cCe||uCe||fCe)&&e(null)})})}Z9.bluetoothDevices=mCe});var a7=E(xe=>{"use strict";var gCe=wW().version,mc=zr(),Vl=LW(),na=NW(),ws=BW(),Ww=ZW(),e7=t9(),t7=o9(),go=f9(),ia=w9(),zw=I9(),Mm=A9(),r7=P9(),WT=D9(),gc=q9(),yCe=V9(),vCe=$9(),wCe=H9(),bCe=Q9(),SCe=X9(),km=process.platform,$w=km==="win32",Cm=km==="freebsd",Tm=km==="openbsd",Am=km==="netbsd",mo=km==="sunos";$w&&mc.getCodepage();function n7(){return gCe}function i7(r){return new Promise(e=>{process.nextTick(()=>{let t={};t.version=n7(),Promise.all([Vl.system(),Vl.bios(),Vl.baseboard(),Vl.chassis(),na.osInfo(),na.uuid(),na.versions(),ws.cpu(),ws.cpuFlags(),t7.graphics(),ia.networkInterfaces(),Ww.memLayout(),go.diskLayout()]).then(n=>{t.system=n[0],t.bios=n[1],t.baseboard=n[2],t.chassis=n[3],t.os=n[4],t.uuid=n[5],t.versions=n[6],t.cpu=n[7],t.cpu.flags=n[8],t.graphics=n[9],t.net=n[10],t.memLayout=n[11],t.diskLayout=n[12],r&&r(t),e(t)})})})}function s7(r,e,t){return mc.isFunction(e)&&(t=e,e=""),mc.isFunction(r)&&(t=r,r=""),new Promise(n=>{process.nextTick(()=>{e=e||ia.getDefaultNetworkInterface(),r=r||"";let i=function(){let o=15;return $w&&(o=13),(Cm||Tm||Am)&&(o=11),mo&&(o=6),function(){--o===0&&(t&&t(s),n(s))}}(),s={};s.time=na.time(),s.node=process.versions.node,s.v8=process.versions.v8,ws.cpuCurrentSpeed().then(o=>{s.cpuCurrentSpeed=o,i()}),r7.users().then(o=>{s.users=o,i()}),Mm.processes().then(o=>{s.processes=o,i()}),ws.currentLoad().then(o=>{s.currentLoad=o,i()}),mo||ws.cpuTemperature().then(o=>{s.temp=o,i()}),!Tm&&!Cm&&!Am&&!mo&&ia.networkStats(e).then(o=>{s.networkStats=o,i()}),mo||ia.networkConnections().then(o=>{s.networkConnections=o,i()}),Ww.mem().then(o=>{s.mem=o,i()}),mo||e7().then(o=>{s.battery=o,i()}),mo||Mm.services(r).then(o=>{s.services=o,i()}),mo||go.fsSize().then(o=>{s.fsSize=o,i()}),!$w&&!Tm&&!Cm&&!Am&&!mo&&go.fsStats().then(o=>{s.fsStats=o,i()}),!$w&&!Tm&&!Cm&&!Am&&!mo&&go.disksIO().then(o=>{s.disksIO=o,i()}),!Tm&&!Cm&&!Am&&!mo&&zw.wifiNetworks().then(o=>{s.wifiNetworks=o,i()}),WT.inetLatency().then(o=>{s.inetLatency=o,i()})})})}function _Ce(r,e,t){return new Promise(n=>{process.nextTick(()=>{let i={};e&&mc.isFunction(e)&&!t&&(t=e,e=""),r&&mc.isFunction(r)&&!e&&!t&&(t=r,r="",e=""),i7().then(s=>{i=s,s7(r,e).then(o=>{for(let a in o)({}).hasOwnProperty.call(o,a)&&(i[a]=o[a]);t&&t(i),n(i)})})})})}function o7(r,e){return new Promise(t=>{process.nextTick(()=>{let n=Object.keys(r).filter(i=>({}).hasOwnProperty.call(xe,i)).map(i=>{let s=r[i].substring(r[i].lastIndexOf("(")+1,r[i].lastIndexOf(")")),o=i.indexOf(")")>=0?i.split(")")[1].trim():i;return o=i.indexOf("|")>=0?i.split("|")[0].trim():o,s?xe[o](s):xe[o]("")});Promise.all(n).then(i=>{let s={},o=0;for(let a in r)if({}.hasOwnProperty.call(r,a)&&{}.hasOwnProperty.call(xe,a)&&i.length>o){if(r[a]==="*"||r[a]==="all")s[a]=i[o];else{let u=r[a],c="",d=[];if(u.indexOf(")")>=0&&(u=u.split(")")[1].trim()),u.indexOf("|")>=0&&(c=u.split("|")[1].trim(),d=c.split(":"),u=u.split("|")[0].trim()),u=u.replace(/,/g," ").replace(/ +/g," ").split(" "),i[o])if(Array.isArray(i[o])){let h=[];i[o].forEach(p=>{let m={};if(u.length===1&&(u[0]==="*"||u[0]==="all")?m=p:u.forEach(y=>{({}).hasOwnProperty.call(p,y)&&(m[y]=p[y])}),c&&d.length===2){if({}.hasOwnProperty.call(m,d[0].trim())){let y=m[d[0].trim()];typeof y=="number"?y===parseFloat(d[1].trim())&&h.push(m):typeof y=="string"&&y.toLowerCase()===d[1].trim().toLowerCase()&&h.push(m)}}else h.push(m)}),s[a]=h}else{let h={};u.forEach(p=>{({}).hasOwnProperty.call(i[o],p)&&(h[p]=i[o][p])}),s[a]=h}else s[a]={}}o++}e&&e(s),t(s)})})})}function xCe(r,e,t){let n=null;return setInterval(()=>{o7(r).then(s=>{JSON.stringify(n)!==JSON.stringify(s)&&(n=Object.assign({},s),t(s))})},e)}xe.version=n7;xe.system=Vl.system;xe.bios=Vl.bios;xe.baseboard=Vl.baseboard;xe.chassis=Vl.chassis;xe.time=na.time;xe.osInfo=na.osInfo;xe.versions=na.versions;xe.shell=na.shell;xe.uuid=na.uuid;xe.cpu=ws.cpu;xe.cpuFlags=ws.cpuFlags;xe.cpuCache=ws.cpuCache;xe.cpuCurrentSpeed=ws.cpuCurrentSpeed;xe.cpuTemperature=ws.cpuTemperature;xe.currentLoad=ws.currentLoad;xe.fullLoad=ws.fullLoad;xe.mem=Ww.mem;xe.memLayout=Ww.memLayout;xe.battery=e7;xe.graphics=t7.graphics;xe.fsSize=go.fsSize;xe.fsOpenFiles=go.fsOpenFiles;xe.blockDevices=go.blockDevices;xe.fsStats=go.fsStats;xe.disksIO=go.disksIO;xe.diskLayout=go.diskLayout;xe.networkInterfaceDefault=ia.networkInterfaceDefault;xe.networkGatewayDefault=ia.networkGatewayDefault;xe.networkInterfaces=ia.networkInterfaces;xe.networkStats=ia.networkStats;xe.networkConnections=ia.networkConnections;xe.wifiNetworks=zw.wifiNetworks;xe.wifiInterfaces=zw.wifiInterfaces;xe.wifiConnections=zw.wifiConnections;xe.services=Mm.services;xe.processes=Mm.processes;xe.processLoad=Mm.processLoad;xe.users=r7.users;xe.inetChecksite=WT.inetChecksite;xe.inetLatency=WT.inetLatency;xe.dockerInfo=gc.dockerInfo;xe.dockerImages=gc.dockerImages;xe.dockerContainers=gc.dockerContainers;xe.dockerContainerStats=gc.dockerContainerStats;xe.dockerContainerProcesses=gc.dockerContainerProcesses;xe.dockerVolumes=gc.dockerVolumes;xe.dockerAll=gc.dockerAll;xe.vboxInfo=yCe.vboxInfo;xe.printer=vCe.printer;xe.usb=wCe.usb;xe.audio=bCe.audio;xe.bluetoothDevices=SCe.bluetoothDevices;xe.getStaticData=i7;xe.getDynamicData=s7;xe.getAllData=_Ce;xe.get=o7;xe.observe=xCe;xe.powerShellStart=mc.powerShellStart;xe.powerShellRelease=mc.powerShellRelease});var c7=et(require("node:http")),f7=et(require("node:path")),d7=et(eg()),h7=et(T_()),p7=et(u2());var ZO=et(require("crypto")),Je=et(require("fs")),Ae=et(require("path")),XO=et(require("os"));var Et;(function(r){r.assertEqual=i=>i;function e(i){}r.assertIs=e;function t(i){throw new Error}r.assertNever=t,r.arrayToEnum=i=>{let s={};for(let o of i)s[o]=o;return s},r.getValidEnumValues=i=>{let s=r.objectKeys(i).filter(a=>typeof i[i[a]]!="number"),o={};for(let a of s)o[a]=i[a];return r.objectValues(o)},r.objectValues=i=>r.objectKeys(i).map(function(s){return i[s]}),r.objectKeys=typeof Object.keys=="function"?i=>Object.keys(i):i=>{let s=[];for(let o in i)Object.prototype.hasOwnProperty.call(i,o)&&s.push(o);return s},r.find=(i,s)=>{for(let o of i)if(s(o))return o},r.isInteger=typeof Number.isInteger=="function"?i=>Number.isInteger(i):i=>typeof i=="number"&&isFinite(i)&&Math.floor(i)===i;function n(i,s=" | "){return i.map(o=>typeof o=="string"?`'${o}'`:o).join(s)}r.joinValues=n,r.jsonStringifyReplacer=(i,s)=>typeof s=="bigint"?s.toString():s})(Et||(Et={}));var f2;(function(r){r.mergeShapes=(e,t)=>({...e,...t})})(f2||(f2={}));var ve=Et.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),Ha=r=>{switch(typeof r){case"undefined":return ve.undefined;case"string":return ve.string;case"number":return isNaN(r)?ve.nan:ve.number;case"boolean":return ve.boolean;case"function":return ve.function;case"bigint":return ve.bigint;case"symbol":return ve.symbol;case"object":return Array.isArray(r)?ve.array:r===null?ve.null:r.then&&typeof r.then=="function"&&r.catch&&typeof r.catch=="function"?ve.promise:typeof Map<"u"&&r instanceof Map?ve.map:typeof Set<"u"&&r instanceof Set?ve.set:typeof Date<"u"&&r instanceof Date?ve.date:ve.object;default:return ve.unknown}},ue=Et.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]),Ude=r=>JSON.stringify(r,null,2).replace(/"([^"]+)":/g,"$1:"),Mi=class extends Error{constructor(e){super(),this.issues=[],this.addIssue=n=>{this.issues=[...this.issues,n]},this.addIssues=(n=[])=>{this.issues=[...this.issues,...n]};let t=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,t):this.__proto__=t,this.name="ZodError",this.issues=e}get errors(){return this.issues}format(e){let t=e||function(s){return s.message},n={_errors:[]},i=s=>{for(let o of s.issues)if(o.code==="invalid_union")o.unionErrors.map(i);else if(o.code==="invalid_return_type")i(o.returnTypeError);else if(o.code==="invalid_arguments")i(o.argumentsError);else if(o.path.length===0)n._errors.push(t(o));else{let a=n,u=0;for(;u<o.path.length;){let c=o.path[u];u===o.path.length-1?(a[c]=a[c]||{_errors:[]},a[c]._errors.push(t(o))):a[c]=a[c]||{_errors:[]},a=a[c],u++}}};return i(this),n}toString(){return this.message}get message(){return JSON.stringify(this.issues,Et.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(e=t=>t.message){let t={},n=[];for(let i of this.issues)i.path.length>0?(t[i.path[0]]=t[i.path[0]]||[],t[i.path[0]].push(e(i))):n.push(e(i));return{formErrors:n,fieldErrors:t}}get formErrors(){return this.flatten()}};Mi.create=r=>new Mi(r);var op=(r,e)=>{let t;switch(r.code){case ue.invalid_type:r.received===ve.undefined?t="Required":t=`Expected ${r.expected}, received ${r.received}`;break;case ue.invalid_literal:t=`Invalid literal value, expected ${JSON.stringify(r.expected,Et.jsonStringifyReplacer)}`;break;case ue.unrecognized_keys:t=`Unrecognized key(s) in object: ${Et.joinValues(r.keys,", ")}`;break;case ue.invalid_union:t="Invalid input";break;case ue.invalid_union_discriminator:t=`Invalid discriminator value. Expected ${Et.joinValues(r.options)}`;break;case ue.invalid_enum_value:t=`Invalid enum value. Expected ${Et.joinValues(r.options)}, received '${r.received}'`;break;case ue.invalid_arguments:t="Invalid function arguments";break;case ue.invalid_return_type:t="Invalid function return type";break;case ue.invalid_date:t="Invalid date";break;case ue.invalid_string:typeof r.validation=="object"?"includes"in r.validation?(t=`Invalid input: must include "${r.validation.includes}"`,typeof r.validation.position=="number"&&(t=`${t} at one or more positions greater than or equal to ${r.validation.position}`)):"startsWith"in r.validation?t=`Invalid input: must start with "${r.validation.startsWith}"`:"endsWith"in r.validation?t=`Invalid input: must end with "${r.validation.endsWith}"`:Et.assertNever(r.validation):r.validation!=="regex"?t=`Invalid ${r.validation}`:t="Invalid";break;case ue.too_small:r.type==="array"?t=`Array must contain ${r.exact?"exactly":r.inclusive?"at least":"more than"} ${r.minimum} element(s)`:r.type==="string"?t=`String must contain ${r.exact?"exactly":r.inclusive?"at least":"over"} ${r.minimum} character(s)`:r.type==="number"?t=`Number must be ${r.exact?"exactly equal to ":r.inclusive?"greater than or equal to ":"greater than "}${r.minimum}`:r.type==="date"?t=`Date must be ${r.exact?"exactly equal to ":r.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(r.minimum))}`:t="Invalid input";break;case ue.too_big:r.type==="array"?t=`Array must contain ${r.exact?"exactly":r.inclusive?"at most":"less than"} ${r.maximum} element(s)`:r.type==="string"?t=`String must contain ${r.exact?"exactly":r.inclusive?"at most":"under"} ${r.maximum} character(s)`:r.type==="number"?t=`Number must be ${r.exact?"exactly":r.inclusive?"less than or equal to":"less than"} ${r.maximum}`:r.type==="bigint"?t=`BigInt must be ${r.exact?"exactly":r.inclusive?"less than or equal to":"less than"} ${r.maximum}`:r.type==="date"?t=`Date must be ${r.exact?"exactly":r.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(r.maximum))}`:t="Invalid input";break;case ue.custom:t="Invalid input";break;case ue.invalid_intersection_types:t="Intersection results could not be merged";break;case ue.not_multiple_of:t=`Number must be a multiple of ${r.multipleOf}`;break;case ue.not_finite:t="Number must be finite";break;default:t=e.defaultError,Et.assertNever(r)}return{message:t}},U4=op;function Gde(r){U4=r}function sv(){return U4}var ov=r=>{let{data:e,path:t,errorMaps:n,issueData:i}=r,s=[...t,...i.path||[]],o={...i,path:s},a="",u=n.filter(c=>!!c).slice().reverse();for(let c of u)a=c(o,{data:e,defaultError:a}).message;return{...i,path:s,message:i.message||a}},$de=[];function Se(r,e){let t=ov({issueData:e,data:r.data,path:r.path,errorMaps:[r.common.contextualErrorMap,r.schemaErrorMap,sv(),op].filter(n=>!!n)});r.common.issues.push(t)}var An=class r{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(e,t){let n=[];for(let i of t){if(i.status==="aborted")return $e;i.status==="dirty"&&e.dirty(),n.push(i.value)}return{status:e.value,value:n}}static async mergeObjectAsync(e,t){let n=[];for(let i of t)n.push({key:await i.key,value:await i.value});return r.mergeObjectSync(e,n)}static mergeObjectSync(e,t){let n={};for(let i of t){let{key:s,value:o}=i;if(s.status==="aborted"||o.status==="aborted")return $e;s.status==="dirty"&&e.dirty(),o.status==="dirty"&&e.dirty(),s.value!=="__proto__"&&(typeof o.value<"u"||i.alwaysSet)&&(n[s.value]=o.value)}return{status:e.value,value:n}}},$e=Object.freeze({status:"aborted"}),G4=r=>({status:"dirty",value:r}),Un=r=>({status:"valid",value:r}),d2=r=>r.status==="aborted",h2=r=>r.status==="dirty",ap=r=>r.status==="valid",av=r=>typeof Promise<"u"&&r instanceof Promise,ke;(function(r){r.errToObj=e=>typeof e=="string"?{message:e}:e||{},r.toString=e=>typeof e=="string"?e:e?.message})(ke||(ke={}));var ts=class{constructor(e,t,n,i){this._cachedPath=[],this.parent=e,this.data=t,this._path=n,this._key=i}get path(){return this._cachedPath.length||(this._key instanceof Array?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}},V4=(r,e)=>{if(ap(e))return{success:!0,data:e.value};if(!r.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;let t=new Mi(r.common.issues);return this._error=t,this._error}}};function He(r){if(!r)return{};let{errorMap:e,invalid_type_error:t,required_error:n,description:i}=r;if(e&&(t||n))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return e?{errorMap:e,description:i}:{errorMap:(o,a)=>o.code!=="invalid_type"?{message:a.defaultError}:typeof a.data>"u"?{message:n??a.defaultError}:{message:t??a.defaultError},description:i}}var Ye=class{constructor(e){this.spa=this.safeParseAsync,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this)}get description(){return this._def.description}_getType(e){return Ha(e.data)}_getOrReturnCtx(e,t){return t||{common:e.parent.common,data:e.data,parsedType:Ha(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}_processInputParams(e){return{status:new An,ctx:{common:e.parent.common,data:e.data,parsedType:Ha(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}_parseSync(e){let t=this._parse(e);if(av(t))throw new Error("Synchronous parse encountered promise.");return t}_parseAsync(e){let t=this._parse(e);return Promise.resolve(t)}parse(e,t){let n=this.safeParse(e,t);if(n.success)return n.data;throw n.error}safeParse(e,t){var n;let i={common:{issues:[],async:(n=t?.async)!==null&&n!==void 0?n:!1,contextualErrorMap:t?.errorMap},path:t?.path||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:Ha(e)},s=this._parseSync({data:e,path:i.path,parent:i});return V4(i,s)}async parseAsync(e,t){let n=await this.safeParseAsync(e,t);if(n.success)return n.data;throw n.error}async safeParseAsync(e,t){let n={common:{issues:[],contextualErrorMap:t?.errorMap,async:!0},path:t?.path||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:Ha(e)},i=this._parse({data:e,path:n.path,parent:n}),s=await(av(i)?i:Promise.resolve(i));return V4(n,s)}refine(e,t){let n=i=>typeof t=="string"||typeof t>"u"?{message:t}:typeof t=="function"?t(i):t;return this._refinement((i,s)=>{let o=e(i),a=()=>s.addIssue({code:ue.custom,...n(i)});return typeof Promise<"u"&&o instanceof Promise?o.then(u=>u?!0:(a(),!1)):o?!0:(a(),!1)})}refinement(e,t){return this._refinement((n,i)=>e(n)?!0:(i.addIssue(typeof t=="function"?t(n,i):t),!1))}_refinement(e){return new ki({schema:this,typeName:Ke.ZodEffects,effect:{type:"refinement",refinement:e}})}superRefine(e){return this._refinement(e)}optional(){return Ps.create(this,this._def)}nullable(){return $o.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return Go.create(this,this._def)}promise(){return Qa.create(this,this._def)}or(e){return Du.create([this,e],this._def)}and(e){return Nu.create(this,e,this._def)}transform(e){return new ki({...He(this._def),schema:this,typeName:Ke.ZodEffects,effect:{type:"transform",transform:e}})}default(e){let t=typeof e=="function"?e:()=>e;return new Vu({...He(this._def),innerType:this,defaultValue:t,typeName:Ke.ZodDefault})}brand(){return new fv({typeName:Ke.ZodBranded,type:this,...He(this._def)})}catch(e){let t=typeof e=="function"?e:()=>e;return new Tf({...He(this._def),innerType:this,catchValue:t,typeName:Ke.ZodCatch})}describe(e){let t=this.constructor;return new t({...this._def,description:e})}pipe(e){return lp.create(this,e)}readonly(){return Mf.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}},Wde=/^c[^\s-]{8,}$/i,zde=/^[a-z][a-z0-9]*$/,Hde=/^[0-9A-HJKMNP-TV-Z]{26}$/,Yde=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,Jde=/^(?!\.)(?!.*\.\.)([A-Z0-9_+-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,Qde="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$",c2,Zde=/^(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))$/,Xde=/^(([a-f0-9]{1,4}:){7}|::([a-f0-9]{1,4}:){0,6}|([a-f0-9]{1,4}:){1}:([a-f0-9]{1,4}:){0,5}|([a-f0-9]{1,4}:){2}:([a-f0-9]{1,4}:){0,4}|([a-f0-9]{1,4}:){3}:([a-f0-9]{1,4}:){0,3}|([a-f0-9]{1,4}:){4}:([a-f0-9]{1,4}:){0,2}|([a-f0-9]{1,4}:){5}:([a-f0-9]{1,4}:){0,1})([a-f0-9]{1,4}|(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2})))$/,ehe=r=>r.precision?r.offset?new RegExp(`^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}\\.\\d{${r.precision}}(([+-]\\d{2}(:?\\d{2})?)|Z)$`):new RegExp(`^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}\\.\\d{${r.precision}}Z$`):r.precision===0?r.offset?new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}(([+-]\\d{2}(:?\\d{2})?)|Z)$"):new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}Z$"):r.offset?new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}(\\.\\d+)?(([+-]\\d{2}(:?\\d{2})?)|Z)$"):new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}(\\.\\d+)?Z$");function the(r,e){return!!((e==="v4"||!e)&&Zde.test(r)||(e==="v6"||!e)&&Xde.test(r))}var Ya=class r extends Ye{_parse(e){if(this._def.coerce&&(e.data=String(e.data)),this._getType(e)!==ve.string){let s=this._getOrReturnCtx(e);return Se(s,{code:ue.invalid_type,expected:ve.string,received:s.parsedType}),$e}let n=new An,i;for(let s of this._def.checks)if(s.kind==="min")e.data.length<s.value&&(i=this._getOrReturnCtx(e,i),Se(i,{code:ue.too_small,minimum:s.value,type:"string",inclusive:!0,exact:!1,message:s.message}),n.dirty());else if(s.kind==="max")e.data.length>s.value&&(i=this._getOrReturnCtx(e,i),Se(i,{code:ue.too_big,maximum:s.value,type:"string",inclusive:!0,exact:!1,message:s.message}),n.dirty());else if(s.kind==="length"){let o=e.data.length>s.value,a=e.data.length<s.value;(o||a)&&(i=this._getOrReturnCtx(e,i),o?Se(i,{code:ue.too_big,maximum:s.value,type:"string",inclusive:!0,exact:!0,message:s.message}):a&&Se(i,{code:ue.too_small,minimum:s.value,type:"string",inclusive:!0,exact:!0,message:s.message}),n.dirty())}else if(s.kind==="email")Jde.test(e.data)||(i=this._getOrReturnCtx(e,i),Se(i,{validation:"email",code:ue.invalid_string,message:s.message}),n.dirty());else if(s.kind==="emoji")c2||(c2=new RegExp(Qde,"u")),c2.test(e.data)||(i=this._getOrReturnCtx(e,i),Se(i,{validation:"emoji",code:ue.invalid_string,message:s.message}),n.dirty());else if(s.kind==="uuid")Yde.test(e.data)||(i=this._getOrReturnCtx(e,i),Se(i,{validation:"uuid",code:ue.invalid_string,message:s.message}),n.dirty());else if(s.kind==="cuid")Wde.test(e.data)||(i=this._getOrReturnCtx(e,i),Se(i,{validation:"cuid",code:ue.invalid_string,message:s.message}),n.dirty());else if(s.kind==="cuid2")zde.test(e.data)||(i=this._getOrReturnCtx(e,i),Se(i,{validation:"cuid2",code:ue.invalid_string,message:s.message}),n.dirty());else if(s.kind==="ulid")Hde.test(e.data)||(i=this._getOrReturnCtx(e,i),Se(i,{validation:"ulid",code:ue.invalid_string,message:s.message}),n.dirty());else if(s.kind==="url")try{new URL(e.data)}catch{i=this._getOrReturnCtx(e,i),Se(i,{validation:"url",code:ue.invalid_string,message:s.message}),n.dirty()}else s.kind==="regex"?(s.regex.lastIndex=0,s.regex.test(e.data)||(i=this._getOrReturnCtx(e,i),Se(i,{validation:"regex",code:ue.invalid_string,message:s.message}),n.dirty())):s.kind==="trim"?e.data=e.data.trim():s.kind==="includes"?e.data.includes(s.value,s.position)||(i=this._getOrReturnCtx(e,i),Se(i,{code:ue.invalid_string,validation:{includes:s.value,position:s.position},message:s.message}),n.dirty()):s.kind==="toLowerCase"?e.data=e.data.toLowerCase():s.kind==="toUpperCase"?e.data=e.data.toUpperCase():s.kind==="startsWith"?e.data.startsWith(s.value)||(i=this._getOrReturnCtx(e,i),Se(i,{code:ue.invalid_string,validation:{startsWith:s.value},message:s.message}),n.dirty()):s.kind==="endsWith"?e.data.endsWith(s.value)||(i=this._getOrReturnCtx(e,i),Se(i,{code:ue.invalid_string,validation:{endsWith:s.value},message:s.message}),n.dirty()):s.kind==="datetime"?ehe(s).test(e.data)||(i=this._getOrReturnCtx(e,i),Se(i,{code:ue.invalid_string,validation:"datetime",message:s.message}),n.dirty()):s.kind==="ip"?the(e.data,s.version)||(i=this._getOrReturnCtx(e,i),Se(i,{validation:"ip",code:ue.invalid_string,message:s.message}),n.dirty()):Et.assertNever(s);return{status:n.value,value:e.data}}_regex(e,t,n){return this.refinement(i=>e.test(i),{validation:t,code:ue.invalid_string,...ke.errToObj(n)})}_addCheck(e){return new r({...this._def,checks:[...this._def.checks,e]})}email(e){return this._addCheck({kind:"email",...ke.errToObj(e)})}url(e){return this._addCheck({kind:"url",...ke.errToObj(e)})}emoji(e){return this._addCheck({kind:"emoji",...ke.errToObj(e)})}uuid(e){return this._addCheck({kind:"uuid",...ke.errToObj(e)})}cuid(e){return this._addCheck({kind:"cuid",...ke.errToObj(e)})}cuid2(e){return this._addCheck({kind:"cuid2",...ke.errToObj(e)})}ulid(e){return this._addCheck({kind:"ulid",...ke.errToObj(e)})}ip(e){return this._addCheck({kind:"ip",...ke.errToObj(e)})}datetime(e){var t;return typeof e=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,message:e}):this._addCheck({kind:"datetime",precision:typeof e?.precision>"u"?null:e?.precision,offset:(t=e?.offset)!==null&&t!==void 0?t:!1,...ke.errToObj(e?.message)})}regex(e,t){return this._addCheck({kind:"regex",regex:e,...ke.errToObj(t)})}includes(e,t){return this._addCheck({kind:"includes",value:e,position:t?.position,...ke.errToObj(t?.message)})}startsWith(e,t){return this._addCheck({kind:"startsWith",value:e,...ke.errToObj(t)})}endsWith(e,t){return this._addCheck({kind:"endsWith",value:e,...ke.errToObj(t)})}min(e,t){return this._addCheck({kind:"min",value:e,...ke.errToObj(t)})}max(e,t){return this._addCheck({kind:"max",value:e,...ke.errToObj(t)})}length(e,t){return this._addCheck({kind:"length",value:e,...ke.errToObj(t)})}nonempty(e){return this.min(1,ke.errToObj(e))}trim(){return new r({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new r({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new r({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(e=>e.kind==="datetime")}get isEmail(){return!!this._def.checks.find(e=>e.kind==="email")}get isURL(){return!!this._def.checks.find(e=>e.kind==="url")}get isEmoji(){return!!this._def.checks.find(e=>e.kind==="emoji")}get isUUID(){return!!this._def.checks.find(e=>e.kind==="uuid")}get isCUID(){return!!this._def.checks.find(e=>e.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(e=>e.kind==="cuid2")}get isULID(){return!!this._def.checks.find(e=>e.kind==="ulid")}get isIP(){return!!this._def.checks.find(e=>e.kind==="ip")}get minLength(){let e=null;for(let t of this._def.checks)t.kind==="min"&&(e===null||t.value>e)&&(e=t.value);return e}get maxLength(){let e=null;for(let t of this._def.checks)t.kind==="max"&&(e===null||t.value<e)&&(e=t.value);return e}};Ya.create=r=>{var e;return new Ya({checks:[],typeName:Ke.ZodString,coerce:(e=r?.coerce)!==null&&e!==void 0?e:!1,...He(r)})};function rhe(r,e){let t=(r.toString().split(".")[1]||"").length,n=(e.toString().split(".")[1]||"").length,i=t>n?t:n,s=parseInt(r.toFixed(i).replace(".","")),o=parseInt(e.toFixed(i).replace(".",""));return s%o/Math.pow(10,i)}var Au=class r extends Ye{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){if(this._def.coerce&&(e.data=Number(e.data)),this._getType(e)!==ve.number){let s=this._getOrReturnCtx(e);return Se(s,{code:ue.invalid_type,expected:ve.number,received:s.parsedType}),$e}let n,i=new An;for(let s of this._def.checks)s.kind==="int"?Et.isInteger(e.data)||(n=this._getOrReturnCtx(e,n),Se(n,{code:ue.invalid_type,expected:"integer",received:"float",message:s.message}),i.dirty()):s.kind==="min"?(s.inclusive?e.data<s.value:e.data<=s.value)&&(n=this._getOrReturnCtx(e,n),Se(n,{code:ue.too_small,minimum:s.value,type:"number",inclusive:s.inclusive,exact:!1,message:s.message}),i.dirty()):s.kind==="max"?(s.inclusive?e.data>s.value:e.data>=s.value)&&(n=this._getOrReturnCtx(e,n),Se(n,{code:ue.too_big,maximum:s.value,type:"number",inclusive:s.inclusive,exact:!1,message:s.message}),i.dirty()):s.kind==="multipleOf"?rhe(e.data,s.value)!==0&&(n=this._getOrReturnCtx(e,n),Se(n,{code:ue.not_multiple_of,multipleOf:s.value,message:s.message}),i.dirty()):s.kind==="finite"?Number.isFinite(e.data)||(n=this._getOrReturnCtx(e,n),Se(n,{code:ue.not_finite,message:s.message}),i.dirty()):Et.assertNever(s);return{status:i.value,value:e.data}}gte(e,t){return this.setLimit("min",e,!0,ke.toString(t))}gt(e,t){return this.setLimit("min",e,!1,ke.toString(t))}lte(e,t){return this.setLimit("max",e,!0,ke.toString(t))}lt(e,t){return this.setLimit("max",e,!1,ke.toString(t))}setLimit(e,t,n,i){return new r({...this._def,checks:[...this._def.checks,{kind:e,value:t,inclusive:n,message:ke.toString(i)}]})}_addCheck(e){return new r({...this._def,checks:[...this._def.checks,e]})}int(e){return this._addCheck({kind:"int",message:ke.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:ke.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:ke.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:ke.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:ke.toString(e)})}multipleOf(e,t){return this._addCheck({kind:"multipleOf",value:e,message:ke.toString(t)})}finite(e){return this._addCheck({kind:"finite",message:ke.toString(e)})}safe(e){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:ke.toString(e)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:ke.toString(e)})}get minValue(){let e=null;for(let t of this._def.checks)t.kind==="min"&&(e===null||t.value>e)&&(e=t.value);return e}get maxValue(){let e=null;for(let t of this._def.checks)t.kind==="max"&&(e===null||t.value<e)&&(e=t.value);return e}get isInt(){return!!this._def.checks.find(e=>e.kind==="int"||e.kind==="multipleOf"&&Et.isInteger(e.value))}get isFinite(){let e=null,t=null;for(let n of this._def.checks){if(n.kind==="finite"||n.kind==="int"||n.kind==="multipleOf")return!0;n.kind==="min"?(t===null||n.value>t)&&(t=n.value):n.kind==="max"&&(e===null||n.value<e)&&(e=n.value)}return Number.isFinite(t)&&Number.isFinite(e)}};Au.create=r=>new Au({checks:[],typeName:Ke.ZodNumber,coerce:r?.coerce||!1,...He(r)});var Mu=class r extends Ye{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(e){if(this._def.coerce&&(e.data=BigInt(e.data)),this._getType(e)!==ve.bigint){let s=this._getOrReturnCtx(e);return Se(s,{code:ue.invalid_type,expected:ve.bigint,received:s.parsedType}),$e}let n,i=new An;for(let s of this._def.checks)s.kind==="min"?(s.inclusive?e.data<s.value:e.data<=s.value)&&(n=this._getOrReturnCtx(e,n),Se(n,{code:ue.too_small,type:"bigint",minimum:s.value,inclusive:s.inclusive,message:s.message}),i.dirty()):s.kind==="max"?(s.inclusive?e.data>s.value:e.data>=s.value)&&(n=this._getOrReturnCtx(e,n),Se(n,{code:ue.too_big,type:"bigint",maximum:s.value,inclusive:s.inclusive,message:s.message}),i.dirty()):s.kind==="multipleOf"?e.data%s.value!==BigInt(0)&&(n=this._getOrReturnCtx(e,n),Se(n,{code:ue.not_multiple_of,multipleOf:s.value,message:s.message}),i.dirty()):Et.assertNever(s);return{status:i.value,value:e.data}}gte(e,t){return this.setLimit("min",e,!0,ke.toString(t))}gt(e,t){return this.setLimit("min",e,!1,ke.toString(t))}lte(e,t){return this.setLimit("max",e,!0,ke.toString(t))}lt(e,t){return this.setLimit("max",e,!1,ke.toString(t))}setLimit(e,t,n,i){return new r({...this._def,checks:[...this._def.checks,{kind:e,value:t,inclusive:n,message:ke.toString(i)}]})}_addCheck(e){return new r({...this._def,checks:[...this._def.checks,e]})}positive(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:ke.toString(e)})}negative(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:ke.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:ke.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:ke.toString(e)})}multipleOf(e,t){return this._addCheck({kind:"multipleOf",value:e,message:ke.toString(t)})}get minValue(){let e=null;for(let t of this._def.checks)t.kind==="min"&&(e===null||t.value>e)&&(e=t.value);return e}get maxValue(){let e=null;for(let t of this._def.checks)t.kind==="max"&&(e===null||t.value<e)&&(e=t.value);return e}};Mu.create=r=>{var e;return new Mu({checks:[],typeName:Ke.ZodBigInt,coerce:(e=r?.coerce)!==null&&e!==void 0?e:!1,...He(r)})};var ku=class extends Ye{_parse(e){if(this._def.coerce&&(e.data=!!e.data),this._getType(e)!==ve.boolean){let n=this._getOrReturnCtx(e);return Se(n,{code:ue.invalid_type,expected:ve.boolean,received:n.parsedType}),$e}return Un(e.data)}};ku.create=r=>new ku({typeName:Ke.ZodBoolean,coerce:r?.coerce||!1,...He(r)});var Pu=class r extends Ye{_parse(e){if(this._def.coerce&&(e.data=new Date(e.data)),this._getType(e)!==ve.date){let s=this._getOrReturnCtx(e);return Se(s,{code:ue.invalid_type,expected:ve.date,received:s.parsedType}),$e}if(isNaN(e.data.getTime())){let s=this._getOrReturnCtx(e);return Se(s,{code:ue.invalid_date}),$e}let n=new An,i;for(let s of this._def.checks)s.kind==="min"?e.data.getTime()<s.value&&(i=this._getOrReturnCtx(e,i),Se(i,{code:ue.too_small,message:s.message,inclusive:!0,exact:!1,minimum:s.value,type:"date"}),n.dirty()):s.kind==="max"?e.data.getTime()>s.value&&(i=this._getOrReturnCtx(e,i),Se(i,{code:ue.too_big,message:s.message,inclusive:!0,exact:!1,maximum:s.value,type:"date"}),n.dirty()):Et.assertNever(s);return{status:n.value,value:new Date(e.data.getTime())}}_addCheck(e){return new r({...this._def,checks:[...this._def.checks,e]})}min(e,t){return this._addCheck({kind:"min",value:e.getTime(),message:ke.toString(t)})}max(e,t){return this._addCheck({kind:"max",value:e.getTime(),message:ke.toString(t)})}get minDate(){let e=null;for(let t of this._def.checks)t.kind==="min"&&(e===null||t.value>e)&&(e=t.value);return e!=null?new Date(e):null}get maxDate(){let e=null;for(let t of this._def.checks)t.kind==="max"&&(e===null||t.value<e)&&(e=t.value);return e!=null?new Date(e):null}};Pu.create=r=>new Pu({checks:[],coerce:r?.coerce||!1,typeName:Ke.ZodDate,...He(r)});var Ef=class extends Ye{_parse(e){if(this._getType(e)!==ve.symbol){let n=this._getOrReturnCtx(e);return Se(n,{code:ue.invalid_type,expected:ve.symbol,received:n.parsedType}),$e}return Un(e.data)}};Ef.create=r=>new Ef({typeName:Ke.ZodSymbol,...He(r)});var Ru=class extends Ye{_parse(e){if(this._getType(e)!==ve.undefined){let n=this._getOrReturnCtx(e);return Se(n,{code:ue.invalid_type,expected:ve.undefined,received:n.parsedType}),$e}return Un(e.data)}};Ru.create=r=>new Ru({typeName:Ke.ZodUndefined,...He(r)});var Lu=class extends Ye{_parse(e){if(this._getType(e)!==ve.null){let n=this._getOrReturnCtx(e);return Se(n,{code:ue.invalid_type,expected:ve.null,received:n.parsedType}),$e}return Un(e.data)}};Lu.create=r=>new Lu({typeName:Ke.ZodNull,...He(r)});var Ja=class extends Ye{constructor(){super(...arguments),this._any=!0}_parse(e){return Un(e.data)}};Ja.create=r=>new Ja({typeName:Ke.ZodAny,...He(r)});var Uo=class extends Ye{constructor(){super(...arguments),this._unknown=!0}_parse(e){return Un(e.data)}};Uo.create=r=>new Uo({typeName:Ke.ZodUnknown,...He(r)});var Rs=class extends Ye{_parse(e){let t=this._getOrReturnCtx(e);return Se(t,{code:ue.invalid_type,expected:ve.never,received:t.parsedType}),$e}};Rs.create=r=>new Rs({typeName:Ke.ZodNever,...He(r)});var Of=class extends Ye{_parse(e){if(this._getType(e)!==ve.undefined){let n=this._getOrReturnCtx(e);return Se(n,{code:ue.invalid_type,expected:ve.void,received:n.parsedType}),$e}return Un(e.data)}};Of.create=r=>new Of({typeName:Ke.ZodVoid,...He(r)});var Go=class r extends Ye{_parse(e){let{ctx:t,status:n}=this._processInputParams(e),i=this._def;if(t.parsedType!==ve.array)return Se(t,{code:ue.invalid_type,expected:ve.array,received:t.parsedType}),$e;if(i.exactLength!==null){let o=t.data.length>i.exactLength.value,a=t.data.length<i.exactLength.value;(o||a)&&(Se(t,{code:o?ue.too_big:ue.too_small,minimum:a?i.exactLength.value:void 0,maximum:o?i.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:i.exactLength.message}),n.dirty())}if(i.minLength!==null&&t.data.length<i.minLength.value&&(Se(t,{code:ue.too_small,minimum:i.minLength.value,type:"array",inclusive:!0,exact:!1,message:i.minLength.message}),n.dirty()),i.maxLength!==null&&t.data.length>i.maxLength.value&&(Se(t,{code:ue.too_big,maximum:i.maxLength.value,type:"array",inclusive:!0,exact:!1,message:i.maxLength.message}),n.dirty()),t.common.async)return Promise.all([...t.data].map((o,a)=>i.type._parseAsync(new ts(t,o,t.path,a)))).then(o=>An.mergeArray(n,o));let s=[...t.data].map((o,a)=>i.type._parseSync(new ts(t,o,t.path,a)));return An.mergeArray(n,s)}get element(){return this._def.type}min(e,t){return new r({...this._def,minLength:{value:e,message:ke.toString(t)}})}max(e,t){return new r({...this._def,maxLength:{value:e,message:ke.toString(t)}})}length(e,t){return new r({...this._def,exactLength:{value:e,message:ke.toString(t)}})}nonempty(e){return this.min(1,e)}};Go.create=(r,e)=>new Go({type:r,minLength:null,maxLength:null,exactLength:null,typeName:Ke.ZodArray,...He(e)});function xf(r){if(r instanceof ii){let e={};for(let t in r.shape){let n=r.shape[t];e[t]=Ps.create(xf(n))}return new ii({...r._def,shape:()=>e})}else return r instanceof Go?new Go({...r._def,type:xf(r.element)}):r instanceof Ps?Ps.create(xf(r.unwrap())):r instanceof $o?$o.create(xf(r.unwrap())):r instanceof eo?eo.create(r.items.map(e=>xf(e))):r}var ii=class r extends Ye{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;let e=this._def.shape(),t=Et.objectKeys(e);return this._cached={shape:e,keys:t}}_parse(e){if(this._getType(e)!==ve.object){let c=this._getOrReturnCtx(e);return Se(c,{code:ue.invalid_type,expected:ve.object,received:c.parsedType}),$e}let{status:n,ctx:i}=this._processInputParams(e),{shape:s,keys:o}=this._getCached(),a=[];if(!(this._def.catchall instanceof Rs&&this._def.unknownKeys==="strip"))for(let c in i.data)o.includes(c)||a.push(c);let u=[];for(let c of o){let d=s[c],h=i.data[c];u.push({key:{status:"valid",value:c},value:d._parse(new ts(i,h,i.path,c)),alwaysSet:c in i.data})}if(this._def.catchall instanceof Rs){let c=this._def.unknownKeys;if(c==="passthrough")for(let d of a)u.push({key:{status:"valid",value:d},value:{status:"valid",value:i.data[d]}});else if(c==="strict")a.length>0&&(Se(i,{code:ue.unrecognized_keys,keys:a}),n.dirty());else if(c!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{let c=this._def.catchall;for(let d of a){let h=i.data[d];u.push({key:{status:"valid",value:d},value:c._parse(new ts(i,h,i.path,d)),alwaysSet:d in i.data})}}return i.common.async?Promise.resolve().then(async()=>{let c=[];for(let d of u){let h=await d.key;c.push({key:h,value:await d.value,alwaysSet:d.alwaysSet})}return c}).then(c=>An.mergeObjectSync(n,c)):An.mergeObjectSync(n,u)}get shape(){return this._def.shape()}strict(e){return ke.errToObj,new r({...this._def,unknownKeys:"strict",...e!==void 0?{errorMap:(t,n)=>{var i,s,o,a;let u=(o=(s=(i=this._def).errorMap)===null||s===void 0?void 0:s.call(i,t,n).message)!==null&&o!==void 0?o:n.defaultError;return t.code==="unrecognized_keys"?{message:(a=ke.errToObj(e).message)!==null&&a!==void 0?a:u}:{message:u}}}:{}})}strip(){return new r({...this._def,unknownKeys:"strip"})}passthrough(){return new r({...this._def,unknownKeys:"passthrough"})}extend(e){return new r({...this._def,shape:()=>({...this._def.shape(),...e})})}merge(e){return new r({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:()=>({...this._def.shape(),...e._def.shape()}),typeName:Ke.ZodObject})}setKey(e,t){return this.augment({[e]:t})}catchall(e){return new r({...this._def,catchall:e})}pick(e){let t={};return Et.objectKeys(e).forEach(n=>{e[n]&&this.shape[n]&&(t[n]=this.shape[n])}),new r({...this._def,shape:()=>t})}omit(e){let t={};return Et.objectKeys(this.shape).forEach(n=>{e[n]||(t[n]=this.shape[n])}),new r({...this._def,shape:()=>t})}deepPartial(){return xf(this)}partial(e){let t={};return Et.objectKeys(this.shape).forEach(n=>{let i=this.shape[n];e&&!e[n]?t[n]=i:t[n]=i.optional()}),new r({...this._def,shape:()=>t})}required(e){let t={};return Et.objectKeys(this.shape).forEach(n=>{if(e&&!e[n])t[n]=this.shape[n];else{let s=this.shape[n];for(;s instanceof Ps;)s=s._def.innerType;t[n]=s}}),new r({...this._def,shape:()=>t})}keyof(){return $4(Et.objectKeys(this.shape))}};ii.create=(r,e)=>new ii({shape:()=>r,unknownKeys:"strip",catchall:Rs.create(),typeName:Ke.ZodObject,...He(e)});ii.strictCreate=(r,e)=>new ii({shape:()=>r,unknownKeys:"strict",catchall:Rs.create(),typeName:Ke.ZodObject,...He(e)});ii.lazycreate=(r,e)=>new ii({shape:r,unknownKeys:"strip",catchall:Rs.create(),typeName:Ke.ZodObject,...He(e)});var Du=class extends Ye{_parse(e){let{ctx:t}=this._processInputParams(e),n=this._def.options;function i(s){for(let a of s)if(a.result.status==="valid")return a.result;for(let a of s)if(a.result.status==="dirty")return t.common.issues.push(...a.ctx.common.issues),a.result;let o=s.map(a=>new Mi(a.ctx.common.issues));return Se(t,{code:ue.invalid_union,unionErrors:o}),$e}if(t.common.async)return Promise.all(n.map(async s=>{let o={...t,common:{...t.common,issues:[]},parent:null};return{result:await s._parseAsync({data:t.data,path:t.path,parent:o}),ctx:o}})).then(i);{let s,o=[];for(let u of n){let c={...t,common:{...t.common,issues:[]},parent:null},d=u._parseSync({data:t.data,path:t.path,parent:c});if(d.status==="valid")return d;d.status==="dirty"&&!s&&(s={result:d,ctx:c}),c.common.issues.length&&o.push(c.common.issues)}if(s)return t.common.issues.push(...s.ctx.common.issues),s.result;let a=o.map(u=>new Mi(u));return Se(t,{code:ue.invalid_union,unionErrors:a}),$e}}get options(){return this._def.options}};Du.create=(r,e)=>new Du({options:r,typeName:Ke.ZodUnion,...He(e)});var iv=r=>r instanceof ju?iv(r.schema):r instanceof ki?iv(r.innerType()):r instanceof Ku?[r.value]:r instanceof qu?r.options:r instanceof Fu?Object.keys(r.enum):r instanceof Vu?iv(r._def.innerType):r instanceof Ru?[void 0]:r instanceof Lu?[null]:null,lv=class r extends Ye{_parse(e){let{ctx:t}=this._processInputParams(e);if(t.parsedType!==ve.object)return Se(t,{code:ue.invalid_type,expected:ve.object,received:t.parsedType}),$e;let n=this.discriminator,i=t.data[n],s=this.optionsMap.get(i);return s?t.common.async?s._parseAsync({data:t.data,path:t.path,parent:t}):s._parseSync({data:t.data,path:t.path,parent:t}):(Se(t,{code:ue.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[n]}),$e)}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create(e,t,n){let i=new Map;for(let s of t){let o=iv(s.shape[e]);if(!o)throw new Error(`A discriminator value for key \`${e}\` could not be extracted from all schema options`);for(let a of o){if(i.has(a))throw new Error(`Discriminator property ${String(e)} has duplicate value ${String(a)}`);i.set(a,s)}}return new r({typeName:Ke.ZodDiscriminatedUnion,discriminator:e,options:t,optionsMap:i,...He(n)})}};function p2(r,e){let t=Ha(r),n=Ha(e);if(r===e)return{valid:!0,data:r};if(t===ve.object&&n===ve.object){let i=Et.objectKeys(e),s=Et.objectKeys(r).filter(a=>i.indexOf(a)!==-1),o={...r,...e};for(let a of s){let u=p2(r[a],e[a]);if(!u.valid)return{valid:!1};o[a]=u.data}return{valid:!0,data:o}}else if(t===ve.array&&n===ve.array){if(r.length!==e.length)return{valid:!1};let i=[];for(let s=0;s<r.length;s++){let o=r[s],a=e[s],u=p2(o,a);if(!u.valid)return{valid:!1};i.push(u.data)}return{valid:!0,data:i}}else return t===ve.date&&n===ve.date&&+r==+e?{valid:!0,data:r}:{valid:!1}}var Nu=class extends Ye{_parse(e){let{status:t,ctx:n}=this._processInputParams(e),i=(s,o)=>{if(d2(s)||d2(o))return $e;let a=p2(s.value,o.value);return a.valid?((h2(s)||h2(o))&&t.dirty(),{status:t.value,value:a.data}):(Se(n,{code:ue.invalid_intersection_types}),$e)};return n.common.async?Promise.all([this._def.left._parseAsync({data:n.data,path:n.path,parent:n}),this._def.right._parseAsync({data:n.data,path:n.path,parent:n})]).then(([s,o])=>i(s,o)):i(this._def.left._parseSync({data:n.data,path:n.path,parent:n}),this._def.right._parseSync({data:n.data,path:n.path,parent:n}))}};Nu.create=(r,e,t)=>new Nu({left:r,right:e,typeName:Ke.ZodIntersection,...He(t)});var eo=class r extends Ye{_parse(e){let{status:t,ctx:n}=this._processInputParams(e);if(n.parsedType!==ve.array)return Se(n,{code:ue.invalid_type,expected:ve.array,received:n.parsedType}),$e;if(n.data.length<this._def.items.length)return Se(n,{code:ue.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),$e;!this._def.rest&&n.data.length>this._def.items.length&&(Se(n,{code:ue.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),t.dirty());let s=[...n.data].map((o,a)=>{let u=this._def.items[a]||this._def.rest;return u?u._parse(new ts(n,o,n.path,a)):null}).filter(o=>!!o);return n.common.async?Promise.all(s).then(o=>An.mergeArray(t,o)):An.mergeArray(t,s)}get items(){return this._def.items}rest(e){return new r({...this._def,rest:e})}};eo.create=(r,e)=>{if(!Array.isArray(r))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new eo({items:r,typeName:Ke.ZodTuple,rest:null,...He(e)})};var uv=class r extends Ye{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){let{status:t,ctx:n}=this._processInputParams(e);if(n.parsedType!==ve.object)return Se(n,{code:ue.invalid_type,expected:ve.object,received:n.parsedType}),$e;let i=[],s=this._def.keyType,o=this._def.valueType;for(let a in n.data)i.push({key:s._parse(new ts(n,a,n.path,a)),value:o._parse(new ts(n,n.data[a],n.path,a))});return n.common.async?An.mergeObjectAsync(t,i):An.mergeObjectSync(t,i)}get element(){return this._def.valueType}static create(e,t,n){return t instanceof Ye?new r({keyType:e,valueType:t,typeName:Ke.ZodRecord,...He(n)}):new r({keyType:Ya.create(),valueType:e,typeName:Ke.ZodRecord,...He(t)})}},If=class extends Ye{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){let{status:t,ctx:n}=this._processInputParams(e);if(n.parsedType!==ve.map)return Se(n,{code:ue.invalid_type,expected:ve.map,received:n.parsedType}),$e;let i=this._def.keyType,s=this._def.valueType,o=[...n.data.entries()].map(([a,u],c)=>({key:i._parse(new ts(n,a,n.path,[c,"key"])),value:s._parse(new ts(n,u,n.path,[c,"value"]))}));if(n.common.async){let a=new Map;return Promise.resolve().then(async()=>{for(let u of o){let c=await u.key,d=await u.value;if(c.status==="aborted"||d.status==="aborted")return $e;(c.status==="dirty"||d.status==="dirty")&&t.dirty(),a.set(c.value,d.value)}return{status:t.value,value:a}})}else{let a=new Map;for(let u of o){let c=u.key,d=u.value;if(c.status==="aborted"||d.status==="aborted")return $e;(c.status==="dirty"||d.status==="dirty")&&t.dirty(),a.set(c.value,d.value)}return{status:t.value,value:a}}}};If.create=(r,e,t)=>new If({valueType:e,keyType:r,typeName:Ke.ZodMap,...He(t)});var Cf=class r extends Ye{_parse(e){let{status:t,ctx:n}=this._processInputParams(e);if(n.parsedType!==ve.set)return Se(n,{code:ue.invalid_type,expected:ve.set,received:n.parsedType}),$e;let i=this._def;i.minSize!==null&&n.data.size<i.minSize.value&&(Se(n,{code:ue.too_small,minimum:i.minSize.value,type:"set",inclusive:!0,exact:!1,message:i.minSize.message}),t.dirty()),i.maxSize!==null&&n.data.size>i.maxSize.value&&(Se(n,{code:ue.too_big,maximum:i.maxSize.value,type:"set",inclusive:!0,exact:!1,message:i.maxSize.message}),t.dirty());let s=this._def.valueType;function o(u){let c=new Set;for(let d of u){if(d.status==="aborted")return $e;d.status==="dirty"&&t.dirty(),c.add(d.value)}return{status:t.value,value:c}}let a=[...n.data.values()].map((u,c)=>s._parse(new ts(n,u,n.path,c)));return n.common.async?Promise.all(a).then(u=>o(u)):o(a)}min(e,t){return new r({...this._def,minSize:{value:e,message:ke.toString(t)}})}max(e,t){return new r({...this._def,maxSize:{value:e,message:ke.toString(t)}})}size(e,t){return this.min(e,t).max(e,t)}nonempty(e){return this.min(1,e)}};Cf.create=(r,e)=>new Cf({valueType:r,minSize:null,maxSize:null,typeName:Ke.ZodSet,...He(e)});var cv=class r extends Ye{constructor(){super(...arguments),this.validate=this.implement}_parse(e){let{ctx:t}=this._processInputParams(e);if(t.parsedType!==ve.function)return Se(t,{code:ue.invalid_type,expected:ve.function,received:t.parsedType}),$e;function n(a,u){return ov({data:a,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,sv(),op].filter(c=>!!c),issueData:{code:ue.invalid_arguments,argumentsError:u}})}function i(a,u){return ov({data:a,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,sv(),op].filter(c=>!!c),issueData:{code:ue.invalid_return_type,returnTypeError:u}})}let s={errorMap:t.common.contextualErrorMap},o=t.data;if(this._def.returns instanceof Qa){let a=this;return Un(async function(...u){let c=new Mi([]),d=await a._def.args.parseAsync(u,s).catch(m=>{throw c.addIssue(n(u,m)),c}),h=await Reflect.apply(o,this,d);return await a._def.returns._def.type.parseAsync(h,s).catch(m=>{throw c.addIssue(i(h,m)),c})})}else{let a=this;return Un(function(...u){let c=a._def.args.safeParse(u,s);if(!c.success)throw new Mi([n(u,c.error)]);let d=Reflect.apply(o,this,c.data),h=a._def.returns.safeParse(d,s);if(!h.success)throw new Mi([i(d,h.error)]);return h.data})}}parameters(){return this._def.args}returnType(){return this._def.returns}args(...e){return new r({...this._def,args:eo.create(e).rest(Uo.create())})}returns(e){return new r({...this._def,returns:e})}implement(e){return this.parse(e)}strictImplement(e){return this.parse(e)}static create(e,t,n){return new r({args:e||eo.create([]).rest(Uo.create()),returns:t||Uo.create(),typeName:Ke.ZodFunction,...He(n)})}},ju=class extends Ye{get schema(){return this._def.getter()}_parse(e){let{ctx:t}=this._processInputParams(e);return this._def.getter()._parse({data:t.data,path:t.path,parent:t})}};ju.create=(r,e)=>new ju({getter:r,typeName:Ke.ZodLazy,...He(e)});var Ku=class extends Ye{_parse(e){if(e.data!==this._def.value){let t=this._getOrReturnCtx(e);return Se(t,{received:t.data,code:ue.invalid_literal,expected:this._def.value}),$e}return{status:"valid",value:e.data}}get value(){return this._def.value}};Ku.create=(r,e)=>new Ku({value:r,typeName:Ke.ZodLiteral,...He(e)});function $4(r,e){return new qu({values:r,typeName:Ke.ZodEnum,...He(e)})}var qu=class r extends Ye{_parse(e){if(typeof e.data!="string"){let t=this._getOrReturnCtx(e),n=this._def.values;return Se(t,{expected:Et.joinValues(n),received:t.parsedType,code:ue.invalid_type}),$e}if(this._def.values.indexOf(e.data)===-1){let t=this._getOrReturnCtx(e),n=this._def.values;return Se(t,{received:t.data,code:ue.invalid_enum_value,options:n}),$e}return Un(e.data)}get options(){return this._def.values}get enum(){let e={};for(let t of this._def.values)e[t]=t;return e}get Values(){let e={};for(let t of this._def.values)e[t]=t;return e}get Enum(){let e={};for(let t of this._def.values)e[t]=t;return e}extract(e){return r.create(e)}exclude(e){return r.create(this.options.filter(t=>!e.includes(t)))}};qu.create=$4;var Fu=class extends Ye{_parse(e){let t=Et.getValidEnumValues(this._def.values),n=this._getOrReturnCtx(e);if(n.parsedType!==ve.string&&n.parsedType!==ve.number){let i=Et.objectValues(t);return Se(n,{expected:Et.joinValues(i),received:n.parsedType,code:ue.invalid_type}),$e}if(t.indexOf(e.data)===-1){let i=Et.objectValues(t);return Se(n,{received:n.data,code:ue.invalid_enum_value,options:i}),$e}return Un(e.data)}get enum(){return this._def.values}};Fu.create=(r,e)=>new Fu({values:r,typeName:Ke.ZodNativeEnum,...He(e)});var Qa=class extends Ye{unwrap(){return this._def.type}_parse(e){let{ctx:t}=this._processInputParams(e);if(t.parsedType!==ve.promise&&t.common.async===!1)return Se(t,{code:ue.invalid_type,expected:ve.promise,received:t.parsedType}),$e;let n=t.parsedType===ve.promise?t.data:Promise.resolve(t.data);return Un(n.then(i=>this._def.type.parseAsync(i,{path:t.path,errorMap:t.common.contextualErrorMap})))}};Qa.create=(r,e)=>new Qa({type:r,typeName:Ke.ZodPromise,...He(e)});var ki=class extends Ye{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===Ke.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(e){let{status:t,ctx:n}=this._processInputParams(e),i=this._def.effect||null,s={addIssue:o=>{Se(n,o),o.fatal?t.abort():t.dirty()},get path(){return n.path}};if(s.addIssue=s.addIssue.bind(s),i.type==="preprocess"){let o=i.transform(n.data,s);return n.common.issues.length?{status:"dirty",value:n.data}:n.common.async?Promise.resolve(o).then(a=>this._def.schema._parseAsync({data:a,path:n.path,parent:n})):this._def.schema._parseSync({data:o,path:n.path,parent:n})}if(i.type==="refinement"){let o=a=>{let u=i.refinement(a,s);if(n.common.async)return Promise.resolve(u);if(u instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return a};if(n.common.async===!1){let a=this._def.schema._parseSync({data:n.data,path:n.path,parent:n});return a.status==="aborted"?$e:(a.status==="dirty"&&t.dirty(),o(a.value),{status:t.value,value:a.value})}else return this._def.schema._parseAsync({data:n.data,path:n.path,parent:n}).then(a=>a.status==="aborted"?$e:(a.status==="dirty"&&t.dirty(),o(a.value).then(()=>({status:t.value,value:a.value}))))}if(i.type==="transform")if(n.common.async===!1){let o=this._def.schema._parseSync({data:n.data,path:n.path,parent:n});if(!ap(o))return o;let a=i.transform(o.value,s);if(a instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:t.value,value:a}}else return this._def.schema._parseAsync({data:n.data,path:n.path,parent:n}).then(o=>ap(o)?Promise.resolve(i.transform(o.value,s)).then(a=>({status:t.value,value:a})):o);Et.assertNever(i)}};ki.create=(r,e,t)=>new ki({schema:r,typeName:Ke.ZodEffects,effect:e,...He(t)});ki.createWithPreprocess=(r,e,t)=>new ki({schema:e,effect:{type:"preprocess",transform:r},typeName:Ke.ZodEffects,...He(t)});var Ps=class extends Ye{_parse(e){return this._getType(e)===ve.undefined?Un(void 0):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}};Ps.create=(r,e)=>new Ps({innerType:r,typeName:Ke.ZodOptional,...He(e)});var $o=class extends Ye{_parse(e){return this._getType(e)===ve.null?Un(null):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}};$o.create=(r,e)=>new $o({innerType:r,typeName:Ke.ZodNullable,...He(e)});var Vu=class extends Ye{_parse(e){let{ctx:t}=this._processInputParams(e),n=t.data;return t.parsedType===ve.undefined&&(n=this._def.defaultValue()),this._def.innerType._parse({data:n,path:t.path,parent:t})}removeDefault(){return this._def.innerType}};Vu.create=(r,e)=>new Vu({innerType:r,typeName:Ke.ZodDefault,defaultValue:typeof e.default=="function"?e.default:()=>e.default,...He(e)});var Tf=class extends Ye{_parse(e){let{ctx:t}=this._processInputParams(e),n={...t,common:{...t.common,issues:[]}},i=this._def.innerType._parse({data:n.data,path:n.path,parent:{...n}});return av(i)?i.then(s=>({status:"valid",value:s.status==="valid"?s.value:this._def.catchValue({get error(){return new Mi(n.common.issues)},input:n.data})})):{status:"valid",value:i.status==="valid"?i.value:this._def.catchValue({get error(){return new Mi(n.common.issues)},input:n.data})}}removeCatch(){return this._def.innerType}};Tf.create=(r,e)=>new Tf({innerType:r,typeName:Ke.ZodCatch,catchValue:typeof e.catch=="function"?e.catch:()=>e.catch,...He(e)});var Af=class extends Ye{_parse(e){if(this._getType(e)!==ve.nan){let n=this._getOrReturnCtx(e);return Se(n,{code:ue.invalid_type,expected:ve.nan,received:n.parsedType}),$e}return{status:"valid",value:e.data}}};Af.create=r=>new Af({typeName:Ke.ZodNaN,...He(r)});var nhe=Symbol("zod_brand"),fv=class extends Ye{_parse(e){let{ctx:t}=this._processInputParams(e),n=t.data;return this._def.type._parse({data:n,path:t.path,parent:t})}unwrap(){return this._def.type}},lp=class r extends Ye{_parse(e){let{status:t,ctx:n}=this._processInputParams(e);if(n.common.async)return(async()=>{let s=await this._def.in._parseAsync({data:n.data,path:n.path,parent:n});return s.status==="aborted"?$e:s.status==="dirty"?(t.dirty(),G4(s.value)):this._def.out._parseAsync({data:s.value,path:n.path,parent:n})})();{let i=this._def.in._parseSync({data:n.data,path:n.path,parent:n});return i.status==="aborted"?$e:i.status==="dirty"?(t.dirty(),{status:"dirty",value:i.value}):this._def.out._parseSync({data:i.value,path:n.path,parent:n})}}static create(e,t){return new r({in:e,out:t,typeName:Ke.ZodPipeline})}},Mf=class extends Ye{_parse(e){let t=this._def.innerType._parse(e);return ap(t)&&(t.value=Object.freeze(t.value)),t}};Mf.create=(r,e)=>new Mf({innerType:r,typeName:Ke.ZodReadonly,...He(e)});var W4=(r,e={},t)=>r?Ja.create().superRefine((n,i)=>{var s,o;if(!r(n)){let a=typeof e=="function"?e(n):typeof e=="string"?{message:e}:e,u=(o=(s=a.fatal)!==null&&s!==void 0?s:t)!==null&&o!==void 0?o:!0,c=typeof a=="string"?{message:a}:a;i.addIssue({code:"custom",...c,fatal:u})}}):Ja.create(),ihe={object:ii.lazycreate},Ke;(function(r){r.ZodString="ZodString",r.ZodNumber="ZodNumber",r.ZodNaN="ZodNaN",r.ZodBigInt="ZodBigInt",r.ZodBoolean="ZodBoolean",r.ZodDate="ZodDate",r.ZodSymbol="ZodSymbol",r.ZodUndefined="ZodUndefined",r.ZodNull="ZodNull",r.ZodAny="ZodAny",r.ZodUnknown="ZodUnknown",r.ZodNever="ZodNever",r.ZodVoid="ZodVoid",r.ZodArray="ZodArray",r.ZodObject="ZodObject",r.ZodUnion="ZodUnion",r.ZodDiscriminatedUnion="ZodDiscriminatedUnion",r.ZodIntersection="ZodIntersection",r.ZodTuple="ZodTuple",r.ZodRecord="ZodRecord",r.ZodMap="ZodMap",r.ZodSet="ZodSet",r.ZodFunction="ZodFunction",r.ZodLazy="ZodLazy",r.ZodLiteral="ZodLiteral",r.ZodEnum="ZodEnum",r.ZodEffects="ZodEffects",r.ZodNativeEnum="ZodNativeEnum",r.ZodOptional="ZodOptional",r.ZodNullable="ZodNullable",r.ZodDefault="ZodDefault",r.ZodCatch="ZodCatch",r.ZodPromise="ZodPromise",r.ZodBranded="ZodBranded",r.ZodPipeline="ZodPipeline",r.ZodReadonly="ZodReadonly"})(Ke||(Ke={}));var she=(r,e={message:`Input not instance of ${r.name}`})=>W4(t=>t instanceof r,e),z4=Ya.create,H4=Au.create,ohe=Af.create,ahe=Mu.create,Y4=ku.create,lhe=Pu.create,uhe=Ef.create,che=Ru.create,fhe=Lu.create,dhe=Ja.create,hhe=Uo.create,phe=Rs.create,mhe=Of.create,ghe=Go.create,yhe=ii.create,vhe=ii.strictCreate,whe=Du.create,bhe=lv.create,She=Nu.create,_he=eo.create,xhe=uv.create,Ehe=If.create,Ohe=Cf.create,Ihe=cv.create,Che=ju.create,The=Ku.create,Ahe=qu.create,Mhe=Fu.create,khe=Qa.create,B4=ki.create,Phe=Ps.create,Rhe=$o.create,Lhe=ki.createWithPreprocess,Dhe=lp.create,Nhe=()=>z4().optional(),jhe=()=>H4().optional(),Khe=()=>Y4().optional(),qhe={string:r=>Ya.create({...r,coerce:!0}),number:r=>Au.create({...r,coerce:!0}),boolean:r=>ku.create({...r,coerce:!0}),bigint:r=>Mu.create({...r,coerce:!0}),date:r=>Pu.create({...r,coerce:!0})},Fhe=$e,ee=Object.freeze({__proto__:null,defaultErrorMap:op,setErrorMap:Gde,getErrorMap:sv,makeIssue:ov,EMPTY_PATH:$de,addIssueToContext:Se,ParseStatus:An,INVALID:$e,DIRTY:G4,OK:Un,isAborted:d2,isDirty:h2,isValid:ap,isAsync:av,get util(){return Et},get objectUtil(){return f2},ZodParsedType:ve,getParsedType:Ha,ZodType:Ye,ZodString:Ya,ZodNumber:Au,ZodBigInt:Mu,ZodBoolean:ku,ZodDate:Pu,ZodSymbol:Ef,ZodUndefined:Ru,ZodNull:Lu,ZodAny:Ja,ZodUnknown:Uo,ZodNever:Rs,ZodVoid:Of,ZodArray:Go,ZodObject:ii,ZodUnion:Du,ZodDiscriminatedUnion:lv,ZodIntersection:Nu,ZodTuple:eo,ZodRecord:uv,ZodMap:If,ZodSet:Cf,ZodFunction:cv,ZodLazy:ju,ZodLiteral:Ku,ZodEnum:qu,ZodNativeEnum:Fu,ZodPromise:Qa,ZodEffects:ki,ZodTransformer:ki,ZodOptional:Ps,ZodNullable:$o,ZodDefault:Vu,ZodCatch:Tf,ZodNaN:Af,BRAND:nhe,ZodBranded:fv,ZodPipeline:lp,ZodReadonly:Mf,custom:W4,Schema:Ye,ZodSchema:Ye,late:ihe,get ZodFirstPartyTypeKind(){return Ke},coerce:qhe,any:dhe,array:ghe,bigint:ahe,boolean:Y4,date:lhe,discriminatedUnion:bhe,effect:B4,enum:Ahe,function:Ihe,instanceof:she,intersection:She,lazy:Che,literal:The,map:Ehe,nan:ohe,nativeEnum:Mhe,never:phe,null:fhe,nullable:Rhe,number:H4,object:yhe,oboolean:Khe,onumber:jhe,optional:Phe,ostring:Nhe,pipeline:Dhe,preprocess:Lhe,promise:khe,record:xhe,set:Ohe,strictObject:vhe,string:z4,symbol:uhe,transformer:B4,tuple:_he,undefined:che,union:whe,unknown:hhe,void:mhe,NEVER:Fhe,ZodIssueCode:ue,quotelessJson:Ude,ZodError:Mi});var m2={ARM:"arm",ARM64:"arm64",AMD64:"amd64"},Vhe=ee.object({NODE_ENV:ee.union([ee.literal("development"),ee.literal("production"),ee.literal("test")]),REDIS_HOST:ee.string(),redisPassword:ee.string(),status:ee.union([ee.literal("RUNNING"),ee.literal("UPDATING"),ee.literal("RESTARTING")]),architecture:ee.nativeEnum(m2),dnsIp:ee.string().ip().trim(),rootFolder:ee.string(),internalIp:ee.string(),version:ee.string(),jwtSecret:ee.string(),appsRepoId:ee.string(),appsRepoUrl:ee.string().url().trim(),domain:ee.string().trim(),localDomain:ee.string().trim(),storagePath:ee.string().trim().optional().transform(r=>{if(r)return r?.replace(/\s/g,"")}),postgresHost:ee.string(),postgresDatabase:ee.string(),postgresUsername:ee.string(),postgresPassword:ee.string(),postgresPort:ee.number(),demoMode:ee.string().or(ee.boolean()).optional().transform(r=>typeof r=="boolean"?r:r==="true"),guestDashboard:ee.string().or(ee.boolean()).optional().transform(r=>typeof r=="boolean"?r:r==="true"),seePreReleaseVersions:ee.string().or(ee.boolean()).optional().transform(r=>typeof r=="boolean"?r:r==="true")}),J4=Vhe.partial().pick({dnsIp:!0,internalIp:!0,appsRepoUrl:!0,domain:!0,storagePath:!0,localDomain:!0,demoMode:!0,guestDashboard:!0}).and(ee.object({port:ee.number(),sslPort:ee.number(),listenIp:ee.string().ip().trim()}).partial());var Q4={NETWORK:"network",MEDIA:"media",DEVELOPMENT:"development",AUTOMATION:"automation",SOCIAL:"social",UTILITIES:"utilities",PHOTOGRAPHY:"photography",SECURITY:"security",FEATURED:"featured",BOOKS:"books",DATA:"data",MUSIC:"music",FINANCE:"finance",GAMING:"gaming",AI:"ai"},Z4={TEXT:"text",PASSWORD:"password",EMAIL:"email",NUMBER:"number",FQDN:"fqdn",IP:"ip",FQDNIP:"fqdnip",URL:"url",RANDOM:"random",BOOLEAN:"boolean"},Bhe=ee.object({type:ee.nativeEnum(Z4).catch(()=>Z4.TEXT),label:ee.string(),placeholder:ee.string().optional(),max:ee.number().optional(),min:ee.number().optional(),hint:ee.string().optional(),options:ee.object({label:ee.string(),value:ee.string()}).array().optional(),required:ee.boolean().optional().default(!1),default:ee.union([ee.boolean(),ee.string()]).optional(),regex:ee.string().optional(),pattern_error:ee.string().optional(),env_variable:ee.string()}),X4=ee.object({id:ee.string(),available:ee.boolean(),port:ee.number().min(1).max(65535),name:ee.string(),description:ee.string().optional().default(""),version:ee.string().optional().default("latest"),tipi_version:ee.number(),short_desc:ee.string(),author:ee.string(),source:ee.string(),website:ee.string().optional(),force_expose:ee.boolean().optional().default(!1),generate_vapid_keys:ee.boolean().optional().default(!1),categories:ee.nativeEnum(Q4).array().catch(()=>[Q4.UTILITIES]),url_suffix:ee.string().optional(),form_fields:ee.array(Bhe).optional().default([]),https:ee.boolean().optional().default(!1),exposable:ee.boolean().optional().default(!1),no_gui:ee.boolean().optional().default(!1),supported_architectures:ee.nativeEnum(m2).array().optional(),uid:ee.number().optional(),gid:ee.number().optional()});var dv={SYSTEM:"system",REPO:"repo",APP:"app"},Uhe=ee.object({type:ee.literal(dv.APP),command:ee.union([ee.literal("start"),ee.literal("stop"),ee.literal("install"),ee.literal("uninstall"),ee.literal("update"),ee.literal("generate_env")]),appid:ee.string(),form:ee.object({}).catchall(ee.any())}),Ghe=ee.object({type:ee.literal(dv.REPO),command:ee.union([ee.literal("clone"),ee.literal("update")]),url:ee.string().url()}),$he=ee.object({type:ee.literal(dv.SYSTEM),command:ee.union([ee.literal("restart"),ee.literal("system_info")])}),Whe=ee.object({type:ee.literal(dv.SYSTEM),command:ee.literal("update"),version:ee.string()}),e5=Uhe.or(Ghe).or($he).or(Whe),IPe=ee.object({success:ee.boolean(),stdout:ee.string()});var hv=r=>{let e=new Map;return r.split(`
`).forEach(n=>{let[i,s]=n.split("=");i&&s&&e.set(i,s)}),e},pv=r=>Array.from(r).map(([t,n])=>`${t}=${n}`).join(`
`);var t5=et(require("fs")),Vt=async r=>t5.default.promises.access(r).then(()=>!0).catch(()=>!1);var YO=et(require("fs")),_1=et(require("path")),so=et(GB()),{printf:s1e,timestamp:o1e,combine:a1e,colorize:l1e,align:u1e,label:c1e}=so.format,x1=(r,e)=>{YO.default.existsSync(e)||YO.default.mkdirSync(e,{recursive:!0});let t=[],n=[new so.transports.Console];return t.push(new so.transports.File({filename:_1.default.join(e,"error.log"),level:"error"})),t.push(new so.transports.File({filename:_1.default.join(e,"app.log"),level:"info"})),n=[new so.transports.File({filename:_1.default.join(e,"error.log")})],process.env.NODE_ENV==="development"&&t.push(new so.transports.Console({level:"debug"})),(0,so.createLogger)({level:"debug",format:a1e(c1e({label:r}),l1e(),o1e(),u1e(),s1e(i=>`${r}: ${i.timestamp} - ${i.level} > ${i.message}`)),transports:t,exceptionHandlers:n,exitOnError:!1})};var Gf=et(require("fs")),$f=et(require("path"));function $B(r,e){return new Promise((t,n)=>{let i=Gf.default.createReadStream($f.default.join(r,e),"utf-8"),s=Gf.default.createWriteStream($f.default.join(r,`${e}.history`),{flags:"a"});i.pipe(s).on("finish",()=>{Gf.default.writeFileSync($f.default.join(r,e),""),t(!0)}).on("error",o=>{n(o)})})}var Wf=class{constructor(e,t){this.flush=async()=>{try{Gf.default.existsSync($f.default.join(this.logsFolder,"app.log"))&&await $B(this.logsFolder,"app.log"),Gf.default.existsSync($f.default.join(this.logsFolder,"error.log"))&&await $B(this.logsFolder,"error.log"),this.winstonLogger.info("Logs flushed")}catch(e){this.winstonLogger.error("Error flushing logs",e)}};this.error=(...e)=>{this.winstonLogger.error(e.join(" "))};this.info=(...e)=>{this.winstonLogger.info(e.join(" "))};this.warn=(...e)=>{this.winstonLogger.warn(e.join(" "))};this.debug=(...e)=>{this.winstonLogger.debug(e.join(" "))};this.winstonLogger=x1(e,t),this.logsFolder=t}};var WB=require("child_process"),zB=require("util"),Ur=async(...r)=>{try{let{stdout:e,stderr:t}=await(0,zB.promisify)(WB.exec)(...r);return{stdout:e,stderr:t}}catch(e){return e instanceof Error?{stderr:e.message,stdout:""}:{stderr:String(e),stdout:""}}};var HB=et(require("node:path")),Pe=new Wf("worker",HB.default.join("/app","logs"));var YB=et(require("crypto")),Dp=r=>{let e=YB.default.createHash("sha256");return e.update(r),e.digest("hex")};var f1e="https://github.com/meienberger/runtipi-appstore",JO="https://github.com/runtipi/runtipi-appstore",d1e=async()=>{let r=process.cwd(),e=Ae.default.join(r,"state","seed");if(!await Vt(e))throw new Error("Seed file not found");return await Je.default.promises.readFile(e,"utf-8")},QO=async r=>{let e=await d1e(),t=ZO.default.createHmac("sha256",e);return t.update(r),t.digest("hex")},h1e=async r=>{if(!await Vt(Ae.default.join(r,"state","seed"))){let t=ZO.default.randomBytes(32).toString("hex");await Je.default.promises.writeFile(Ae.default.join(r,"state","seed"),t)}},p1e=()=>{let r=XO.default.networkInterfaces();for(let e=0;e<Object.keys(r).length;e+=1){let t=Object.keys(r)[e],n=r[t||""],i=n?.length||0;for(let s=0;s<i;s+=1){let o=n?.[s];if(o&&o.family==="IPv4"&&o.address!=="127.0.0.1"&&!o.internal)return o.address}}return"0.0.0.0"},m1e=()=>{let r=XO.default.arch();if(r==="arm64")return"arm64";if(r==="x64")return"amd64";throw new Error(`Unsupported architecture: ${r}`)},eI=async()=>{let r=process.cwd();await Je.default.promises.mkdir(Ae.default.join(r,"state"),{recursive:!0});let e=Ae.default.join(r,"state","settings.json"),t=Ae.default.join(r,".env");await Vt(t)||await Je.default.promises.writeFile(t,"");let n=await Je.default.promises.readFile(t,"utf-8"),i=hv(n);await Vt(e)||await Je.default.promises.writeFile(e,JSON.stringify({}));let s=await Je.default.promises.readFile(e,"utf-8"),o=J4.safeParse(JSON.parse(s));if(!o.success)throw new Error(`Invalid settings.json file: ${o.error.message}`);await h1e(r);let{data:a}=o;a.appsRepoUrl===f1e&&(a.appsRepoUrl=JO);let u=i.get("JWT_SECRET")||await QO("jwt_secret"),c=Dp(a.appsRepoUrl||JO),d=i.get("POSTGRES_PASSWORD")||await QO("postgres_password"),h=i.get("REDIS_PASSWORD")||await QO("redis_password"),p=await Je.default.promises.readFile(Ae.default.join(r,"VERSION"),"utf-8");i.set("APPS_REPO_ID",c),i.set("APPS_REPO_URL",a.appsRepoUrl||JO),i.set("TZ",Intl.DateTimeFormat().resolvedOptions().timeZone),i.set("INTERNAL_IP",a.listenIp||p1e()),i.set("DNS_IP",a.dnsIp||"9.9.9.9"),i.set("ARCHITECTURE",m1e()),i.set("TIPI_VERSION",p),i.set("JWT_SECRET",u),i.set("ROOT_FOLDER_HOST",r),i.set("NGINX_PORT",String(a.port||80)),i.set("NGINX_PORT_SSL",String(a.sslPort||443)),i.set("DOMAIN",a.domain||"example.com"),i.set("STORAGE_PATH",a.storagePath||r),i.set("POSTGRES_HOST","tipi-db"),i.set("POSTGRES_DBNAME","tipi"),i.set("POSTGRES_USERNAME","tipi"),i.set("POSTGRES_PASSWORD",d),i.set("POSTGRES_PORT",String(5432)),i.set("REDIS_HOST","tipi-redis"),i.set("REDIS_PASSWORD",h),i.set("DEMO_MODE",String(a.demoMode||"false")),i.set("GUEST_DASHBOARD",String(a.guestDashboard||"false")),i.set("LOCAL_DOMAIN",a.localDomain||"tipi.lan"),i.set("NODE_ENV","production");let m=process.getgid?String(process.getgid()):"1000",y=process.getuid?String(process.getuid()):"1000";return i.set("TIPI_GID",m),i.set("TIPI_UID",y),await Je.default.promises.writeFile(t,pv(i)),i};var tI=async()=>{await Vt(Ae.default.join(process.cwd(),"scripts"))&&(Pe.info("Removing old scripts folder"),await Je.default.promises.rmdir(Ae.default.join(process.cwd(),"scripts"),{recursive:!0}));let r=Ae.default.join("/app","assets");Pe.info("Copying file docker-compose.yml"),await Je.default.promises.copyFile(Ae.default.join(r,"docker-compose.yml"),Ae.default.join(process.cwd(),"docker-compose.yml")),Pe.info("Copying file VERSION"),await Je.default.promises.copyFile(Ae.default.join(r,"VERSION"),Ae.default.join(process.cwd(),"VERSION")),Pe.info("Creating traefik folders"),await Je.default.promises.mkdir(Ae.default.join(process.cwd(),"traefik","dynamic"),{recursive:!0}),await Je.default.promises.mkdir(Ae.default.join(process.cwd(),"traefik","shared"),{recursive:!0}),await Je.default.promises.mkdir(Ae.default.join(process.cwd(),"traefik","tls"),{recursive:!0}),Pe.info("Copying traefik files"),await Je.default.promises.copyFile(Ae.default.join(r,"traefik","traefik.yml"),Ae.default.join(process.cwd(),"traefik","traefik.yml")),await Je.default.promises.copyFile(Ae.default.join(r,"traefik","dynamic","dynamic.yml"),Ae.default.join(process.cwd(),"traefik","dynamic","dynamic.yml")),Pe.info("Creating base folders"),await Je.default.promises.mkdir(Ae.default.join(process.cwd(),"apps"),{recursive:!0}),await Je.default.promises.mkdir(Ae.default.join(process.cwd(),"app-data"),{recursive:!0}),await Je.default.promises.mkdir(Ae.default.join(process.cwd(),"state"),{recursive:!0}),await Je.default.promises.mkdir(Ae.default.join(process.cwd(),"repos"),{recursive:!0}),Pe.info("Creating media folders"),await Je.default.promises.mkdir(Ae.default.join(process.cwd(),"media","torrents","watch"),{recursive:!0}),await Je.default.promises.mkdir(Ae.default.join(process.cwd(),"media","torrents","complete"),{recursive:!0}),await Je.default.promises.mkdir(Ae.default.join(process.cwd(),"media","torrents","incomplete"),{recursive:!0}),await Je.default.promises.mkdir(Ae.default.join(process.cwd(),"media","usenet","watch"),{recursive:!0}),await Je.default.promises.mkdir(Ae.default.join(process.cwd(),"media","usenet","complete"),{recursive:!0}),await Je.default.promises.mkdir(Ae.default.join(process.cwd(),"media","usenet","incomplete"),{recursive:!0}),await Je.default.promises.mkdir(Ae.default.join(process.cwd(),"media","downloads","watch"),{recursive:!0}),await Je.default.promises.mkdir(Ae.default.join(process.cwd(),"media","downloads","complete"),{recursive:!0}),await Je.default.promises.mkdir(Ae.default.join(process.cwd(),"media","downloads","incomplete"),{recursive:!0}),await Je.default.promises.mkdir(Ae.default.join(process.cwd(),"media","data","books"),{recursive:!0}),await Je.default.promises.mkdir(Ae.default.join(process.cwd(),"media","data","comics"),{recursive:!0}),await Je.default.promises.mkdir(Ae.default.join(process.cwd(),"media","data","movies"),{recursive:!0}),await Je.default.promises.mkdir(Ae.default.join(process.cwd(),"media","data","music"),{recursive:!0}),await Je.default.promises.mkdir(Ae.default.join(process.cwd(),"media","data","tv"),{recursive:!0}),await Je.default.promises.mkdir(Ae.default.join(process.cwd(),"media","data","podcasts"),{recursive:!0}),await Je.default.promises.mkdir(Ae.default.join(process.cwd(),"media","data","images"),{recursive:!0}),await Je.default.promises.mkdir(Ae.default.join(process.cwd(),"media","data","roms"),{recursive:!0})},rI=async r=>{if(!r.domain)return;if(await Vt(Ae.default.join(process.cwd(),"traefik","tls",`${r.domain}.txt`))){Pe.info(`TLS certificate for ${r.domain} already exists`);return}await Vt(Ae.default.join(process.cwd(),"traefik","tls","cert.pem"))&&(Pe.info("Removing old TLS certificate"),await Je.default.promises.unlink(Ae.default.join(process.cwd(),"traefik","tls","cert.pem"))),await Vt(Ae.default.join(process.cwd(),"traefik","tls","key.pem"))&&(Pe.info("Removing old TLS key"),await Je.default.promises.unlink(Ae.default.join(process.cwd(),"traefik","tls","key.pem")));let e=`/O=runtipi.io/OU=IT/CN=*.${r.domain}/emailAddress=webmaster@${r.domain}`,t=`DNS:*.${r.domain},DNS:${r.domain}`;try{Pe.info(`Generating TLS certificate for ${r.domain}`),await Ur(`openssl req -x509 -newkey rsa:4096 -keyout traefik/tls/key.pem -out traefik/tls/cert.pem -days 365 -subj "${e}" -addext "subjectAltName = ${t}" -nodes`),Pe.info(`Writing txt file for ${r.domain}`),await Je.default.promises.writeFile(Ae.default.join(process.cwd(),"traefik","tls",`${r.domain}.txt`),"")}catch(n){Pe.error(n)}},nI=async r=>{let e=[Ae.default.join(r,"apps"),Ae.default.join(r,"logs"),Ae.default.join(r,"repos"),Ae.default.join(r,"state"),Ae.default.join(r,"traefik"),Ae.default.join(r,".env"),Ae.default.join(r,"VERSION"),Ae.default.join(r,"docker-compose.yml")],t=[Ae.default.join(r,"traefik","shared","acme.json")];for(let n of e)await Vt(n)&&await Ur(`chmod -R a+rwx ${n}`).catch(()=>{});for(let n of t)await Vt(n)&&await Ur(`chmod 600 ${n}`).catch(()=>{})};var z1=et(require("path")),HU=et(td()),pC=et(zU());var mC=async r=>{let e=z1.default.join("/app","assets"),{postgresHost:t,postgresDatabase:n,postgresUsername:i,postgresPassword:s,postgresPort:o}=r;Pe.info("Starting database migration"),Pe.info(`Connecting to database ${n} on ${t} as ${i} on port ${o}`);let a=new HU.default.Client({user:i,host:t,database:n,password:s,port:Number(o)});await a.connect(),Pe.info("Client connected");try{let{rows:u}=await a.query("SELECT * FROM migrations");u.find(c=>c.name==="Initial1657299198975")&&(Pe.info("Found legacy migration. Deleting table migrations"),await a.query("DROP TABLE migrations"))}catch{Pe.info("Migrations table not found, creating it")}Pe.info("Running migrations");try{await(0,pC.migrate)({client:a},z1.default.join(e,"migrations"),{skipCreateMigrationTable:!0})}catch{Pe.error("Error running migrations. Dropping table migrations and trying again"),await a.query("DROP TABLE migrations"),await(0,pC.migrate)({client:a},z1.default.join(e,"migrations"),{skipCreateMigrationTable:!0})}Pe.info("Migration complete"),await a.end()};var l7=et(u2());var ds=et(require("fs")),Zo=et(require("path")),vW=et(td());var gW=et(require("crypto")),Pn=et(require("fs")),ul=et(require("path"));var dW=et(fW()),hW=et(require("fs")),pW=et(require("path"));var HC=et(T_());process.env.NODE_ENV==="development"?HC.default.config({path:".env.dev",override:!0}):HC.default.config({override:!0});var nEe=ee.object({STORAGE_PATH:ee.string(),ROOT_FOLDER_HOST:ee.string(),APPS_REPO_ID:ee.string(),ARCHITECTURE:ee.enum(["arm64","amd64"]),INTERNAL_IP:ee.string().ip().or(ee.literal("localhost")),TIPI_VERSION:ee.string(),REDIS_PASSWORD:ee.string(),REDIS_HOST:ee.string(),POSTGRES_PORT:ee.string(),POSTGRES_USERNAME:ee.string(),POSTGRES_PASSWORD:ee.string(),POSTGRES_DBNAME:ee.string(),POSTGRES_HOST:ee.string()}).transform(r=>{let{STORAGE_PATH:e,ARCHITECTURE:t,ROOT_FOLDER_HOST:n,APPS_REPO_ID:i,INTERNAL_IP:s,TIPI_VERSION:o,REDIS_PASSWORD:a,REDIS_HOST:u,POSTGRES_DBNAME:c,POSTGRES_PASSWORD:d,POSTGRES_USERNAME:h,POSTGRES_PORT:p,POSTGRES_HOST:m,...y}=r;return{storagePath:e,rootFolderHost:n,appsRepoId:i,arch:t,tipiVersion:o,internalIp:s,redisPassword:a,redisHost:u,postgresPort:p,postgresUsername:h,postgresPassword:d,postgresDatabase:c,postgresHost:m,...y}}),Gr=()=>nEe.parse(process.env);var YC=async r=>{try{let t=(await hW.default.promises.readFile(pW.default.join(Gr().storagePath,"app-data",r,"app.env"))).toString().split(`
`),n=new Map;return t.forEach(i=>{let[s,o]=i.split("=");s&&o&&n.set(s,o)}),n}catch{return new Map}},mW=()=>{let r=dW.default.generateVAPIDKeys();return{publicKey:r.publicKey,privateKey:r.privateKey}};var iEe=async(r,e)=>{let t=gW.default.createHash("sha256"),n=await Pn.default.promises.readFile(ul.default.join(Gr().rootFolderHost,"state","seed"));return t.update(r+n.toString()),t.digest("hex").substring(0,e)},sc=async(r,e)=>{let{rootFolderHost:t,storagePath:n,internalIp:i}=Gr(),s=await Pn.default.promises.readFile(ul.default.join(t,"apps",r,"config.json")),o=X4.safeParse(JSON.parse(s.toString()));if(!o.success)throw new Error(`App ${r} has invalid config.json file`);let a=await Pn.default.promises.readFile(ul.default.join(t,".env")),u=hv(a.toString());u.set("APP_PORT",String(o.data.port)),u.set("APP_ID",r),u.set("ROOT_FOLDER_HOST",t),u.set("APP_DATA_DIR",ul.default.join(n,"app-data",r));let c=await YC(r);if(o.data.generate_vapid_keys)if(c.has("VAPID_PUBLIC_KEY")&&c.has("VAPID_PRIVATE_KEY"))u.set("VAPID_PUBLIC_KEY",c.get("VAPID_PUBLIC_KEY")),u.set("VAPID_PRIVATE_KEY",c.get("VAPID_PRIVATE_KEY"));else{let h=mW();u.set("VAPID_PUBLIC_KEY",h.publicKey),u.set("VAPID_PRIVATE_KEY",h.privateKey)}await Promise.all(o.data.form_fields.map(async h=>{let p=e[h.env_variable],m=h.env_variable;if(p||typeof p=="boolean")u.set(m,String(p));else if(h.type==="random")if(c.has(m))u.set(m,c.get(m));else{let y=h.min||32,_=await iEe(h.env_variable,y);u.set(m,_)}else if(h.required)throw new Error(`Variable ${h.label||h.env_variable} is required`)})),e.exposed&&e.domain&&typeof e.domain=="string"?(u.set("APP_EXPOSED","true"),u.set("APP_DOMAIN",e.domain),u.set("APP_PROTOCOL","https"),u.set("APP_HOST",e.domain)):(u.set("APP_DOMAIN",`${i}:${o.data.port}`),u.set("APP_HOST",i),u.set("APP_PROTOCOL","http")),await Pn.default.promises.stat(ul.default.join(n,"app-data",r)).catch(()=>!1)||await Pn.default.promises.mkdir(ul.default.join(n,"app-data",r),{recursive:!0}),await Pn.default.promises.writeFile(ul.default.join(n,"app-data",r,"app.env"),pv(u))},sEe=(r,e)=>{let t=r;return e.forEach((n,i)=>{t=t.replace(new RegExp(`{{${i}}}`,"g"),n)}),t},yW=async r=>{let{rootFolderHost:e,storagePath:t}=Gr(),n=await YC(r);if(!await Vt(`${e}/apps/${r}/data`))return;await Vt(`${t}/app-data/${r}/data`)||await Pn.default.promises.mkdir(`${t}/app-data/${r}/data`,{recursive:!0});let i=await Pn.default.promises.readdir(`${e}/apps/${r}/data`),s=async a=>{if(a.endsWith(".template")){let u=await Pn.default.promises.readFile(`${e}/apps/${r}/data/${a}`,"utf-8"),c=sEe(u,n);await Pn.default.promises.writeFile(`${t}/app-data/${r}/data/${a.replace(".template","")}`,c)}else await Pn.default.promises.copyFile(`${e}/apps/${r}/data/${a}`,`${t}/app-data/${r}/data/${a}`)},o=async a=>{await Pn.default.promises.mkdir(`${t}/app-data/${r}/data/${a}`,{recursive:!0});let u=await Pn.default.promises.readdir(`${e}/apps/${r}/data/${a}`);await Promise.all(u.map(async c=>{let d=`${e}/apps/${r}/data/${a}/${c}`;(await Pn.default.promises.lstat(d)).isDirectory()?await o(`${a}/${c}`):await s(`${a}/${c}`)}))};await Promise.all(i.map(async a=>{let u=`${e}/apps/${r}/data/${a}`;(await Pn.default.promises.lstat(u)).isDirectory()?await o(a):await s(a)})),await Vt(`${t}/app-data/${r}/data`)&&await Ur(`find ${t}/app-data/${r}/data -name .gitkeep -delete`).catch(()=>{})};var co=et(require("path"));var oEe=async r=>{Pe.info(`Running docker compose with args ${r.join(" ")}`);let{stdout:e,stderr:t}=await Ur(`docker compose ${r.join(" ")}`);return{stdout:e,stderr:t}},cl=async(r,e)=>{let{arch:t,rootFolderHost:n,appsRepoId:i,storagePath:s}=Gr(),o=co.default.join(s,"app-data",r),a=co.default.join(n,"apps",r),u=[`--env-file ${co.default.join(o,"app.env")}`],c=co.default.join(n,"user-config",r,"app.env");await Vt(c)&&u.push(`--env-file ${c}`),u.push(`--project-name ${r}`);let d=co.default.join(a,"docker-compose.yml");t==="arm64"&&await Vt(co.default.join(a,"docker-compose.arm64.yml"))&&(d=co.default.join(a,"docker-compose.arm64.yml")),u.push(`-f ${d}`);let h=co.default.join(n,"repos",i,"apps","docker-compose.common.yml");u.push(`-f ${h}`);let p=co.default.join(n,"user-config",r,"docker-compose.yml");return await Vt(p)&&u.push(`--file ${p}`),u.push(e),oEe(u)};var aEe=async()=>{let{postgresHost:r,postgresDatabase:e,postgresUsername:t,postgresPassword:n,postgresPort:i}=Gr(),s=new vW.default.Client({host:r,database:e,user:t,password:n,port:Number(i)});return await s.connect(),s},Xo=class{constructor(){this.handleAppError=e=>e instanceof Error?(this.logger.error(`An error occurred: ${e.message}`),{success:!1,message:e.message}):{success:!1,message:`An error occurred: ${e}`};this.getAppPaths=e=>{let{rootFolderHost:t,storagePath:n,appsRepoId:i}=Gr(),s=Zo.default.join(n,"app-data",e),o=Zo.default.join(t,"apps",e),a=Zo.default.join(o,"config.json"),u=Zo.default.join(t,"repos",i,"apps",e);return{appDataDirPath:s,appDirPath:o,configJsonPath:a,repoPath:u}};this.ensureAppDir=async e=>{let{rootFolderHost:t}=Gr(),{appDirPath:n,repoPath:i}=this.getAppPaths(e),s=Zo.default.join(t,"apps",e,"docker-compose.yml");await Vt(s)||(this.logger.info(`Deleting app ${e} folder if exists`),await ds.default.promises.rm(n,{recursive:!0,force:!0}),this.logger.info(`Copying app ${e} from repo ${Gr().appsRepoId}`),await ds.default.promises.cp(i,n,{recursive:!0}))};this.installApp=async(e,t)=>{try{process.getuid&&process.getgid?this.logger.info(`Installing app ${e} as User ID: ${process.getuid()}, Group ID: ${process.getgid()}`):this.logger.info(`Installing app ${e}. No User ID or Group ID found.`);let{rootFolderHost:n,appsRepoId:i}=Gr(),{appDirPath:s,repoPath:o,appDataDirPath:a}=this.getAppPaths(e);return(await ds.default.promises.readdir(Zo.default.join(n,"repos",i,"apps"))).includes(e)?(this.logger.info(`Deleting folder ${s} if exists`),await ds.default.promises.rm(s,{recursive:!0,force:!0}),this.logger.info(`Creating folder ${s}`),await ds.default.promises.mkdir(s,{recursive:!0}),this.logger.info(`Copying folder ${o} to ${s}`),await ds.default.promises.cp(o,s,{recursive:!0}),this.logger.info(`Creating folder ${a}`),await ds.default.promises.mkdir(a,{recursive:!0}),this.logger.info(`Creating app.env file for app ${e}`),await sc(e,t),this.logger.info(`Copying data dir for app ${e}`),await Vt(`${a}/data`)||await yW(e),await Ur(`chmod -R a+rwx ${Zo.default.join(a)}`).catch(()=>{this.logger.error(`Error setting permissions for app ${e}`)}),this.logger.info(`Running docker-compose up for app ${e}`),await cl(e,"up -d"),this.logger.info(`Docker-compose up for app ${e} finished`),{success:!0,message:`App ${e} installed successfully`}):(this.logger.error(`App ${e} not found in repo ${i}`),{success:!1,message:`App ${e} not found in repo ${i}`})}catch(n){return this.handleAppError(n)}};this.stopApp=async(e,t,n=!1)=>{try{return this.logger.info(`Stopping app ${e}`),await this.ensureAppDir(e),n||(this.logger.info(`Regenerating app.env file for app ${e}`),await sc(e,t)),await cl(e,"rm --force --stop"),this.logger.info(`App ${e} stopped`),{success:!0,message:`App ${e} stopped successfully`}}catch(i){return this.handleAppError(i)}};this.startApp=async(e,t)=>{try{let{appDataDirPath:n}=this.getAppPaths(e);return this.logger.info(`Starting app ${e}`),this.logger.info(`Regenerating app.env file for app ${e}`),await this.ensureAppDir(e),await sc(e,t),await cl(e,"up --detach --force-recreate --remove-orphans --pull always"),this.logger.info(`App ${e} started`),this.logger.info(`Setting permissions for app ${e}`),await Ur(`chmod -R a+rwx ${Zo.default.join(n)}`).catch(()=>{this.logger.error(`Error setting permissions for app ${e}`)}),{success:!0,message:`App ${e} started successfully`}}catch(n){return this.handleAppError(n)}};this.uninstallApp=async(e,t)=>{try{let{appDirPath:n,appDataDirPath:i}=this.getAppPaths(e);return this.logger.info(`Uninstalling app ${e}`),this.logger.info(`Regenerating app.env file for app ${e}`),await this.ensureAppDir(e),await sc(e,t),await cl(e,"down --remove-orphans --volumes --rmi all"),this.logger.info(`Deleting folder ${n}`),await ds.default.promises.rm(n,{recursive:!0,force:!0}).catch(s=>{this.logger.error(`Error deleting folder ${n}: ${s.message}`)}),this.logger.info(`Deleting folder ${i}`),await ds.default.promises.rm(i,{recursive:!0,force:!0}).catch(s=>{this.logger.error(`Error deleting folder ${i}: ${s.message}`)}),this.logger.info(`App ${e} uninstalled`),{success:!0,message:`App ${e} uninstalled successfully`}}catch(n){return this.handleAppError(n)}};this.updateApp=async(e,t)=>{try{let{appDirPath:n,repoPath:i}=this.getAppPaths(e);return this.logger.info(`Updating app ${e}`),await this.ensureAppDir(e),await sc(e,t),await cl(e,"up --detach --force-recreate --remove-orphans"),await cl(e,"down --rmi all --remove-orphans"),this.logger.info(`Deleting folder ${n}`),await ds.default.promises.rm(n,{recursive:!0,force:!0}),this.logger.info(`Copying folder ${i} to ${n}`),await ds.default.promises.cp(i,n,{recursive:!0}),await cl(e,"pull"),{success:!0,message:`App ${e} updated successfully`}}catch(n){return this.handleAppError(n)}};this.regenerateAppEnv=async(e,t)=>{try{return this.logger.info(`Regenerating app.env file for app ${e}`),await this.ensureAppDir(e),await sc(e,t),{success:!0,message:`App ${e} env file regenerated successfully`}}catch(n){return this.handleAppError(n)}};this.startAllApps=async()=>{let e=await aEe();try{let{rows:t}=await e.query("SELECT * FROM app WHERE status = 'running'");await e.query("UPDATE app SET status = 'stopped' WHERE status != 'stopped' AND status != 'running' AND status != 'missing'");for(let n of t){let{id:i,config:s}=n,{success:o}=await this.startApp(i,s);o?await e.query(`UPDATE app SET status = 'running' WHERE id = '${i}'`):(this.logger.error(`Error starting app ${i}`),await e.query(`UPDATE app SET status = 'stopped' WHERE id = '${i}'`))}}catch(t){this.logger.error(`Error starting apps: ${t}`)}finally{await e.end()}};this.logger=Pe}};var JC=et(require("path"));var im=class{constructor(){this.handleRepoError=e=>e instanceof Error?(this.logger.error(`An error occurred: ${e.message}`),{success:!1,message:e.message}):{success:!1,message:`An error occurred: ${e}`};this.cloneRepo=async e=>{try{let t=Dp(e),n=JC.default.join("/app","repos",t);return await Vt(n)?(this.logger.info(`Repo ${e} already exists`),{success:!0,message:""}):(this.logger.info(`Cloning repo ${e} to ${n}`),await Ur(`git clone ${e} ${n}`),this.logger.info(`Cloned repo ${e} to ${n}`),{success:!0,message:""})}catch(t){return this.handleRepoError(t)}};this.pullRepo=async e=>{try{let t=Dp(e),n=JC.default.join("/app","repos",t);if(!await Vt(n))return this.logger.info(`Repo ${e} does not exist`),{success:!1,message:`Repo ${e} does not exist`};this.logger.info(`Pulling repo ${e} to ${n}`),this.logger.info(`Executing: git config --global --add safe.directory ${n}`),await Ur(`git config --global --add safe.directory ${n}`).then(({stderr:s})=>{s&&this.logger.error(`stderr: ${s}`)}),this.logger.info(`Executing: git -C ${n} config pull.rebase false`),await Ur(`git -C ${n} config pull.rebase false`).then(({stderr:s})=>{s&&this.logger.error(`stderr: ${s}`)}),this.logger.info(`Executing: git -C ${n} rev-parse --abbrev-ref HEAD`);let i=await Ur(`git -C ${n} rev-parse --abbrev-ref HEAD`).then(({stdout:s})=>s.trim());return this.logger.info(`Executing: git -C ${n} fetch origin && git -C ${n} reset --hard origin/${i}`),await Ur(`git -C ${n} fetch origin && git -C ${n} reset --hard origin/${i}`).then(({stderr:s})=>{s&&this.logger.error(`stderr: ${s}`)}),this.logger.info(`Pulled repo ${e} to ${n}`),{success:!0,message:""}}catch(t){return this.handleRepoError(t)}};this.logger=Pe}};var Pm=et(require("fs")),Rd=et(require("path")),Hw=et(a7());var Rm=class{constructor(){this.handleSystemError=e=>e instanceof Error?(this.logger.error(`An error occurred: ${e.message}`),{success:!1,message:e.message}):(this.logger.error(`An error occurred: ${e}`),{success:!1,message:`An error occurred: ${e}`});this.getSystemLoad=async()=>{let{currentLoad:e}=await Hw.default.currentLoad(),t=await Hw.default.mem(),[n]=await Hw.default.fsSize();return{cpu:{load:e},memory:{total:t.total,used:t.used,available:t.available},disk:{total:n?.size,used:n?.used,available:n?.available}}};this.cleanLogs=async()=>{try{return await this.logger.flush(),this.logger.info("Logs cleaned successfully"),{success:!0,message:""}}catch(e){return this.handleSystemError(e)}};this.systemInfo=async()=>{try{let{rootFolderHost:e}=Gr(),t=await this.getSystemLoad();return await Pm.default.promises.writeFile(Rd.default.join(e,"state","system-info.json"),JSON.stringify(t,null,2)),await Pm.default.promises.chmod(Rd.default.join(e,"state","system-info.json"),511),{success:!0,message:""}}catch(e){return this.handleSystemError(e)}};this.stop=async()=>{try{if(await Vt(Rd.default.join(this.rootFolder,"apps"))){let e=await Pm.default.promises.readdir(Rd.default.join(this.rootFolder,"apps")),t=new Xo;for(let n of e)await t.stopApp(n,{},!0)}return this.logger.info("Stopping main containers..."),await Ur("docker compose down --remove-orphans --rmi local"),{success:!0,message:"Tipi stopped"}}catch(e){return this.handleSystemError(e)}};this.restart=async()=>{try{return await this.stop(),{success:!0,message:""}}catch(e){return this.handleSystemError(e)}};this.resetPassword=async()=>{try{let{rootFolderHost:e}=Gr();return await Pm.default.promises.writeFile(Rd.default.join(e,"state","password-change-request"),""),{success:!0,message:""}}catch(e){return this.handleSystemError(e)}};this.rootFolder=process.cwd(),this.logger=Pe}};var ECe=async r=>{let{installApp:e,startApp:t,stopApp:n,uninstallApp:i,updateApp:s,regenerateAppEnv:o}=new Xo,{cloneRepo:a,pullRepo:u}=new im,{systemInfo:c,restart:d}=new Rm,h=e5.safeParse(r);if(!h.success)throw new Error("Event is not valid");let{data:p}=h,m=!1,y=`Event has invalid type or args ${JSON.stringify(p)}`;return p.type==="app"?(p.command==="install"&&({success:m,message:y}=await e(p.appid,p.form)),p.command==="stop"&&({success:m,message:y}=await n(p.appid,p.form)),p.command==="start"&&({success:m,message:y}=await t(p.appid,p.form)),p.command==="uninstall"&&({success:m,message:y}=await i(p.appid,p.form)),p.command==="update"&&({success:m,message:y}=await s(p.appid,p.form)),p.command==="generate_env"&&({success:m,message:y}=await o(p.appid,p.form))):p.type==="repo"?(p.command==="clone"&&({success:m,message:y}=await a(p.url)),p.command==="update"&&({success:m,message:y}=await u(p.url))):p.type==="system"&&(p.command==="system_info"&&({success:m,message:y}=await c()),p.command==="restart"&&({success:m,message:y}=await d()),p.command==="update"&&Pe.error("Not implemented")),{success:m,message:y}},u7=async()=>{let r=new l7.Worker("events",async e=>{Pe.info(`Processing job ${e.id} with data ${JSON.stringify(e.data)}`);let{message:t,success:n}=await ECe(e.data);return{success:n,stdout:t}},{connection:{host:Gr().redisHost,port:6379,password:Gr().redisPassword,connectTimeout:6e4},removeOnComplete:{count:200},removeOnFail:{count:500}});r.on("ready",()=>{Pe.info("Worker is ready")}),r.on("completed",e=>{Pe.info(`Job ${e.id} completed with result:`,JSON.stringify(e.returnvalue))}),r.on("failed",e=>{Pe.error(`Job ${e?.id} failed with reason ${e?.failedReason}`)}),r.on("error",async e=>{Pe.debug(`Worker error: ${e}`)})};var OCe=f7.default.join("/app",".env"),ICe="/app",CCe=async()=>{await Pe.flush(),Pe.info("Copying system files..."),await tI(),await nI(ICe),Pe.info("Generating system env file...");let r=await eI();Pe.info("Reloading env variables..."),h7.default.config({path:OCe,override:!0}),Pe.info("Generating TLS certificates..."),await rI({domain:r.get("LOCAL_DOMAIN")}),Pe.info("Flushing redis cache...");let e=new d7.default({host:r.get("REDIS_HOST"),port:6379,password:r.get("REDIS_PASSWORD")});await e.flushdb(),await e.quit(),Pe.info("Starting queue...");let t=new p7.Queue("events",{connection:{host:r.get("REDIS_HOST"),port:6379,password:r.get("REDIS_PASSWORD")}});Pe.info("Obliterating queue..."),await t.obliterate({force:!0}),Pe.info("Adding initial jobs to queue..."),await t.add(`${Math.random().toString()}_system_info`,{type:"system",command:"system_info"}),await t.add(`${Math.random().toString()}_repo_clone`,{type:"repo",command:"clone",url:r.get("APPS_REPO_URL")}),await t.add(`${Math.random().toString()}_repo_update`,{type:"repo",command:"update",url:r.get("APPS_REPO_URL")}),Pe.info("Adding scheduled jobs to queue..."),await t.add(`${Math.random().toString()}_repo_update`,{type:"repo",command:"update",url:r.get("APPS_REPO_URL")},{repeat:{pattern:"*/30 * * * *"}}),await t.add(`${Math.random().toString()}_system_info`,{type:"system",command:"system_info"},{repeat:{pattern:"* * * * *"}}),Pe.info("Closing queue..."),await t.close(),Pe.info("Running database migrations..."),await mC({postgresHost:r.get("POSTGRES_HOST"),postgresDatabase:r.get("POSTGRES_DBNAME"),postgresUsername:r.get("POSTGRES_USERNAME"),postgresPassword:r.get("POSTGRES_PASSWORD"),postgresPort:r.get("POSTGRES_PORT")});let n=new Xo;Pe.info("Starting all apps..."),await n.startAllApps(),c7.default.createServer((s,o)=>{s.url==="/healthcheck"?(o.writeHead(200),o.end("OK")):(o.writeHead(404),o.end("Not Found"))}).listen(3e3,()=>{u7()})};CCe();
/*! Bundled license information:

lodash/lodash.js:
  (**
   * @license
   * Lodash <https://lodash.com/>
   * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
   * Released under MIT license <https://lodash.com/license>
   * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
   * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
   *)

safe-buffer/index.js:
  (*! safe-buffer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> *)

urlsafe-base64/lib/urlsafe-base64.js:
  (*!
   * urlsafe-base64
   *)
*/
